!(function (t) {
	function webpackJsonpCallback(e) {
		for (var i, o, a = e[0], l = e[1], c = e[2], u = 0, _ = []; u < a.length; u++)
			(o = a[u]), n[o] && _.push(n[o][0]), (n[o] = 0);
		for (i in l) Object.prototype.hasOwnProperty.call(l, i) && (t[i] = l[i]);
		for (s && s(e); _.length; ) _.shift()();
		return r.push.apply(r, c || []), checkDeferredModules();
	}
	function checkDeferredModules() {
		for (var t, e = 0; e < r.length; e++) {
			for (var i = r[e], o = !0, a = 1; a < i.length; a++) {
				var s = i[a];
				0 !== n[s] && (o = !1);
			}
			o && (r.splice(e--, 1), (t = __webpack_require__((__webpack_require__.s = i[0]))));
		}
		return t;
	}
	var e = {},
		n = { main: 0 },
		r = [];
	function __webpack_require__(n) {
		if (e[n]) return e[n].exports;
		var r = (e[n] = { i: n, l: !1, exports: {} });
		return t[n].call(r.exports, r, r.exports, __webpack_require__), (r.l = !0), r.exports;
	}
	(__webpack_require__.m = t),
		(__webpack_require__.c = e),
		(__webpack_require__.d = function (t, e, n) {
			__webpack_require__.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n });
		}),
		(__webpack_require__.r = function (t) {
			'undefined' != typeof Symbol &&
				Symbol.toStringTag &&
				Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }),
				Object.defineProperty(t, '__esModule', { value: !0 });
		}),
		(__webpack_require__.t = function (t, e) {
			if ((1 & e && (t = __webpack_require__(t)), 8 & e)) return t;
			if (4 & e && 'object' == typeof t && t && t.__esModule) return t;
			var n = Object.create(null);
			if (
				(__webpack_require__.r(n),
				Object.defineProperty(n, 'default', { enumerable: !0, value: t }),
				2 & e && 'string' != typeof t)
			)
				for (var r in t)
					__webpack_require__.d(
						n,
						r,
						function (e) {
							return t[e];
						}.bind(null, r)
					);
			return n;
		}),
		(__webpack_require__.n = function (t) {
			var e =
				t && t.__esModule
					? function getDefault() {
							return t.default;
					  }
					: function getModuleExports() {
							return t;
					  };
			return __webpack_require__.d(e, 'a', e), e;
		}),
		(__webpack_require__.o = function (t, e) {
			return Object.prototype.hasOwnProperty.call(t, e);
		}),
		(__webpack_require__.p = '');
	var i = (window.webpackJsonp = window.webpackJsonp || []),
		o = i.push.bind(i);
	(i.push = webpackJsonpCallback), (i = i.slice());
	for (var a = 0; a < i.length; a++) webpackJsonpCallback(i[a]);
	var s = o;
	r.push([281, 'vendors']), checkDeferredModules();
})({
	272: function (t) {
		t.exports = {
			uniforms: {
				modelViewMatrix: 'mat4',
				projectionMatrix: 'mat4',
				nearDistance: 'float',
				midDistance: 'float',
				color: 'vec4'
			},
			properties: { transparent: !0, depthWrite: !1, side: 'double', blending: 'normal' },
			vertex: {
				extensions: ['EXT_frag_depth'],
				code: 'attribute vec3 position;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float nearDistance;\nuniform float midDistance;\nvarying highp float vDepth;\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\n\treturn m * vec4(v, w);\n}\nvec4 mv4_mult_func(mat4 m, vec4 v) {\n\treturn m * v;\n}\nvec4 log_depth_vert_func(vec4 viewPosition, vec4 projectedPosition, float nearDistance, float midDistance) {\n\t#ifndef L_EXT_frag_depth\n\t\tfloat z = projectedPosition.w;\n\t\tif (z < midDistance) {\n\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t}\n\t\telse {\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t}\n\t#endif\n\treturn projectedPosition;\n}\nvoid main() {\n\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\n\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\n\tvec4 log_depth_vert = log_depth_vert_func(view_position, projected_position, nearDistance, midDistance);\n\tgl_Position = log_depth_vert;\n\tvDepth = projected_position.w;\n}\n'
			},
			fragment: {
				extensions: ['EXT_frag_depth'],
				code: 'precision mediump float;\nuniform vec4 color;\nvarying highp float vDepth;\nhighp float log_depth_frag_func(highp float fragDepth) {\n\t#ifdef L_EXT_frag_depth\n\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\treturn log2(1.0 + fragDepth) * logFactor;\n\t#else\n\t\treturn 0.0;\n\t#endif\n}\nvoid main() {\n\thighp float log_depth_frag = log_depth_frag_func(vDepth);\n\t#ifdef L_EXT_frag_depth\n\t\tgl_FragDepthEXT = log_depth_frag;\n\t#endif\n\tgl_FragColor = color;\n}\n'
			}
		};
	},
	273: function (t) {
		t.exports = {
			uniforms: {
				modelViewMatrix: 'mat4',
				projectionMatrix: 'mat4',
				nearDistance: 'float',
				midDistance: 'float',
				color: 'vec4'
			},
			properties: { transparent: !0, depthWrite: !1, side: 'double', blending: 'normal' },
			vertex: {
				extensions: ['EXT_frag_depth'],
				code: 'attribute vec3 position;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float nearDistance;\nuniform float midDistance;\nvarying highp float vDepth;\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\n\treturn m * vec4(v, w);\n}\nvec4 mv4_mult_func(mat4 m, vec4 v) {\n\treturn m * v;\n}\nvec4 log_depth_vert_func(vec4 viewPosition, vec4 projectedPosition, float nearDistance, float midDistance) {\n\t#ifndef L_EXT_frag_depth\n\t\tfloat z = projectedPosition.w;\n\t\tif (z < midDistance) {\n\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t}\n\t\telse {\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t}\n\t#endif\n\treturn projectedPosition;\n}\nvoid main() {\n\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\n\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\n\tvec4 log_depth_vert = log_depth_vert_func(view_position, projected_position, nearDistance, midDistance);\n\tgl_Position = log_depth_vert;\n\tvDepth = projected_position.w;\n}\n'
			},
			fragment: {
				extensions: ['EXT_frag_depth'],
				code: 'precision mediump float;\nuniform vec4 color;\nvarying highp float vDepth;\nhighp float log_depth_frag_func(highp float fragDepth) {\n\t#ifdef L_EXT_frag_depth\n\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\treturn log2(1.0 + fragDepth) * logFactor;\n\t#else\n\t\treturn 0.0;\n\t#endif\n}\nvoid main() {\n\thighp float log_depth_frag = log_depth_frag_func(vDepth);\n\t#ifdef L_EXT_frag_depth\n\t\tgl_FragDepthEXT = log_depth_frag;\n\t#endif\n\tgl_FragColor = color;\n}\n'
			}
		};
	},
	274: function (t) {
		t.exports = {
			uniforms: {
				modelViewMatrix: 'mat4',
				projectionMatrix: 'mat4',
				nearDistance: 'float',
				midDistance: 'float',
				pixelSize: 'vec2',
				alphaMultiplier: 'float',
				dashLength: 'float',
				dashGapLength: 'float'
			},
			properties: { transparent: !0, depthWrite: !1, side: 'double', blending: 'additive' },
			vertex: {
				extensions: ['EXT_frag_depth'],
				code: 'attribute vec3 position;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute vec4 color;\nattribute float width;\nattribute float dashOffset;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float nearDistance;\nuniform float midDistance;\nuniform vec2 pixelSize;\nvarying highp float vDepth;\nvarying vec4 fColor;\nvarying float fDashOffset;\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\n\treturn m * vec4(v, w);\n}\nvec4 line_offset_func(vec4 projected_center, vec4 projected_position_prev, vec4 projected_position_next, vec2 pixel_size, float width) {\n\tfloat aspectRatio = pixel_size.x / pixel_size.y;\n\tvec2 ndc_center = projected_center.xy / projected_center.w;\n\tvec2 ndc_position_prev = projected_position_prev.xy / projected_position_prev.w;\n\tvec2 ndc_position_next = projected_position_next.xy / projected_position_next.w;\n\tndc_center.y /= aspectRatio;\n\tndc_position_prev.y /= aspectRatio;\n\tndc_position_next.y /= aspectRatio;\n\tvec2 l0 = normalize(ndc_center - ndc_position_prev);\n\tvec2 l1 = normalize(ndc_position_next - ndc_center);\n\tvec2 offset;\n\tif (ndc_center == ndc_position_prev) {\n\t\toffset = vec2(-l1.y, l1.x);\n\t}\n\telse if (ndc_center == ndc_position_next) {\n\t\toffset = vec2(-l0.y, l0.x);\n\t}\n\telse {\n\t\toffset = normalize(vec2(-l0.y - l1.y, l0.x + l1.x));\n\t\twidth /= max(0.25, sqrt((1.0 + dot(l0, l1)) / 2.0));\n\t}\n\toffset *= width * 0.5 / pixel_size.x;\n\toffset.y *= aspectRatio;\n\tndc_center.y *= aspectRatio;\n\treturn vec4((ndc_center + offset) * projected_center.w, projected_center.z, projected_center.w);\n}\nvec4 log_depth_vert_func(vec4 viewPosition, vec4 projectedPosition, float nearDistance, float midDistance) {\n\t#ifndef L_EXT_frag_depth\n\t\tfloat z = projectedPosition.w;\n\t\tif (z < midDistance) {\n\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t}\n\t\telse {\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t}\n\t#endif\n\treturn projectedPosition;\n}\nvec4 mv4_mult_func(mat4 m, vec4 v) {\n\treturn m * v;\n}\nvoid main() {\n\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\n\tvec4 view_positionPrev = mv3_mult_func(modelViewMatrix, positionPrev, 1.0);\n\tvec4 view_positionNext = mv3_mult_func(modelViewMatrix, positionNext, 1.0);\n\tvec4 projected_center = mv4_mult_func(projectionMatrix, view_position);\n\tvec4 projected_positionPrev = mv4_mult_func(projectionMatrix, view_positionPrev);\n\tvec4 projected_positionNext = mv4_mult_func(projectionMatrix, view_positionNext);\n\tvec4 projected_position = line_offset_func(projected_center, projected_positionPrev, projected_positionNext, pixelSize, width);\n\tvec4 log_depth_vert = log_depth_vert_func(view_position, projected_position, nearDistance, midDistance);\n\tgl_Position = log_depth_vert;\n\tvDepth = projected_position.w;\n\tfColor = color;\n\tfDashOffset = dashOffset;\n}\n'
			},
			fragment: {
				extensions: ['EXT_frag_depth'],
				code: 'precision mediump float;\nuniform float alphaMultiplier;\nuniform float dashLength;\nuniform float dashGapLength;\nvarying highp float vDepth;\nvarying vec4 fColor;\nvarying float fDashOffset;\nhighp float log_depth_frag_func(highp float fragDepth) {\n\t#ifdef L_EXT_frag_depth\n\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\treturn log2(1.0 + fragDepth) * logFactor;\n\t#else\n\t\treturn 0.0;\n\t#endif\n}\nvec4 alpha_mult_func(vec4 color, float alpha) {\n\treturn vec4(color.rgb, color.a * alpha);\n}\nvec4 line_dash_func(vec4 color, float dashOffset, float dashLength, float dashGapLength) {\n\tfloat u = mod(dashOffset, dashLength + dashGapLength);\n\tfloat alpha = float(u < dashLength);\n\treturn vec4(color.rgb, color.a * alpha);\n}\nvoid main() {\n\thighp float log_depth_frag = log_depth_frag_func(vDepth);\n\tvec4 color = alpha_mult_func(fColor, alphaMultiplier);\n\tvec4 lineDash = line_dash_func(color, fDashOffset, dashLength, dashGapLength);\n\t#ifdef L_EXT_frag_depth\n\t\tgl_FragDepthEXT = log_depth_frag;\n\t#endif\n\tgl_FragColor = lineDash;\n}\n'
			}
		};
	},
	275: function (t) {
		t.exports = {
			uniforms: {
				modelViewMatrix: 'mat4',
				projectionMatrix: 'mat4',
				nearDistance: 'float',
				midDistance: 'float',
				colorTexture: 'sampler2D',
				colorMultiplier: 'vec4',
				speed: 'float',
				time: 'float'
			},
			properties: { transparent: !0, depthWrite: !1, side: 'double', blending: 'normal' },
			vertex: {
				extensions: ['EXT_frag_depth'],
				code: 'attribute vec3 position;\nattribute vec2 uv;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float nearDistance;\nuniform float midDistance;\nvarying highp float vDepth;\nvarying vec2 vUV;\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\n\treturn m * vec4(v, w);\n}\nvec4 mv4_mult_func(mat4 m, vec4 v) {\n\treturn m * v;\n}\nvec4 log_depth_vert_func(vec4 viewPosition, vec4 projectedPosition, float nearDistance, float midDistance) {\n\t#ifndef L_EXT_frag_depth\n\t\tfloat z = projectedPosition.w;\n\t\tif (z < midDistance) {\n\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t}\n\t\telse {\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t}\n\t#endif\n\treturn projectedPosition;\n}\nvoid main() {\n\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\n\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\n\tvec4 log_depth_vert = log_depth_vert_func(view_position, projected_position, nearDistance, midDistance);\n\tgl_Position = log_depth_vert;\n\tvDepth = projected_position.w;\n\tvUV = uv;\n}\n'
			},
			fragment: {
				extensions: ['EXT_frag_depth'],
				code: 'precision mediump float;\nuniform sampler2D colorTexture;\nuniform vec4 colorMultiplier;\nuniform float speed;\nuniform float time;\nvarying highp float vDepth;\nvarying vec2 vUV;\nhighp float log_depth_frag_func(highp float fragDepth) {\n\t#ifdef L_EXT_frag_depth\n\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\treturn log2(1.0 + fragDepth) * logFactor;\n\t#else\n\t\treturn 0.0;\n\t#endif\n}\nvec2 v2_construct_func(float x, float y) {\n\treturn vec2(x, y);\n}\nfloat s_mult_func(float s1, float s2) {\n\treturn s1 * s2;\n}\nfloat s_mod_func(float s1, float s2) {\n\treturn mod(s1, s2);\n}\nvec2 v2s_mult_func(vec2 v, float s) {\n\treturn v * s;\n}\nvec2 v2_add_func(vec2 v1, vec2 v2) {\n\treturn v1 + v2;\n}\nvec4 texture_func(sampler2D tex, vec2 uv) {\n\treturn texture2D(tex, uv);\n}\nvec4 v4v4_mult_func(vec4 v1, vec4 v2) {\n\treturn v1 * v2;\n}\nfloat s_sub_func(float s1, float s2) {\n\treturn s1 - s2;\n}\nvec4 alpha_mult_func(vec4 color, float alpha) {\n\treturn vec4(color.rgb, color.a * alpha);\n}\nvoid main() {\n\thighp float log_depth_frag = log_depth_frag_func(vDepth);\n\tvec2 yAxis = v2_construct_func(0.0, 1.0);\n\tfloat yMultiplier = s_mult_func(time, speed);\n\tfloat yMultiplierMod = s_mod_func(yMultiplier, 1.0);\n\tvec2 uvOffset = v2s_mult_func(yAxis, yMultiplierMod);\n\tvec2 finalUV = v2_add_func(vUV, uvOffset);\n\tvec4 textureOffset = texture_func(colorTexture, finalUV);\n\tvec4 color = v4v4_mult_func(textureOffset, colorMultiplier);\n\tfloat fade = s_sub_func(1.0, vUV.y);\n\tvec4 color_with_fade = alpha_mult_func(color, fade);\n\t#ifdef L_EXT_frag_depth\n\t\tgl_FragDepthEXT = log_depth_frag;\n\t#endif\n\tgl_FragColor = color_with_fade;\n}\n'
			}
		};
	},
	276: function (t) {
		t.exports = {
			uniforms: {
				modelViewMatrix: 'mat4',
				projectionMatrix: 'mat4',
				nearDistance: 'float',
				midDistance: 'float',
				pixelBased: 'float',
				color: 'vec4',
				colorTexture: 'sampler2D'
			},
			properties: { transparent: !0, depthWrite: !1, side: 'double', blending: 'normal' },
			vertex: {
				extensions: ['EXT_frag_depth'],
				code: 'attribute vec3 position;\nattribute vec2 uv;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float nearDistance;\nuniform float midDistance;\nuniform float pixelBased;\nvarying highp float vDepth;\nvarying vec2 vUV;\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\n\treturn m * vec4(v, w);\n}\nvec4 mv4_mult_func(mat4 m, vec4 v) {\n\treturn m * v;\n}\nvec4 log_depth_vert_func(vec4 projectedPosition, float nearDistance, float midDistance) {\n\t#ifndef L_EXT_frag_depth\n\t\tfloat z = projectedPosition.w;\n\t\tif (z < midDistance) {\n\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t}\n\t\telse {\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t}\n\t#endif\n\treturn projectedPosition;\n}\nvec4 pixel_based_func(float pixelBased, vec4 projectedPosition) {\n\tif (pixelBased != 0.0) {\n\t\tprojectedPosition /= abs(projectedPosition.w);\n\t}\n\treturn projectedPosition;\n}\nvoid main() {\n\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\n\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\n\tvec4 log_depth_vert = log_depth_vert_func(projected_position, nearDistance, midDistance);\n\tvec4 pixel_based_projected_position = pixel_based_func(pixelBased, log_depth_vert);\n\tgl_Position = pixel_based_projected_position;\n\tvDepth = projected_position.w;\n\tvUV = uv;\n}\n'
			},
			fragment: {
				extensions: ['EXT_frag_depth'],
				code: 'precision mediump float;\nuniform vec4 color;\nuniform sampler2D colorTexture;\nvarying highp float vDepth;\nvarying vec2 vUV;\nhighp float log_depth_frag_func(highp float fragDepth) {\n\t#ifdef L_EXT_frag_depth\n\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\treturn log2(1.0 + fragDepth) * logFactor;\n\t#else\n\t\treturn 0.0;\n\t#endif\n}\nvec4 texture_func(sampler2D tex, vec2 uv) {\n\treturn texture2D(tex, uv);\n}\nvec4 v4v4_mult_func(vec4 v1, vec4 v2) {\n\treturn v1 * v2;\n}\nvoid main() {\n\thighp float log_depth_frag = log_depth_frag_func(vDepth);\n\tvec4 textureColor = texture_func(colorTexture, vUV);\n\tvec4 finalColor = v4v4_mult_func(textureColor, color);\n\t#ifdef L_EXT_frag_depth\n\t\tgl_FragDepthEXT = log_depth_frag;\n\t#endif\n\tgl_FragColor = finalColor;\n}\n'
			}
		};
	},
	277: function (t) {
		t.exports = {
			uniforms: { modelViewMatrix: 'mat4', projectionMatrix: 'mat4', nearDistance: 'float', midDistance: 'float' },
			properties: { transparent: !0, depthWrite: !1, side: 'double', blending: 'additive' },
			vertex: {
				extensions: ['EXT_frag_depth'],
				code: 'attribute vec3 position;\nattribute vec4 color;\nattribute vec3 offset;\nattribute float scale;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float nearDistance;\nuniform float midDistance;\nvarying highp float vDepth;\nvarying vec4 fColor;\nvarying vec2 fPosition;\nvec4 v4v4_add_func(vec4 v1, vec4 v2) {\n\treturn v1 + v2;\n}\nvec4 mv4_mult_func(mat4 m, vec4 v) {\n\treturn m * v;\n}\nvec4 log_depth_vert_func(vec4 viewPosition, vec4 projectedPosition, float nearDistance, float midDistance) {\n\t#ifndef L_EXT_frag_depth\n\t\tfloat z = projectedPosition.w;\n\t\tif (z < midDistance) {\n\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t}\n\t\telse {\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t}\n\t#endif\n\treturn projectedPosition;\n}\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\n\treturn m * vec4(v, w);\n}\nvec4 v3s_extend_func(vec3 v, float s) {\n\treturn vec4(v, s);\n}\nvec4 v4s_mult_func(vec4 v, float s) {\n\treturn v * s;\n}\nvoid main() {\n\tvec4 view_offset = mv3_mult_func(modelViewMatrix, offset, 1.0);\n\tvec4 position_v4 = v3s_extend_func(position, 0.0);\n\tvec4 position_scaled = v4s_mult_func(position_v4, scale);\n\tvec4 view_position = v4v4_add_func(view_offset, position_scaled);\n\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\n\tvec4 log_depth_vert = log_depth_vert_func(view_position, projected_position, nearDistance, midDistance);\n\tgl_Position = log_depth_vert;\n\tvDepth = projected_position.w;\n\tfColor = color;\n\tfPosition = position.xz;\n}\n'
			},
			fragment: {
				extensions: ['EXT_frag_depth'],
				code: 'precision mediump float;\nvarying highp float vDepth;\nvarying vec4 fColor;\nvarying vec2 fPosition;\nhighp float log_depth_frag_func(highp float fragDepth) {\n\t#ifdef L_EXT_frag_depth\n\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\treturn log2(1.0 + fragDepth) * logFactor;\n\t#else\n\t\treturn 0.0;\n\t#endif\n}\nfloat v2_length_func(vec2 v) {\n\treturn length(v);\n}\nfloat s_sub_func(float s1, float s2) {\n\treturn s1 - s2;\n}\nvec4 v4s_mult_func(vec4 v, float s) {\n\treturn v * s;\n}\nvoid main() {\n\thighp float log_depth_frag = log_depth_frag_func(vDepth);\n\tfloat distance_from_center = v2_length_func(fPosition);\n\tfloat distance_from_edge = s_sub_func(1.0, distance_from_center);\n\tvec4 color = v4s_mult_func(fColor, distance_from_edge);\n\t#ifdef L_EXT_frag_depth\n\t\tgl_FragDepthEXT = log_depth_frag;\n\t#endif\n\tgl_FragColor = color;\n}\n'
			}
		};
	},
	279: function (t) {
		t.exports = {
			viirs: {
				name: 'viirs',
				entity: 'earth',
				hd: !0,
				endPoint: 'https://gibs.earthdata.nasa.gov/wmts/epsg4326/best',
				layer: 'VIIRS_SNPP_CorrectedReflectance_TrueColor',
				tile: '250m',
				time: 'yesterday'
			},
			lro: {
				name: 'lro',
				entity: 'moon',
				hd: !0,
				endPoint: 'https://trek.nasa.gov/tiles/Moon/EQ/corrected/LRO_WAC_Mosaic_Global_303ppd_v02',
				layer: 'LRO_WAC_Mosaic_Global_303ppd_v02',
				tile: 'default028mm'
			},
			viking: {
				name: 'viking',
				entity: 'mars',
				hd: !0,
				endPoint: 'https://trek.nasa.gov/tiles/Mars/EQ/corrected/Mars_Viking_MDIM21_ClrMosaic_global_232m',
				layer: 'Mars_Viking_MDIM21_ClrMosaic_global_232m',
				tile: 'default028mm'
			}
		};
	},
	281: function (t, e, n) {
		n(282), (t.exports = n(502));
	},
	484: function (t, e, n) {},
	485: function (t, e, n) {},
	486: function (t, e, n) {},
	487: function (t, e, n) {},
	490: function (t, e, n) {
		var r = {
			'./af': 143,
			'./af.js': 143,
			'./ar': 144,
			'./ar-dz': 145,
			'./ar-dz.js': 145,
			'./ar-kw': 146,
			'./ar-kw.js': 146,
			'./ar-ly': 147,
			'./ar-ly.js': 147,
			'./ar-ma': 148,
			'./ar-ma.js': 148,
			'./ar-sa': 149,
			'./ar-sa.js': 149,
			'./ar-tn': 150,
			'./ar-tn.js': 150,
			'./ar.js': 144,
			'./az': 151,
			'./az.js': 151,
			'./be': 152,
			'./be.js': 152,
			'./bg': 153,
			'./bg.js': 153,
			'./bm': 154,
			'./bm.js': 154,
			'./bn': 155,
			'./bn.js': 155,
			'./bo': 156,
			'./bo.js': 156,
			'./br': 157,
			'./br.js': 157,
			'./bs': 158,
			'./bs.js': 158,
			'./ca': 159,
			'./ca.js': 159,
			'./cs': 160,
			'./cs.js': 160,
			'./cv': 161,
			'./cv.js': 161,
			'./cy': 162,
			'./cy.js': 162,
			'./da': 163,
			'./da.js': 163,
			'./de': 164,
			'./de-at': 165,
			'./de-at.js': 165,
			'./de-ch': 166,
			'./de-ch.js': 166,
			'./de.js': 164,
			'./dv': 167,
			'./dv.js': 167,
			'./el': 168,
			'./el.js': 168,
			'./en-SG': 169,
			'./en-SG.js': 169,
			'./en-au': 170,
			'./en-au.js': 170,
			'./en-ca': 171,
			'./en-ca.js': 171,
			'./en-gb': 172,
			'./en-gb.js': 172,
			'./en-ie': 173,
			'./en-ie.js': 173,
			'./en-il': 174,
			'./en-il.js': 174,
			'./en-nz': 175,
			'./en-nz.js': 175,
			'./eo': 176,
			'./eo.js': 176,
			'./es': 177,
			'./es-do': 178,
			'./es-do.js': 178,
			'./es-us': 179,
			'./es-us.js': 179,
			'./es.js': 177,
			'./et': 180,
			'./et.js': 180,
			'./eu': 181,
			'./eu.js': 181,
			'./fa': 182,
			'./fa.js': 182,
			'./fi': 183,
			'./fi.js': 183,
			'./fo': 184,
			'./fo.js': 184,
			'./fr': 185,
			'./fr-ca': 186,
			'./fr-ca.js': 186,
			'./fr-ch': 187,
			'./fr-ch.js': 187,
			'./fr.js': 185,
			'./fy': 188,
			'./fy.js': 188,
			'./ga': 189,
			'./ga.js': 189,
			'./gd': 190,
			'./gd.js': 190,
			'./gl': 191,
			'./gl.js': 191,
			'./gom-latn': 192,
			'./gom-latn.js': 192,
			'./gu': 193,
			'./gu.js': 193,
			'./he': 194,
			'./he.js': 194,
			'./hi': 195,
			'./hi.js': 195,
			'./hr': 196,
			'./hr.js': 196,
			'./hu': 197,
			'./hu.js': 197,
			'./hy-am': 198,
			'./hy-am.js': 198,
			'./id': 199,
			'./id.js': 199,
			'./is': 200,
			'./is.js': 200,
			'./it': 201,
			'./it-ch': 202,
			'./it-ch.js': 202,
			'./it.js': 201,
			'./ja': 203,
			'./ja.js': 203,
			'./jv': 204,
			'./jv.js': 204,
			'./ka': 205,
			'./ka.js': 205,
			'./kk': 206,
			'./kk.js': 206,
			'./km': 207,
			'./km.js': 207,
			'./kn': 208,
			'./kn.js': 208,
			'./ko': 209,
			'./ko.js': 209,
			'./ku': 210,
			'./ku.js': 210,
			'./ky': 211,
			'./ky.js': 211,
			'./lb': 212,
			'./lb.js': 212,
			'./lo': 213,
			'./lo.js': 213,
			'./lt': 214,
			'./lt.js': 214,
			'./lv': 215,
			'./lv.js': 215,
			'./me': 216,
			'./me.js': 216,
			'./mi': 217,
			'./mi.js': 217,
			'./mk': 218,
			'./mk.js': 218,
			'./ml': 219,
			'./ml.js': 219,
			'./mn': 220,
			'./mn.js': 220,
			'./mr': 221,
			'./mr.js': 221,
			'./ms': 222,
			'./ms-my': 223,
			'./ms-my.js': 223,
			'./ms.js': 222,
			'./mt': 224,
			'./mt.js': 224,
			'./my': 225,
			'./my.js': 225,
			'./nb': 226,
			'./nb.js': 226,
			'./ne': 227,
			'./ne.js': 227,
			'./nl': 228,
			'./nl-be': 229,
			'./nl-be.js': 229,
			'./nl.js': 228,
			'./nn': 230,
			'./nn.js': 230,
			'./pa-in': 231,
			'./pa-in.js': 231,
			'./pl': 232,
			'./pl.js': 232,
			'./pt': 233,
			'./pt-br': 234,
			'./pt-br.js': 234,
			'./pt.js': 233,
			'./ro': 235,
			'./ro.js': 235,
			'./ru': 236,
			'./ru.js': 236,
			'./sd': 237,
			'./sd.js': 237,
			'./se': 238,
			'./se.js': 238,
			'./si': 239,
			'./si.js': 239,
			'./sk': 240,
			'./sk.js': 240,
			'./sl': 241,
			'./sl.js': 241,
			'./sq': 242,
			'./sq.js': 242,
			'./sr': 243,
			'./sr-cyrl': 244,
			'./sr-cyrl.js': 244,
			'./sr.js': 243,
			'./ss': 245,
			'./ss.js': 245,
			'./sv': 246,
			'./sv.js': 246,
			'./sw': 247,
			'./sw.js': 247,
			'./ta': 248,
			'./ta.js': 248,
			'./te': 249,
			'./te.js': 249,
			'./tet': 250,
			'./tet.js': 250,
			'./tg': 251,
			'./tg.js': 251,
			'./th': 252,
			'./th.js': 252,
			'./tl-ph': 253,
			'./tl-ph.js': 253,
			'./tlh': 254,
			'./tlh.js': 254,
			'./tr': 255,
			'./tr.js': 255,
			'./tzl': 256,
			'./tzl.js': 256,
			'./tzm': 257,
			'./tzm-latn': 258,
			'./tzm-latn.js': 258,
			'./tzm.js': 257,
			'./ug-cn': 259,
			'./ug-cn.js': 259,
			'./uk': 260,
			'./uk.js': 260,
			'./ur': 261,
			'./ur.js': 261,
			'./uz': 262,
			'./uz-latn': 263,
			'./uz-latn.js': 263,
			'./uz.js': 262,
			'./vi': 264,
			'./vi.js': 264,
			'./x-pseudo': 265,
			'./x-pseudo.js': 265,
			'./yo': 266,
			'./yo.js': 266,
			'./zh-cn': 267,
			'./zh-cn.js': 267,
			'./zh-hk': 268,
			'./zh-hk.js': 268,
			'./zh-tw': 269,
			'./zh-tw.js': 269
		};
		function webpackContext(t) {
			var e = webpackContextResolve(t);
			return n(e);
		}
		function webpackContextResolve(t) {
			if (!n.o(r, t)) {
				var e = new Error("Cannot find module '" + t + "'");
				throw ((e.code = 'MODULE_NOT_FOUND'), e);
			}
			return r[t];
		}
		(webpackContext.keys = function webpackContextKeys() {
			return Object.keys(r);
		}),
			(webpackContext.resolve = webpackContextResolve),
			(t.exports = webpackContext),
			(webpackContext.id = 490);
	},
	492: function (t, e, n) {},
	494: function (t, e, n) {},
	495: function (t, e, n) {},
	496: function (t, e, n) {},
	497: function (t, e, n) {},
	498: function (t, e) {
		!(function (t, e) {
			function Quadtree(t, e, n, r) {
				(this.max_objects = e || 10),
					(this.max_levels = n || 4),
					(this.level = r || 0),
					(this.bounds = t),
					(this.objects = []),
					(this.nodes = []);
			}
			(Quadtree.prototype.split = function () {
				var t = this.level + 1,
					n = e.round(this.bounds.width / 2),
					r = e.round(this.bounds.height / 2),
					i = e.round(this.bounds.x),
					o = e.round(this.bounds.y);
				(this.nodes[0] = new Quadtree({ x: i + n, y: o, width: n, height: r }, this.max_objects, this.max_levels, t)),
					(this.nodes[1] = new Quadtree({ x: i, y: o, width: n, height: r }, this.max_objects, this.max_levels, t)),
					(this.nodes[2] = new Quadtree({ x: i, y: o + r, width: n, height: r }, this.max_objects, this.max_levels, t)),
					(this.nodes[3] = new Quadtree(
						{ x: i + n, y: o + r, width: n, height: r },
						this.max_objects,
						this.max_levels,
						t
					));
			}),
				(Quadtree.prototype.getIndex = function (t) {
					var e = -1,
						n = this.bounds.x + this.bounds.width / 2,
						r = this.bounds.y + this.bounds.height / 2,
						i = t.y < r && t.y + t.height < r,
						o = t.y > r;
					return (
						t.x < n && t.x + t.width < n ? (i ? (e = 1) : o && (e = 2)) : t.x > n && (i ? (e = 0) : o && (e = 3)), e
					);
				}),
				(Quadtree.prototype.insert = function (t) {
					var e,
						n = 0;
					if (void 0 === this.nodes[0] || -1 === (e = this.getIndex(t))) {
						if ((this.objects.push(t), this.objects.length > this.max_objects && this.level < this.max_levels))
							for (void 0 === this.nodes[0] && this.split(); n < this.objects.length; )
								-1 !== (e = this.getIndex(this.objects[n]))
									? this.nodes[e].insert(this.objects.splice(n, 1)[0])
									: (n += 1);
					} else this.nodes[e].insert(t);
				}),
				(Quadtree.prototype.retrieve = function (t) {
					var e = this.getIndex(t),
						n = this.objects;
					if (void 0 !== this.nodes[0])
						if (-1 !== e) n = n.concat(this.nodes[e].retrieve(t));
						else for (var r = 0; r < this.nodes.length; r += 1) n = n.concat(this.nodes[r].retrieve(t));
					return n;
				}),
				(Quadtree.prototype.clear = function () {
					this.objects = [];
					for (var t = 0; t < this.nodes.length; t += 1) void 0 !== this.nodes[t] && this.nodes[t].clear();
					this.nodes = [];
				}),
				(t.Quadtree = Quadtree);
		})(window, Math);
	},
	499: function (t, e, n) {},
	500: function (t, e, n) {},
	501: function (t, e, n) {},
	502: function (t, e, n) {
		'use strict';
		n.r(e);
		var r = {};
		n.r(r),
			n.d(r, 'Collection', function () {
				return m;
			}),
			n.d(r, 'CollectionItem', function () {
				return f;
			}),
			n.d(r, 'CircularBuffer', function () {
				return d;
			}),
			n.d(r, 'DependencyGraph', function () {
				return v;
			}),
			n.d(r, 'FastIterable', function () {
				return b;
			}),
			n.d(r, 'FPS', function () {
				return x;
			}),
			n.d(r, 'Freezable', function () {
				return S;
			}),
			n.d(r, 'MathUtils', function () {
				return T;
			}),
			n.d(r, 'Reader', function () {
				return C;
			}),
			n.d(r, 'Sort', function () {
				return P;
			}),
			n.d(r, 'AER', function () {
				return M;
			}),
			n.d(r, 'BaseRef', function () {
				return p;
			}),
			n.d(r, 'Cache', function () {
				return vt;
			}),
			n.d(r, 'Color', function () {
				return z;
			}),
			n.d(r, 'ComponentRef', function () {
				return bt;
			}),
			n.d(r, 'ControllerRef', function () {
				return xt;
			}),
			n.d(r, 'CubeMap', function () {
				return Tt;
			}),
			n.d(r, 'EntityRef', function () {
				return wt;
			}),
			n.d(r, 'FastMap', function () {
				return F;
			}),
			n.d(r, 'FastSet', function () {
				return D;
			}),
			n.d(r, 'Geometry', function () {
				return U;
			}),
			n.d(r, 'Interval', function () {
				return J;
			}),
			n.d(r, 'LatLonAlt', function () {
				return Et;
			}),
			n.d(r, 'LineMesh', function () {
				return Ot;
			}),
			n.d(r, 'MaterialUtils', function () {
				return jt;
			}),
			n.d(r, 'MaterialUtilsPhong', function () {
				return Rt;
			}),
			n.d(r, 'MaterialUtilsStandard', function () {
				return Mt;
			}),
			n.d(r, 'OrbitalElements', function () {
				return $;
			}),
			n.d(r, 'Pool', function () {
				return w;
			}),
			n.d(r, 'Quaternion', function () {
				return tt;
			}),
			n.d(r, 'Rect', function () {
				return Z;
			}),
			n.d(r, 'ShaderFix', function () {
				return zt;
			}),
			n.d(r, 'Spheroid', function () {
				return Y;
			}),
			n.d(r, 'SpriteParticles', function () {
				return Nt;
			}),
			n.d(r, 'TextureLOD', function () {
				return Ft;
			}),
			n.d(r, 'ThreeJsHelper', function () {
				return Ut;
			}),
			n.d(r, 'Tile', function () {
				return E;
			}),
			n.d(r, 'TimeUtils', function () {
				return A;
			}),
			n.d(r, 'Vector2', function () {
				return st;
			}),
			n.d(r, 'Vector3', function () {
				return yt;
			}),
			n.d(r, 'Capabilities', function () {
				return Ht;
			}),
			n.d(r, 'Config', function () {
				return qt;
			}),
			n.d(r, 'Downloader', function () {
				return Xt;
			}),
			n.d(r, 'Engine', function () {
				return Kt;
			}),
			n.d(r, 'Entity', function () {
				return Wt;
			}),
			n.d(r, 'EntityItem', function () {
				return Qt;
			}),
			n.d(r, 'Input', function () {
				return ee;
			}),
			n.d(r, 'MaterialManager', function () {
				return ce;
			}),
			n.d(r, 'Scene', function () {
				return ue;
			}),
			n.d(r, 'TextureLoader', function () {
				return he;
			}),
			n.d(r, 'TextureLoaderCompressed', function () {
				return de;
			}),
			n.d(r, 'Types', function () {
				return wr;
			}),
			n.d(r, 'Version', function () {
				return fe;
			}),
			n.d(r, 'Viewport', function () {
				return me;
			}),
			n.d(r, 'BaseComponent', function () {
				return ye;
			}),
			n.d(r, 'AtmosphereComponent', function () {
				return Se;
			}),
			n.d(r, 'CameraComponent', function () {
				return Te;
			}),
			n.d(r, 'CMTSComponent', function () {
				return Pe;
			}),
			n.d(r, 'CometTailComponent', function () {
				return ke;
			}),
			n.d(r, 'ConnectedSpriteComponent', function () {
				return Oe;
			}),
			n.d(r, 'DivComponent', function () {
				return Ae;
			}),
			n.d(r, 'DynamicEnvironmentMapComponent', function () {
				return Me;
			}),
			n.d(r, 'GizmoComponent', function () {
				return je;
			}),
			n.d(r, 'LabelComponent', function () {
				return Ne;
			}),
			n.d(r, 'LightSourceComponent', function () {
				return Fe;
			}),
			n.d(r, 'ModelComponent', function () {
				return De;
			}),
			n.d(r, 'OrbitalParticlesComponent', function () {
				return Ue;
			}),
			n.d(r, 'ParticleSprayComponent', function () {
				return Be;
			}),
			n.d(r, 'RingsComponent', function () {
				return Je;
			}),
			n.d(r, 'SkyboxComponent', function () {
				return $e;
			}),
			n.d(r, 'SpheroidComponent', function () {
				return qe;
			}),
			n.d(r, 'SpoutComponent', function () {
				return Xe;
			}),
			n.d(r, 'SpriteComponent', function () {
				return We;
			}),
			n.d(r, 'StarfieldComponent', function () {
				return nn;
			}),
			n.d(r, 'TrailComponent', function () {
				return on;
			}),
			n.d(r, 'BaseController', function () {
				return an;
			}),
			n.d(r, 'AlignController', function () {
				return ln;
			}),
			n.d(r, 'AnimdataController', function () {
				return xn;
			}),
			n.d(r, 'CoverageController', function () {
				return Tn;
			}),
			n.d(r, 'DynamoController', function () {
				return Mn;
			}),
			n.d(r, 'FixedController', function () {
				return Ln;
			}),
			n.d(r, 'FixedToParentController', function () {
				return jn;
			}),
			n.d(r, 'FreeFlyController', function () {
				return zn;
			}),
			n.d(r, 'GroundClampController', function () {
				return Dn;
			}),
			n.d(r, 'KeyframeController', function () {
				return Jn;
			}),
			n.d(r, 'LookController', function () {
				return $n;
			}),
			n.d(r, 'ModelAnimateController', function () {
				return Hn;
			}),
			n.d(r, 'OrbitController', function () {
				return qn;
			}),
			n.d(r, 'OrbitKeyframeController', function () {
				return Qn;
			}),
			n.d(r, 'OrbitalElementsController', function () {
				return ar;
			}),
			n.d(r, 'PickController', function () {
				return sr;
			}),
			n.d(r, 'RollController', function () {
				return lr;
			}),
			n.d(r, 'RotateController', function () {
				return cr;
			}),
			n.d(r, 'RotateByParentOrientationController', function () {
				return ur;
			}),
			n.d(r, 'ScaleController', function () {
				return _r;
			}),
			n.d(r, 'SelectController', function () {
				return pr;
			}),
			n.d(r, 'SpinController', function () {
				return fr;
			}),
			n.d(r, 'TapController', function () {
				return mr;
			}),
			n.d(r, 'TLEController', function () {
				return vr;
			}),
			n.d(r, 'TransitionController', function () {
				return br;
			}),
			n.d(r, 'TranslateController', function () {
				return xr;
			}),
			n.d(r, 'ZoomController', function () {
				return Sr;
			}),
			n.d(r, 'THREE', function () {
				return i;
			}),
			n.d(r, 'ThreeJsEffectComposer', function () {
				return o.a;
			}),
			n.d(r, 'ThreeJsGLTFLoader', function () {
				return a.a;
			}),
			n.d(r, 'ThreeJsKTXLoader', function () {
				return s.a;
			}),
			n.d(r, 'ThreeJsOutlinePass', function () {
				return l.a;
			}),
			n.d(r, 'ThreeJsRenderPass', function () {
				return c.a;
			}),
			n.d(r, 'ThreeJsUnrealBloomPass', function () {
				return u.a;
			}),
			n.d(r, 'SatelliteJs', function () {
				return _;
			});
		var i = n(0),
			o = n(270),
			a = n(139),
			s = n(140),
			l = n(141),
			c = n(142),
			u = n(271),
			_ = n(138);
		function _defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var p = (function () {
			function BaseRef(t) {
				!(function _classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, BaseRef),
					(this._scene = t),
					(this._ref = null),
					(this._refChangedCallback = null);
			}
			return (
				(function _createClass(t, e, n) {
					return e && _defineProperties(t.prototype, e), n && _defineProperties(t, n), t;
				})(BaseRef, [
					{
						key: 'get',
						value: function get() {
							return this._update(), this._ref;
						}
					},
					{
						key: 'setRefChangedCallback',
						value: function setRefChangedCallback(t) {
							this._refChangedCallback = t;
						}
					},
					{ key: '_update', value: function _update() {} },
					{
						key: '_setRef',
						value: function _setRef(t) {
							if ((null === t || t.isEnabled() || (t = null), this._ref !== t)) {
								var e = this._ref;
								(this._ref = t), null !== this._refChangedCallback && this._refChangedCallback(e, this._ref);
							}
						}
					}
				]),
				BaseRef
			);
		})();
		function circular_buffer_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var h = (function () {
			function CircularBuffer(t) {
				!(function circular_buffer_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, CircularBuffer),
					(this._type = t),
					(this._items = []);
				for (var e = 0, n = CircularBuffer.minArrayLength; e < n; e++) this._items.push(new this._type());
				(this._start = 0), (this._count = 0);
			}
			return (
				(function circular_buffer_createClass(t, e, n) {
					return e && circular_buffer_defineProperties(t.prototype, e), n && circular_buffer_defineProperties(t, n), t;
				})(CircularBuffer, [
					{
						key: 'getCount',
						value: function getCount() {
							return this._count;
						}
					},
					{
						key: 'pushFront',
						value: function pushFront() {
							this._resize(this._count + 1),
								(this._start = (this._start + this._items.length - 1) % this._items.length),
								(this._count += 1);
						}
					},
					{
						key: 'popFront',
						value: function popFront() {
							this._count > 0 &&
								(this._resize(this._count - 1),
								(this._start = (this._start + 1) % this._items.length),
								(this._count -= 1));
						}
					},
					{
						key: 'peekFront',
						value: function peekFront() {
							var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
							return 0 <= t && t < this._count ? this._items[(this._start + t) % this._items.length] : null;
						}
					},
					{
						key: 'pushBack',
						value: function pushBack() {
							this._resize(this._count + 1), (this._count += 1);
						}
					},
					{
						key: 'popBack',
						value: function popBack() {
							this._count > 0 && (this._resize(this._count - 1), (this._count -= 1));
						}
					},
					{
						key: 'peekBack',
						value: function peekBack() {
							var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
							return 0 <= t && t < this._count
								? this._items[(this._start + this._count - 1 - t) % this._items.length]
								: null;
						}
					},
					{
						key: 'clear',
						value: function clear() {
							this._items = [];
							for (var t = 0, e = CircularBuffer.minArrayLength; t < e; t++) this._items.push(new this._type());
							(this._start = 0), (this._count = 0);
						}
					},
					{
						key: '_resize',
						value: function _resize(t) {
							if (t > this._items.length) {
								for (var e = [], n = 0, r = this._count; n < r; n++)
									e.push(this._items[(this._start + n) % this._items.length]);
								this._start = 0;
								for (var i = this._count, o = 2 * this._items.length; i < o; i++) e.push(new this._type());
								this._items = e;
							} else if (t <= this._items.length / 4 && this._items.length >= 2 * CircularBuffer.minArrayLength) {
								for (var a = [], s = 0, l = this._count; s < l; s++)
									a.push(this._items[(this._start + s) % this._items.length]);
								this._start = 0;
								for (var c = this._count, u = this._items.length / 2; c < u; c++) a.push(new this._type());
								this._items = a;
							}
						}
					}
				]),
				CircularBuffer
			);
		})();
		h.minArrayLength = 8;
		var d = h;
		function collection_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function collection_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function collection_createClass(t, e, n) {
			return e && collection_defineProperties(t.prototype, e), n && collection_defineProperties(t, n), t;
		}
		var f = (function () {
				function CollectionItem(t, e, n) {
					collection_classCallCheck(this, CollectionItem),
						(this._type = t),
						(this._typeIndex = 0),
						(this._name = e),
						(this._collectionParent = n);
				}
				return (
					collection_createClass(CollectionItem, [
						{
							key: 'getType',
							value: function getType() {
								return this._type;
							}
						},
						{
							key: 'getTypeIndex',
							value: function getTypeIndex() {
								return this._typeIndex;
							}
						},
						{
							key: '__setTypeIndex',
							value: function __setTypeIndex(t) {
								this._typeIndex = t;
							}
						},
						{
							key: 'getName',
							value: function getName() {
								return this._name;
							}
						},
						{
							key: '__getCollectionParent',
							value: function __getCollectionParent() {
								return this._collectionParent;
							}
						},
						{ key: '__destroy', value: function __destroy() {} }
					]),
					CollectionItem
				);
			})(),
			m = (function () {
				function Collection(t, e) {
					collection_classCallCheck(this, Collection),
						(this._parent = t),
						(this._types = e),
						(this._items = []),
						(this._itemNames = new Map());
				}
				return (
					collection_createClass(Collection, [
						{
							key: 'get',
							value: function get(t) {
								if ('number' == typeof t) return this._items[t] || null;
								if ('string' == typeof t) return this._itemNames.get(t) || null;
								throw new Error('The param nameOrIndex must be a string or number.');
							}
						},
						{
							key: 'getByType',
							value: function getByType(t) {
								for (
									var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, n = 0;
									n < this._items.length;
									n++
								) {
									var r = this._items[n];
									if (r.getType() === t && r.getTypeIndex() === e) return r;
								}
								return null;
							}
						},
						{
							key: 'add',
							value: function add(t) {
								var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : '',
									n = arguments.length > 2 ? arguments[2] : void 0;
								if ('' !== e && this._itemNames.has(e)) throw new Error("Already added '" + e + "'.");
								var r = this._types.get(t);
								if (void 0 === t) throw new Error("Type '" + t + "' not found.");
								try {
									var i = new r(t, e, this._parent);
									if (void 0 !== n) {
										for (var o = this._items.length, a = 0; a < this._items.length; a++)
											this._items[a] === n && (o = a);
										this._items.splice(o, 0, i);
									} else this._items.push(i);
									'' !== e && this._itemNames.set(e, i);
									for (var s = 0, l = 0; l < this._items.length; l++) {
										var c = this._items[l];
										c.getType() === t && (c.__setTypeIndex(s), (s += 1));
									}
									return i;
								} catch (n) {
									throw new Error('While adding "'.concat(e, '" of type "').concat(t, '": ').concat(n));
								}
							}
						},
						{
							key: 'remove',
							value: function remove(t) {
								var e, n, r;
								if ('string' == typeof t) {
									(r = this._itemNames.get(t)), (e = t);
									for (var i = this._items.length - 1; i >= 0; i--)
										if (this._items[i] === r) {
											n = i;
											break;
										}
								} else if ('number' == typeof t) (n = t), (e = (r = this._items[t]).getName());
								else {
									e = (r = t).getName();
									for (var o = this._items.length - 1; o >= 0; o--)
										if (this._items[o] === r) {
											n = o;
											break;
										}
								}
								if (void 0 !== r) {
									var a = this._items[n].getType();
									this._items.splice(n, 1), '' !== e && this._itemNames.delete(e);
									for (var s = 0, l = 0; l < this._items.length; l++) {
										var c = this._items[l];
										c.getType() === a && (c.__setTypeIndex(s), (s += 1));
									}
									r.__destroy();
								}
							}
						},
						{
							key: 'clear',
							value: function clear() {
								for (var t = this._items.length - 1; t >= 0; t--) this._items[t].__destroy();
								(this._items = []), this._itemNames.clear();
							}
						},
						{
							key: '__destroy',
							value: function __destroy() {
								for (var t = this._items.length - 1; t >= 0; t--) this._items[t].__destroy();
							}
						},
						{
							key: 'size',
							get: function get() {
								return this._items.length;
							}
						}
					]),
					Collection
				);
			})();
		function dependency_graph_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function dependency_graph_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var g = (function () {
				function DependencyGraph() {
					dependency_graph_classCallCheck(this, DependencyGraph),
						(this._updateItemCallback = null),
						(this._compareItemCallback = null),
						(this._nodes = new Map()),
						(this._sortedNodes = []),
						(this._needsSorting = !1);
				}
				return (
					(function dependency_graph_createClass(t, e, n) {
						return (
							e && dependency_graph_defineProperties(t.prototype, e), n && dependency_graph_defineProperties(t, n), t
						);
					})(DependencyGraph, [
						{
							key: 'setUpdateItemCallback',
							value: function setUpdateItemCallback(t) {
								this._updateItemCallback = t;
							}
						},
						{
							key: 'setCompareItemCallback',
							value: function setCompareItemCallback(t) {
								this._compareItemCallback = t;
							}
						},
						{
							key: 'addItem',
							value: function addItem(t) {
								var e = new y(t);
								this._nodes.set(t, e), (this._needsSorting = !0);
							}
						},
						{
							key: 'removeItem',
							value: function removeItem(t) {
								this._nodes.delete(t) && (this._needsSorting = !0);
							}
						},
						{
							key: 'needsSorting',
							value: function needsSorting() {
								this._needsSorting = !0;
							}
						},
						{
							key: 'update',
							value: function update() {
								if (this._needsSorting) {
									var t = !0,
										e = !1,
										n = void 0;
									try {
										for (var r, i = this._nodes.values()[Symbol.iterator](); !(t = (r = i.next()).done); t = !0) {
											var o = r.value;
											(o.permanentMark = !1), (o.temporaryMark = !1);
										}
									} catch (t) {
										(e = !0), (n = t);
									} finally {
										try {
											t || null == i.return || i.return();
										} finally {
											if (e) throw n;
										}
									}
									this._sortedNodes = [];
									for (var a = this._nodes.values(); ; ) {
										var s = a.next();
										if (s.done) break;
										if (!this._visit(s.value)) break;
									}
									this._needsSorting = !1;
								}
								for (var l = 0, c = this._sortedNodes.length; l < c; l++)
									this._updateItemCallback(this._sortedNodes[l].item);
							}
						},
						{
							key: '_visit',
							value: function _visit(t) {
								if (t.permanentMark) return !0;
								if (t.temporaryMark) throw new Error('Dependency cycle in graph: ' + t.item);
								t.temporaryMark = !0;
								var e = !0,
									n = !1,
									r = void 0;
								try {
									for (var i, o = this._nodes.values()[Symbol.iterator](); !(e = (i = o.next()).done); e = !0) {
										var a = i.value,
											s = !1;
										if ((this._compareItemCallback && (s = this._compareItemCallback(t.item, a.item)), s))
											try {
												this._visit(a);
											} catch (e) {
												throw new Error(e.message + ', ' + t.item);
											}
									}
								} catch (t) {
									(n = !0), (r = t);
								} finally {
									try {
										e || null == o.return || o.return();
									} finally {
										if (n) throw r;
									}
								}
								return (t.temporaryMark = !1), (t.permanentMark = !0), this._sortedNodes.push(t), !0;
							}
						}
					]),
					DependencyGraph
				);
			})(),
			y = function Node(t) {
				dependency_graph_classCallCheck(this, Node),
					(this.item = t),
					(this.permanentMark = !1),
					(this.temporaryMark = !1);
			},
			v = g;
		function fast_iterable_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var b = (function () {
			function FastIterable() {
				!(function fast_iterable_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, FastIterable);
			}
			return (
				(function fast_iterable_createClass(t, e, n) {
					return e && fast_iterable_defineProperties(t.prototype, e), n && fast_iterable_defineProperties(t, n), t;
				})(FastIterable, [
					{
						key: 'getAt',
						value: function getAt(t) {
							throw new Error();
						}
					},
					{
						key: 'size',
						get: function get() {
							throw new Error();
						}
					}
				]),
				FastIterable
			);
		})();
		function fps_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var x = (function () {
			function FPS() {
				!(function fps_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, FPS),
					(this._numberOfSamples = 100),
					(this._samples = new Array(this._numberOfSamples)),
					(this._index = 0);
			}
			return (
				(function fps_createClass(t, e, n) {
					return e && fps_defineProperties(t.prototype, e), n && fps_defineProperties(t, n), t;
				})(FPS, [
					{
						key: 'getNumberOfSamples',
						value: function getNumberOfSamples() {
							return this._numberOfSamples;
						}
					},
					{
						key: 'setNumberOfSamples',
						value: function setNumberOfSamples(t) {
							(this._numberOfSamples = t), (this._samples = new Array(this._numberOfSamples));
						}
					},
					{
						key: 'getFPS',
						value: function getFPS() {
							for (var t = 0, e = 0; e < this._samples.length; e++) t += this._samples[e];
							return this._samples.length / t;
						}
					},
					{
						key: 'update',
						value: function update(t) {
							(this._samples[this._index] = t), (this._index = (this._index + 1) % this._samples.length);
						}
					}
				]),
				FPS
			);
		})();
		function freezable_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var S = (function () {
			function Freezable() {
				!(function freezable_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Freezable),
					(this._frozen = !1);
			}
			return (
				(function freezable_createClass(t, e, n) {
					return e && freezable_defineProperties(t.prototype, e), n && freezable_defineProperties(t, n), t;
				})(Freezable, [
					{
						key: 'throwIfFrozen',
						value: function throwIfFrozen() {
							if (this._frozen) throw new TypeError('The object is frozen.');
						}
					},
					{
						key: 'isFrozen',
						value: function isFrozen() {
							return this._frozen;
						}
					},
					{
						key: 'freeze',
						value: function freeze() {
							this._frozen = !0;
						}
					},
					{
						key: 'thaw',
						value: function thaw() {
							this._frozen = !1;
						}
					}
				]),
				Freezable
			);
		})();
		function math_utils_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var T = (function () {
			function MathUtils() {
				!(function math_utils_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, MathUtils);
			}
			return (
				(function math_utils_createClass(t, e, n) {
					return e && math_utils_defineProperties(t.prototype, e), n && math_utils_defineProperties(t, n), t;
				})(MathUtils, null, [
					{
						key: 'clamp',
						value: function clamp(t, e, n) {
							return Math.min(Math.max(e, t), n);
						}
					},
					{
						key: 'clamp01',
						value: function clamp01(t) {
							return Math.min(Math.max(0, t), 1);
						}
					},
					{
						key: 'wrap',
						value: function wrap(t, e, n) {
							var r = ((t - e) % (n - e)) + e;
							return r < e && (r += n - e), r;
						}
					},
					{
						key: 'lerp',
						value: function lerp(t, e, n) {
							return (1 - n) * t + n * e;
						}
					},
					{
						key: 'lerpAngle',
						value: function lerpAngle(t, e, n) {
							return (
								(t = this.wrap(t, -Math.PI, +Math.PI)),
								(e = this.wrap(e, -Math.PI, +Math.PI)) - t > Math.PI && (t += 2 * Math.PI),
								t - e > Math.PI && (e += 2 * Math.PI),
								this.wrap(this.lerp(t, e, n), -Math.PI, +Math.PI)
							);
						}
					},
					{
						key: 'radToDeg',
						value: function radToDeg(t) {
							return 57.29577951308232 * t;
						}
					},
					{
						key: 'degToRad',
						value: function degToRad(t) {
							return 0.01745329251994329 * t;
						}
					},
					{
						key: 'ceilPow2',
						value: function ceilPow2(t) {
							return Math.pow(2, Math.ceil(Math.log(t) / Math.log(2)));
						}
					},
					{
						key: 'pi',
						get: function get() {
							return 3.141592653589793;
						}
					},
					{
						key: 'twoPi',
						get: function get() {
							return 6.283185307179586;
						}
					},
					{
						key: 'halfPi',
						get: function get() {
							return 1.5707963267948966;
						}
					}
				]),
				MathUtils
			);
		})();
		function _typeof(t) {
			return (_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function pool_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function _possibleConstructorReturn(t, e) {
			return !e || ('object' !== _typeof(e) && 'function' != typeof e)
				? (function _assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function _getPrototypeOf(t) {
			return (_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function _setPrototypeOf(t, e) {
			return (_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var w = (function (t) {
			function Pool(t) {
				var e;
				return (
					(function pool_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Pool),
					((e = _possibleConstructorReturn(this, _getPrototypeOf(Pool).call(this)))._type = t),
					(e._objects = []),
					(e._free = []),
					(e._freeLength = 0),
					(e._constructorFunction = function () {
						return new e._type();
					}),
					(e._destructorFunction = function () {}),
					e
				);
			}
			return (
				(function _inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && _setPrototypeOf(t, e);
				})(Pool, b),
				(function pool_createClass(t, e, n) {
					return e && pool_defineProperties(t.prototype, e), n && pool_defineProperties(t, n), t;
				})(Pool, [
					{
						key: 'setConstructorFunction',
						value: function setConstructorFunction(t) {
							this._constructorFunction = t;
						}
					},
					{
						key: 'setDestructorFunction',
						value: function setDestructorFunction(t) {
							this._destructorFunction = t;
						}
					},
					{
						key: 'get',
						value: function get() {
							var t = null;
							if (this._freeLength > 0) (t = this._objects[this._free[this._freeLength - 1]]), (this._freeLength -= 1);
							else {
								var e = this._objects.push(this._constructorFunction()) - 1;
								(this._objects[e]._poolIndex = e), (t = this._objects[e]);
							}
							return (t._poolUsed = !0), t;
						}
					},
					{
						key: 'release',
						value: function release(t) {
							var e = t;
							void 0 !== e._poolIndex &&
								(this._freeLength >= this._free.length
									? this._free.push(e._poolIndex)
									: (this._free[this._freeLength] = e._poolIndex),
								(this._freeLength += 1),
								(e._poolUsed = !1));
						}
					},
					{
						key: 'clean',
						value: function clean(t) {
							if (void 0 === t || t >= (this._objects.length - this._freeLength) / this._objects.length) {
								for (var e = 0; e < this._freeLength; e++) {
									var n = this._free[e];
									this._destructorFunction(this._objects[n]), this._objects.splice(n, 1);
									for (var r = n, i = this._objects.length; r < i; r++) this._objects[r]._poolIndex -= 1;
									for (var o = e + 1, a = this._freeLength; o < a; o++) this._free[o] > n && (this._free[o] -= 1);
								}
								(this._free = []), (this._freeLength = 0);
							}
						}
					},
					{
						key: 'getAsArray',
						value: function getAsArray() {
							return this._objects;
						}
					},
					{
						key: 'isUsed',
						value: function isUsed(t) {
							return t._poolUsed;
						}
					},
					{
						key: 'areAnyUsed',
						value: function areAnyUsed() {
							return this._freeLength < this._objects.length;
						}
					},
					{
						key: 'getAt',
						value: function getAt(t) {
							return this._objects[t];
						}
					},
					{
						key: 'size',
						get: function get() {
							return this._objects.length;
						}
					}
				]),
				Pool
			);
		})();
		function reader_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var C = (function () {
			function Reader(t) {
				!(function reader_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Reader),
					(this._dataView = new DataView(t)),
					(this._offset = 0);
			}
			return (
				(function reader_createClass(t, e, n) {
					return e && reader_defineProperties(t.prototype, e), n && reader_defineProperties(t, n), t;
				})(Reader, [
					{
						key: 'isAtEnd',
						value: function isAtEnd() {
							return this._offset >= this._dataView.byteLength;
						}
					},
					{
						key: 'readByte',
						value: function readByte() {
							var t = this._dataView.getUint8(this._offset);
							return (this._offset += 1), t;
						}
					},
					{
						key: 'readFloat32',
						value: function readFloat32() {
							var t = this._dataView.getFloat32(this._offset, !0);
							return (this._offset += 4), t;
						}
					},
					{
						key: 'readFloat64',
						value: function readFloat64() {
							var t = this._dataView.getFloat64(this._offset, !0);
							return (this._offset += 8), t;
						}
					},
					{
						key: 'readUInt8',
						value: function readUInt8() {
							var t = this._dataView.getUint8(this._offset);
							return (this._offset += 1), t;
						}
					},
					{
						key: 'readUInt16',
						value: function readUInt16() {
							var t = this._dataView.getUint16(this._offset, !0);
							return (this._offset += 2), t;
						}
					},
					{
						key: 'readUInt32',
						value: function readUInt32() {
							var t = this._dataView.getUint32(this._offset, !0);
							return (this._offset += 4), t;
						}
					},
					{
						key: 'readUInt64',
						value: function readUInt64() {
							var t = this._dataView.getUint32(this._offset, !0);
							return (t = t << 32 || this._dataView.getUint32(this._offset + 4, !0)), (this._offset += 8), t;
						}
					},
					{
						key: 'readInt8',
						value: function readInt8() {
							var t = this._dataView.getInt8(this._offset);
							return (this._offset += 1), t;
						}
					},
					{
						key: 'readInt16',
						value: function readInt16() {
							var t = this._dataView.getInt16(this._offset, !0);
							return (this._offset += 2), t;
						}
					},
					{
						key: 'readInt32',
						value: function readInt32() {
							var t = this._dataView.getInt32(this._offset, !0);
							return (this._offset += 4), t;
						}
					},
					{
						key: 'readInt64',
						value: function readInt64() {
							var t = this._dataView.getInt32(this._offset, !0);
							return (t = t << 32 || this._dataView.getInt32(this._offset + 4, !0)), (this._offset += 8), t;
						}
					},
					{
						key: 'readLine',
						value: function readLine() {
							for (var t = []; ; ) {
								var e = this.readByte(),
									n = String.fromCharCode(e);
								if ('\r' !== n) {
									if ('\n' === n) break;
									t.push(e);
								}
							}
							if ('undefined' != typeof TextEncoder) {
								var r = new TextDecoder(),
									i = new Uint8Array(t);
								return r.decode(i);
							}
							return this._utf8ArrayToStr(t);
						}
					},
					{
						key: 'readString',
						value: function readString(t) {
							for (var e = []; ; ) {
								var n = this.readByte();
								if (void 0 === t && 0 === n) break;
								if ((e.push(n), void 0 !== t && e.length === t)) break;
							}
							if ('undefined' != typeof TextEncoder) {
								var r = new TextDecoder(),
									i = new Uint8Array(e);
								return r.decode(i);
							}
							return this._utf8ArrayToStr(e);
						}
					},
					{
						key: '_utf8ArrayToStr',
						value: function _utf8ArrayToStr(t) {
							for (var e = 0, n = 0, r = 0, i = 0, o = '', a = 0, s = t.length; a < s; )
								switch (((e = t[a]), (a += 1), e >> 4)) {
									case 0:
									case 1:
									case 2:
									case 3:
									case 4:
									case 5:
									case 6:
									case 7:
										o += String.fromCharCode(e);
										break;
									case 12:
									case 13:
										(n = 0 | t[a]), (a += 1), (o += String.fromCharCode(((31 & e) << 6) | (63 & n)));
										break;
									case 14:
										(n = 0 | t[a]),
											(r = 0 | t[(a += 1)]),
											(a += 1),
											(o += String.fromCharCode(((15 & e) << 12) | ((63 & n) << 6) | ((63 & r) << 0)));
										break;
									case 15:
										(n = 0 | t[a]),
											(r = 0 | t[(a += 1)]),
											(i = 0 | t[(a += 1)]),
											(a += 1),
											(o += String.fromCharCode(
												((7 & e) << 18) | ((63 & n) << 12) | ((63 & r) << 6) | ((63 & i) << 0)
											));
								}
							return o;
						}
					}
				]),
				Reader
			);
		})();
		function sort_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var P = (function () {
			function Sort() {
				!(function sort_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Sort);
			}
			return (
				(function sort_createClass(t, e, n) {
					return e && sort_defineProperties(t.prototype, e), n && sort_defineProperties(t, n), t;
				})(Sort, null, [
					{
						key: 'getIndex',
						value: function getIndex(t, e, n) {
							var r = 0,
								i = e.length;
							if (void 0 === n)
								for (; r < i; ) {
									var o = (r + i) >>> 1;
									e[o] < t ? (r = o + 1) : (i = o);
								}
							else
								for (; r < i; ) {
									var a = (r + i) >>> 1;
									n(e[a], t) ? (r = a + 1) : (i = a);
								}
							return r;
						}
					},
					{
						key: 'add',
						value: function add(t, e, n, r) {
							var i = this.getIndex(t, e, n);
							if (void 0 === r) for (; i < e.length && e[i] === t; ) i += 1;
							else for (; i < e.length && r(e[i], t); ) i += 1;
							e.splice(i, 0, t);
						}
					},
					{
						key: 'remove',
						value: function remove(t, e, n, r) {
							var i = this.getIndex(t, e, n),
								o = !1;
							return (
								i < e.length && (void 0 === r && e[i] === t ? (o = !0) : void 0 !== r && r(e[i], t) && (o = !0)),
								o && e.splice(i, 1),
								o
							);
						}
					}
				]),
				Sort
			);
		})();
		function asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function _asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function tile_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var E = (function () {
			function Tile(t) {
				!(function tile_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Tile),
					(this._parent = t),
					(this._children = []),
					(this._active = !1),
					(this._loaded = !1),
					(this._destroyed = !1),
					(this._transitioning = !1);
			}
			return (
				(function tile_createClass(t, e, n) {
					return e && tile_defineProperties(t.prototype, e), n && tile_defineProperties(t, n), t;
				})(Tile, [
					{
						key: 'getParent',
						value: function getParent() {
							return this._parent;
						}
					},
					{
						key: 'forceLoad',
						value: (function () {
							var t = _asyncToGenerator(
								regeneratorRuntime.mark(function _callee() {
									var t = this;
									return regeneratorRuntime.wrap(
										function _callee$(e) {
											for (;;)
												switch ((e.prev = e.next)) {
													case 0:
														return (
															(this._transitioning = !0),
															e.abrupt(
																'return',
																this.load()
																	.then(function () {
																		return (t._loaded = !0), t.activate();
																	})
																	.then(function () {
																		(t._active = !0), (t._transitioning = !1);
																	})
															)
														);
													case 2:
													case 'end':
														return e.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function forceLoad() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'check',
						value: function check() {
							return (
								this._destroyed ||
									this._transitioning ||
									(0 === this._children.length && this.checkSplit()
										? this._split()
										: this._children.length > 0 && this.checkJoin() && this._join()),
								this._transitioning
							);
						}
					},
					{
						key: 'createNewTile',
						value: function createNewTile(t, e, n) {
							return null;
						}
					},
					{
						key: 'checkSplit',
						value: function checkSplit() {
							return !1;
						}
					},
					{
						key: 'checkJoin',
						value: function checkJoin() {
							return !1;
						}
					},
					{
						key: 'load',
						value: (function () {
							var t = _asyncToGenerator(
								regeneratorRuntime.mark(function _callee2() {
									return regeneratorRuntime.wrap(function _callee2$(t) {
										for (;;)
											switch ((t.prev = t.next)) {
												case 0:
												case 'end':
													return t.stop();
											}
									}, _callee2);
								})
							);
							return function load() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'unload',
						value: (function () {
							var t = _asyncToGenerator(
								regeneratorRuntime.mark(function _callee3() {
									return regeneratorRuntime.wrap(function _callee3$(t) {
										for (;;)
											switch ((t.prev = t.next)) {
												case 0:
												case 'end':
													return t.stop();
											}
									}, _callee3);
								})
							);
							return function unload() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'activate',
						value: (function () {
							var t = _asyncToGenerator(
								regeneratorRuntime.mark(function _callee4() {
									return regeneratorRuntime.wrap(function _callee4$(t) {
										for (;;)
											switch ((t.prev = t.next)) {
												case 0:
												case 'end':
													return t.stop();
											}
									}, _callee4);
								})
							);
							return function activate() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'deactivate',
						value: (function () {
							var t = _asyncToGenerator(
								regeneratorRuntime.mark(function _callee5() {
									return regeneratorRuntime.wrap(function _callee5$(t) {
										for (;;)
											switch ((t.prev = t.next)) {
												case 0:
												case 'end':
													return t.stop();
											}
									}, _callee5);
								})
							);
							return function deactivate() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'destroy',
						value: function destroy() {
							var t = this;
							this._destroyed = !0;
							for (var e = 0; e < this._children.length; e++) this._children[e].destroy();
							this._transitioning ||
								(this._active
									? this.deactivate()
											.then(function () {
												t.unload();
											})
											.catch(function (t) {
												throw t;
											})
									: this._loaded && this.unload());
						}
					},
					{
						key: '_split',
						value: function _split() {
							var t = this,
								e = [],
								n = [];
							this._splitAndLoad(e, n),
								Promise.all(e)
									.then(function () {
										for (
											var e = [],
												r = function _loop(r) {
													n[r]._loaded && !n[r]._destroyed
														? e.push(
																n[r]
																	.activate()
																	.then(
																		_asyncToGenerator(
																			regeneratorRuntime.mark(function _callee6() {
																				return regeneratorRuntime.wrap(function _callee6$(e) {
																					for (;;)
																						switch ((e.prev = e.next)) {
																							case 0:
																								if (!t._destroyed) {
																									e.next = 2;
																									break;
																								}
																								return e.abrupt(
																									'return',
																									t
																										.deactivate()
																										.then(function () {
																											t.unload();
																										})
																										.catch(function (t) {
																											throw t;
																										})
																								);
																							case 2:
																								(n[r]._active = !0), (n[r]._transitioning = !1);
																							case 4:
																							case 'end':
																								return e.stop();
																						}
																				}, _callee6);
																			})
																		)
																	)
																	.catch(function (t) {
																		throw t;
																	})
														  )
														: (n[r]._transitioning = !1);
												},
												i = 0;
											i < n.length;
											i++
										)
											r(i);
										return (
											t._active &&
												e.push(
													t
														.deactivate()
														.then(function () {
															t._active = !1;
														})
														.catch(function (t) {
															throw t;
														})
												),
											e
										);
									})
									.then(function () {
										t._loaded
											? t
													.unload()
													.then(function () {
														(t._loaded = !1), (t._transitioning = !1);
													})
													.catch(function (t) {
														throw t;
													})
											: (t._transitioning = !1);
									})
									.catch(function (t) {
										throw t;
									});
						}
					},
					{
						key: '_join',
						value: function _join() {
							var t = this;
							if (!this._checkIfDescendantsAreTransitioning()) {
								var e = [];
								(this._transitioning = !0),
									this._markDescendantsAsTransitioning(e),
									this.load()
										.then(
											_asyncToGenerator(
												regeneratorRuntime.mark(function _callee7() {
													return regeneratorRuntime.wrap(function _callee7$(e) {
														for (;;)
															switch ((e.prev = e.next)) {
																case 0:
																	if (!t._destroyed) {
																		e.next = 2;
																		break;
																	}
																	return e.abrupt('return', t.unload());
																case 2:
																	t._loaded = !0;
																case 3:
																case 'end':
																	return e.stop();
															}
													}, _callee7);
												})
											)
										)
										.then(function () {
											for (
												var n = [],
													r = function _loop2(t) {
														n.push(
															e[t]
																.deactivate()
																.then(function () {
																	e[t]._active = !1;
																})
																.catch(function (t) {
																	throw t;
																})
														);
													},
													i = 0;
												i < e.length;
												i++
											)
												r(i);
											return (
												t._destroyed ||
													n.push(
														t
															.activate()
															.then(
																_asyncToGenerator(
																	regeneratorRuntime.mark(function _callee8() {
																		return regeneratorRuntime.wrap(function _callee8$(e) {
																			for (;;)
																				switch ((e.prev = e.next)) {
																					case 0:
																						if (!t._destroyed) {
																							e.next = 2;
																							break;
																						}
																						return e.abrupt(
																							'return',
																							t
																								.deactivate()
																								.then(function () {
																									t.unload();
																								})
																								.catch(function (t) {
																									throw t;
																								})
																						);
																					case 2:
																						t._active = !0;
																					case 3:
																					case 'end':
																						return e.stop();
																				}
																		}, _callee8);
																	})
																)
															)
															.catch(function (t) {
																throw t;
															})
													),
												Promise.all(n)
											);
										})
										.then(function () {
											for (
												var t = [],
													n = function _loop3(n) {
														t.push(
															e[n]
																.unload()
																.then(function () {
																	e[n]._loaded = !1;
																})
																.catch(function (t) {
																	throw t;
																})
														);
													},
													r = 0;
												r < e.length;
												r++
											)
												n(r);
											return Promise.all(t);
										})
										.then(function () {
											(t._children = []), (t._transitioning = !1);
										})
										.catch(function (t) {
											throw t;
										});
							}
						}
					},
					{
						key: '_splitAndLoad',
						value: function _splitAndLoad(t, e) {
							var n = this;
							this._transitioning = !0;
							for (var r = 0; r < 2; r++)
								for (
									var i = function _loop4(i) {
											var o = n.createNewTile(n, r, i);
											null !== o &&
												(n._children.push(o),
												o.checkSplit()
													? o._splitAndLoad(t, e)
													: ((o._transitioning = !0),
													  t.push(
															o
																.load()
																.then(
																	_asyncToGenerator(
																		regeneratorRuntime.mark(function _callee9() {
																			return regeneratorRuntime.wrap(function _callee9$(t) {
																				for (;;)
																					switch ((t.prev = t.next)) {
																						case 0:
																							if (!o._destroyed) {
																								t.next = 2;
																								break;
																							}
																							return t.abrupt('return', o.unload());
																						case 2:
																							o._loaded = !0;
																						case 3:
																						case 'end':
																							return t.stop();
																					}
																			}, _callee9);
																		})
																	)
																)
																.catch(function (t) {
																	throw t;
																})
													  )),
												e.push(o));
										},
										o = 0;
									o < 2;
									o++
								)
									i(o);
						}
					},
					{
						key: '_checkIfDescendantsAreTransitioning',
						value: function _checkIfDescendantsAreTransitioning() {
							for (var t = 0; t < this._children.length; t++) {
								var e = this._children[t];
								if (e._transitioning) return !0;
								if (e._checkIfDescendantsAreTransitioning()) return !0;
							}
							return !1;
						}
					},
					{
						key: '_markDescendantsAsTransitioning',
						value: function _markDescendantsAsTransitioning(t) {
							for (var e = 0; e < this._children.length; e++) {
								var n = this._children[e];
								(n._transitioning = !0), n._active && t.push(n), n._markDescendantsAsTransitioning(t);
							}
						}
					},
					{
						key: 'children',
						get: function get() {
							return this._children;
						}
					}
				]),
				Tile
			);
		})();
		function time_utils_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var k = (function () {
				function TimeUtils() {
					!(function time_utils_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, TimeUtils);
				}
				return (
					(function time_utils_createClass(t, e, n) {
						return e && time_utils_defineProperties(t.prototype, e), n && time_utils_defineProperties(t, n), t;
					})(TimeUtils, null, [
						{
							key: 'now',
							value: function now() {
								return TimeUtils.unixToEt(Date.now() / 1e3);
							}
						},
						{
							key: 'etToUnix',
							value: function etToUnix(t) {
								for (var e = 0, n = 0; n < O.length; n++) t + 946727957.816 + e >= O[n] + 1 && (e -= 1);
								return t + 946727957.816 + e;
							}
						},
						{
							key: 'unixToEt',
							value: function unixToEt(t) {
								for (var e = 0, n = 0; n < O.length; n++) t >= O[n] + 1 && (e += 1);
								return t - 946727957.816 + e;
							}
						},
						{
							key: 'leapSeconds',
							get: function get() {
								return O;
							}
						}
					]),
					TimeUtils
				);
			})(),
			O = [
				Date.UTC(1972, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1972, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1973, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1974, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1975, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1976, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1977, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1978, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1979, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1981, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1982, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1983, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1985, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1987, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1989, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1990, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1992, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1993, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1994, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1995, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(1997, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(1998, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(2005, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(2008, 11, 31, 23, 59, 59) / 1e3,
				Date.UTC(2012, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(2015, 5, 30, 23, 59, 59) / 1e3,
				Date.UTC(2016, 11, 31, 23, 59, 59) / 1e3
			],
			A = k;
		function aer_typeof(t) {
			return (aer_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function aer_possibleConstructorReturn(t, e) {
			return !e || ('object' !== aer_typeof(e) && 'function' != typeof e)
				? (function aer_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function aer_getPrototypeOf(t) {
			return (aer_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function aer_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function aer_createClass(t, e, n) {
			return e && aer_defineProperties(t.prototype, e), n && aer_defineProperties(t, n), t;
		}
		function aer_setPrototypeOf(t, e) {
			return (aer_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var R = (function (t) {
				function AER() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
						r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
					return (
						(function aer_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, AER),
						((t = aer_possibleConstructorReturn(this, aer_getPrototypeOf(AER).call(this)))._azimuth = e),
						(t._elevation = n),
						(t._range = r),
						t
					);
				}
				return (
					(function aer_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && aer_setPrototypeOf(t, e);
					})(AER, S),
					aer_createClass(AER, null, [
						{
							key: 'pool',
							get: function get() {
								return I;
							}
						}
					]),
					aer_createClass(AER, [
						{
							key: 'toString',
							value: function toString() {
								return arguments.length > 0 && void 0 !== arguments[0] && arguments[0]
									? '[' + T.radToDeg(this._azimuth) + ', ' + T.radToDeg(this._elevation) + ', ' + this._range + ']'
									: '[' + this._azimuth + ', ' + this._elevation + ', ' + this._range + ']';
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(),
									(this._azimuth = t._azimuth),
									(this._elevation = t._elevation),
									(this._range = t._range);
							}
						},
						{
							key: 'set',
							value: function set(t, e, n) {
								this.throwIfFrozen(), (this._azimuth = t), (this._elevation = e), (this._range = n);
							}
						},
						{
							key: 'setFromVector',
							value: function setFromVector(t) {
								this.throwIfFrozen(),
									(this._range = t.magnitude()),
									(this._elevation = Math.asin(t.z / this._range)),
									(this._azimuth = Math.atan2(t.y, t.x));
							}
						},
						{
							key: 'azimuth',
							get: function get() {
								return this._azimuth;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._azimuth = t);
							}
						},
						{
							key: 'elevation',
							get: function get() {
								return this._elevation;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._elevation = t);
							}
						},
						{
							key: 'range',
							get: function get() {
								return this._range;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._range = t);
							}
						}
					]),
					AER
				);
			})(),
			I = new w(R),
			M = R;
		function color_typeof(t) {
			return (color_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function color_possibleConstructorReturn(t, e) {
			return !e || ('object' !== color_typeof(e) && 'function' != typeof e)
				? (function color_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function color_getPrototypeOf(t) {
			return (color_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function color_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function color_createClass(t, e, n) {
			return e && color_defineProperties(t.prototype, e), n && color_defineProperties(t, n), t;
		}
		function color_setPrototypeOf(t, e) {
			return (color_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var L = (function (t) {
				function Color() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1,
						r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,
						i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1;
					return (
						(function color_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, Color),
						((t = color_possibleConstructorReturn(this, color_getPrototypeOf(Color).call(this)))._r = e),
						(t._g = n),
						(t._b = r),
						(t._a = i),
						t
					);
				}
				return (
					(function color_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && color_setPrototypeOf(t, e);
					})(Color, S),
					color_createClass(Color, null, [
						{
							key: 'pool',
							get: function get() {
								return j;
							}
						}
					]),
					color_createClass(Color, [
						{
							key: 'toString',
							value: function toString() {
								return '[' + this._r + ', ' + this._g + ', ' + this._b + ', ' + this._a + ']';
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(), (this._r = t._r), (this._g = t._g), (this._b = t._b), (this._a = t._a);
							}
						},
						{
							key: 'set',
							value: function set(t, e, n) {
								var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1;
								this.throwIfFrozen(), (this._r = t), (this._g = e), (this._b = n), (this._a = r);
							}
						},
						{
							key: 'add',
							value: function add(t, e) {
								this.throwIfFrozen(),
									(this._r = t._r + e._r),
									(this._g = t._g + e._g),
									(this._b = t._b + e._b),
									(this._a = t._a + e._a);
							}
						},
						{
							key: 'sub',
							value: function sub(t, e) {
								this.throwIfFrozen(),
									(this._r = t._r - e._r),
									(this._g = t._g - e._g),
									(this._b = t._b - e._b),
									(this._a = t._a - e._a);
							}
						},
						{
							key: 'mult',
							value: function mult(t, e) {
								this.throwIfFrozen(),
									(this._r = t._r * e),
									(this._g = t._g * e),
									(this._b = t._b * e),
									(this._a = t._a * e);
							}
						},
						{
							key: 'addMult',
							value: function addMult(t, e, n) {
								this.throwIfFrozen(),
									(this._r = t._r + e._r * n),
									(this._g = t._g + e._g * n),
									(this._b = t._b + e._b * n),
									(this._a = t._a + e._a * n);
							}
						},
						{
							key: 'div',
							value: function div(t, e) {
								this.throwIfFrozen(),
									(this._r = t._r / e),
									(this._g = t._g / e),
									(this._b = t._b / e),
									(this._a = t._a / e);
							}
						},
						{
							key: 'scale',
							value: function scale(t, e) {
								this.throwIfFrozen(),
									(this._r = t._r * e._r),
									(this._g = t._g * e._g),
									(this._b = t._b * e._b),
									(this._a = t._a * e._a);
							}
						},
						{
							key: 'value',
							value: function value() {
								return (this._r + this._g + this._b) / 3;
							}
						},
						{
							key: 'min',
							value: function min() {
								return Math.min(this._r, this._g, this._b);
							}
						},
						{
							key: 'max',
							value: function max() {
								return Math.max(this._r, this._g, this._b);
							}
						},
						{
							key: 'lerp',
							value: function lerp(t, e, n) {
								this.throwIfFrozen(),
									(this._r = T.lerp(t._r, e._r, n)),
									(this._g = T.lerp(t._g, e._g, n)),
									(this._b = T.lerp(t._b, e._b, n)),
									(this._a = T.lerp(t._a, e._a, n));
							}
						},
						{
							key: 'r',
							get: function get() {
								return this._r;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._r = t);
							}
						},
						{
							key: 'g',
							get: function get() {
								return this._g;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._g = t);
							}
						},
						{
							key: 'b',
							get: function get() {
								return this._b;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._b = t);
							}
						},
						{
							key: 'a',
							get: function get() {
								return this._a;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._a = t);
							}
						}
					]),
					Color
				);
			})(),
			j = new w(L),
			z = L;
		function fast_map_typeof(t) {
			return (fast_map_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function fast_map_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function fast_map_possibleConstructorReturn(t, e) {
			return !e || ('object' !== fast_map_typeof(e) && 'function' != typeof e)
				? (function fast_map_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function fast_map_getPrototypeOf(t) {
			return (fast_map_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function fast_map_setPrototypeOf(t, e) {
			return (fast_map_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function fast_map_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var N = function Entry(t, e) {
				fast_map_classCallCheck(this, Entry), (this.key = t), (this.value = e);
			},
			F = (function (t) {
				function FastMap(t) {
					var e;
					if (
						(fast_map_classCallCheck(this, FastMap),
						((e = fast_map_possibleConstructorReturn(this, fast_map_getPrototypeOf(FastMap).call(this)))._entries = []),
						(e._keyMap = new Map()),
						void 0 !== t)
					) {
						var n = !0,
							r = !1,
							i = void 0;
						try {
							for (var o, a = t[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
								var s = o.value;
								e._entries.push(new N(s.key, s.value)), e._keyMap.set(s.key, e._entries.length - 1);
							}
						} catch (t) {
							(r = !0), (i = t);
						} finally {
							try {
								n || null == a.return || a.return();
							} finally {
								if (r) throw i;
							}
						}
					}
					return e;
				}
				return (
					(function fast_map_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && fast_map_setPrototypeOf(t, e);
					})(FastMap, b),
					(function fast_map_createClass(t, e, n) {
						return e && fast_map_defineProperties(t.prototype, e), n && fast_map_defineProperties(t, n), t;
					})(FastMap, [
						{
							key: 'has',
							value: function has(t) {
								return this._keyMap.has(t);
							}
						},
						{
							key: 'get',
							value: function get(t) {
								var e = this._keyMap.get(t);
								if (void 0 !== e) return this._entries[e].value;
							}
						},
						{
							key: 'set',
							value: function set(t, e) {
								var n = this._keyMap.get(t);
								void 0 !== n
									? (this._entries[n].value = e)
									: (this._entries.push(new N(t, e)), this._keyMap.set(t, this._entries.length - 1));
							}
						},
						{
							key: 'delete',
							value: function _delete(t) {
								var e = this._keyMap.get(t);
								if (void 0 !== e) {
									this._entries.splice(e, 1), this._keyMap.delete(t);
									var n = !0,
										r = !1,
										i = void 0;
									try {
										for (var o, a = this._keyMap[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
											var s = o.value;
											s[1] > e && this._keyMap.set(s[0], s[1] - 1);
										}
									} catch (t) {
										(r = !0), (i = t);
									} finally {
										try {
											n || null == a.return || a.return();
										} finally {
											if (r) throw i;
										}
									}
									return !0;
								}
								return !1;
							}
						},
						{
							key: 'clear',
							value: function clear() {
								(this._entries = []), this._keyMap.clear();
							}
						},
						{
							key: 'getAt',
							value: function getAt(t) {
								return this._entries[t];
							}
						},
						{
							key: 'size',
							get: function get() {
								return this._entries.length;
							}
						}
					]),
					FastMap
				);
			})();
		function fast_set_typeof(t) {
			return (fast_set_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function fast_set_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function fast_set_possibleConstructorReturn(t, e) {
			return !e || ('object' !== fast_set_typeof(e) && 'function' != typeof e)
				? (function fast_set_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function fast_set_getPrototypeOf(t) {
			return (fast_set_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function fast_set_setPrototypeOf(t, e) {
			return (fast_set_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var D = (function (t) {
			function FastSet(t) {
				var e;
				if (
					((function fast_set_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, FastSet),
					((e = fast_set_possibleConstructorReturn(this, fast_set_getPrototypeOf(FastSet).call(this)))._values = []),
					(e._valueMap = new Map()),
					void 0 !== t)
				) {
					var n = !0,
						r = !1,
						i = void 0;
					try {
						for (var o, a = t[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
							var s = o.value;
							e._values.push(s), e._valueMap.set(s, e._values.length - 1);
						}
					} catch (t) {
						(r = !0), (i = t);
					} finally {
						try {
							n || null == a.return || a.return();
						} finally {
							if (r) throw i;
						}
					}
				}
				return e;
			}
			return (
				(function fast_set_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && fast_set_setPrototypeOf(t, e);
				})(FastSet, b),
				(function fast_set_createClass(t, e, n) {
					return e && fast_set_defineProperties(t.prototype, e), n && fast_set_defineProperties(t, n), t;
				})(FastSet, [
					{
						key: 'has',
						value: function has(t) {
							return this._valueMap.has(t);
						}
					},
					{
						key: 'add',
						value: function add(t) {
							return (
								void 0 === this._valueMap.get(t) &&
									(this._values.push(t), this._valueMap.set(t, this._values.length - 1)),
								this
							);
						}
					},
					{
						key: 'delete',
						value: function _delete(t) {
							var e = this._valueMap.get(t);
							if (void 0 !== e) {
								this._values.splice(e, 1), this._valueMap.delete(t);
								var n = !0,
									r = !1,
									i = void 0;
								try {
									for (var o, a = this._valueMap[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
										var s = o.value;
										s[1] > e && this._valueMap.set(s[0], s[1] - 1);
									}
								} catch (t) {
									(r = !0), (i = t);
								} finally {
									try {
										n || null == a.return || a.return();
									} finally {
										if (r) throw i;
									}
								}
								return !0;
							}
							return !1;
						}
					},
					{
						key: 'clear',
						value: function clear() {
							(this._values = []), this._valueMap.clear();
						}
					},
					{
						key: 'getAt',
						value: function getAt(t) {
							return this._values[t];
						}
					},
					{
						key: 'size',
						get: function get() {
							return this._values.length;
						}
					}
				]),
				FastSet
			);
		})();
		function geometry_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var U = (function () {
			function Geometry() {
				!(function geometry_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Geometry);
			}
			return (
				(function geometry_createClass(t, e, n) {
					return e && geometry_defineProperties(t.prototype, e), n && geometry_defineProperties(t, n), t;
				})(Geometry, null, [
					{
						key: 'getLineSphereIntersectionWithSphereAtOrigin',
						value: function getLineSphereIntersectionWithSphereAtOrigin(t, e, n) {
							var r = t.dot(t),
								i = t.dot(e),
								o = e.dot(e),
								a = i * i + (n * n - r) * o;
							return a < 0 ? Number.NaN : (-i - Math.sqrt(a)) / o;
						}
					},
					{
						key: 'getLineSphereIntersectionWithLineStartAtOrigin',
						value: function getLineSphereIntersectionWithLineStartAtOrigin(t, e, n, r) {
							var i = e.dot(e),
								o = e.dot(n),
								a = o * o + (r * r - n.dot(n)) * i;
							if (a < 0) t.min = t.max = Number.NaN;
							else {
								var s = Math.sqrt(a);
								(t.min = (o - s) / i), (t.max = (o + s) / i);
							}
						}
					}
				]),
				Geometry
			);
		})();
		function interval_typeof(t) {
			return (interval_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function interval_possibleConstructorReturn(t, e) {
			return !e || ('object' !== interval_typeof(e) && 'function' != typeof e)
				? (function interval_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function interval_getPrototypeOf(t) {
			return (interval_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function interval_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function interval_createClass(t, e, n) {
			return e && interval_defineProperties(t.prototype, e), n && interval_defineProperties(t, n), t;
		}
		function interval_setPrototypeOf(t, e) {
			return (interval_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var V = (function (t) {
				function Interval() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
					return (
						(function interval_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, Interval),
						((t = interval_possibleConstructorReturn(this, interval_getPrototypeOf(Interval).call(this)))._min = e),
						(t._max = n),
						t
					);
				}
				return (
					(function interval_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && interval_setPrototypeOf(t, e);
					})(Interval, S),
					interval_createClass(Interval, null, [
						{
							key: 'pool',
							get: function get() {
								return B;
							}
						},
						{
							key: 'Infinite',
							get: function get() {
								return G;
							}
						}
					]),
					interval_createClass(Interval, [
						{
							key: 'toString',
							value: function toString() {
								return '[' + this._min + ', ' + this._max + ']';
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(), (this._min = t._min), (this._max = t._max);
							}
						},
						{
							key: 'set',
							value: function set(t, e) {
								this.throwIfFrozen(), (this._min = t), (this._max = e);
							}
						},
						{
							key: 'length',
							value: function length() {
								return this._max - this._min;
							}
						},
						{
							key: 'clamp',
							value: function clamp(t) {
								return Math.min(Math.max(this._min, t), this._max);
							}
						},
						{
							key: 'contains',
							value: function contains(t) {
								return this._min <= t && t < this._max;
							}
						},
						{
							key: 'intersects',
							value: function intersects(t) {
								return this._min < t._max && t._min < this._max;
							}
						},
						{
							key: 'intersection',
							value: function intersection(t, e) {
								this.throwIfFrozen(),
									(this._min = Math.max(t._min, e._min)),
									(this._max = Math.min(t._max, e._max)),
									this._max < this._min && (this._max = this._min);
							}
						},
						{
							key: 'union',
							value: function union(t, e) {
								this.throwIfFrozen(), (this._min = Math.min(t._min, e._min)), (this._max = Math.max(t._max, e._max));
							}
						},
						{
							key: 'min',
							get: function get() {
								return this._min;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._min = t);
							}
						},
						{
							key: 'max',
							get: function get() {
								return this._max;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._max = t);
							}
						}
					]),
					Interval
				);
			})(),
			B = new w(V),
			G = new V(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY);
		G.freeze();
		var J = V;
		function orbital_elements_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var $ = (function () {
			function OrbitalElements() {
				!(function orbital_elements_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, OrbitalElements),
					(this.epoch = 0),
					(this.eccentricity = 0),
					(this.semiMajorAxis = 0),
					(this.meanAngularMotion = 0),
					(this.meanAnomalyAtEpoch = 0),
					(this.orbitOrientation = new tt());
			}
			return (
				(function orbital_elements_createClass(t, e, n) {
					return (
						e && orbital_elements_defineProperties(t.prototype, e), n && orbital_elements_defineProperties(t, n), t
					);
				})(OrbitalElements, [
					{
						key: 'copy',
						value: function copy(t) {
							(this.epoch = t.epoch),
								(this.eccentricity = t.eccentricity),
								(this.semiMajorAxis = t.semiMajorAxis),
								(this.meanAnomalyAtEpoch = t.meanAnomalyAtEpoch),
								(this.meanAngularMotion = t.meanAngularMotion),
								this.orbitOrientation.copy(t.orbitOrientation);
						}
					},
					{
						key: 'project',
						value: function project(t, e, n) {
							var r = this.meanAnomalyAtEpoch + this.meanAngularMotion * (n - this.epoch);
							if ((this.eccentricity < 1 && (r = T.wrap(r, -T.pi, +T.pi)), this.eccentricity < 1)) {
								var i = r;
								this.eccentricity >= 0.8 && (i = Math.sign(r) * T.pi);
								for (var o = 0; o < 20; o++) {
									var a = (i - this.eccentricity * Math.sin(i) - r) / (this.eccentricity * Math.cos(i) - 1);
									if (((i += a), Math.abs(a) < 0.00174532925)) break;
								}
								var s = this.semiMajorAxis * (1 - this.eccentricity * Math.cos(i)),
									l = (this.meanAngularMotion * this.semiMajorAxis * this.semiMajorAxis) / s;
								(t.x = this.semiMajorAxis * (Math.cos(i) - this.eccentricity)),
									(t.y = this.semiMajorAxis * Math.sqrt(1 - this.eccentricity * this.eccentricity) * Math.sin(i)),
									(e.x = -l * Math.sin(i)),
									(e.y = l * Math.sqrt(1 - this.eccentricity * this.eccentricity) * Math.cos(i));
							} else {
								var c = Math.log((2 * Math.abs(r)) / Math.E + 1.8);
								this.eccentricity <= 1.2 && (c = Math.log((2 * Math.abs(r)) / Math.E + 1.8)), r < 0 && (c *= -1);
								for (var u = 0; u < 20; u++) {
									var _ = (c - this.eccentricity * Math.sinh(c) + r) / (this.eccentricity * Math.cosh(c) - 1);
									if (((c += _), Math.abs(_) < 0.00174532925)) break;
								}
								var p = -this.semiMajorAxis * (1 - this.eccentricity * Math.cosh(c)),
									h = (this.meanAngularMotion * this.semiMajorAxis * this.semiMajorAxis) / p;
								(t.x = this.semiMajorAxis * (this.eccentricity - Math.cosh(c))),
									(t.y = this.semiMajorAxis * Math.sqrt(this.eccentricity * this.eccentricity - 1) * Math.sinh(c)),
									(e.x = -h * Math.sinh(c)),
									(e.y = h * Math.sqrt(this.eccentricity * this.eccentricity - 1) * Math.cosh(c));
							}
							(t.z = 0), (e.z = 0), t.rotate(this.orbitOrientation, t), e.rotate(this.orbitOrientation, e);
						}
					},
					{
						key: 'getInclination',
						value: function getInclination() {
							var t = yt.pool.get();
							this.orbitOrientation.getAxis(t, 2);
							var e = t.angle(yt.ZAxis);
							return yt.pool.release(t), e;
						}
					},
					{
						key: 'getLongitudeOfAscendingNode',
						value: function getLongitudeOfAscendingNode() {
							var t = yt.pool.get();
							this.orbitOrientation.getAxis(t, 2);
							var e = Math.atan2(t.x, -t.y);
							return yt.pool.release(t), T.wrap(e, 0, T.twoPi);
						}
					},
					{
						key: 'getArgumentOfPeriapsis',
						value: function getArgumentOfPeriapsis() {
							var t = yt.pool.get(),
								e = yt.pool.get();
							this.orbitOrientation.getAxis(t, 2), t.set(-t.y, t.x, 0), this.orbitOrientation.getAxis(e, 0);
							var n = t.angle(e);
							return yt.pool.release(e), yt.pool.release(t), T.wrap(n, 0, T.twoPi);
						}
					},
					{
						key: 'setOrbitOrientationFromElements',
						value: function setOrbitOrientationFromElements(t, e, n) {
							var r = yt.pool.get(),
								i = yt.pool.get(),
								o = tt.pool.get();
							r.set(Math.cos(e), Math.sin(e), 0),
								i.set(Math.sin(e) * Math.sin(t), -Math.cos(e) * Math.sin(t), Math.cos(t)),
								this.orbitOrientation.setFromAxes(r, void 0, i),
								o.setFromAxisAngle(i, n),
								this.orbitOrientation.mult(o, this.orbitOrientation),
								tt.pool.release(o),
								yt.pool.release(i),
								yt.pool.release(r);
						}
					},
					{
						key: 'setFromPositionAndVelocity',
						value: function setFromPositionAndVelocity(t, e, n, r) {
							var i = 1 / r;
							this.epoch = n;
							var o = yt.pool.get();
							o.cross(t, e);
							var a = yt.pool.get(),
								s = yt.pool.get();
							s.normalize(t), a.cross(e, o), a.mult(a, i), a.sub(a, s), (this.eccentricity = a.magnitude());
							var l = o.dot(o) * i;
							(this.semiMajorAxis = l / (1 - this.eccentricity * this.eccentricity)),
								this.eccentricity > 1 && (this.semiMajorAxis *= -1);
							var c = Math.acos(T.clamp(a.dot(s) / this.eccentricity, -1, 1));
							t.dot(e) < 0 && (c *= -1),
								c < -Math.PI && (c += T.twoPi),
								c >= Math.PI && (c -= T.twoPi),
								a.normalize(a),
								o.normalize(o),
								this.orbitOrientation.setFromAxes(a, void 0, o),
								yt.pool.release(s),
								yt.pool.release(o),
								yt.pool.release(a);
							var u = 0;
							if (this.eccentricity < 1) {
								for (
									u = 2 * Math.atan2(Math.tan(c / 2), Math.sqrt((1 + this.eccentricity) / (1 - this.eccentricity))),
										this.meanAnomalyAtEpoch = u - this.eccentricity * Math.sin(u);
									u < -Math.PI;

								)
									u += T.twoPi;
								for (; u >= Math.PI; ) u -= T.twoPi;
								for (; this.meanAnomalyAtEpoch < -Math.PI; ) this.meanAnomalyAtEpoch += T.twoPi;
								for (; this.meanAnomalyAtEpoch >= Math.PI; ) this.meanAnomalyAtEpoch -= T.twoPi;
							} else
								(u = 2 * Math.atanh(Math.sqrt((this.eccentricity - 1) / (this.eccentricity + 1)) * Math.tan(c / 2))),
									(this.meanAnomalyAtEpoch = this.eccentricity * Math.sinh(u) - u);
							this.meanAngularMotion = Math.sqrt(r / (this.semiMajorAxis * this.semiMajorAxis * this.semiMajorAxis));
						}
					}
				]),
				OrbitalElements
			);
		})();
		function rect_typeof(t) {
			return (rect_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function rect_possibleConstructorReturn(t, e) {
			return !e || ('object' !== rect_typeof(e) && 'function' != typeof e)
				? (function rect_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function rect_getPrototypeOf(t) {
			return (rect_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function rect_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function rect_createClass(t, e, n) {
			return e && rect_defineProperties(t.prototype, e), n && rect_defineProperties(t, n), t;
		}
		function rect_setPrototypeOf(t, e) {
			return (rect_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var H = (function (t) {
				function Rect() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
						r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
						i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
					return (
						(function rect_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, Rect),
						((t = rect_possibleConstructorReturn(this, rect_getPrototypeOf(Rect).call(this)))._origin = new st(e, n)),
						(t._size = new st(r, i)),
						t
					);
				}
				return (
					(function rect_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && rect_setPrototypeOf(t, e);
					})(Rect, S),
					rect_createClass(Rect, null, [
						{
							key: 'pool',
							get: function get() {
								return q;
							}
						}
					]),
					rect_createClass(Rect, [
						{
							key: 'freeze',
							value: function freeze() {
								this._origin.freeze(), this._size.freeze();
							}
						},
						{
							key: 'thaw',
							value: function thaw() {
								this._origin.thaw(), this._size.thaw();
							}
						},
						{
							key: 'toString',
							value: function toString() {
								return (
									'[Origin: (' +
									this._origin.x +
									', ' +
									this._origin.y +
									'), Size: (' +
									this._size.x +
									', ' +
									this._size.y +
									')]'
								);
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this._origin.copy(t._origin), this._size.copy(t._size);
							}
						},
						{
							key: 'set',
							value: function set(t, e, n, r) {
								this._origin.set(t, e), this._size.set(n, r);
							}
						},
						{
							key: 'contains',
							value: function contains(t) {
								return (
									this._origin.x <= t.x &&
									t.x < this._origin.x + this._size.x &&
									this._origin.y <= t.y &&
									t.y < this._origin.y + this._size.y
								);
							}
						},
						{
							key: 'intersects',
							value: function intersects(t) {
								return (
									this._origin.x + this._size.x > t._origin.x &&
									t._origin.x + t._size.x > this._origin.x &&
									this._origin.y + this._size.y > t._origin.y &&
									t._origin.y + t._size.y > this._origin.y
								);
							}
						},
						{
							key: 'origin',
							get: function get() {
								return this._origin;
							}
						},
						{
							key: 'size',
							get: function get() {
								return this._size;
							}
						}
					]),
					Rect
				);
			})(),
			q = new w(H),
			Z = H;
		function spheroid_typeof(t) {
			return (spheroid_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function spheroid_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function spheroid_possibleConstructorReturn(t, e) {
			return !e || ('object' !== spheroid_typeof(e) && 'function' != typeof e)
				? (function spheroid_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function spheroid_getPrototypeOf(t) {
			return (spheroid_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function spheroid_setPrototypeOf(t, e) {
			return (spheroid_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Y = (function (t) {
			function Spheroid(t, e) {
				var n;
				return (
					(function spheroid_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Spheroid),
					((n = spheroid_possibleConstructorReturn(
						this,
						spheroid_getPrototypeOf(Spheroid).call(this)
					))._equatorialRadius = t),
					(n._polarRadius = e),
					n
				);
			}
			return (
				(function spheroid_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && spheroid_setPrototypeOf(t, e);
				})(Spheroid, S),
				(function spheroid_createClass(t, e, n) {
					return e && spheroid_defineProperties(t.prototype, e), n && spheroid_defineProperties(t, n), t;
				})(Spheroid, [
					{
						key: 'xyzFromLLA',
						value: function xyzFromLLA(t, e) {
							var n = Math.cos(e.lat),
								r = Math.sin(e.lat);
							if (e.planetographic) {
								var i = 1 - (this._polarRadius * this._polarRadius) / (this._equatorialRadius * this._equatorialRadius),
									o = this._equatorialRadius / Math.sqrt(1 - i * r * r);
								(t.x = (o + e.alt) * n * Math.cos(e.lon)),
									(t.y = (o + e.alt) * n * Math.sin(e.lon)),
									(t.z = ((1 - i) * o + e.alt) * r);
							} else {
								var a = this._equatorialRadius,
									s = this._polarRadius,
									l = (a * s) / Math.sqrt(s * s * n * n + a * a * r * r);
								(t.x = (l + e.alt) * n * Math.cos(e.lon)),
									(t.y = (l + e.alt) * n * Math.sin(e.lon)),
									(t.z = (l + e.alt) * r);
							}
						}
					},
					{
						key: 'llaFromXYZ',
						value: function llaFromXYZ(t, e, n) {
							if (n) {
								t.lon = Math.atan2(e.y, e.x);
								var r = e.magnitudeXY(),
									i = 1 - (this._polarRadius * this._polarRadius) / (this._equatorialRadius * this._equatorialRadius);
								t.lat = Math.atan(e.z / ((1 - i) * r));
								for (var o = 0, a = 0; a < 5; a++) {
									var s = Math.sin(t.lat);
									(o = 1 / Math.sqrt(1 - i * s * s)),
										(t.lat = Math.atan((e.z + this._equatorialRadius * o * i * s) / r));
								}
								t.alt = r / Math.cos(t.lat) - this._equatorialRadius * o;
							} else {
								var l = e.magnitudeXY();
								(t.lon = Math.atan2(e.y, e.x)), (t.lat = Math.atan(e.z / l));
								var c = Math.cos(t.lat),
									u = Math.sin(t.lat),
									_ = this._equatorialRadius,
									p = this._polarRadius,
									h = (_ * p) / Math.sqrt(p * p * c * c + _ * _ * u * u);
								t.alt = e.magnitude() - h;
							}
							t.planetographic = n;
						}
					},
					{
						key: 'llaToggleGraphicCentric',
						value: function llaToggleGraphicCentric(t, e) {
							var n = yt.pool.get();
							this.xyzFromLLA(n, e), this.llaFromXYZ(t, n, !e.planetographic), yt.pool.release(n);
						}
					},
					{
						key: 'upFromLLA',
						value: function upFromLLA(t, e) {
							var n = Et.pool.get();
							e.planetographic ? n.copy(e) : this.llaToggleGraphicCentric(n, e),
								(t.x = Math.cos(n.lat) * Math.cos(n.lon)),
								(t.y = Math.cos(n.lat) * Math.sin(n.lon)),
								(t.z = Math.sin(n.lat)),
								Et.pool.release(n);
						}
					},
					{
						key: 'eastFromLLA',
						value: function eastFromLLA(t, e) {
							(t.x = -Math.sin(e.lon)), (t.y = Math.cos(e.lon)), (t.z = 0);
						}
					},
					{
						key: 'northFromLLA',
						value: function northFromLLA(t, e) {
							var n = Et.pool.get();
							e.planetographic ? n.copy(e) : this.llaToggleGraphicCentric(n, e),
								(t.x = -Math.sin(n.lat) * Math.cos(n.lon)),
								(t.y = -Math.sin(n.lat) * Math.sin(n.lon)),
								(t.z = Math.cos(n.lat)),
								Et.pool.release(n);
						}
					},
					{
						key: 'orientationFromLLA',
						value: function orientationFromLLA(t, e) {
							var n = Et.pool.get();
							e.planetographic ? n.copy(e) : this.llaToggleGraphicCentric(n, e);
							var r = Math.sin(n.lat),
								i = Math.sin(n.lon),
								o = Math.cos(n.lon);
							(t.w = 0.5 * Math.sqrt((1 + r) * (1 - i))),
								(t.x = 0.5 * Math.sqrt((1 - r) * (1 - i))),
								(t.y = 0.5 * Math.sqrt((1 - r) * (1 + i)) * Math.sign(o)),
								(t.z = 0.5 * Math.sqrt((1 + r) * (1 + i)) * Math.sign(o)),
								Et.pool.release(n);
						}
					},
					{
						key: 'aerFromXYZRelToLLA',
						value: function aerFromXYZRelToLLA(t, e, n) {
							var r = yt.pool.get();
							this.xyzFromLLA(r, n);
							var i = Et.pool.get();
							n.planetographic ? i.copy(n) : this.llaFromXYZ(i, r, !0),
								r.sub(e, r),
								(t.range = r.magnitude()),
								r.mult(r, 1 / t.range);
							var o = yt.pool.get();
							this.upFromLLA(o, i);
							var a = r.dot(o);
							(t.elevation = T.halfPi - Math.acos(a)), r.addMult(r, o, -a), yt.pool.release(o);
							var s = yt.pool.get();
							this.northFromLLA(s, i);
							var l = yt.pool.get();
							this.eastFromLLA(l, i),
								(t.azimuth = Math.atan2(r.dot(l), r.dot(s))),
								yt.pool.release(s),
								yt.pool.release(l),
								Et.pool.release(i),
								yt.pool.release(r);
						}
					},
					{
						key: 'getRayIntersection',
						value: function getRayIntersection(t, e, n) {
							var r = this.equatorialRadius / this.polarRadius,
								i = yt.pool.get(),
								o = yt.pool.get();
							i.set(e.x, e.y, e.z * r), o.set(n.x, n.y, n.z * r);
							var a = U.getLineSphereIntersectionWithSphereAtOrigin(i, o, this.equatorialRadius);
							t.addMult(i, o, a), yt.pool.release(i), yt.pool.release(o), (t.z /= r);
						}
					},
					{
						key: 'equatorialRadius',
						get: function get() {
							return this._equatorialRadius;
						},
						set: function set(t) {
							this.throwIfFrozen(), (this._equatorialRadius = t);
						}
					},
					{
						key: 'polarRadius',
						get: function get() {
							return this._polarRadius;
						},
						set: function set(t) {
							this.throwIfFrozen(), (this._polarRadius = t);
						}
					}
				]),
				Spheroid
			);
		})();
		function quaternion_typeof(t) {
			return (quaternion_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function quaternion_possibleConstructorReturn(t, e) {
			return !e || ('object' !== quaternion_typeof(e) && 'function' != typeof e)
				? (function quaternion_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function quaternion_getPrototypeOf(t) {
			return (quaternion_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function quaternion_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function quaternion_createClass(t, e, n) {
			return e && quaternion_defineProperties(t.prototype, e), n && quaternion_defineProperties(t, n), t;
		}
		function quaternion_setPrototypeOf(t, e) {
			return (quaternion_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var X = (function (t) {
				function Quaternion() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
						r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
						i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
					return (
						(function quaternion_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, Quaternion),
						((t = quaternion_possibleConstructorReturn(this, quaternion_getPrototypeOf(Quaternion).call(this)))._w = e),
						(t._x = n),
						(t._y = r),
						(t._z = i),
						t
					);
				}
				return (
					(function quaternion_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && quaternion_setPrototypeOf(t, e);
					})(Quaternion, S),
					quaternion_createClass(Quaternion, null, [
						{
							key: 'pool',
							get: function get() {
								return K;
							}
						},
						{
							key: 'NaN',
							get: function get() {
								return Q;
							}
						},
						{
							key: 'Identity',
							get: function get() {
								return W;
							}
						}
					]),
					quaternion_createClass(Quaternion, [
						{
							key: 'getAngle',
							value: function getAngle() {
								return 2 * Math.acos(this._w);
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(), (this._w = t._w), (this._x = t._x), (this._y = t._y), (this._z = t._z);
							}
						},
						{
							key: 'copyFromThreeJs',
							value: function copyFromThreeJs(t) {
								this.throwIfFrozen(), (this._w = t.w), (this._x = t.x), (this._y = t.y), (this._z = t.z);
							}
						},
						{
							key: 'set',
							value: function set(t, e, n, r) {
								this.throwIfFrozen(), (this._w = t), (this._x = e), (this._y = n), (this._z = r);
							}
						},
						{
							key: 'setFromAxisAngle',
							value: function setFromAxisAngle(t, e) {
								this.throwIfFrozen();
								var n = Math.sin(e / 2);
								(this._w = Math.cos(e / 2)), (this._x = n * t.x), (this._y = n * t.y), (this._z = n * t.z);
							}
						},
						{
							key: 'setFromAxes',
							value: function setFromAxes(t, e, n) {
								var r;
								this.throwIfFrozen(),
									void 0 === t
										? ((r = t = yt.pool.get()), t.cross(e, n))
										: void 0 === e
										? ((r = e = yt.pool.get()), e.cross(n, t))
										: void 0 === n && ((r = n = yt.pool.get()), n.cross(t, e));
								var i = t.x + e.y + n.z;
								if (i > 0) {
									var o = 2 * Math.sqrt(i + 1);
									(this._w = 0.25 * o),
										(this._x = (e.z - n.y) / o),
										(this._y = (n.x - t.z) / o),
										(this._z = (t.y - e.x) / o);
								} else if (t.x > e.y && t.x > n.z) {
									var a = 2 * Math.sqrt(1 + t.x - e.y - n.z);
									(this._w = (e.z - n.y) / a),
										(this._x = 0.25 * a),
										(this._y = (e.x + t.y) / a),
										(this._z = (n.x + t.z) / a);
								} else if (e.y > n.z) {
									var s = 2 * Math.sqrt(1 + e.y - n.z - t.x);
									(this._w = (n.x - t.z) / s),
										(this._x = (e.x + t.y) / s),
										(this._y = 0.25 * s),
										(this._z = (n.y + e.z) / s);
								} else {
									var l = 2 * Math.sqrt(1 + n.z - t.x - e.y);
									(this._w = (t.y - e.x) / l),
										(this._x = (n.x + t.z) / l),
										(this._y = (n.y + e.z) / l),
										(this._z = 0.25 * l);
								}
								yt.pool.release(r);
							}
						},
						{
							key: 'setFromEuler',
							value: function setFromEuler(t, e, n) {
								this.throwIfFrozen();
								var r = 0.5 * t,
									i = 0.5 * e,
									o = 0.5 * n,
									a = Math.cos(r),
									s = Math.sin(r),
									l = Math.cos(i),
									c = Math.sin(i),
									u = Math.cos(o),
									_ = Math.sin(o);
								(this._w = a * l * u + s * c * _),
									(this._x = s * l * u - a * c * _),
									(this._y = a * c * u + s * l * _),
									(this._z = a * l * _ - s * c * u);
							}
						},
						{
							key: 'setFromVectorFromTo',
							value: function setFromVectorFromTo(t, e) {
								var n = yt.pool.get(),
									r = t.dot(e);
								if (r >= 1) this.set(1, 0, 0, 0);
								else if (r <= -1) this.set(0, 1, 0, 0);
								else {
									n.cross(t, e), n.normalize(n);
									var i = Math.acos(r);
									this.setFromAxisAngle(n, i);
								}
								yt.pool.release(n);
							}
						},
						{
							key: 'setFromAxis',
							value: function setFromAxis(t, e) {
								var n = yt.pool.get(),
									r = yt.pool.get();
								n.normalize(t),
									r.cross(n, yt.XAxis),
									r.isZero() && r.cross(n, yt.YAxis),
									r.normalize(r),
									0 === e
										? this.setFromAxes(n, r, void 0)
										: 1 === e
										? this.setFromAxes(void 0, n, r)
										: 2 === e && this.setFromAxes(r, void 0, n),
									yt.pool.release(n),
									yt.pool.release(r);
							}
						},
						{
							key: 'toString',
							value: function toString() {
								return '[' + this._w + ', ' + this._x + ', ' + this._y + ', ' + this._z + ']';
							}
						},
						{
							key: 'isNaN',
							value: function isNaN() {
								return !(this._w <= 0 || this._w > 0);
							}
						},
						{
							key: 'magnitude',
							value: function magnitude() {
								return Math.sqrt(this._w * this._w + this._x * this._x + this._y * this._y + this._z * this._z);
							}
						},
						{
							key: 'normalize',
							value: function normalize(t) {
								this.throwIfFrozen();
								var e = t.magnitude();
								e > 0 && ((this._w = t._w / e), (this._x = t._x / e), (this._y = t._y / e), (this._z = t._z / e));
							}
						},
						{
							key: 'inverse',
							value: function inverse(t) {
								this.throwIfFrozen(), (this._w = t._w), (this._x = -t._x), (this._y = -t._y), (this._z = -t._z);
							}
						},
						{
							key: 'mult',
							value: function mult(t, e) {
								this.throwIfFrozen();
								var n = Quaternion.pool.get();
								(n._w = t._w * e._w - t._x * e._x - t._y * e._y - t._z * e._z),
									(n._x = t._w * e._x + t._x * e._w + t._y * e._z - t._z * e._y),
									(n._y = t._w * e._y - t._x * e._z + t._y * e._w + t._z * e._x),
									(n._z = t._w * e._z + t._x * e._y - t._y * e._x + t._z * e._w),
									this.copy(n),
									Quaternion.pool.release(n);
							}
						},
						{
							key: 'multInverseL',
							value: function multInverseL(t, e) {
								this.throwIfFrozen();
								var n = Quaternion.pool.get();
								(n._w = t._w * e._w + t._x * e._x + t._y * e._y + t._z * e._z),
									(n._x = t._w * e._x - t._x * e._w - t._y * e._z + t._z * e._y),
									(n._y = t._w * e._y + t._x * e._z - t._y * e._w - t._z * e._x),
									(n._z = t._w * e._z - t._x * e._y + t._y * e._x - t._z * e._w),
									this.copy(n),
									Quaternion.pool.release(n);
							}
						},
						{
							key: 'multInverseR',
							value: function multInverseR(t, e) {
								this.throwIfFrozen();
								var n = Quaternion.pool.get();
								(n._w = +t._w * e._w + t._x * e._x + t._y * e._y + t._z * e._z),
									(n._x = -t._w * e._x + t._x * e._w - t._y * e._z + t._z * e._y),
									(n._y = -t._w * e._y + t._x * e._z + t._y * e._w - t._z * e._x),
									(n._z = -t._w * e._z - t._x * e._y + t._y * e._x + t._z * e._w),
									this.copy(n),
									Quaternion.pool.release(n);
							}
						},
						{
							key: 'scaleAngle',
							value: function scaleAngle(t, e) {
								this.throwIfFrozen();
								var n = Math.acos(t._w),
									r = Math.sin(n);
								if (0 !== r) {
									var i = Math.sin(n * e);
									(this._w = Math.cos(n * e)),
										(this._x = (t._x / r) * i),
										(this._y = (t._y / r) * i),
										(this._z = (t._z / r) * i);
								} else this.copy(t);
							}
						},
						{
							key: 'angle',
							value: function angle(t) {
								return 2 * Math.acos(this._w * t._w + this._x * t._x + this._y * t._y + this._z * t._z);
							}
						},
						{
							key: 'slerp',
							value: function slerp(t, e, n) {
								this.throwIfFrozen();
								var r = t._w * e._w + t._x * e._x + t._y * e._y + t._z * e._z,
									i = 1;
								if ((r < 0 && ((i = -1), (r = -r)), r <= 0.9995)) {
									var o = Math.acos(r),
										a = (i * Math.sin((1 - n) * o)) / Math.sin(o),
										s = Math.sin(n * o) / Math.sin(o);
									(this._w = a * t._w + s * e._w),
										(this._x = a * t._x + s * e._x),
										(this._y = a * t._y + s * e._y),
										(this._z = a * t._z + s * e._z);
								} else {
									var l = i * (1 - n),
										c = n;
									(this._w = l * t._w + c * e._w),
										(this._x = l * t._x + c * e._x),
										(this._y = l * t._y + c * e._y),
										(this._z = l * t._z + c * e._z),
										this.normalize(this);
								}
							}
						},
						{
							key: 'getAxis',
							value: function getAxis(t, e) {
								void 0 === e
									? (t.set(this._x, this._y, this._z), t.normalize(t))
									: 0 === e
									? ((t.x = this._w * this._w + this._x * this._x - this._y * this._y - this._z * this._z),
									  (t.y = 2 * this._w * this._z + 2 * this._x * this._y),
									  (t.z = 2 * this._x * this._z - 2 * this._w * this._y))
									: 1 === e
									? ((t.x = 2 * this._y * this._x - 2 * this._w * this._z),
									  (t.y = this._w * this._w - this._x * this._x + this._y * this._y - this._z * this._z),
									  (t.z = 2 * this._x * this._w + 2 * this._y * this._z))
									: 2 === e &&
									  ((t.x = 2 * this._y * this._w + 2 * this._z * this._x),
									  (t.y = 2 * this._z * this._y - 2 * this._w * this._x),
									  (t.z = this._w * this._w - this._x * this._x - this._y * this._y + this._z * this._z));
							}
						},
						{
							key: 'w',
							get: function get() {
								return this._w;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._w = t);
							}
						},
						{
							key: 'x',
							get: function get() {
								return this._x;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._x = t);
							}
						},
						{
							key: 'y',
							get: function get() {
								return this._y;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._y = t);
							}
						},
						{
							key: 'z',
							get: function get() {
								return this._z;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._z = t);
							}
						}
					]),
					Quaternion
				);
			})(),
			K = new w(X),
			W = new X();
		W.freeze();
		var Q = new X(Number.NaN, Number.NaN, Number.NaN, Number.NaN);
		Q.freeze();
		var tt = X;
		function vector2_typeof(t) {
			return (vector2_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function vector2_possibleConstructorReturn(t, e) {
			return !e || ('object' !== vector2_typeof(e) && 'function' != typeof e)
				? (function vector2_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function vector2_getPrototypeOf(t) {
			return (vector2_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function vector2_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function vector2_createClass(t, e, n) {
			return e && vector2_defineProperties(t.prototype, e), n && vector2_defineProperties(t, n), t;
		}
		function vector2_setPrototypeOf(t, e) {
			return (vector2_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var et = (function (t) {
				function Vector2() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
					return (
						(function vector2_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, Vector2),
						((t = vector2_possibleConstructorReturn(this, vector2_getPrototypeOf(Vector2).call(this)))._x = e),
						(t._y = n),
						t
					);
				}
				return (
					(function vector2_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && vector2_setPrototypeOf(t, e);
					})(Vector2, S),
					vector2_createClass(Vector2, null, [
						{
							key: 'pool',
							get: function get() {
								return nt;
							}
						},
						{
							key: 'NaN',
							get: function get() {
								return at;
							}
						},
						{
							key: 'Zero',
							get: function get() {
								return rt;
							}
						},
						{
							key: 'XAxis',
							get: function get() {
								return it;
							}
						},
						{
							key: 'YAxis',
							get: function get() {
								return ot;
							}
						}
					]),
					vector2_createClass(Vector2, [
						{
							key: 'toString',
							value: function toString() {
								return '[' + this._x + ', ' + this._y + ']';
							}
						},
						{
							key: 'equals',
							value: function equals(t) {
								return this._x === t._x && this._y === t._y;
							}
						},
						{
							key: 'isZero',
							value: function isZero() {
								return 0 === this._x && 0 === this._y;
							}
						},
						{
							key: 'isNaN',
							value: function isNaN() {
								return !((this._x <= 0 || this._x > 0) && (this._y <= 0 || this._y > 0));
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(), (this._x = t._x), (this._y = t._y);
							}
						},
						{
							key: 'copyFromThreeJs',
							value: function copyFromThreeJs(t) {
								this.throwIfFrozen(), (this._x = t.x), (this._y = t.y);
							}
						},
						{
							key: 'set',
							value: function set(t, e) {
								this.throwIfFrozen(), (this._x = t), (this._y = e);
							}
						},
						{
							key: 'neg',
							value: function neg(t) {
								this.throwIfFrozen(), (this._x = -t._x), (this._y = -t._y);
							}
						},
						{
							key: 'add',
							value: function add(t, e) {
								this.throwIfFrozen(), (this._x = t._x + e._x), (this._y = t._y + e._y);
							}
						},
						{
							key: 'sub',
							value: function sub(t, e) {
								this.throwIfFrozen(), (this._x = t._x - e._x), (this._y = t._y - e._y);
							}
						},
						{
							key: 'mult',
							value: function mult(t, e) {
								this.throwIfFrozen(), (this._x = t._x * e), (this._y = t._y * e);
							}
						},
						{
							key: 'addMult',
							value: function addMult(t, e, n) {
								this.throwIfFrozen(), (this._x = t._x + e._x * n), (this._y = t._y + e._y * n);
							}
						},
						{
							key: 'div',
							value: function div(t, e) {
								this.throwIfFrozen(), (this._x = t._x / e), (this._y = t._y / e);
							}
						},
						{
							key: 'scale',
							value: function scale(t, e) {
								this.throwIfFrozen(), (this._x = t._x * e._x), (this._y = t._y * e._y);
							}
						},
						{
							key: 'scaleInv',
							value: function scaleInv(t, e) {
								this.throwIfFrozen(), (this._x = t._x / e._x), (this._y = t._y / e._y);
							}
						},
						{
							key: 'dot',
							value: function dot(t) {
								return this._x * t._x + this._y * t._y;
							}
						},
						{
							key: 'cross',
							value: function cross(t) {
								return this._x * t._y - this._y * t._x;
							}
						},
						{
							key: 'magnitudeSqr',
							value: function magnitudeSqr() {
								return this._x * this._x + this._y * this._y;
							}
						},
						{
							key: 'magnitude',
							value: function magnitude() {
								return Math.sqrt(this.magnitudeSqr());
							}
						},
						{
							key: 'normalize',
							value: function normalize(t) {
								this.throwIfFrozen();
								var e = t.magnitude();
								e > 0 && ((this._x = t._x / e), (this._y = t._y / e));
							}
						},
						{
							key: 'setMagnitude',
							value: function setMagnitude(t, e) {
								this.throwIfFrozen(), this.normalize(t), (this._x *= e), (this._y *= e);
							}
						},
						{
							key: 'angle',
							value: function angle(t) {
								var e = this.magnitude() * t.magnitude();
								return e > 0 ? Math.acos(T.clamp(this.dot(t) / e, -1, 1)) : Number.NaN;
							}
						},
						{
							key: 'clamp',
							value: function clamp(t, e, n) {
								this.throwIfFrozen(), (this._x = T.clamp(t._x, e._x, n._x)), (this._y = T.clamp(t._y, e._y, n._y));
							}
						},
						{
							key: 'lerp',
							value: function lerp(t, e, n) {
								this.throwIfFrozen(), (this._x = T.lerp(t._x, e._x, n)), (this._y = T.lerp(t._y, e._y, n));
							}
						},
						{
							key: 'x',
							get: function get() {
								return this._x;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._x = t);
							}
						},
						{
							key: 'y',
							get: function get() {
								return this._y;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._y = t);
							}
						}
					]),
					Vector2
				);
			})(),
			nt = new w(et),
			rt = new et();
		rt.freeze();
		var it = new et(1, 0);
		it.freeze();
		var ot = new et(0, 1);
		ot.freeze();
		var at = new et(Number.NaN, Number.NaN);
		at.freeze();
		var st = et;
		function vector3_typeof(t) {
			return (vector3_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function vector3_possibleConstructorReturn(t, e) {
			return !e || ('object' !== vector3_typeof(e) && 'function' != typeof e)
				? (function vector3_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function vector3_getPrototypeOf(t) {
			return (vector3_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function vector3_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function vector3_createClass(t, e, n) {
			return e && vector3_defineProperties(t.prototype, e), n && vector3_defineProperties(t, n), t;
		}
		function vector3_setPrototypeOf(t, e) {
			return (vector3_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var lt = (function (t) {
				function Vector3() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
						r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
					return (
						(function vector3_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, Vector3),
						((t = vector3_possibleConstructorReturn(this, vector3_getPrototypeOf(Vector3).call(this)))._x = e),
						(t._y = n),
						(t._z = r),
						t
					);
				}
				return (
					(function vector3_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && vector3_setPrototypeOf(t, e);
					})(Vector3, S),
					vector3_createClass(Vector3, null, [
						{
							key: 'pool',
							get: function get() {
								return ct;
							}
						},
						{
							key: 'NaN',
							get: function get() {
								return gt;
							}
						},
						{
							key: 'Zero',
							get: function get() {
								return ut;
							}
						},
						{
							key: 'XAxis',
							get: function get() {
								return _t;
							}
						},
						{
							key: 'YAxis',
							get: function get() {
								return pt;
							}
						},
						{
							key: 'ZAxis',
							get: function get() {
								return ht;
							}
						},
						{
							key: 'XAxisNeg',
							get: function get() {
								return dt;
							}
						},
						{
							key: 'YAxisNeg',
							get: function get() {
								return ft;
							}
						},
						{
							key: 'ZAxisNeg',
							get: function get() {
								return mt;
							}
						}
					]),
					vector3_createClass(Vector3, [
						{
							key: 'toString',
							value: function toString() {
								return '[' + this._x + ', ' + this._y + ', ' + this._z + ']';
							}
						},
						{
							key: 'equals',
							value: function equals(t) {
								return this._x === t._x && this._y === t._y && this._z === t._z;
							}
						},
						{
							key: 'isZero',
							value: function isZero() {
								return 0 === this._x && 0 === this._y && 0 === this._z;
							}
						},
						{
							key: 'isNaN',
							value: function isNaN() {
								return !(
									(this._x <= 0 || this._x > 0) &&
									(this._y <= 0 || this._y > 0) &&
									(this._z <= 0 || this._z > 0)
								);
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(), (this._x = t._x), (this._y = t._y), (this._z = t._z);
							}
						},
						{
							key: 'copyFromThreeJs',
							value: function copyFromThreeJs(t) {
								this.throwIfFrozen(), (this._x = t.x), (this._y = t.y), (this._z = t.z);
							}
						},
						{
							key: 'set',
							value: function set(t, e, n) {
								this.throwIfFrozen(), (this._x = t), (this._y = e), (this._z = n);
							}
						},
						{
							key: 'setFromLLA',
							value: function setFromLLA(t) {
								this.throwIfFrozen(),
									(this._x = t.alt * Math.cos(t.lat) * Math.cos(t.lon)),
									(this._y = t.alt * Math.cos(t.lat) * Math.sin(t.lon)),
									(this._z = t.alt * Math.sin(t.lat));
							}
						},
						{
							key: 'setFromAER',
							value: function setFromAER(t) {
								this.throwIfFrozen();
								var e = Math.cos(t.elevation);
								(this._x = t.range * e * Math.cos(t.azimuth)),
									(this._y = t.range * e * Math.sin(t.azimuth)),
									(this._z = t.range * Math.sin(t.elevation));
							}
						},
						{
							key: 'neg',
							value: function neg(t) {
								this.throwIfFrozen(), (this._x = -t._x), (this._y = -t._y), (this._z = -t._z);
							}
						},
						{
							key: 'add',
							value: function add(t, e) {
								this.throwIfFrozen(), (this._x = t._x + e._x), (this._y = t._y + e._y), (this._z = t._z + e._z);
							}
						},
						{
							key: 'sub',
							value: function sub(t, e) {
								this.throwIfFrozen(), (this._x = t._x - e._x), (this._y = t._y - e._y), (this._z = t._z - e._z);
							}
						},
						{
							key: 'mult',
							value: function mult(t, e) {
								this.throwIfFrozen(), (this._x = t._x * e), (this._y = t._y * e), (this._z = t._z * e);
							}
						},
						{
							key: 'addMult',
							value: function addMult(t, e, n) {
								this.throwIfFrozen(),
									(this._x = t._x + e._x * n),
									(this._y = t._y + e._y * n),
									(this._z = t._z + e._z * n);
							}
						},
						{
							key: 'div',
							value: function div(t, e) {
								this.throwIfFrozen(), (this._x = t._x / e), (this._y = t._y / e), (this._z = t._z / e);
							}
						},
						{
							key: 'scale',
							value: function scale(t, e) {
								this.throwIfFrozen(), (this._x = t._x * e._x), (this._y = t._y * e._y), (this._z = t._z * e._z);
							}
						},
						{
							key: 'scaleInv',
							value: function scaleInv(t, e) {
								this.throwIfFrozen(), (this._x = t._x / e._x), (this._y = t._y / e._y), (this._z = t._z / e._z);
							}
						},
						{
							key: 'dot',
							value: function dot(t) {
								return this._x * t._x + this._y * t._y + this._z * t._z;
							}
						},
						{
							key: 'cross',
							value: function cross(t, e) {
								this.throwIfFrozen();
								var n = t._y * e._z - t._z * e._y,
									r = t._z * e._x - t._x * e._z,
									i = t._x * e._y - t._y * e._x;
								(this._x = n), (this._y = r), (this._z = i);
							}
						},
						{
							key: 'magnitudeSqr',
							value: function magnitudeSqr() {
								return this._x * this._x + this._y * this._y + this._z * this._z;
							}
						},
						{
							key: 'magnitude',
							value: function magnitude() {
								return Math.sqrt(this.magnitudeSqr());
							}
						},
						{
							key: 'magnitudeXY',
							value: function magnitudeXY() {
								return Math.sqrt(this._x * this._x + this._y * this._y);
							}
						},
						{
							key: 'normalize',
							value: function normalize(t) {
								this.throwIfFrozen();
								var e = t.magnitude();
								e > 0 ? ((this._x = t._x / e), (this._y = t._y / e), (this._z = t._z / e)) : this.copy(t);
							}
						},
						{
							key: 'setMagnitude',
							value: function setMagnitude(t, e) {
								this.throwIfFrozen(), this.normalize(t), (this._x *= e), (this._y *= e), (this._z *= e);
							}
						},
						{
							key: 'angle',
							value: function angle(t) {
								var e = this.magnitude() * t.magnitude();
								return e > 0 ? Math.acos(T.clamp(this.dot(t) / e, -1, 1)) : Number.NaN;
							}
						},
						{
							key: 'angleAroundAxis',
							value: function angleAroundAxis(t, e) {
								var n = Vector3.pool.get(),
									r = Vector3.pool.get();
								n.addMult(this, e, -this.dot(e)), r.addMult(t, e, -t.dot(e));
								var i = n.angle(r);
								return n.cross(n, r), n.dot(e) < 0 && (i *= -1), Vector3.pool.release(n), Vector3.pool.release(r), i;
							}
						},
						{
							key: 'clamp',
							value: function clamp(t, e, n) {
								this.throwIfFrozen(),
									(this._x = T.clamp(t._x, e._x, n._x)),
									(this._y = T.clamp(t._y, e._y, n._y)),
									(this._z = T.clamp(t._z, e._z, n._z));
							}
						},
						{
							key: 'lerp',
							value: function lerp(t, e, n) {
								this.throwIfFrozen(),
									(this._x = T.lerp(t._x, e._x, n)),
									(this._y = T.lerp(t._y, e._y, n)),
									(this._z = T.lerp(t._z, e._z, n));
							}
						},
						{
							key: 'slerp',
							value: function slerp(t, e, n) {
								this.throwIfFrozen();
								var r = t.magnitude(),
									i = e.magnitude();
								if (r > 0 && i > 0) {
									var o = Math.acos(T.clamp(t.dot(e) / (r * i), -1, 1));
									if (Math.abs(o) > 0.01745327777) {
										var a = 1 / Math.sin(o),
											s = Math.sin((1 - n) * o) * a,
											l = Math.sin(n * o) * a;
										this.mult(t, s / r), this.addMult(this, e, l / i), this.mult(this, (1 - n) * r + n * i);
									} else this.lerp(t, e, n);
								}
							}
						},
						{
							key: 'rotate',
							value: function rotate(t, e) {
								this.throwIfFrozen();
								var n = t.w * e._x + t.y * e._z - t.z * e._y,
									r = t.w * e._y + t.z * e._x - t.x * e._z,
									i = t.w * e._z + t.x * e._y - t.y * e._x,
									o = -t.x * e._x - t.y * e._y - t.z * e._z;
								(this._x = n * t.w - o * t.x - r * t.z + i * t.y),
									(this._y = r * t.w - o * t.y - i * t.x + n * t.z),
									(this._z = i * t.w - o * t.z - n * t.y + r * t.x);
							}
						},
						{
							key: 'rotateInverse',
							value: function rotateInverse(t, e) {
								this.throwIfFrozen();
								var n = t.w * e._x - t.y * e._z + t.z * e._y,
									r = t.w * e._y - t.z * e._x + t.x * e._z,
									i = t.w * e._z - t.x * e._y + t.y * e._x,
									o = t.x * e._x + t.y * e._y + t.z * e._z;
								(this._x = n * t.w + o * t.x + r * t.z - i * t.y),
									(this._y = r * t.w + o * t.y + i * t.x - n * t.z),
									(this._z = i * t.w + o * t.z + n * t.y - r * t.x);
							}
						},
						{
							key: 'setNormalTo',
							value: function setNormalTo(t, e) {
								var n = e._x * (t._y * t._y + t._z * t._z) - t._x * (t._y * e._y + t._z * e._z),
									r = e._y * (t._z * t._z + t._x * t._x) - t._y * (t._z * e._z + t._x * e._x),
									i = e._z * (t._x * t._x + t._y * t._y) - t._z * (t._x * e._x + t._y * e._y);
								(this._x = n), (this._y = r), (this._z = i), this.normalize(this);
							}
						},
						{
							key: 'x',
							get: function get() {
								return this._x;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._x = t);
							}
						},
						{
							key: 'y',
							get: function get() {
								return this._y;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._y = t);
							}
						},
						{
							key: 'z',
							get: function get() {
								return this._z;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._z = t);
							}
						}
					]),
					Vector3
				);
			})(),
			ct = new w(lt),
			ut = new lt();
		ut.freeze();
		var _t = new lt(1, 0, 0);
		_t.freeze();
		var pt = new lt(0, 1, 0);
		pt.freeze();
		var ht = new lt(0, 0, 1);
		ht.freeze();
		var dt = new lt(-1, 0, 0);
		_t.freeze();
		var ft = new lt(0, -1, 0);
		pt.freeze();
		var mt = new lt(0, 0, -1);
		ht.freeze();
		var gt = new lt(Number.NaN, Number.NaN, Number.NaN);
		gt.freeze();
		var yt = lt;
		function cache_typeof(t) {
			return (cache_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function cache_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function cache_possibleConstructorReturn(t, e) {
			return !e || ('object' !== cache_typeof(e) && 'function' != typeof e)
				? (function cache_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function cache_getPrototypeOf(t) {
			return (cache_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function cache_setPrototypeOf(t, e) {
			return (cache_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var vt = (function (t) {
			function Cache() {
				var t,
					e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null,
					n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
				return (
					(function cache_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Cache),
					((t = cache_possibleConstructorReturn(this, cache_getPrototypeOf(Cache).call(this)))._keysToEntries =
						new F()),
					(t._itemToKeys = new Map()),
					(t._itemConstructor = e),
					(t._itemDestructor = n),
					t
				);
			}
			return (
				(function cache_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && cache_setPrototypeOf(t, e);
				})(Cache, b),
				(function cache_createClass(t, e, n) {
					return e && cache_defineProperties(t.prototype, e), n && cache_defineProperties(t, n), t;
				})(Cache, [
					{
						key: 'get',
						value: function get(t) {
							var e = this._keysToEntries.get(t);
							if (void 0 === e) {
								var n = { item: this._itemConstructor(t), count: 1 };
								return this._keysToEntries.set(t, n), this._itemToKeys.set(n.item, t), n.item;
							}
							return (e.count += 1), e.item;
						}
					},
					{
						key: 'release',
						value: function release(t) {
							var e = this._itemToKeys.get(t);
							if (void 0 !== e) {
								var n = this._keysToEntries.get(e);
								(n.count -= 1),
									0 === n.count &&
										(this._itemDestructor(n.item), this._keysToEntries.delete(e), this._itemToKeys.delete(t));
							}
						}
					},
					{
						key: 'getAt',
						value: function getAt(t) {
							return this._keysToEntries.getAt(t).value.item;
						}
					},
					{
						key: 'size',
						get: function get() {
							return this._keysToEntries.size;
						}
					}
				]),
				Cache
			);
		})();
		function component_ref_typeof(t) {
			return (component_ref_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function component_ref_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function component_ref_possibleConstructorReturn(t, e) {
			return !e || ('object' !== component_ref_typeof(e) && 'function' != typeof e)
				? (function component_ref_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function component_ref_getPrototypeOf(t) {
			return (component_ref_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function component_ref_setPrototypeOf(t, e) {
			return (component_ref_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var bt = (function (t) {
			function ComponentRef(t) {
				var e;
				return (
					(function component_ref_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ComponentRef),
					((e = component_ref_possibleConstructorReturn(
						this,
						component_ref_getPrototypeOf(ComponentRef).call(this, t)
					))._entityName = ''),
					(e._componentName = ''),
					(e._componentType = ''),
					(e._componentTypeIndex = 0),
					e
				);
			}
			return (
				(function component_ref_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && component_ref_setPrototypeOf(t, e);
				})(ComponentRef, p),
				(function component_ref_createClass(t, e, n) {
					return e && component_ref_defineProperties(t.prototype, e), n && component_ref_defineProperties(t, n), t;
				})(ComponentRef, [
					{
						key: 'getEntityName',
						value: function getEntityName() {
							return this._entityName;
						}
					},
					{
						key: 'getComponentName',
						value: function getComponentName() {
							return this._componentName;
						}
					},
					{
						key: 'getComponentType',
						value: function getComponentType() {
							return this._componentType;
						}
					},
					{
						key: 'getComponentTypeIndex',
						value: function getComponentTypeIndex() {
							return this._componentTypeIndex;
						}
					},
					{
						key: 'setByName',
						value: function setByName(t, e) {
							(this._entityName = t), (this._componentName = e), (this._componentType = '');
						}
					},
					{
						key: 'setByType',
						value: function setByType(t, e) {
							var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
							(this._entityName = t),
								(this._componentType = e),
								(this._componentTypeIndex = n),
								(this._componentName = '');
						}
					},
					{
						key: '_update',
						value: function _update() {
							if ('' === this._entityName || ('' === this._componentName && '' === this._componentType))
								this._setRef(null);
							else if ('' !== this._componentName) {
								var t = this._scene.getEntity(this._entityName);
								if (null !== t && t.isEnabled()) {
									var e = t.getComponent(this._componentName);
									this._setRef(e);
								} else this._setRef(null);
							} else {
								var n = this._scene.getEntity(this._entityName);
								if (null !== n && n.isEnabled()) {
									var r = n.getComponentByType(this._componentType, this._componentTypeIndex);
									this._setRef(r);
								} else this._setRef(null);
							}
						}
					}
				]),
				ComponentRef
			);
		})();
		function controller_ref_typeof(t) {
			return (controller_ref_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function controller_ref_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function controller_ref_possibleConstructorReturn(t, e) {
			return !e || ('object' !== controller_ref_typeof(e) && 'function' != typeof e)
				? (function controller_ref_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function controller_ref_getPrototypeOf(t) {
			return (controller_ref_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function controller_ref_setPrototypeOf(t, e) {
			return (controller_ref_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var xt = (function (t) {
			function ControllerRef(t) {
				var e;
				return (
					(function controller_ref_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ControllerRef),
					((e = controller_ref_possibleConstructorReturn(
						this,
						controller_ref_getPrototypeOf(ControllerRef).call(this, t)
					))._entityName = ''),
					(e._controllerName = ''),
					(e._controllerType = ''),
					(e._controllerTypeIndex = 0),
					e
				);
			}
			return (
				(function controller_ref_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && controller_ref_setPrototypeOf(t, e);
				})(ControllerRef, p),
				(function controller_ref_createClass(t, e, n) {
					return e && controller_ref_defineProperties(t.prototype, e), n && controller_ref_defineProperties(t, n), t;
				})(ControllerRef, [
					{
						key: 'getEntityName',
						value: function getEntityName() {
							return this._entityName;
						}
					},
					{
						key: 'getControllerName',
						value: function getControllerName() {
							return this._controllerName;
						}
					},
					{
						key: 'getControllerType',
						value: function getControllerType() {
							return this._controllerType;
						}
					},
					{
						key: 'getControllerTypeIndex',
						value: function getControllerTypeIndex() {
							return this._controllerTypeIndex;
						}
					},
					{
						key: 'setByName',
						value: function setByName(t, e) {
							(this._entityName = t), (this._controllerName = e), (this._controllerType = '');
						}
					},
					{
						key: 'setByType',
						value: function setByType(t, e) {
							var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
							(this._entityName = t),
								(this._controllerType = e),
								(this._controllerTypeIndex = n),
								(this._controllerName = '');
						}
					},
					{
						key: '_update',
						value: function _update() {
							if ('' === this._entityName || ('' === this._controllerName && '' === this._controllerType))
								this._setRef(null);
							else if ('' !== this._controllerName) {
								var t = this._scene.getEntity(this._entityName);
								if (null !== t && t.isEnabled()) {
									var e = t.getController(this._controllerName);
									this._setRef(e);
								} else this._setRef(null);
							} else {
								var n = this._scene.getEntity(this._entityName);
								if (null !== n && n.isEnabled()) {
									var r = n.getControllerByType(this._controllerType, this._controllerTypeIndex);
									this._setRef(r);
								} else this._setRef(null);
							}
						}
					}
				]),
				ControllerRef
			);
		})();
		function cube_map_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var St = (function () {
			function CubeMap() {
				!(function cube_map_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, CubeMap);
			}
			return (
				(function cube_map_createClass(t, e, n) {
					return e && cube_map_defineProperties(t.prototype, e), n && cube_map_defineProperties(t, n), t;
				})(CubeMap, null, [
					{
						key: 'xyzToUVFace',
						value: function xyzToUVFace(t, e) {
							for (
								var n,
									r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._defaultCubeMapFaceFrames,
									i = 0;
								i < 6;
								i++
							) {
								var o = r[i],
									a = o[2],
									s = 0,
									l = 0,
									c = 0,
									u = !1;
								a === yt.XAxis || a === yt.XAxisNeg
									? ((s = e.x), (l = e.y), (c = e.z), (u = a === yt.XAxisNeg))
									: a === yt.YAxis || a === yt.YAxisNeg
									? ((s = e.y), (l = e.z), (c = e.x), (u = a === yt.YAxisNeg))
									: ((s = e.z), (l = e.x), (c = e.y), (u = a === yt.ZAxisNeg)),
									Math.abs(s) >= Math.abs(l) &&
										Math.abs(s) >= Math.abs(c) &&
										((s >= 0 && !u) || (s < 0 && u)) &&
										((n = o), (t.z = i));
							}
							if (void 0 !== n) {
								var _ = n[2].x * e.x + n[2].y * e.y + n[2].z * e.z;
								_ < 0 && (_ = 1),
									(t.x = (n[0].x * e.x + n[0].y * e.y + n[0].z * e.z) / _),
									(t.y = (n[1].x * e.x + n[1].y * e.y + n[1].z * e.z) / _),
									(t.x = 0.5 * (t.x + 1)),
									(t.y = 0.5 * (t.y + 1));
							} else t.set(NaN, NaN, NaN);
						}
					}
				]),
				CubeMap
			);
		})();
		St._defaultCubeMapFaceFrames = [
			[yt.YAxis, yt.ZAxis, yt.XAxis],
			[yt.XAxisNeg, yt.ZAxis, yt.YAxis],
			[yt.YAxisNeg, yt.ZAxis, yt.XAxisNeg],
			[yt.XAxis, yt.ZAxis, yt.YAxisNeg],
			[yt.YAxis, yt.XAxisNeg, yt.ZAxis],
			[yt.YAxis, yt.XAxis, yt.ZAxisNeg]
		];
		var Tt = St;
		function entity_ref_typeof(t) {
			return (entity_ref_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function entity_ref_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function entity_ref_possibleConstructorReturn(t, e) {
			return !e || ('object' !== entity_ref_typeof(e) && 'function' != typeof e)
				? (function entity_ref_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function entity_ref_getPrototypeOf(t) {
			return (entity_ref_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function entity_ref_setPrototypeOf(t, e) {
			return (entity_ref_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var wt = (function (t) {
			function EntityRef(t) {
				var e;
				return (
					(function entity_ref_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, EntityRef),
					((e = entity_ref_possibleConstructorReturn(this, entity_ref_getPrototypeOf(EntityRef).call(this, t)))._name =
						''),
					e
				);
			}
			return (
				(function entity_ref_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && entity_ref_setPrototypeOf(t, e);
				})(EntityRef, p),
				(function entity_ref_createClass(t, e, n) {
					return e && entity_ref_defineProperties(t.prototype, e), n && entity_ref_defineProperties(t, n), t;
				})(EntityRef, [
					{
						key: 'getName',
						value: function getName() {
							return this._name;
						}
					},
					{
						key: 'setName',
						value: function setName(t) {
							this._name = t;
						}
					},
					{
						key: '_update',
						value: function _update() {
							if ('' === this._name) null !== this._ref && this._setRef(null);
							else if (
								null === this._ref ||
								this._ref.isDestroyed() ||
								!this._ref.isEnabled() ||
								this._ref.getName() !== this._name
							) {
								var t = this._scene.getEntity(this._name);
								this._setRef(t);
							}
						}
					}
				]),
				EntityRef
			);
		})();
		function lat_lon_alt_typeof(t) {
			return (lat_lon_alt_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function lat_lon_alt_possibleConstructorReturn(t, e) {
			return !e || ('object' !== lat_lon_alt_typeof(e) && 'function' != typeof e)
				? (function lat_lon_alt_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function lat_lon_alt_getPrototypeOf(t) {
			return (lat_lon_alt_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function lat_lon_alt_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function lat_lon_alt_createClass(t, e, n) {
			return e && lat_lon_alt_defineProperties(t.prototype, e), n && lat_lon_alt_defineProperties(t, n), t;
		}
		function lat_lon_alt_setPrototypeOf(t, e) {
			return (lat_lon_alt_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ct = (function (t) {
				function LatLonAlt() {
					var t,
						e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
						n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
						r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
						i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
					return (
						(function lat_lon_alt_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, LatLonAlt),
						((t = lat_lon_alt_possibleConstructorReturn(this, lat_lon_alt_getPrototypeOf(LatLonAlt).call(this)))._lat =
							e),
						(t._lon = n),
						(t._alt = r),
						(t._planetographic = i),
						t
					);
				}
				return (
					(function lat_lon_alt_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && lat_lon_alt_setPrototypeOf(t, e);
					})(LatLonAlt, S),
					lat_lon_alt_createClass(LatLonAlt, null, [
						{
							key: 'pool',
							get: function get() {
								return Pt;
							}
						}
					]),
					lat_lon_alt_createClass(LatLonAlt, [
						{
							key: 'toString',
							value: function toString() {
								return arguments.length > 0 && void 0 !== arguments[0] && arguments[0]
									? '[' +
											T.radToDeg(this._lat) +
											', ' +
											T.radToDeg(this._lon) +
											', ' +
											this._alt +
											'] ' +
											(this._planetographic ? '*graphic' : '*centric')
									: '[' +
											this._lat +
											', ' +
											this._lon +
											', ' +
											this._alt +
											'] ' +
											(this._planetographic ? '*graphic' : '*centric');
							}
						},
						{
							key: 'copy',
							value: function copy(t) {
								this.throwIfFrozen(),
									(this._lat = t._lat),
									(this._lon = t._lon),
									(this._alt = t._alt),
									(this._planetographic = t._planetographic);
							}
						},
						{
							key: 'set',
							value: function set(t, e, n, r) {
								this.throwIfFrozen(), (this._lat = t), (this._lon = e), (this._alt = n), (this._planetographic = r);
							}
						},
						{
							key: 'setFromXYZ',
							value: function setFromXYZ(t) {
								this.throwIfFrozen();
								var e = t.magnitudeXY();
								(this._lon = Math.atan2(t.y, t.x)),
									(this._lat = Math.atan(t.z / e)),
									(this._alt = e / Math.cos(this.lat)),
									(this._planetographic = !1);
							}
						},
						{
							key: 'lat',
							get: function get() {
								return this._lat;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._lat = t);
							}
						},
						{
							key: 'lon',
							get: function get() {
								return this._lon;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._lon = t);
							}
						},
						{
							key: 'alt',
							get: function get() {
								return this._alt;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._alt = t);
							}
						},
						{
							key: 'planetographic',
							get: function get() {
								return this._planetographic;
							},
							set: function set(t) {
								this.throwIfFrozen(), (this._planetographic = t);
							}
						}
					]),
					LatLonAlt
				);
			})(),
			Pt = new w(Ct),
			Et = Ct;
		function line_mesh_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var kt = (function () {
			function LineMesh(t) {
				!(function line_mesh_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, LineMesh),
					(this._component = t),
					(this._alphaMultiplier = 1),
					(this._position = new yt()),
					(this._orientation = new tt()),
					(this._scale = 1),
					(this._dashGapLength = 0),
					(this._dashLength = 1),
					(this._threeJsObjects = []),
					(this._threeJsMaterial = null),
					(this._threeJsMaterial = t.getEntity().getScene().getEngine().getMaterialManager().getPreloaded('line')),
					t.getThreeJsMaterials().push(this._threeJsMaterial),
					(this._threeJsMaterial.uniforms.alphaMultiplier.value = this._alphaMultiplier),
					(this._threeJsMaterial.uniforms.dashLength.value = this._dashLength),
					(this._threeJsMaterial.uniforms.dashGapLength.value = this._dashGapLength);
			}
			return (
				(function line_mesh_createClass(t, e, n) {
					return e && line_mesh_defineProperties(t.prototype, e), n && line_mesh_defineProperties(t, n), t;
				})(LineMesh, [
					{
						key: 'setPositions',
						value: function setPositions(t) {
							if (t.length % 2 != 0) throw new Error('Number of positions in the LineMesh must be even.');
							this._adjustVerticesInGeometries(2 * t.length);
							for (
								var e = yt.pool.get(),
									n = yt.pool.get(),
									r = yt.pool.get(),
									i = yt.pool.get(),
									o = yt.pool.get(),
									a = 0,
									s = 0;
								s < this._threeJsObjects.length;
								s++
							) {
								for (
									var l = this._threeJsObjects[s].geometry.getAttribute('position'), c = l.array, u = 0;
									u < c.length / (2 * LineMesh._floatsPerVertex);
									u++
								) {
									var _ = u + s * (LineMesh._verticesPerGeometry / 2);
									(c[2 * u * LineMesh._floatsPerVertex + 0] = t[_].x),
										(c[2 * u * LineMesh._floatsPerVertex + 1] = t[_].y),
										(c[2 * u * LineMesh._floatsPerVertex + 2] = t[_].z),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 0] = t[_].x),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 1] = t[_].y),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 2] = t[_].z),
										_ % 2 == 0
											? t[_].equals(t[T.wrap(_ - 1, 0, t.length)])
												? (e.copy(t[T.wrap(_ - 2, 0, t.length)]), n.copy(t[_ + 1]))
												: (e.copy(t[_]), n.copy(t[_ + 1]), (a = 0))
											: _ % 2 == 1 &&
											  (t[_].equals(t[T.wrap(_ + 1, 0, t.length)])
													? (e.copy(t[_ - 1]), n.copy(t[T.wrap(_ + 2, 0, t.length)]))
													: (e.copy(t[_ - 1]), n.copy(t[_])),
											  o.sub(t[_], t[_ - 1]),
											  (a += o.magnitude())),
										(c[2 * u * LineMesh._floatsPerVertex + 3] = e.x),
										(c[2 * u * LineMesh._floatsPerVertex + 4] = e.y),
										(c[2 * u * LineMesh._floatsPerVertex + 5] = e.z),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 3] = e.x),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 4] = e.y),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 5] = e.z),
										(c[2 * u * LineMesh._floatsPerVertex + 6] = n.x),
										(c[2 * u * LineMesh._floatsPerVertex + 7] = n.y),
										(c[2 * u * LineMesh._floatsPerVertex + 8] = n.z),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 6] = n.x),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 7] = n.y),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 8] = n.z),
										(c[2 * u * LineMesh._floatsPerVertex + 14] = a),
										(c[(2 * u + 1) * LineMesh._floatsPerVertex + 14] = a);
								}
								l.data.needsUpdate = !0;
							}
							yt.pool.release(r), yt.pool.release(i), yt.pool.release(e), yt.pool.release(n), yt.pool.release(o);
						}
					},
					{
						key: 'setColors',
						value: function setColors(t) {
							if (t.length % 2 != 0) throw new Error('Number of colors in the LineMesh must be even.');
							this._adjustVerticesInGeometries(2 * t.length);
							for (var e = 0; e < this._threeJsObjects.length; e++) {
								for (
									var n = this._threeJsObjects[e].geometry.getAttribute('color'), r = n.array, i = 0;
									i < r.length / (2 * LineMesh._floatsPerVertex);
									i++
								) {
									var o = i + e * (LineMesh._verticesPerGeometry / 2);
									(r[2 * i * LineMesh._floatsPerVertex + 9] = t[o].r),
										(r[2 * i * LineMesh._floatsPerVertex + 10] = t[o].g),
										(r[2 * i * LineMesh._floatsPerVertex + 11] = t[o].b),
										(r[2 * i * LineMesh._floatsPerVertex + 12] = t[o].a),
										(r[(2 * i + 1) * LineMesh._floatsPerVertex + 9] = t[o].r),
										(r[(2 * i + 1) * LineMesh._floatsPerVertex + 10] = t[o].g),
										(r[(2 * i + 1) * LineMesh._floatsPerVertex + 11] = t[o].b),
										(r[(2 * i + 1) * LineMesh._floatsPerVertex + 12] = t[o].a);
								}
								n.data.needsUpdate = !0;
							}
						}
					},
					{
						key: 'setWidths',
						value: function setWidths(t) {
							if ('number' == typeof t)
								for (var e = 0; e < this._threeJsObjects.length; e++) {
									for (
										var n = this._threeJsObjects[e].geometry.getAttribute('width'), r = n.array, i = 0;
										i < r.length / (2 * LineMesh._floatsPerVertex);
										i++
									)
										(r[2 * i * LineMesh._floatsPerVertex + 13] = t),
											(r[(2 * i + 1) * LineMesh._floatsPerVertex + 13] = -t);
									n.data.needsUpdate = !0;
								}
							else {
								if (t.length % 2 != 0) throw new Error('Number of widths in the LineMesh must be even.');
								this._adjustVerticesInGeometries(2 * t.length);
								for (var o = 0; o < this._threeJsObjects.length; o++) {
									for (
										var a = this._threeJsObjects[o].geometry.getAttribute('width'), s = a.array, l = 0;
										l < s.length / (2 * LineMesh._floatsPerVertex);
										l++
									) {
										var c = l + o * (LineMesh._verticesPerGeometry / 2);
										(s[2 * l * LineMesh._floatsPerVertex + 13] = t[c]),
											(s[(2 * l + 1) * LineMesh._floatsPerVertex + 13] = -t[c]);
									}
									a.data.needsUpdate = !0;
								}
							}
						}
					},
					{
						key: 'setDashLength',
						value: function setDashLength(t, e) {
							(this._dashLength = t),
								(this._dashGapLength = e),
								Ut.setUniformNumber(this._threeJsMaterial, 'dashLength', this._dashLength),
								Ut.setUniformNumber(this._threeJsMaterial, 'dashGapLength', this._dashGapLength);
						}
					},
					{
						key: 'setScale',
						value: function setScale(t) {
							(this._scale = t), Ut.setScale(this._threeJsObjects, t);
						}
					},
					{
						key: 'getAlphaMultiplier',
						value: function getAlphaMultiplier() {
							return this._alphaMultiplier;
						}
					},
					{
						key: 'setAlphaMultiplier',
						value: function setAlphaMultiplier(t) {
							(this._alphaMultiplier = t),
								Ut.setUniformNumber(this._threeJsMaterial, 'alphaMultiplier', this._alphaMultiplier);
						}
					},
					{
						key: 'prepareForRender',
						value: function prepareForRender(t) {
							Ut.setUniformVector2(this._threeJsMaterial, 'pixelSize', t.getViewport().getBounds().size);
						}
					},
					{
						key: '_adjustVerticesInGeometries',
						value: function _adjustVerticesInGeometries(t) {
							for (var e = Math.ceil(t / LineMesh._verticesPerGeometry); this._threeJsObjects.length > e; ) {
								var n = this._threeJsObjects[this._threeJsObjects.length - 1];
								Ut.destroyObject(n), this._threeJsObjects.splice(this._threeJsObjects.length - 1, 1);
								for (var r = 0, i = this._component.getThreeJsObjects().length; r < i; r++)
									if (this._component.getThreeJsObjects()[r] === n) {
										this._component.getThreeJsObjects().splice(r, 1);
										break;
									}
							}
							if (this._threeJsObjects.length < e) {
								this._threeJsObjects.length > 0 &&
									this._setupThreeJsGeometry(
										this._threeJsObjects[this._threeJsObjects.length - 1].geometry,
										LineMesh._verticesPerGeometry
									);
								for (var o = this._threeJsObjects.length; o < e; o++) {
									var a = Ut.createMeshObject(this._component, this._threeJsMaterial, []);
									this._threeJsObjects.push(a), this._component.getThreeJsObjects().push(a);
									var s = Math.min(t - o * LineMesh._verticesPerGeometry, LineMesh._verticesPerGeometry);
									this._setupThreeJsGeometry(a.geometry, s),
										Ut.setPosition(a, this._position),
										Ut.setOrientation(a, this._orientation),
										Ut.setScale(a, this._scale),
										(a.frustumCulled = !1);
								}
							} else if (e > 0) {
								var l = this._threeJsObjects[e - 1].geometry,
									c = t - (e - 1) * LineMesh._verticesPerGeometry;
								l.getAttribute('position').array.length !== c * LineMesh._floatsPerVertex &&
									this._setupThreeJsGeometry(l, c);
							}
						}
					},
					{
						key: '_setupThreeJsGeometry',
						value: function _setupThreeJsGeometry(t, e) {
							var n = new Float32Array(e * LineMesh._floatsPerVertex),
								r = new i.InterleavedBuffer(n, LineMesh._floatsPerVertex);
							t.setAttribute('position', new i.InterleavedBufferAttribute(r, 3, 0, !1)),
								t.setAttribute('positionPrev', new i.InterleavedBufferAttribute(r, 3, 3, !1)),
								t.setAttribute('positionNext', new i.InterleavedBufferAttribute(r, 3, 6, !1)),
								t.setAttribute('color', new i.InterleavedBufferAttribute(r, 4, 9, !1)),
								t.setAttribute('width', new i.InterleavedBufferAttribute(r, 1, 13, !1)),
								t.setAttribute('dashOffset', new i.InterleavedBufferAttribute(r, 1, 14, !1));
							for (var o = new Uint16Array((6 * e) / 4), a = 0; a < e / 4; a++)
								(o[6 * a + 0] = 4 * a),
									(o[6 * a + 1] = 4 * a + 2),
									(o[6 * a + 2] = 4 * a + 3),
									(o[6 * a + 3] = 4 * a),
									(o[6 * a + 4] = 4 * a + 3),
									(o[6 * a + 5] = 4 * a + 1);
							t.setIndex(new i.BufferAttribute(o, 1));
						}
					}
				]),
				LineMesh
			);
		})();
		(kt._floatsPerVertex = 15), (kt._verticesPerGeometry = 65536);
		var Ot = kt;
		function material_utils_phong_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var At = (function () {
			function MaterialUtilsPhong() {
				!(function material_utils_phong_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, MaterialUtilsPhong);
			}
			return (
				(function material_utils_phong_createClass(t, e, n) {
					return (
						e && material_utils_phong_defineProperties(t.prototype, e),
						n && material_utils_phong_defineProperties(t, n),
						t
					);
				})(MaterialUtilsPhong, null, [
					{
						key: 'get',
						value: function get() {
							null === MaterialUtilsPhong._material &&
								(MaterialUtilsPhong._material = new i.ShaderMaterial({
									uniforms: {
										entityPos: new i.Uniform(new i.Vector3()),
										ambientLightColor: new i.Uniform(new i.Color()),
										lightPositions: new i.Uniform([
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0)
										]),
										lightColors: new i.Uniform([
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0)
										]),
										lightRadii: new i.Uniform([0, 0, 0, 0, 0]),
										numLights: new i.Uniform(0),
										color: new i.Uniform(new i.Color(1, 1, 1)),
										specularColor: new i.Uniform(new i.Color(1, 1, 1)),
										specularIntensity: new i.Uniform(0),
										specularHardness: new i.Uniform(50),
										colorTexture: new i.Uniform(null),
										normalTexture: new i.Uniform(null),
										specularTexture: new i.Uniform(null),
										nightTexture: new i.Uniform(null),
										decalTexture: new i.Uniform(null),
										normalScale: new i.Uniform(new i.Vector2()),
										numShadowEntities: new i.Uniform(0),
										shadowEntityPositions: new i.Uniform([
											new i.Vector3(),
											new i.Vector3(),
											new i.Vector3(),
											new i.Vector3(),
											new i.Vector3()
										]),
										shadowEntityRadii: new i.Uniform([0, 0, 0, 0, 0]),
										shadowEntityRayleighAmount: new i.Uniform([0, 0, 0, 0, 0]),
										shadowRingsInnerRadius: new i.Uniform(0),
										shadowRingsOuterRadius: new i.Uniform(0),
										shadowRingsTexture: new i.Uniform(null),
										shadowRingsNormal: new i.Uniform(new i.Vector3()),
										atmospherePosition: new i.Uniform(new i.Vector3(0, 0, 0)),
										atmosphereOrientation: new i.Uniform(new i.Vector4(1, 0, 0, 0)),
										atmosphereEquatorialRadius: new i.Uniform(1),
										atmospherePolarRadius: new i.Uniform(1),
										atmosphereDensity: new i.Uniform(0),
										atmosphereScaleHeight: new i.Uniform(1),
										atmosphereEmissivity: new i.Uniform(0),
										atmosphereColor: new i.Uniform(new i.Vector3(0, 0, 0)),
										atmosphereSunBrightness: new i.Uniform(1),
										atmosphereSunsetColor: new i.Uniform(new i.Vector3(0, 0, 0)),
										atmosphereSunsetIntensity: new i.Uniform(0),
										atmosphereGroundIsSpheroid: new i.Uniform(0)
									},
									vertexShader:
										'\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tattribute vec4 tangent;\n\t\t\t\t\t\tvarying vec4 viewTangent;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\tattribute vec2 normalUV;\n\t\t\t\t\t\tvarying vec2 vNormalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\tattribute vec2 specularUV;\n\t\t\t\t\t\tvarying vec2 vSpecularUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\tattribute vec2 nightUV;\n\t\t\t\t\t\tvarying vec2 vNightUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\tattribute vec2 decalUV;\n\t\t\t\t\t\tvarying vec2 vDecalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec2 vColorUV;\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\tvarying vec3 cameraSpaceNormal;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tviewTangent = vec4((modelMatrix * vec4(tangent.xyz, 0.0)).xyz, tangent.w);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvColorUV = uv;\n\t\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\t\tvNormalUV = normalUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\t\tvSpecularUV = specularUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\t\tvNightUV = nightUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\t\tvDecalUV = decalUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tcameraSpacePosition = (modelMatrix * vec4(position, 1.)).xyz;\n\t\t\t\t\t\tcameraSpaceNormal = (modelMatrix * vec4(normal, 0.)).xyz;\n\t\t\t\t\t\tvec4 viewPosition = viewMatrix * vec4(cameraSpacePosition, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}',
									fragmentShader:
										"\n\t\t\t\t\t#ifndef saturate\n\t\t\t\t\t\t#define saturate(a) clamp(a, 0.0, 1.0)\n\t\t\t\t\t#endif\n\t\t\t\t\tuniform mat3 normalMatrix;\n\n\t\t\t\t\t// External lighting and camera.\n\t\t\t\t\tuniform vec3 entityPos;\n\n\t\t\t\t\t// Lights\n\t\t\t\t\tuniform vec3 ambientLightColor;\n\t\t\t\t\tuniform vec3 lightPositions[5];\n\t\t\t\t\tuniform vec3 lightColors[5];\n\t\t\t\t\tuniform float lightRadii[5];\n\t\t\t\t\tuniform int numLights;\n\n\t\t\t\t\t// Shading.\n\t\t\t\t\tuniform vec3 color;\n\t\t\t\t\tuniform vec3 specularColor;\n\t\t\t\t\tuniform float specularIntensity;\n\t\t\t\t\tuniform float specularHardness;\n\n\t\t\t\t\t// Shadow Entities.\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tuniform int numShadowEntities;\n\t\t\t\t\t\tuniform vec3 shadowEntityPositions[5];\n\t\t\t\t\t\tuniform float shadowEntityRadii[5];\n\t\t\t\t\t\tuniform float shadowEntityRayleighAmount[5];\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\tuniform float shadowRingsInnerRadius;\n\t\t\t\t\t\tuniform float shadowRingsOuterRadius;\n\t\t\t\t\t\tuniform sampler2D shadowRingsTexture;\n\t\t\t\t\t\tuniform vec3 shadowRingsNormal;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Textures.\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform sampler2D normalTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularMap\n\t\t\t\t\t\tuniform sampler2D specularTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightMap\n\t\t\t\t\t\tuniform sampler2D nightTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalMap\n\t\t\t\t\t\tuniform sampler2D decalTexture;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Modifications on the textures.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform vec2 normalScale;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// The varying attributes.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvarying vec4 viewTangent;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\tvarying vec2 vNormalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\tvarying vec2 vSpecularUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\tvarying vec2 vNightUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\tvarying vec2 vDecalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec2 vColorUV;\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\tvarying vec3 cameraSpaceNormal;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform float near;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvec3 getNormalFromMap() {\n\t\t\t\t\t\t\tvec3 normal = normalize(cameraSpaceNormal);\n\t\t\t\t\t\t\tvec3 tangent = normalize(viewTangent.xyz);\n\t\t\t\t\t\t\tvec3 bitangent = normalize(cross(normal, tangent));\n\t\t\t\t\t\t\tif (viewTangent.w < 0.0) {\n\t\t\t\t\t\t\t\tbitangent *= -1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmat3 transform = mat3(tangent, bitangent, normal);\n\t\t\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\t\t\tvec2 uv = vNormalUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 uv = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec3 normalFromMap = texture2D(normalTexture, uv).rgb * 2.0 - 1.0;\n\t\t\t\t\t\t\tnormalFromMap.xy *= vec2(1, -1);\n\t\t\t\t\t\t\tnormalFromMap.xy *= normalScale;\n\t\t\t\t\t\t\treturn normalize(transform * normalFromMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef colorTextureEnvironment\n\t\t\t\t\t\tvec4 getColorFromEnvironmentMap(sampler2D environmentTexture, vec3 positionDir, vec3 normal) {\n\t\t\t\t\t\t\tvec3 r = reflect(positionDir, normal);\n\t\t\t\t\t\t\tfloat m = 2. * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.) * (r.z + 1.));\n\t\t\t\t\t\t\tvec2 uv = r.xy / m + .5;\n\t\t\t\t\t\t\treturn vec4(texture2D(environmentTexture, uv).rgb, 1.);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tvec3 applyRayleighScattering(vec3 color, float amount) {\n\t\t\t\t\t\t\tfloat value = (color.r + color.g + color.b);\n\t\t\t\t\t\t\tfloat rFactor = 1.0; // 6.3^-4 / 6.3^-4\n\t\t\t\t\t\t\tfloat gFactor = 1.602; // 5.6^-4 / 6.3^-4\n\t\t\t\t\t\t\tfloat bFactor = 3.228; // 4.7^-4 / 6.3^-4\n\t\t\t\t\t\t\tcolor.r *= pow(rFactor, -amount);\n\t\t\t\t\t\t\tcolor.g *= pow(gFactor, -amount);\n\t\t\t\t\t\t\tcolor.b *= pow(bFactor, -amount);\n\t\t\t\t\t\t\tcolor = color / (color.r + color.g + color.b) * value;\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 getLightColorFromShadowEntities(vec3 lightColor, vec3 lightDir, vec3 lightPosition, float lightRadius, vec3 normal) {\n\t\t\t\t\t\t\tvec3 color = lightColor;\n\t\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\t\tif (i >= numShadowEntities) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvec3 origin = cameraSpacePosition - shadowEntityPositions[i];\n\t\t\t\t\t\t\t\tvec3 axis = normalize(shadowEntityPositions[i] - lightPosition);\n\t\t\t\t\t\t\t\tfloat originOffset = dot(origin, axis);\n\t\t\t\t\t\t\t\tif (originOffset > 0.0) {\n\t\t\t\t\t\t\t\t\tfloat e = length(origin - dot(origin, axis) * axis);\n\t\t\t\t\t\t\t\t\tfloat ld = dot(cameraSpacePosition - lightPosition, axis);\n\t\t\t\t\t\t\t\t\tfloat sd = dot(cameraSpacePosition - shadowEntityPositions[i], axis);\n\t\t\t\t\t\t\t\t\tfloat lr = lightRadius;\n\t\t\t\t\t\t\t\t\tfloat sr = shadowEntityRadii[i];\n\t\t\t\t\t\t\t\t\tfloat e0 = abs(sr * ld - lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat e1 = (sr * ld + lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat lightLevel = 0.0;\n\t\t\t\t\t\t\t\t\tif (e1 < 0.0 || sd < 0.0) { // light in front of shadow entity\n\t\t\t\t\t\t\t\t\t\tlightLevel = 1.0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (e0 < e1) {\n\t\t\t\t\t\t\t\t\t\tfloat m = 1.0 - saturate(pow(atan(sr / sd) / atan(lr / ld), 2.0));\n\t\t\t\t\t\t\t\t\t\tlightLevel = mix(m, 1.0, saturate(shadowEntityRayleighAmount[i] / 10.0 + (e - e0) / (e1 - e0))); // soft light\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlightLevel = e < e0 ? 0.0 : 1.0; // 0 radius light.\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcolor = lightLevel * applyRayleighScattering(color, (1.0 - lightLevel) * shadowEntityRayleighAmount[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\tvec3 getLightColorFromShadowRings(vec3 lightColor, vec3 lightDir) {\n\t\t\t\t\t\t\tvec3 position = cameraSpacePosition - entityPos;\n\t\t\t\t\t\t\thighp float d = dot(position, shadowRingsNormal) / dot(lightDir, shadowRingsNormal);\n\t\t\t\t\t\t\thighp vec3 pointOnDisc = -d * lightDir + position;\n\t\t\t\t\t\t\thighp float lengthOnDisc = length(pointOnDisc - dot(pointOnDisc, shadowRingsNormal) * shadowRingsNormal);\n\t\t\t\t\t\t\thighp float u = (lengthOnDisc - shadowRingsInnerRadius) / (shadowRingsOuterRadius - shadowRingsInnerRadius);\n\t\t\t\t\t\t\thighp float shadow = 1.0 - texture2D(shadowRingsTexture, vec2(u, 0.0), 0.0).a;\n\t\t\t\t\t\t\tif (shadowRingsInnerRadius <= lengthOnDisc && lengthOnDisc <= shadowRingsOuterRadius && d > 0.0) {\n\t\t\t\t\t\t\t\treturn lightColor * saturate(shadow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn lightColor;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// ATMOSPHERE\n\n\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\tuniform vec3 atmospherePosition;\n\t\t\t\t\t\tuniform vec4 atmosphereOrientation;\n\t\t\t\t\t\tuniform float atmosphereEquatorialRadius;\n\t\t\t\t\t\tuniform float atmospherePolarRadius;\n\t\t\t\t\t\tuniform float atmosphereDensity;\n\t\t\t\t\t\tuniform float atmosphereScaleHeight;\n\t\t\t\t\t\tuniform vec3 atmosphereColor;\n\t\t\t\t\t\tuniform float atmosphereEmissivity;\n\t\t\t\t\t\tuniform float atmosphereSunBrightness;\n\t\t\t\t\t\tuniform vec3 atmosphereSunsetColor;\n\t\t\t\t\t\tuniform float atmosphereSunsetIntensity;\n\t\t\t\t\t\tuniform float atmosphereGroundIsSpheroid;\n\n\t\t\t\t\t\tconst int atmosphereNumIterations = 5;\n\n\t\t\t\t\t\t// Inverse rotate a vector by a quaternion.\n\t\t\t\t\t\tvec3 quatRotInv(vec4 q, vec3 v) {\n\t\t\t\t\t\t\tfloat tx = q.w * v.x - q.y * v.z + q.z * v.y;\n\t\t\t\t\t\t\tfloat ty = q.w * v.y - q.z * v.x + q.x * v.z;\n\t\t\t\t\t\t\tfloat tz = q.w * v.z - q.x * v.y + q.y * v.x;\n\t\t\t\t\t\t\tfloat tw = q.x * v.x + q.y * v.y + q.z * v.z;\n\t\t\t\t\t\t\tfloat x = tx * q.w + tw * q.x + ty * q.z - tz * q.y;\n\t\t\t\t\t\t\tfloat y = ty * q.w + tw * q.y + tz * q.x - tx * q.z;\n\t\t\t\t\t\t\tfloat z = tz * q.w + tw * q.z + tx * q.y - ty * q.x;\n\t\t\t\t\t\t\treturn vec3(x, y, z);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Given an origin and direction, computes the sampling start and end as distance from the origin in the direction.\n\t\t\t\t\t\tvoid getStartEndSamples(out float start, out float end, vec3 origin, vec3 direction, float maxDistance, float groundRadius, float atmosphereScaleHeight) {\n\t\t\t\t\t\t\t// Get the along the ray perpendicular to the sphere.\n\t\t\t\t\t\t\tfloat perpD = -dot(origin, direction);\n\t\t\t\t\t\t\tvec3 perp = origin + direction * perpD;\n\n\t\t\t\t\t\t\t// Figure out the sample distance.\n\t\t\t\t\t\t\tfloat atmosphereRadius = groundRadius + atmosphereScaleHeight * 6.0;\n\t\t\t\t\t\t\tfloat chordHalfLength = sqrt(max(0.0, atmosphereRadius * atmosphereRadius - dot(perp, perp)));\n\n\t\t\t\t\t\t\t// Figure out starting and ending sample points.\n\t\t\t\t\t\t\tstart = max(0.0, perpD - chordHalfLength);\n\t\t\t\t\t\t\tend = min(maxDistance, perpD + chordHalfLength);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Gets the density of the atmosphere at a given position.\n\t\t\t\t\t\tfloat getDensity(vec3 position, float radius, float density, float atmosphereScaleHeight) {\n\t\t\t\t\t\t\treturn density * exp((radius - length(position)) / atmosphereScaleHeight);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Returns 0 if the ray does not intersect and 1.0 if the ray very intersects (with a gradient inbetween).\n\t\t\t\t\t\tfloat getDayLevel(vec3 origin, vec3 direction, float radius, float scaleHeight) {\n\t\t\t\t\t\t\tfloat blendHeight = scaleHeight * radius / 200.0;\n\t\t\t\t\t\t\tfloat perpD = -dot(origin, direction);\n\t\t\t\t\t\t\tfloat depth = radius - sqrt(dot(origin, origin) - sign(perpD) * perpD * perpD);\n\t\t\t\t\t\t\tif (depth < 0.0) { // day\n\t\t\t\t\t\t\t\treturn 1.0 - max(0.0, 0.25 * depth / blendHeight + 0.25);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse { // night\n\t\t\t\t\t\t\t\treturn 1.0 - min(1.0, 0.75 * depth / blendHeight + 0.25);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adjusts the color if one of the RGB values is greater than 1.0.\n\t\t\t\t\t\tvec3 adjustOverbrightness(vec3 color) {\n\t\t\t\t\t\t\tfloat maxColor = max(color.r, max(color.g, color.b));\n\t\t\t\t\t\t\tif (maxColor > 1.0) {\n\t\t\t\t\t\t\t\tfloat f = (maxColor - 1.0) / maxColor;\n\t\t\t\t\t\t\t\tcolor.r = min(1.0, pow(color.r / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t\tcolor.g = min(1.0, pow(color.g / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t\tcolor.b = min(1.0, pow(color.b / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfloat easeInOut(float x, float sharpness) {\n\t\t\t\t\t\t\tfloat b = sharpness;\n\t\t\t\t\t\t\tif (x < 0.5) {\n\t\t\t\t\t\t\t\treturn max(0.0, (pow(b, 2.0 * x) - 1.0) / (2.0 * (b - 1.0)));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn min(1.0, 1.0 - (pow(b, 2.0 * (1.0 - x)) - 1.0) / (2.0 * (b - 1.0)));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Calculates a glow around the light direction.\n\t\t\t\t\t\tfloat glow(float spread, float amount, float lightDotCamera) {\n\t\t\t\t\t\t\treturn amount * spread / (1.0 + spread - lightDotCamera);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adjust the incoming light for the atmosphere.\n\t\t\t\t\t\tvec4 getAtmosphereColor(vec3 incomingLight, vec3 lightPosition) {\n\t\t\t\t\t\t\t// Get position, camera, and light relative to the atmosphere center.\n\t\t\t\t\t\t\thighp vec3 position = cameraSpacePosition - atmospherePosition;\n\t\t\t\t\t\t\thighp vec3 cameraPosition = -atmospherePosition;\n\n\t\t\t\t\t\t\t// Get position, camera, and light relative to the atmosphere orientation.\n\t\t\t\t\t\t\tposition = quatRotInv(atmosphereOrientation, position);\n\t\t\t\t\t\t\tcameraPosition = quatRotInv(atmosphereOrientation, cameraPosition);\n\n\t\t\t\t\t\t\t// Convert everything into a sphere frame.\n\t\t\t\t\t\t\tfloat spheroidRatio = atmosphereEquatorialRadius / atmospherePolarRadius;\n\t\t\t\t\t\t\tposition.z *= spheroidRatio;\n\t\t\t\t\t\t\tcameraPosition.z *= spheroidRatio;\n\n\t\t\t\t\t\t\t// If the ground is a spheroid, get to be the right position.\n\t\t\t\t\t\t\tposition = normalize(position) * atmosphereEquatorialRadius;\n\n\t\t\t\t\t\t\thighp vec3 cameraToPosition = position - cameraPosition;\n\t\t\t\t\t\t\thighp float cameraToPositionDist = length(cameraToPosition / 1.0e8) * 1.0e8;\n\t\t\t\t\t\t\thighp vec3 cameraToPositionUnit = cameraToPosition / cameraToPositionDist;\n\n\t\t\t\t\t\t\t// This will be the final color.\n\t\t\t\t\t\t\tvec4 color = vec4(0.0);\n\n\t\t\t\t\t\t\t// Get the start and end of the sampling from the camera to the position.\n\t\t\t\t\t\t\tfloat start;\n\t\t\t\t\t\t\tfloat end;\n\t\t\t\t\t\t\tgetStartEndSamples(start, end, cameraPosition, cameraToPositionUnit, cameraToPositionDist, atmosphereEquatorialRadius, atmosphereScaleHeight);\n\t\t\t\t\t\t\tfloat step = 1.0 / float(atmosphereNumIterations - 1);\n\t\t\t\t\t\t\tfloat stepDist = step * (end - start);\n\n\t\t\t\t\t\t\t// Do the sampling.\n\t\t\t\t\t\t\tfloat totalDensity = 0.0;\n\t\t\t\t\t\t\tfloat segmentStart = start;\n\t\t\t\t\t\t\tfor (int j = 0; j < atmosphereNumIterations; j++) {\n\t\t\t\t\t\t\t\t// Get the distance that this segment covers.\n\t\t\t\t\t\t\t\tfloat segDist = stepDist;\n\t\t\t\t\t\t\t\tif (j == 0 || j == atmosphereNumIterations - 1) {\n\t\t\t\t\t\t\t\t\tsegDist *= 0.5;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Get the segment start that we're looking at.\n\t\t\t\t\t\t\t\tvec3 p = cameraPosition + segmentStart * cameraToPositionUnit;\n\n\t\t\t\t\t\t\t\t// Get the density at that segment start. It'll be the density for the whole segment.\n\t\t\t\t\t\t\t\tfloat densityAtP = getDensity(p, atmosphereEquatorialRadius, atmosphereDensity, atmosphereScaleHeight);\n\n\t\t\t\t\t\t\t\t// Add it to the total density.\n\t\t\t\t\t\t\t\ttotalDensity += densityAtP * segDist;\n\n\t\t\t\t\t\t\t\t// Next step.\n\t\t\t\t\t\t\t\tsegmentStart += stepDist;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Apply emissivity to the light color.\n\t\t\t\t\t\t\tvec3 sunLightColor = mix(incomingLight, vec3(1.0, 1.0, 1.0), atmosphereEmissivity);\n\n\t\t\t\t\t\t\t// Apply the total density to the transparency of the atmosphere.\n\t\t\t\t\t\t\tcolor.a = clamp(pow(3.0 * totalDensity, 0.3), 0.0, 1.0);\n\n\t\t\t\t\t\t\t// Multiply it all together with the source light color.\n\t\t\t\t\t\t\tcolor.rgb = sunLightColor * atmosphereColor * clamp(pow(15.0 * totalDensity / (atmosphereDensity * atmosphereEquatorialRadius), 0.2), 0.75, 1.0);\n\n\t\t\t\t\t\t\t// Make it more opaque when lower down.\n\t\t\t\t\t\t\tcolor.a *= 1.0 + 0.5 * getDensity(cameraPosition, atmosphereEquatorialRadius, 1.0, atmosphereScaleHeight);\n\n\t\t\t\t\t\t\t// Clamp it to make it clean for the day/night transition.\n\t\t\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t\t\t// Get the light position in the sphere entity-space.\n\t\t\t\t\t\t\tlightPosition = quatRotInv(atmosphereOrientation, lightPosition);\n\t\t\t\t\t\t\tlightPosition.z *= spheroidRatio;\n\t\t\t\t\t\t\thighp vec3 lightToPosition = position - lightPosition;\n\t\t\t\t\t\t\thighp vec3 lightToPositionUnit = normalize(lightToPosition / 1.0e8);\n\n\t\t\t\t\t\t\t// Get the day level, from 0 to 1, and apply it to the alpha.\n\t\t\t\t\t\t\tfloat ambientLightIntensity = min(1.0, length(ambientLightColor));\n\t\t\t\t\t\t\tvec3 dayRefUp = normalize(cameraPosition + end * cameraToPositionUnit);\n\t\t\t\t\t\t\tfloat dayLevel = -dot(lightToPositionUnit, dayRefUp);\n\t\t\t\t\t\t\tfloat lightIntensity = mix(dayLevel, 0.0, ambientLightIntensity);\n\t\t\t\t\t\t\tcolor.a *= mix(atmosphereEmissivity, 1.0, easeInOut(0.25 * 700.0 * atmosphereDensity + 1.0 * lightIntensity, 2.0));\n\n\t\t\t\t\t\t\t// Add broader sun glare.\n\t\t\t\t\t\t\tfloat lightDotCamera = max(0.0, -dot(lightToPositionUnit, cameraToPositionUnit));\n\t\t\t\t\t\t\tcolor.rgb *= sunLightColor * (1.0 + atmosphereSunBrightness * color.a * glow(0.04, 0.125, lightDotCamera));\n\n\t\t\t\t\t\t\t// Apply the sunset.\n\t\t\t\t\t\t\tfloat sunsetAmount = mix(atmosphereSunsetIntensity * easeInOut(0.5 * (1.0 - abs(dayLevel)), 4.0), 0.0, ambientLightIntensity);\n\t\t\t\t\t\t\tcolor.rgb = color.rgb * mix(vec3(1.0), atmosphereSunsetColor, clamp(sunsetAmount, 0.0, 1.0));\n\n\t\t\t\t\t\t\t// Adjust for values that are greater than one.\n\t\t\t\t\t\t\tcolor.rgb = adjustOverbrightness(color.rgb);\n\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\t// Get the camera direction to the position.\n\t\t\t\t\t\tvec3 positionDir = normalize(cameraSpacePosition);\n\n\t\t\t\t\t\t// Calculate the normal.\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tvec3 normal = getNormalFromMap();\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tvec3 normal = normalize(cameraSpaceNormal);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// The diffuse light.\n\t\t\t\t\t\tvec3 diffuseLight = ambientLightColor;\n\t\t\t\t\t\tvec3 specularLight = vec3(0, 0, 0);\n\t\t\t\t\t\tvec4 atmosphereColor = vec4(0, 0, 0, 0);\n\n\t\t\t\t\t\t// For each light,\n\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tif (i >= numLights) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Get lighting angles.\n\t\t\t\t\t\t\tvec3 lightDir = normalize(cameraSpacePosition - lightPositions[i]);\n\t\t\t\t\t\t\tfloat lightCosAngle = -dot(lightDir, normal);\n\n\t\t\t\t\t\t\t// If an atmosphere is being used, brighten up the surface a bit, depending on the density of the atmosphere.\n\t\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\t\tlightCosAngle += 0.25 * 700.0 * atmosphereDensity;\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\t// Get the incoming light after shadows.\n\t\t\t\t\t\t\tvec3 incomingLight = lightColors[i];\n\t\t\t\t\t\t\t#if !defined(colorMapEmmissive) | !defined(nightMapEmmissive) | !defined(decalMapEmmissive)\n\t\t\t\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\t\t\t\tincomingLight = getLightColorFromShadowEntities(incomingLight, lightDir, lightPositions[i], lightRadii[i], normal);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\t\t\t\tincomingLight = getLightColorFromShadowRings(incomingLight, lightDir);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\t// Diffuse shading.\n\t\t\t\t\t\t\tdiffuseLight += incomingLight * saturate(lightCosAngle);\n\n\t\t\t\t\t\t\t// Specular shading.\n\t\t\t\t\t\t\tvec3 reflectedLightDir = reflect(lightDir, normal);\n\t\t\t\t\t\t\tvec3 halfVector = normalize(-lightDir - positionDir);\n\t\t\t\t\t\t\tfloat phongHighlight = 0.25 * pow(saturate(-dot(reflectedLightDir, positionDir)), specularHardness / 2.0);\n\t\t\t\t\t\t\tfloat blinnHighlight = 4.0 * pow(saturate(dot(halfVector, normal)), specularHardness);\n\t\t\t\t\t\t\tfloat specularAngle = phongHighlight + pow(1.0 - saturate(-dot(positionDir, normal)), specularHardness / 12.0) * blinnHighlight;\n\t\t\t\t\t\t\tspecularLight += saturate(lightCosAngle * 20.0) * specularAngle * incomingLight;\t\n\n\t\t\t\t\t\t\t// Atmosphere shading.\n\t\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\t\tif (length(lightPositions[i]) > 0.0) { // don't use a camera light\n\t\t\t\t\t\t\t\t\tatmosphereColor += getAtmosphereColor(incomingLight, lightPositions[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiffuseLight = saturate(diffuseLight);\n\n\t\t\t\t\t\t// If there's ambience, remove the direct light components.\n\t\t\t\t\t\tspecularLight *= vec3(1, 1, 1) - ambientLightColor;\n\n\t\t\t\t\t\t// Main Color map.\n\t\t\t\t\t\tvec4 colorPixel = vec4(1, 0, 1, 1);\n\t\t\t\t\t\t#ifdef colorTextureEnvironment\n\t\t\t\t\t\t\tcolorPixel = getColorFromEnvironmentMap(colorTexture, positionDir, normal);\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tcolorPixel = texture2D(colorTexture, vColorUV) * vec4(color, 1);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef baseColor\n\t\t\t\t\t\t\tcolorPixel = vec4(color, 1);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Apply diffuse shading.\n\t\t\t\t\t\t#ifndef colorMapEmmissive\n\t\t\t\t\t\t\tcolorPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tgl_FragColor = colorPixel;\n\n\t\t\t\t\t\t// Specular Map\n\t\t\t\t\t\tvec3 specularPixel = specularColor * specularIntensity;\n\t\t\t\t\t\t#ifdef specularMap\n\t\t\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\t\t\tvec2 specularUV = vSpecularUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 specularUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tspecularPixel = specularColor * texture2D(specularTexture, specularUV).r;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Apply specular Shading\n\t\t\t\t\t\tgl_FragColor.rgb += specularLight * specularPixel;\n\n\t\t\t\t\t\t// Night-Side Map\n\t\t\t\t\t\t#ifdef nightMap\n\t\t\t\t\t\t\tfloat ambientLightIntensity = min(1.0, length(ambientLightColor));\n\t\t\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\t\t\tvec2 nightUV = vNightUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 nightUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec4 nightPixel = texture2D(nightTexture, nightUV);\n\t\t\t\t\t\t\t#ifndef nightMapEmmissive\n\t\t\t\t\t\t\t\tnightPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tgl_FragColor = mix(gl_FragColor, nightPixel, 1.0 - min(1.0, length(ambientLightColor + diffuseLight)));//(1.0 - ambientLightIntensity) * saturate(0.5 - length(diffuseLight)));\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Decal Map\n\t\t\t\t\t\t#ifdef decalMap\n\t\t\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\t\t\tvec2 decalUV = vDecalUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 decalUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec4 decalPixel = texture2D(decalTexture, decalUV);\n\t\t\t\t\t\t\t#ifndef decalMapEmmissive\n\t\t\t\t\t\t\t\tdecalPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(gl_FragColor.rgb, decalPixel.rgb, decalPixel.a);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Atmosphere\n\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(gl_FragColor.rgb, atmosphereColor.rgb, clamp(atmosphereColor.a, 0.0, 1.0));\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}"
								}));
							for (
								var t = MaterialUtilsPhong._material.clone(), e = 0;
								e < t.uniforms.shadowEntityPositions.value.length;
								e++
							)
								t.uniforms.shadowEntityPositions.value[e] =
									MaterialUtilsPhong._material.uniforms.shadowEntityPositions.value[e].clone();
							return Ut.setupLogDepthBuffering(t), (t.extensions.derivatives = !0), (t.needsUpdate = !0), t;
						}
					}
				]),
				MaterialUtilsPhong
			);
		})();
		At._material = null;
		var Rt = At;
		function material_utils_standard_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var It = (function () {
			function MaterialUtilsStandard() {
				!(function material_utils_standard_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, MaterialUtilsStandard);
			}
			return (
				(function material_utils_standard_createClass(t, e, n) {
					return (
						e && material_utils_standard_defineProperties(t.prototype, e),
						n && material_utils_standard_defineProperties(t, n),
						t
					);
				})(MaterialUtilsStandard, null, [
					{
						key: 'get',
						value: function get() {
							null === MaterialUtilsStandard._material &&
								(MaterialUtilsStandard._material = new i.ShaderMaterial({
									uniforms: {
										ambientLightColor: new i.Uniform(new i.Color()),
										lightPositions: new i.Uniform([
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0)
										]),
										lightColors: new i.Uniform([
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0)
										]),
										lightRadii: new i.Uniform([0, 0, 0, 0, 0]),
										numLights: new i.Uniform(0),
										environmentIntensity: new i.Uniform(1),
										gammaCorrectionFactor: new i.Uniform(1),
										entityPos: new i.Uniform(new i.Vector3()),
										color: new i.Uniform(new i.Color(1, 1, 1)),
										metalness: new i.Uniform(0),
										roughness: new i.Uniform(0),
										emissiveColor: new i.Uniform(new i.Color(0, 0, 0)),
										colorTexture: new i.Uniform(null),
										roughnessTexture: new i.Uniform(null),
										metalnessTexture: new i.Uniform(null),
										normalTexture: new i.Uniform(null),
										emissiveTexture: new i.Uniform(null),
										numShadowEntities: new i.Uniform(0),
										shadowEntityPositions: new i.Uniform([
											new i.Vector3(),
											new i.Vector3(),
											new i.Vector3(),
											new i.Vector3(),
											new i.Vector3()
										]),
										shadowEntityRadii: new i.Uniform([0, 0, 0, 0, 0]),
										shadowEntityRayleighAmount: new i.Uniform([0, 0, 0, 0, 0]),
										envTexture: new i.Uniform(null),
										maxMipLevel: new i.Uniform(0),
										dynEnvTexture: new i.Uniform(null),
										dynEnvFaceSize: new i.Uniform(0),
										normalScale: new i.Uniform(new i.Vector2())
									},
									vertexShader:
										'\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tattribute vec4 tangent;\n\t\t\t\t\t\tvarying vec4 localTangent;\n\t\t\t\t\t\tvarying vec3 localNormal;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 modelNormal;\n\t\t\t\t\t#endif\n\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\tvarying vec2 localUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tlocalTangent = tangent;\n\t\t\t\t\t\t\tlocalNormal = normal;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tmodelNormal = normalize((modelMatrix * vec4(normal, 0.)).xyz);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\t\tlocalUV = uv;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tcameraSpacePosition = (modelMatrix * vec4(position, 1.)).xyz;\n\t\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}',
									fragmentShader:
										'\n\t\t\t\t\t#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\t\t\t\t\t#define EPSILON 1e-6\n\t\t\t\t\t#define PI 3.14159265359\n\t\t\t\t\t#define RECIPROCAL_PI 0.31830988618\n\t\t\t\t\t#define RECIPROCAL_PI2 0.15915494\n\t\t\t\t\t#ifndef saturate\n\t\t\t\t\t\t#define saturate(a) clamp( a, 0.0, 1.0 )\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat pow2( float x ) { return x*x; }\n\n\t\t\t\t\tuniform mat4 modelMatrix;\n\n\t\t\t\t\t// Lights\n\t\t\t\t\tuniform vec3 ambientLightColor;\n\t\t\t\t\tuniform vec3 lightPositions[5];\n\t\t\t\t\tuniform vec3 lightColors[5];\n\t\t\t\t\tuniform float lightRadii[5];\n\t\t\t\t\tuniform int numLights;\n\t\t\t\t\tuniform float environmentIntensity;\n\t\t\t\t\tuniform float gammaCorrectionFactor;\n\n\t\t\t\t\t// External lighting and camera.\n\t\t\t\t\tuniform vec3 entityPos;\n\n\t\t\t\t\t// Textures.\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform sampler2D roughnessTexture;\n\t\t\t\t\tuniform sampler2D metalnessTexture;\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform sampler2D normalTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef emissiveMap\n\t\t\t\t\t\tuniform sampler2D emissiveTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\tuniform sampler2D dynEnvTexture;\n\t\t\t\t\t\tuniform float dynEnvFaceSize;\n\t\t\t\t\t#elif defined( envMap )\n\t\t\t\t\t\t#ifdef envIsCube\n\t\t\t\t\t\t\tuniform samplerCube envTexture;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tuniform sampler2D envTexture;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform vec2 normalScale;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Shadow Entities.\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tuniform int numShadowEntities;\n\t\t\t\t\t\tuniform vec3 shadowEntityPositions[5];\n\t\t\t\t\t\tuniform float shadowEntityRadii[5];\n\t\t\t\t\t\tuniform float shadowEntityRayleighAmount[5];\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Scalars\n\t\t\t\t\tuniform vec3 color;\n\t\t\t\t\tuniform float roughness;\n\t\t\t\t\tuniform float metalness;\n\t\t\t\t\tuniform vec3 emissiveColor;\n\n\t\t\t\t\t// The varying attributes.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvarying vec4 localTangent;\n\t\t\t\t\t\tvarying vec3 localNormal;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 modelNormal;\n\t\t\t\t\t#endif\n\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\tvarying vec2 localUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform float near;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tstruct PhysicalMaterial {\n\t\t\t\t\t\tvec3 diffuseColor;\n\t\t\t\t\t\tvec3 specularColor;\n\t\t\t\t\t\tfloat specularRoughness;\n\t\t\t\t\t};\n\t\t\t\t\tstruct IncidentLight {\n\t\t\t\t\t\tvec3 color;\n\t\t\t\t\t\tvec3 direction;\n\t\t\t\t\t};\n\n\t\t\t\t\tstruct ReflectedLight {\n\t\t\t\t\t\tvec3 directDiffuse;\n\t\t\t\t\t\tvec3 directSpecular;\n\t\t\t\t\t\tvec3 indirectDiffuse;\n\t\t\t\t\t\tvec3 indirectSpecular;\n\t\t\t\t\t};\n\n\t\t\t\t\tstruct GeometricContext {\n\t\t\t\t\t\tvec3 normal;\n\t\t\t\t\t\tvec3 viewDir;\n\t\t\t\t\t};\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvec3 getNormalFromMap() {\n\t\t\t\t\t\t\tvec3 normal = normalize(localNormal);\n\t\t\t\t\t\t\tvec3 tangent = normalize(localTangent.xyz);\n\t\t\t\t\t\t\tvec3 bitangent = normalize(cross(normal, tangent));\n\t\t\t\t\t\t\tif (localTangent.w < 0.0) {\n\t\t\t\t\t\t\t\tbitangent *= -1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmat3 transform = mat3(tangent, bitangent, normal);\n\t\t\t\t\t\t\tvec3 normalFromMap = texture2D(normalTexture, localUV).rgb * 2.0 - 1.0;\n\t\t\t\t\t\t\tnormalFromMap.xy *= vec2(1, -1);\n\t\t\t\t\t\t\tnormalFromMap.xy *= normalScale;\n\t\t\t\t\t\t\treturn normalize(transform * normalFromMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tvec3 applyRayleighScattering(vec3 color, float amount) {\n\t\t\t\t\t\t\tfloat value = (color.r + color.g + color.b);\n\t\t\t\t\t\t\tif (value > 0.0) {\n\t\t\t\t\t\t\t\tfloat rFactor = 1.0; // 6.3^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat gFactor = 1.602; // 5.6^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat bFactor = 3.228; // 4.7^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tcolor.r *= pow(rFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.g *= pow(gFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.b *= pow(bFactor, -amount);\n\t\t\t\t\t\t\t\tcolor = value * color / (color.r + color.g + color.b);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 getLightColorFromShadowEntities(vec3 lightColor, vec3 lightDir, vec3 lightPosition, float lightRadius, vec3 normal) {\n\t\t\t\t\t\t\tvec3 color = lightColor;\n\t\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\t\tif (i >= numShadowEntities) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvec3 origin = cameraSpacePosition - shadowEntityPositions[i];\n\t\t\t\t\t\t\t\tvec3 axis = normalize(shadowEntityPositions[i] - lightPosition);\n\t\t\t\t\t\t\t\tfloat originOffset = dot(origin, axis);\n\t\t\t\t\t\t\t\tif (originOffset > 0.0) {\n\t\t\t\t\t\t\t\t\tfloat e = length(origin - dot(origin, axis) * axis);\n\t\t\t\t\t\t\t\t\tfloat ld = dot(cameraSpacePosition - lightPosition, axis);\n\t\t\t\t\t\t\t\t\tfloat sd = dot(cameraSpacePosition - shadowEntityPositions[i], axis);\n\t\t\t\t\t\t\t\t\tfloat lr = lightRadius;\n\t\t\t\t\t\t\t\t\tfloat sr = shadowEntityRadii[i];\n\t\t\t\t\t\t\t\t\tfloat e0 = abs(sr * ld - lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat e1 = (sr * ld + lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat lightLevel = 0.0;\n\t\t\t\t\t\t\t\t\tif (e1 < 0.0 || sd < 0.0) { // light in front of shadow entity\n\t\t\t\t\t\t\t\t\t\tlightLevel = 1.0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (e0 < e1) {\n\t\t\t\t\t\t\t\t\t\tfloat m = 1.0 - saturate(pow(atan(sr / sd) / atan(lr / ld), 2.0));\n\t\t\t\t\t\t\t\t\t\tlightLevel = mix(m, 1.0, saturate(shadowEntityRayleighAmount[i] / 10.0 + (e - e0) / (e1 - e0))); // soft light\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlightLevel = e < e0 ? 0.0 : 1.0; // 0 radius light.\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcolor = lightLevel * applyRayleighScattering(color, (1.0 - lightLevel) * shadowEntityRayleighAmount[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\t\t\t\t\t\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\t\t\t\t\t}\n\n\t\t\t\t\t// These use optimizations found in https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf.\n\n\t\t\t\t\t// The Smith-method geometry function. Calculates the ratio of incident light that is blocked by the microfacets to never reach the viewer.\n\t\t\t\t\t// alpha is the roughness^2\n\t\t\t\t\t// dotNL is the normal  the light vector.\n\t\t\t\t\t// dotNV is the normal  the view vector.\n\t\t\t\t\tfloat G_GGX_SmithCorrelated( float alpha, float dotNL, float dotNV ) {\n\t\t\t\t\t\tfloat a2 = pow2( alpha );\n\t\t\t\t\t\t// Get the light direction part of the geometry function.\n\t\t\t\t\t\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\t\t\t\t\t\t// Get the view direction part of the geometry function.\n\t\t\t\t\t\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\t\t\t\t\t\t// It would normally be be gv * gl, but this is using an optimization by Heitz (2014),\n\t\t\t\t\t\t// including the BRDF denominator, simplifying the results.\n\t\t\t\t\t\treturn 0.5 / max( gv + gl, EPSILON );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The Trowbridge-Reitz normal distribution function. Calculates the relative surface area microfacets exactly aligned to the halfway vector, how "smooth" the surface is.\n\t\t\t\t\t// alpha is the roughness^2.\n\t\t\t\t\t// dotNH is the normal  the halfway vector.\n\t\t\t\t\tfloat D_GGX( float alpha, float dotNH ) {\n\t\t\t\t\t\tfloat a2 = pow2( alpha );\n\t\t\t\t\t\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\t\t\t\t\t\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The Schlick approximation for the Fresnel equation.\n\t\t\t\t\t// Since metallic and non-metallic surfaces have different equations, this function combines the two by approximation.\n\t\t\t\t\t// specularColor is the specular color at normal incidence.\n\t\t\t\t\t// dotLH is the light direction  the halfway vector.\n\t\t\t\t\tvec3 F_Schlick( vec3 specularColor, float dotLH ) {\n\t\t\t\t\t\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\t\t\t\t\t\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\t\t\t\t\t}\n\n\t\t\t\t\t// The specular part of the main BRDF function that describes the weighting function for the sum of every incoming light.\n\t\t\t\t\t// It uses the Cook-Torrance model.\n\t\t\t\t\tvec3 BRDF_Specular_GGX( IncidentLight incidentLight, GeometricContext geometry, vec3 specularColor, float roughness ) {\n\t\t\t\t\t\tfloat alpha = pow2( roughness );\n\t\t\t\t\t\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\t\t\t\t\t\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\t\t\t\t\t\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\t\t\t\t\t\tvec3 F = F_Schlick( specularColor, dotLH );\n\t\t\t\t\t\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\t\t\t\t\tfloat D = D_GGX( alpha, dotNH );\n\t\t\t\t\t\treturn F * ( G * D );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The diffuse part of the main BRDF function.\n\t\t\t\t\tvec3 BRDF_Diffuse_Lambert( vec3 diffuseColor ) {\n\t\t\t\t\t\treturn RECIPROCAL_PI * diffuseColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat BlinnExponentToGGXRoughness( float blinnExponent ) {\n\t\t\t\t\t\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat GGXRoughnessToBlinnExponent( float ggxRoughness ) {\n\t\t\t\t\t\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n\t\t\t\t\t}\n\n\t\t\t\t\tvec2 integrateSpecularBRDF( float dotNV, float roughness ) {\n\t\t\t\t\t\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\t\t\t\t\t\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\t\t\t\t\t\tvec4 r = roughness * c0 + c1;\n\t\t\t\t\t\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\t\t\t\t\t\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\t\t\t\t\t}\n\n\t\t\t\t\tvec3 BRDF_Specular_GGX_Environment( GeometricContext geometry, vec3 specularColor, float roughness ) {\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\t\t\t\t\t\treturn specularColor * brdf.x + brdf.y;\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid BRDF_Specular_Multiscattering_Environment( GeometricContext geometry, vec3 specularColor, float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tvec3 F = F_Schlick( specularColor, dotNV );\n\t\t\t\t\t\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\t\t\t\t\t\tvec3 FssEss = F * brdf.x + brdf.y;\n\t\t\t\t\t\tfloat Ess = brdf.x + brdf.y;\n\t\t\t\t\t\tfloat Ems = 1.0 - Ess;\n\t\t\t\t\t\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\t\t\t\t\t\tsingleScatter += FssEss;\n\t\t\t\t\t\tmultiScatter += Fms * Ems;\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat opacity = 1.0;\n\n\t\t\t\t\tuniform float reflectivity;\n\t\t\t\t\tuniform int maxMipLevel;\n\n\t\t\t\t\t// Returns the radiance: the incoming light * the cos(light angle to the normal)\n\t\t\t\t\tvec3 getIncomingLight( IncidentLight directLight, GeometricContext geometry) {\n\t\t\t\t\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\t\t\t\t\treturn (dotNL * directLight.color);\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat getSpecularMIPLevel( float blinnShininessExponent, int maxMIPLevel ) {\n\t\t\t\t\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\t\t\t\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\t\t\t\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t\t\t\t\t}\n\n\t\t\t\t\t#ifdef envIsCubeUV\n\t\t\t\t\t\tuniform int inputEncoding;\n\t\t\t\t\t\tuniform int outputEncoding;\n\t\t\t\t\t\tvec4 inputTexelToLinear( vec4 value ) {\n\t\t\t\t\t\t\tif ( inputEncoding == 0 ) {\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t} else if ( inputEncoding == 1 ) {\n\t\t\t\t\t\t\t\treturn sRGBToLinear( value );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 2 ) {\n\t\t\t\t\t\t\t\treturn RGBEToLinear( value );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 3 ) {\n\t\t\t\t\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 4 ) {\n\t\t\t\t\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 5 ) {\n\t\t\t\t\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn GammaToLinear( value, 2.2 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\t\t\t\t\t\t\treturn inputTexelToLinear( color );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// These defines must match with PMREMGenerator\n\t\t\t\t\t\t#define cubeUV_maxMipLevel 8.0\n\t\t\t\t\t\t#define cubeUV_minMipLevel 4.0\n\t\t\t\t\t\t#define cubeUV_maxTileSize 256.0\n\t\t\t\t\t\t#define cubeUV_minTileSize 16.0\n\t\t\t\t\t\t// These shader functions convert between the UV coordinates of a single face of\n\t\t\t\t\t\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t\t\t\t\t\t// sampling a textureCube (not generally normalized ).\n\t\t\t\t\t\tfloat getFace( vec3 direction ) {\n\t\t\t\t\t\t\tvec3 absDirection = abs( direction );\n\t\t\t\t\t\t\tfloat face = - 1.0;\n\t\t\t\t\t\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\t\t\t\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn face;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// RH coordinate system; PMREM face-indexing convention\n\t\t\t\t\t\tvec2 getUV( vec3 direction, float face ) {\n\t\t\t\t\t\t\tvec2 uv;\n\t\t\t\t\t\t\tif ( face == 0.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\t\t\t\t\t\t\t} else if ( face == 1.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\t\t\t\t\t\t\t} else if ( face == 2.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\t\t\t\t\t\t\t} else if ( face == 3.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\t\t\t\t\t\t\t} else if ( face == 4.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0.5 * ( uv + 1.0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec3 bilinearCubeUV( sampler2D environmentMap, vec3 direction, float mipInt ) {\n\t\t\t\t\t\t\tfloat face = getFace( direction );\n\t\t\t\t\t\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\t\t\t\t\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\t\t\t\t\t\tfloat faceSize = exp2( mipInt );\n\t\t\t\t\t\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\t\t\t\t\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\t\t\t\t\t\tvec2 f = fract( uv );\n\t\t\t\t\t\t\tuv += 0.5 - f;\n\t\t\t\t\t\t\tif ( face > 2.0 ) {\n\t\t\t\t\t\t\t\tuv.y += faceSize;\n\t\t\t\t\t\t\t\tface -= 3.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuv.x += face * faceSize;\n\t\t\t\t\t\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\t\t\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\t\t\t\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\t\t\t\t\t\tuv *= texelSize;\n\t\t\t\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tuv.x += texelSize;\n\t\t\t\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tuv.y += texelSize;\n\t\t\t\t\t\t\tvec3 br = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tuv.x -= texelSize;\n\t\t\t\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\t\t\t\treturn mix( tm, bm, f.y );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#define r0 1.0\n\t\t\t\t\t\t#define v0 0.339\n\t\t\t\t\t\t#define m0 - 2.0\n\t\t\t\t\t\t#define r1 0.8\n\t\t\t\t\t\t#define v1 0.276\n\t\t\t\t\t\t#define m1 - 1.0\n\t\t\t\t\t\t#define r4 0.4\n\t\t\t\t\t\t#define v4 0.046\n\t\t\t\t\t\t#define m4 2.0\n\t\t\t\t\t\t#define r5 0.305\n\t\t\t\t\t\t#define v5 0.016\n\t\t\t\t\t\t#define m5 3.0\n\t\t\t\t\t\t#define r6 0.21\n\t\t\t\t\t\t#define v6 0.0038\n\t\t\t\t\t\t#define m6 4.0\n\t\t\t\t\t\tfloat roughnessToMip( float roughness ) {\n\t\t\t\t\t\t\tfloat mip = 0.0;\n\t\t\t\t\t\t\tif ( roughness >= r1 ) {\n\t\t\t\t\t\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t\t\t\t\t\t} else if ( roughness >= r4 ) {\n\t\t\t\t\t\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t\t\t\t\t\t} else if ( roughness >= r5 ) {\n\t\t\t\t\t\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t\t\t\t\t\t} else if ( roughness >= r6 ) {\n\t\t\t\t\t\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn mip;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec4 textureCubeUV( sampler2D environmentMap, vec3 sampleDir, float roughness ) {\n\t\t\t\t\t\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\t\t\t\t\t\tfloat mipF = fract( mip );\n\t\t\t\t\t\t\tfloat mipInt = floor( mip );\n\t\t\t\t\t\t\tvec3 color0 = bilinearCubeUV( environmentMap, sampleDir, mipInt );\n\t\t\t\t\t\t\tif ( mipF == 0.0 ) {\n\t\t\t\t\t\t\t\treturn vec4( color0, 1.0 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvec3 color1 = bilinearCubeUV( environmentMap, sampleDir, mipInt + 1.0 );\n\t\t\t\t\t\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t// Converts an XY in cylindrical space to a face (z) with coordinates within that face (xy).\n\t\t\t\t\t\tvec3 xyzToUvFace(vec3 xyz, float pixelSize) {\n\t\t\t\t\t\t\t// Figure out which basis we\'re using.\n\t\t\t\t\t\t\tvec3 basis[3];\n\t\t\t\t\t\t\tfloat face;\n\t\t\t\t\t\t\tif (xyz.x * xyz.x >= xyz.y * xyz.y && xyz.x * xyz.x >= xyz.z * xyz.z) {\n\t\t\t\t\t\t\t\tif (xyz.x >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(1, 0, 0);\n\t\t\t\t\t\t\t\t\tface = 0.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, -1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(-1, 0, 0);\n\t\t\t\t\t\t\t\t\tface = 2.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyz.y * xyz.y >= xyz.x * xyz.x && xyz.y * xyz.y >= xyz.z * xyz.z) {\n\t\t\t\t\t\t\t\tif (xyz.y >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(-1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, 1, 0);\n\t\t\t\t\t\t\t\t\tface = 1.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, -1, 0);\n\t\t\t\t\t\t\t\t\tface = 3.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (xyz.z >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(-1, 0, 0); basis[2] = vec3(0, 0, 1);\n\t\t\t\t\t\t\t\t\tface = 4.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(1, 0, 0); basis[2] = vec3(0, 0, -1);\n\t\t\t\t\t\t\t\t\tface = 5.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Convert into the uv basis from the xyz basis.\n\t\t\t\t\t\t\tfloat z = basis[2].x * xyz.x + basis[2].y * xyz.y + basis[2].z * xyz.z;\n\t\t\t\t\t\t\tif (z < 0.0) {\n\t\t\t\t\t\t\t\tz = 1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvec2 uv = vec2(\n\t\t\t\t\t\t\t\t(basis[0].x * xyz.x + basis[0].y * xyz.y + basis[0].z * xyz.z) / z,\n\t\t\t\t\t\t\t\t(basis[1].x * xyz.x + basis[1].y * xyz.y + basis[1].z * xyz.z) / z);\n\n\t\t\t\t\t\t\t// Convert from -1 to +1, to 0 to 1.\n\t\t\t\t\t\t\tuv = 0.5 * (uv + vec2(1.0));\n\n\t\t\t\t\t\t\t// Convert to pixel-space.\n\t\t\t\t\t\t\tuv *= pixelSize;\n\n\t\t\t\t\t\t\t// Shrink to ignore 1 pixel borders.\n\t\t\t\t\t\t\tuv.x = (pixelSize - 2.0) / pixelSize * uv.x + 1.0;\n\t\t\t\t\t\t\tuv.y = (pixelSize - 2.0) / pixelSize * uv.y + 1.0;\n\n\t\t\t\t\t\t\t// Convert back to unit-space.\n\t\t\t\t\t\t\tuv /= pixelSize;\n\n\t\t\t\t\t\t\treturn vec3(uv, face);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Gets the dynamic environmental lighting given the outward direction.\n\t\t\t\t\t\tvec3 getEnvLight(vec3 direction, float roughness) {\n\t\t\t\t\t\t\t// Get the mip levels.\n\t\t\t\t\t\t\tfloat mipLevel = pow(roughness, 0.25) * (log2(dynEnvFaceSize) - 2.0);\n\t\t\t\t\t\t\tfloat mipLevel0 = floor(mipLevel);\n\t\t\t\t\t\t\tfloat mipLevel1 = floor(mipLevel) + 1.0;\n\t\t\t\t\t\t\tfloat mipLevelU = mipLevel - mipLevel0;\n\t\t\t\t\t\t\tfloat mipSizeX0 = pow(2.0, -mipLevel0);\n\t\t\t\t\t\t\tfloat mipOffsetY0 = 1.0 - pow(2.0, -mipLevel0);\n\t\t\t\t\t\t\tfloat mipSizeX1 = pow(2.0, -mipLevel1);\n\t\t\t\t\t\t\tfloat mipOffsetY1 = 1.0 - pow(2.0, -mipLevel1);\n\t\t\t\t\t\t\t// Get UV within a mip of cube faces.\n\t\t\t\t\t\t\tvec3 uvFace0 = xyzToUvFace(direction, dynEnvFaceSize * mipSizeX0);\n\t\t\t\t\t\t\tvec3 uvFace1 = xyzToUvFace(direction, dynEnvFaceSize * mipSizeX1);\n\t\t\t\t\t\t\tvec2 faceOffset = vec2(mod(uvFace0.z, 3.0) / 3.0, floor(uvFace0.z / 3.0) / 2.0);\n\t\t\t\t\t\t\tvec2 uvInMip0 = vec2(faceOffset.x + uvFace0.x / 3.0, faceOffset.y + uvFace0.y / 2.0);\n\t\t\t\t\t\t\tvec2 uvInMip1 = vec2(faceOffset.x + uvFace1.x / 3.0, faceOffset.y + uvFace1.y / 2.0);\n\t\t\t\t\t\t\t// Get the UVs within the textures.\n\t\t\t\t\t\t\tvec2 uv0 = vec2(uvInMip0.x * mipSizeX0 * 0.75, 0.5 * uvInMip0.y * mipSizeX0 + mipOffsetY0);\n\t\t\t\t\t\t\tvec2 uv1 = vec2(uvInMip1.x * mipSizeX1 * 0.75, 0.5 * uvInMip1.y * mipSizeX1 + mipOffsetY1);\n\t\t\t\t\t\t\tvec3 color0 = texture2D(dynEnvTexture, uv0).rgb;  // Not using sRGB here, since the phong shader (most used in reflections) outputs linear\n\t\t\t\t\t\t\tvec3 color1 = texture2D(dynEnvTexture, uv1).rgb;\n\t\t\t\t\t\t\treturn mix(color0, color1, mipLevelU) * environmentIntensity * ((PI - 1.0) * roughness + 1.0);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec3 getLightProbeIndirectRadiance( GeometricContext geometry, float blinnShininessExponent, int maxMIPLevel ) {\n\t\t\t\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t\t\t\t\t#if defined( envMap )\n\t\t\t\t\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\t\t\t\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t\t\t\t\t\tvec3 queryReflectVec = vec3( reflectVec.x, reflectVec.yz );\n\t\t\t\t\t\t\t#ifdef envIsCube\n\t\t\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(textureCubeLodEXT( envTexture, queryReflectVec, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(textureCube( envTexture, queryReflectVec, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#elif defined( envIsCubeUV )\n\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(textureCubeUV( envTexture, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent )));\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 sampleUV;\n\t\t\t\t\t\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\t\t\t\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(texture2DLodEXT( envTexture, sampleUV, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(texture2D( envTexture, sampleUV, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\treturn envMapColor.rgb * environmentIntensity;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\treturn vec3(0, 0, 0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}\n\n\t\t\t\t\t// Given the directLight, accumulates onto the reflectedLight the irradiance as the BRDF function.\n\t\t\t\t\tvoid RE_Direct_Physical( IncidentLight directLight, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getIncomingLight( directLight, geometry );\n\t\t\t\t\t\tirradiance *= PI;\n\t\t\t\t\t\tfloat clearCoatDHR = 0.0;\n\t\t\t\t\t\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\t\t\t\t\t\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid RE_IndirectDiffuse_Physical( vec3 irradiance, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid RE_IndirectSpecular_Physical( vec3 radiance, vec3 irradiance, vec3 clearCoatRadiance, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t\t\t\t\t\tfloat clearCoatDHR = 0.0;\n\t\t\t\t\t\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t\t\t\t\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t\t\t\t\t}\n\n\t\t\t\t\t#define RE_Direct RE_Direct_Physical\n\t\t\t\t\t#define Material_BlinnShininessExponent( material ) GGXRoughnessToBlinnExponent( material.specularRoughness )\n\t\t\t\t\t#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical\n\t\t\t\t\t#define RE_IndirectSpecular RE_IndirectSpecular_Physical\n\n\t\t\t\t\tvec3 getAmbientLightIrradiance( vec3 ambientLightColor ) {\n\t\t\t\t\t\tvec3 irradiance = ambientLightColor;\n\t\t\t\t\t\tirradiance *= PI;\n\t\t\t\t\t\treturn irradiance;\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tvec4 diffuseColor = vec4( color, 1.0 );\n\t\t\t\t\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t\t\t\t\t\t#ifdef colorMap\n\t\t\t\t\t\t\tvec4 texelColor = sRGBToLinear(texture2D(colorTexture, localUV));\n\t\t\t\t\t\t\tdiffuseColor *= texelColor;\n\t\t\t\t\t\t\topacity = texelColor.a;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// PBR variables\n\t\t\t\t\t\tfloat roughnessFactor;\n\t\t\t\t\t\tfloat metalnessFactor;\n\n\t\t\t\t\t\troughnessFactor = roughness;\n\t\t\t\t\t\t#ifdef roughnessMap\n\t\t\t\t\t\t\troughnessFactor *= texture2D( roughnessTexture, localUV ).g;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tmetalnessFactor = metalness;\n\t\t\t\t\t\t#ifdef metalnessMap\n\t\t\t\t\t\t\tmetalnessFactor *= texture2D( metalnessTexture, localUV ).b;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tPhysicalMaterial material;\n\t\t\t\t\t\tmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\t\t\t\t\t\tmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n\t\t\t\t\t\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n\t\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\t\tgeometry.viewDir = -normalize(cameraSpacePosition);\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tgeometry.normal = normalize((modelMatrix * vec4(getNormalFromMap(), 0.)).xyz);\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tgeometry.normal = modelNormal;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Env Light\n\t\t\t\t\t\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\tirradiance += getEnvLight(geometry.normal, 1.0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec3 radiance = vec3(0.0);\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\tradiance += getEnvLight(reflect(-geometry.viewDir, geometry.normal), material.specularRoughness);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Add emissivity.\n\t\t\t\t\t\tvec3 totalEmissiveRadiance = vec3(0, 0, 0);\n\t\t\t\t\t\t#ifdef emissiveMap\n\t\t\t\t\t\t\ttotalEmissiveRadiance = emissiveColor * sRGBToLinear(texture2D(emissiveTexture, localUV)).rgb;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Add direct radiance.\n\t\t\t\t\t\tvec3 totalDirectIrradiance = ambientLightColor;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\ttotalDirectIrradiance += getEnvLight(reflect(-geometry.viewDir, geometry.normal), material.specularRoughness);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// For each light,\n\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tif (i >= numLights) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\t\t\tdirectLight.color = lightColors[i];\n\t\t\t\t\t\t\tdirectLight.direction = -normalize(cameraSpacePosition - lightPositions[i]);\n\t\t\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\t\t\tdirectLight.color = getLightColorFromShadowEntities(directLight.color, directLight.direction, lightPositions[i], lightRadii[i], geometry.normal);\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\tRE_Direct(directLight, geometry, material, reflectedLight);\n\n\t\t\t\t\t\t\tradiance += getLightProbeIndirectRadiance(geometry, Material_BlinnShininessExponent(material), maxMipLevel);\n\t\t\t\t\t\t\tRE_IndirectDiffuse(irradiance, geometry, material, reflectedLight);\n\t\t\t\t\t\t\tRE_IndirectSpecular(radiance, irradiance, vec3(0.0), geometry, material, reflectedLight);\n\n\t\t\t\t\t\t\t// Modify env light by total incoming light.\n\t\t\t\t\t\t\ttotalDirectIrradiance += getIncomingLight(directLight, geometry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multiply in the direct irradiance.\n\t\t\t\t\t\treflectedLight.indirectSpecular *= totalDirectIrradiance;\n\n\t\t\t\t\t\t// If there\'s ambience, remove the direct light components.\n\t\t\t\t\t\treflectedLight.directDiffuse *= vec3(1, 1, 1) - ambientLightColor;\n\t\t\t\t\t\treflectedLight.directSpecular *= vec3(1, 1, 1) - ambientLightColor;\n\n\t\t\t\t\t\t// Add the reflected light to the outgoing light.\n\t\t\t\t\t\tvec3 outgoingLight = totalEmissiveRadiance + reflectedLight.directDiffuse + reflectedLight.directSpecular + reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;\n\n\t\t\t\t\t\t// Set the frag color based on the total outgoing light.\n\t\t\t\t\t\tgl_FragColor = vec4( outgoingLight, opacity );\n\n\t\t\t\t\t\t// Gamma correction\n\t\t\t\t\t\tgl_FragColor = vec4( pow( abs(gl_FragColor.rgb), vec3( 1.0 / gammaCorrectionFactor ) ), gl_FragColor.a );\n\n\t\t\t\t\t\t// Convert to sRGB.\n\t\t\t\t\t\tgl_FragColor = LinearTosRGB(gl_FragColor);\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}'
								}));
							for (
								var t = MaterialUtilsStandard._material.clone(), e = 0;
								e < t.uniforms.shadowEntityPositions.value.length;
								e++
							)
								t.uniforms.shadowEntityPositions.value[e] =
									MaterialUtilsStandard._material.uniforms.shadowEntityPositions.value[e].clone();
							return (
								Ut.setupLogDepthBuffering(t),
								Ht.hasGLExtension('EXT_shader_texture_lod') && (t.extensions.shaderTextureLOD = !0),
								(t.extensions.derivatives = !0),
								(t.needsUpdate = !0),
								t
							);
						}
					}
				]),
				MaterialUtilsStandard
			);
		})();
		It._material = null;
		var Mt = It;
		function material_utils_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Lt = (function () {
			function MaterialUtils() {
				!(function material_utils_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, MaterialUtils);
			}
			return (
				(function material_utils_createClass(t, e, n) {
					return e && material_utils_defineProperties(t.prototype, e), n && material_utils_defineProperties(t, n), t;
				})(MaterialUtils, null, [
					{
						key: 'setLightSourceUniforms',
						value: function setLightSourceUniforms(t, e, n) {
							for (var r = e.getScene(), i = z.pool.get(), o = 0, a = r.getNumLightSources(); o < Math.min(a, 5); o++) {
								var s = r.getLightSource(o);
								if (null !== s) {
									var l = s.getEntity().getCameraSpacePosition(n);
									i.mult(s.getColor(), 1);
									for (var c = s.getEntity().getOcclusionRadius(), u = 0, _ = t.length; u < _; u++)
										t[u].uniforms.lightPositions.value[o].set(l.x, l.y, l.z),
											t[u].uniforms.lightColors.value[o].set(i.r, i.g, i.b),
											(t[u].uniforms.lightRadii.value[o] = c);
								}
							}
							for (var p = 0, h = t.length; p < h; p++) t[p].uniforms.numLights.value = r.getNumLightSources();
							z.pool.release(i);
						}
					},
					{
						key: 'setUniforms',
						value: function setUniforms(t, e, n, r, o, a) {
							var s = n.getScene().getEngine().getTime(),
								l = n.getScene().getAmbientLightColor();
							MaterialUtils.setLightSourceUniforms(t, n, e);
							for (var c = 0, u = t.length; c < u; c++) {
								var _ = t[c],
									p = _.uniforms;
								if (
									(Ht.hasFragDepth() ||
										((p.nearDistance.value = e.getAutoNearDistance()), (p.midDistance.value = e.getAutoMidDistance())),
									_ instanceof i.RawShaderMaterial)
								)
									void 0 !== p.time && (p.time.value = T.wrap(s, 0, 3600));
								else {
									var h = n.getCameraSpacePosition(e);
									if (
										(p.entityPos.value.set(h.x, h.y, h.z),
										p.ambientLightColor.value.setRGB(l.r, l.g, l.b),
										void 0 !== r && r.length > 0)
									) {
										for (var d = 0, f = 0; f < r.length; f++) {
											var m = r[f];
											if ('string' != typeof m) {
												var g = m.getCameraSpacePosition(e);
												p.shadowEntityPositions.value[d].set(g.x, g.y, g.z),
													(p.shadowEntityRadii.value[d] = m.getOcclusionRadius());
												var y = m.get('atmosphere');
												y instanceof Se &&
													(p.shadowEntityRayleighAmount.value[d] = null !== y ? 5 * y.getSunsetIntensity() : 0),
													(d += 1);
											} else p.shadowEntityRadii.value[d] = 0;
										}
										p.numShadowEntities.value = d;
									}
									if (t[c].defines.shadowRings) {
										var v = n.get('rings');
										if (v instanceof Je && null !== v) {
											var b = yt.pool.get();
											n.getOrientation().getAxis(b, 2),
												(p.shadowRingsInnerRadius.value = v.getInnerRadius()),
												(p.shadowRingsOuterRadius.value = v.getOuterRadius()),
												(p.shadowRingsTexture.value = v.getTopTexture()),
												p.shadowRingsNormal.value.set(b.x, b.y, b.z),
												yt.pool.release(b);
										}
									}
								}
								if (
									null === o ||
									'loaded' !== o.getLoadState() ||
									o.isExcludedFromCamera(e) ||
									void 0 === p.atmospherePosition
								)
									!0 === _.defines.atmosphere && (delete _.defines.atmosphere, (_.needsUpdate = !0));
								else {
									var x = o.getEntity().getCameraSpacePosition(e),
										S = o.getEntity().getOrientation(),
										w = o.getColor(),
										C = o.getSunsetColor();
									p.atmospherePosition.value.set(x.x, x.y, x.z),
										p.atmosphereOrientation.value.set(S.x, S.y, S.z, S.w),
										(p.atmosphereEquatorialRadius.value = o.getEquatorialRadius()),
										(p.atmospherePolarRadius.value = o.getPolarRadius()),
										(p.atmosphereDensity.value = o.getDensity()),
										(p.atmosphereScaleHeight.value = o.getScaleHeight()),
										(p.atmosphereEmissivity.value = o.getEmissivity()),
										p.atmosphereColor.value.set(w.r, w.g, w.b),
										p.atmosphereSunsetColor.value.set(C.r, C.g, C.b),
										(p.atmosphereSunsetIntensity.value = o.getSunsetIntensity()),
										(p.atmosphereGroundIsSpheroid.value = a ? 1 : 0),
										void 0 === _.defines.atmosphere && ((_.defines.atmosphere = !0), (_.needsUpdate = !0));
								}
							}
						}
					}
				]),
				MaterialUtils
			);
		})();
		(Lt.get = Rt.get), (Lt.getPBR = Mt.get);
		var jt = Lt;
		function shader_fix_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var zt = (function () {
			function ShaderFix() {
				!(function shader_fix_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, ShaderFix);
			}
			return (
				(function shader_fix_createClass(t, e, n) {
					return e && shader_fix_defineProperties(t.prototype, e), n && shader_fix_defineProperties(t, n), t;
				})(ShaderFix, null, [
					{
						key: 'fix',
						value: function fix(t, e) {
							var n = Ht.isWebGL2(),
								r = Ht.hasFragDepth();
							return n
								? 'vertex' === e
									? '#version 300 es\n\t\t\t\t\t#define attribute in\n\t\t\t\t\t#define varying out\n\t\t\t\t\t#define texture2D texture\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\t\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t\t' +
									  t
									: '#version 300 es\n\t\t\t\t\t#define varying in\n\t\t\t\t\tout highp vec4 pc_fragColor;\n\t\t\t\t\t#define gl_FragColor pc_fragColor\n\t\t\t\t\t#define gl_FragDepthEXT gl_FragDepth\n\t\t\t\t\t#define texture2D texture\n\t\t\t\t\t#define textureCube texture\n\t\t\t\t\t#define texture2DProj textureProj\n\t\t\t\t\t#define texture2DLodEXT textureLod\n\t\t\t\t\t#define texture2DProjLodEXT textureProjLod\n\t\t\t\t\t#define textureCubeLodEXT textureLod\n\t\t\t\t\t#define texture2DGradEXT textureGrad\n\t\t\t\t\t#define texture2DProjGradEXT textureProjGrad\n\t\t\t\t\t#define textureCubeGradEXT textureGrad\n\t\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\t\t\t\t\t' +
									  t
								: (r
										? '\n\t\t\t\t#extension GL_EXT_frag_depth : enable\n\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t'
										: '') +
										'\n\t\t\t\tprecision highp float;\n\t\t\t\tprecision highp int;\n\t\t\t\t' +
										t;
						}
					}
				]),
				ShaderFix
			);
		})();
		function sprite_particles_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Nt = (function () {
			function SpriteParticles(t) {
				!(function sprite_particles_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, SpriteParticles),
					(this._component = t),
					(this._relativeToEntityOrientation = !0),
					(this._offsetArray = new Float32Array(0)),
					(this._colorArray = new Float32Array(0)),
					(this._scaleArray = new Float32Array(0)),
					(this._threeJsGeometry = null),
					(this._threeJsMaterial = null),
					(this._threeJsObject = null),
					(this._threeJsGeometry = new i.InstancedBufferGeometry()),
					this._threeJsGeometry.setAttribute(
						'position',
						new i.BufferAttribute(new Float32Array([-1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1]), 3)
					),
					this._threeJsGeometry.setIndex(new i.BufferAttribute(new Uint16Array([0, 1, 2, 2, 3, 0]), 1)),
					this._threeJsGeometry.setAttribute('offset', new i.InstancedBufferAttribute(this._offsetArray, 3)),
					this._threeJsGeometry.setAttribute('color', new i.InstancedBufferAttribute(this._colorArray, 4)),
					this._threeJsGeometry.setAttribute('scale', new i.InstancedBufferAttribute(this._scaleArray, 1)),
					(this._threeJsMaterial = this._component
						.getEntity()
						.getScene()
						.getEngine()
						.getMaterialManager()
						.getPreloaded('sprite_particles')),
					(this._threeJsObject = Ut.createMeshObjectGivenGeometry(t, this._threeJsMaterial, this._threeJsGeometry));
			}
			return (
				(function sprite_particles_createClass(t, e, n) {
					return (
						e && sprite_particles_defineProperties(t.prototype, e), n && sprite_particles_defineProperties(t, n), t
					);
				})(SpriteParticles, [
					{
						key: 'getThreeJsObject',
						value: function getThreeJsObject() {
							return this._threeJsObject;
						}
					},
					{
						key: 'getThreeJsMaterial',
						value: function getThreeJsMaterial() {
							return this._threeJsMaterial;
						}
					},
					{
						key: 'setParticleOffsets',
						value: function setParticleOffsets(t) {
							this._setAttribute('offset', t, 3);
						}
					},
					{
						key: 'setParticleColors',
						value: function setParticleColors(t) {
							this._setAttribute('color', t, 4);
						}
					},
					{
						key: 'setParticleScales',
						value: function setParticleScales(t) {
							this._setAttribute('scale', t, 1);
						}
					},
					{
						key: 'getRelativeToEntityOrientation',
						value: function getRelativeToEntityOrientation() {
							return this._relativeToEntityOrientation;
						}
					},
					{
						key: 'setRelativeToEntityOrientation',
						value: function setRelativeToEntityOrientation(t) {
							this._relativeToEntityOrientation = t;
						}
					},
					{
						key: 'prepareForRender',
						value: function prepareForRender(t) {
							Ut.setPositionToEntity(this._threeJsObject, this._component.getEntity(), t),
								this._relativeToEntityOrientation &&
									Ut.setOrientationToEntity(this._threeJsObject, this._component.getEntity());
						}
					},
					{
						key: '_setAttribute',
						value: function _setAttribute(t, e, n) {
							var r = this._threeJsGeometry.getAttribute(t);
							r instanceof i.InstancedBufferAttribute &&
								r.count !== e.length / n &&
								((this._offsetArray = new Float32Array((e.length / n) * 3)),
								(this._colorArray = new Float32Array((e.length / n) * 4)),
								(this._scaleArray = new Float32Array((e.length / n) * 1)),
								(this._threeJsGeometry.instanceCount = e.length / n),
								this._threeJsGeometry.setAttribute('offset', new i.InstancedBufferAttribute(this._offsetArray, 3)),
								this._threeJsGeometry.setAttribute('color', new i.InstancedBufferAttribute(this._colorArray, 4)),
								this._threeJsGeometry.setAttribute('scale', new i.InstancedBufferAttribute(this._scaleArray, 1))),
								(r = this._threeJsGeometry.getAttribute(t)) instanceof i.InstancedBufferAttribute &&
									(r.copyArray(e), (r.needsUpdate = !0));
						}
					}
				]),
				SpriteParticles
			);
		})();
		function texture_lod_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Ft = (function () {
			function TextureLOD(t) {
				!(function texture_lod_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, TextureLOD),
					(this._engine = t.getEntity().getScene().getEngine()),
					(this._component = t),
					(this._uniform = null),
					(this._url = ''),
					(this._sizes = []),
					(this._currentSize = 0),
					(this._forcedSize = void 0),
					(this._useCompressed = !1),
					(this._loadedPromise = Promise.resolve()),
					(this._loading = !1);
			}
			return (
				(function texture_lod_createClass(t, e, n) {
					return e && texture_lod_defineProperties(t.prototype, e), n && texture_lod_defineProperties(t, n), t;
				})(TextureLOD, [
					{
						key: 'getUrl',
						value: function getUrl() {
							return this._url;
						}
					},
					{
						key: 'setUrl',
						value: function setUrl(t) {
							(this._url = t), (this._currentSize = 0);
						}
					},
					{
						key: 'getUniform',
						value: function getUniform() {
							return this._uniform;
						}
					},
					{
						key: 'setUniform',
						value: function setUniform(t) {
							(this._uniform = t), (this._currentSize = 0);
						}
					},
					{
						key: 'getSizes',
						value: function getSizes() {
							return this._sizes.slice();
						}
					},
					{
						key: 'setSizes',
						value: function setSizes(t) {
							(this._sizes = t.slice()), (this._currentSize = 0);
						}
					},
					{
						key: 'getCurrentSize',
						value: function getCurrentSize() {
							return this._currentSize;
						}
					},
					{
						key: 'getForcedSize',
						value: function getForcedSize() {
							return this._forcedSize;
						}
					},
					{
						key: 'setForcedSize',
						value: function setForcedSize(t) {
							this._forcedSize = t;
						}
					},
					{
						key: 'getUseCompression',
						value: function getUseCompression() {
							return this._useCompression;
						}
					},
					{
						key: 'setUseCompression',
						value: function setUseCompression(t) {
							(this._useCompression = t), (this._currentSize = 0);
						}
					},
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							return this._loadedPromise;
						}
					},
					{
						key: 'update',
						value: function update() {
							if (!this._loading && null !== this._uniform)
								if (
									'' === this._url ||
									0 === this._sizes.length ||
									('loaded' !== this._component.getLoadState() && void 0 === this._forcedSize)
								)
									null !== this._uniform.value &&
										(this._uniform.value.dispose(), (this._uniform.value = null), (this._currentSize = 0));
								else {
									var t = this._sizes[0];
									t =
										void 0 !== this._forcedSize
											? this._forcedSize
											: this._component.getEntity().getGreatestPixelSpaceExtentsRadius();
									for (
										var e = 0;
										e + 1 < this._sizes.length &&
										this._sizes[e] < t &&
										this._sizes[e + 1] <= this._engine.getConfig().getValue('maxTextureSize');

									)
										e++;
									this._currentSize !== this._sizes[e] &&
										((this._currentSize = this._sizes[e]), this._loadTexture(this._currentSize));
								}
						}
					},
					{
						key: '_loadTexture',
						value: function _loadTexture(t) {
							var e = this,
								n = this._url.replace('$SIZE', t.toString());
							this._loading = !0;
							var r = this._useCompression
								? this._engine.getTextureLoaderCompressed()
								: this._engine.getTextureLoader();
							this._loadedPromise = r
								.loadIntoUniform(this._uniform, n, !0)
								.then(function () {
									e._loading = !1;
								})
								.catch(function (t) {
									throw Error(t);
								});
						}
					}
				]),
				TextureLOD
			);
		})();
		function three_js_helper_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function three_js_helper_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Dt = (function () {
			function ThreeJsHelper() {
				!(function three_js_helper_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, ThreeJsHelper);
			}
			return (
				(function three_js_helper_createClass(t, e, n) {
					return e && three_js_helper_defineProperties(t.prototype, e), n && three_js_helper_defineProperties(t, n), t;
				})(ThreeJsHelper, null, [
					{
						key: 'createGeometry',
						value: function createGeometry(t) {
							for (var e = new i.BufferGeometry(), n = 0; n < t.length; n++)
								e.setAttribute(t[n].name, new i.BufferAttribute(new Float32Array(0), t[n].dimensions));
							return e.setIndex(new i.BufferAttribute(new Uint16Array(0), 1)), e;
						}
					},
					{
						key: 'setupObject',
						value: function setupObject(t, e) {
							(e.name = t + '.' + Math.floor(1e4 * Math.random())),
								(e.matrixAutoUpdate = !1),
								(e.frustumCulled = !1),
								(e.visible = !1),
								t.getEntity().getScene().getThreeJsScene().add(e);
						}
					},
					{
						key: 'createMeshObjectGivenGeometry',
						value: function createMeshObjectGivenGeometry(t, e, n) {
							var r = new i.Mesh(n, e);
							return this.setupObject(t, r), r;
						}
					},
					{
						key: 'createMeshObject',
						value: function createMeshObject(t, e, n) {
							var r = this.createGeometry(n);
							return this.createMeshObjectGivenGeometry(t, e, r);
						}
					},
					{
						key: 'destroyGeometry',
						value: function destroyGeometry(t) {
							t.dispose();
						}
					},
					{
						key: 'destroyObject',
						value: function destroyObject(t) {
							for (; t.children.length > 0; ) this.destroyObject(t.children[t.children.length - 1]);
							null !== t.parent && t.parent.remove(t), t instanceof i.Mesh && this.destroyGeometry(t.geometry);
						}
					},
					{
						key: 'destroyMaterial',
						value: function destroyMaterial(t) {
							var e = t.uniforms;
							for (var n in e)
								Object.prototype.hasOwnProperty.call(e, n) &&
									null !== e[n].value &&
									void 0 !== e[n].value.dispose &&
									e[n].value.dispose();
							t.dispose();
						}
					},
					{
						key: 'destroyAllObjectsAndMaterials',
						value: function destroyAllObjectsAndMaterials(t) {
							for (var e = t.getThreeJsObjects(), n = t.getThreeJsMaterials(), r = 0; r < e.length; r++)
								this.destroyObject(e[r]);
							for (var i = 0; i < n.length; i++) this.destroyMaterial(n[i]);
						}
					},
					{
						key: 'setPosition',
						value: function setPosition(t, e) {
							if (t)
								if (Array.isArray(t)) for (var n = 0, r = t.length; n < r; n++) t[n].position.set(e.x, e.y, e.z);
								else t.position.set(e.x, e.y, e.z);
						}
					},
					{
						key: 'setPositionToEntity',
						value: function setPositionToEntity(t, e, n, r, i) {
							if (t) {
								var o = e.getCameraSpacePosition(n);
								if ((this._tempThreeJsVector3.set(o.x, o.y, o.z), r)) {
									var a = yt.pool.get();
									i ? a.rotate(e.getOrientation(), r) : a.copy(r),
										(this._tempThreeJsVector3.x += a.x),
										(this._tempThreeJsVector3.y += a.y),
										(this._tempThreeJsVector3.z += a.z),
										yt.pool.release(a);
								}
								if (Array.isArray(t))
									for (var s = 0, l = t.length; s < l; s++) t[s].position.copy(this._tempThreeJsVector3);
								else t.position.copy(this._tempThreeJsVector3);
							}
						}
					},
					{
						key: 'setScale',
						value: function setScale(t, e) {
							if (t)
								if (Array.isArray(t))
									for (var n = 0, r = t.length; n < r; n++)
										'number' == typeof e ? t[n].scale.set(e, e, e) : t[n].scale.set(e.x, e.y, e.z);
								else 'number' == typeof e ? t.scale.set(e, e, e) : t.scale.set(e.x, e.y, e.z);
						}
					},
					{
						key: 'setOrientation',
						value: function setOrientation(t, e) {
							if (t)
								if ((ye._tempThreeJsQuaternion.set(e.x, e.y, e.z, e.w), Array.isArray(t)))
									for (var n = 0, r = t.length; n < r; n++) t[n].setRotationFromQuaternion(ye._tempThreeJsQuaternion);
								else t.setRotationFromQuaternion(ye._tempThreeJsQuaternion);
						}
					},
					{
						key: 'setOrientationToBillboard',
						value: function setOrientationToBillboard(t, e, n) {
							if (t) {
								var r = tt.pool.get(),
									i = yt.pool.get(),
									o = yt.pool.get();
								if (
									(i.normalize(e.getCameraSpacePosition(n)),
									n.getEntity().getOrientation().getAxis(o, 0),
									o.setNormalTo(i, o),
									r.setFromAxes(o, void 0, i),
									ye._tempThreeJsQuaternion.set(r.x, r.y, r.z, r.w),
									Array.isArray(t))
								)
									for (var a = 0, s = t.length; a < s; a++) t[a].setRotationFromQuaternion(ye._tempThreeJsQuaternion);
								else t.setRotationFromQuaternion(ye._tempThreeJsQuaternion);
								tt.pool.release(r), yt.pool.release(i), yt.pool.release(o);
							}
						}
					},
					{
						key: 'setOrientationToEntity',
						value: function setOrientationToEntity(t, e, n) {
							if (t) {
								var r = e.getOrientation();
								if (void 0 === n) ye._tempThreeJsQuaternion.set(r.x, r.y, r.z, r.w);
								else {
									var i = tt.pool.get();
									i.mult(r, n), ye._tempThreeJsQuaternion.set(i.x, i.y, i.z, i.w), tt.pool.release(i);
								}
								if (Array.isArray(t))
									for (var o = 0, a = t.length; o < a; o++) t[o].setRotationFromQuaternion(ye._tempThreeJsQuaternion);
								else t.setRotationFromQuaternion(ye._tempThreeJsQuaternion);
							}
						}
					},
					{
						key: 'useInDynEnvMap',
						value: function useInDynEnvMap(t, e) {
							e ? t.layers.enable(1) : t.layers.disable(1);
						}
					},
					{
						key: 'setVertices',
						value: function setVertices(t, e, n) {
							var r = t.getAttribute(e);
							r instanceof i.BufferAttribute &&
								(r.array.length === n.length
									? (r.copyArray(n), (r.needsUpdate = !0))
									: t.setAttribute(e, new i.BufferAttribute(n, t.getAttribute(e).itemSize)));
						}
					},
					{
						key: 'setIndices',
						value: function setIndices(t, e) {
							var n = t.getIndex();
							n.array.length === e.length
								? (n.copyArray(e), (n.needsUpdate = !0))
								: t.setIndex(new i.BufferAttribute(e, 1));
						}
					},
					{
						key: 'computeTangents',
						value: function computeTangents(t) {
							t.computeTangents();
						}
					},
					{
						key: 'setRenderOrder',
						value: function setRenderOrder(t, e) {
							t && (t.renderOrder = e);
						}
					},
					{
						key: 'setupLogDepthBuffering',
						value: function setupLogDepthBuffering(t) {
							Ht.hasFragDepth()
								? ((t.defines = { L_EXT_frag_depth: !0 }), (t.extensions.fragDepth = !0))
								: ((t.uniforms.nearDistance = new i.Uniform(1e-4)), (t.uniforms.midDistance = new i.Uniform(3))),
								(t.needsUpdate = !0);
						}
					},
					{
						key: 'loadTexture',
						value: function loadTexture(t, e, n, r) {
							var i = t.getEntity().getScene().getEngine();
							return (r ? i.getTextureLoaderCompressed() : i.getTextureLoader()).loadTexture(e, n);
						}
					},
					{
						key: 'loadTextureFromCanvas',
						value: function loadTextureFromCanvas(t) {
							var e = new i.CanvasTexture(t);
							return (
								(e.magFilter = i.NearestFilter),
								(e.minFilter = i.NearestFilter),
								(e.flipY = !1),
								(e.needsUpdate = !0),
								e
							);
						}
					},
					{
						key: 'loadTextureIntoUniform',
						value: (function () {
							var t = (function three_js_helper_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											three_js_helper_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											three_js_helper_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee(t, e, n, r, i, o) {
									var a, s, l, c;
									return regeneratorRuntime.wrap(function _callee$(u) {
										for (;;)
											switch ((u.prev = u.next)) {
												case 0:
													if (e) {
														u.next = 2;
														break;
													}
													return u.abrupt('return');
												case 2:
													return (
														(a = t.getEntity().getScene().getEngine()),
														(s = o ? a.getTextureLoaderCompressed() : a.getTextureLoader()),
														(u.next = 6),
														s.loadTexture(r, i)
													);
												case 6:
													if (((l = u.sent), !t.getThreeJsMaterials().includes(e))) {
														u.next = 16;
														break;
													}
													if (void 0 !== (c = e.uniforms[n])) {
														u.next = 12;
														break;
													}
													throw new Error('Material in '.concat(t, " doesn't have uniform name '").concat(n, "'."));
												case 12:
													null !== c.value && c.value.dispose(), (c.value = l), (u.next = 17);
													break;
												case 16:
													l.dispose();
												case 17:
												case 'end':
													return u.stop();
											}
									}, _callee);
								})
							);
							return function loadTextureIntoUniform(e, n, r, i, o, a) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'setOverlay',
						value: function setOverlay(t, e) {
							t && (t.depthFunc = e ? i.AlwaysDepth : i.LessEqualDepth);
						}
					},
					{
						key: 'setTransparent',
						value: function setTransparent(t, e) {
							t && ((t.transparent = e), (t.depthWrite = !e));
						}
					},
					{
						key: 'setBlending',
						value: function setBlending(t, e) {
							if (t) {
								switch (e) {
									case 'normal':
										t.blending = i.NormalBlending;
										break;
									case 'additive':
										t.blending = i.AdditiveBlending;
										break;
									case 'subtractive':
										t.blending = i.SubtractiveBlending;
										break;
									case 'multiply':
										t.blending = i.MultiplyBlending;
										break;
									case 'custom':
										t.blending = i.CustomBlending;
										break;
									default:
										t.blending = i.NoBlending;
								}
								t.needsUpdate = !0;
							}
						}
					},
					{
						key: 'setDefine',
						value: function setDefine(t, e, n) {
							n && !t.defines[e]
								? ((t.defines[e] = !0), (t.needsUpdate = !0))
								: n || !0 !== t.defines[e] || (delete t.defines[e], (t.needsUpdate = !0));
						}
					},
					{
						key: 'setUniformNumber',
						value: function setUniformNumber(t, e, n) {
							t && (t.uniforms[e].value = n);
						}
					},
					{
						key: 'setUniformVector2',
						value: function setUniformVector2(t, e, n) {
							t && t.uniforms[e].value.set(n.x, n.y);
						}
					},
					{
						key: 'setUniformVector3',
						value: function setUniformVector3(t, e, n) {
							t && t.uniforms[e].value.set(n.x, n.y, n.z);
						}
					},
					{
						key: 'setUniformColorRGB',
						value: function setUniformColorRGB(t, e, n) {
							t && t.uniforms[e].value.set(n.r, n.g, n.b);
						}
					},
					{
						key: 'setUniformColorRGBA',
						value: function setUniformColorRGBA(t, e, n) {
							var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1;
							t && t.uniforms[e].value.set(n.r, n.g, n.b, n.a * r);
						}
					},
					{
						key: 'setUniformQuaternion',
						value: function setUniformQuaternion(t, e, n) {
							t && t.uniforms[e].value.set(n.x, n.y, n.z, n.w);
						}
					},
					{
						key: 'setUniformTexture',
						value: function setUniformTexture(t, e, n) {
							t && (null !== t.uniforms[e].value && t.uniforms[e].value.dispose(), (t.uniforms[e].value = n));
						}
					}
				]),
				ThreeJsHelper
			);
		})();
		Dt._tempThreeJsVector3 = new i.Vector3();
		var Ut = Dt;
		function capabilities_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Vt = (function () {
				function Capabilities() {
					!(function capabilities_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Capabilities);
				}
				return (
					(function capabilities_createClass(t, e, n) {
						return e && capabilities_defineProperties(t.prototype, e), n && capabilities_defineProperties(t, n), t;
					})(Capabilities, null, [
						{
							key: 'isWebGL2',
							value: function isWebGL2() {
								return 'undefined' != typeof WebGL2RenderingContext && Gt instanceof WebGL2RenderingContext;
							}
						},
						{
							key: 'hasFragDepth',
							value: function hasFragDepth() {
								return this.isWebGL2() || this.hasGLExtension('EXT_frag_depth');
							}
						},
						{
							key: 'hasGLExtension',
							value: function hasGLExtension(t) {
								if (null === Gt) return !1;
								var e = Bt.get(t);
								return void 0 === e && ((e = null !== Gt.getExtension(t)), Bt.set(t, e)), e;
							}
						},
						{
							key: '__getCompressedTextureExtension',
							value: function __getCompressedTextureExtension() {
								return Jt;
							}
						},
						{
							key: '__setContext',
							value: function __setContext(t) {
								var e = this;
								(Gt = t),
									$t.forEach(function (t, n) {
										(!0 !== e.hasGLExtension('WEBGL_compressed_texture_' + n) &&
											!0 !== e.hasGLExtension('WEBKIT_WEBGL_compressed_texture_' + n)) ||
											('' === Jt && (Jt = t));
									});
							}
						}
					]),
					Capabilities
				);
			})(),
			Bt = new Map(),
			Gt = null,
			Jt = '',
			$t = new Map([
				['astc', 'astc'],
				['s3tc', 'dxt'],
				['pvrtc', 'pvrtc'],
				['etc', 'etc2'],
				['etc1', 'etc1']
			]),
			Ht = Vt;
		function config_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var qt = (function () {
			function Config() {
				!(function config_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Config),
					(this._valueMap = new Map()),
					(this._callbacksMap = new Map()),
					this.setValue('maxTextureSize', 512),
					this.setValue('useTextureCompression', !0),
					this.setValue('fontFamily', 'Arial'),
					this.setValue('fontSize', 16),
					this.setValue('gammaCorrection', 1);
			}
			return (
				(function config_createClass(t, e, n) {
					return e && config_defineProperties(t.prototype, e), n && config_defineProperties(t, n), t;
				})(Config, [
					{
						key: 'getValue',
						value: function getValue(t) {
							return this._valueMap.get(t);
						}
					},
					{
						key: 'setValue',
						value: function setValue(t, e) {
							if (this._valueMap.get(t) !== e) {
								this._valueMap.set(t, e);
								var n = this._callbacksMap.get(t);
								if (n) for (var r = 0; r < n.length; r++) n[r](t, e);
							}
						}
					},
					{
						key: 'addEventListener',
						value: function addEventListener(t, e) {
							var n = this._callbacksMap.get(t);
							void 0 === n && ((n = []), this._callbacksMap.set(t, n)), n.push(e);
						}
					},
					{
						key: 'removeEventListener',
						value: function removeEventListener(t, e) {
							var n = this._callbacksMap.get(t);
							if (n)
								for (var r = 0; r < n.length; r++)
									if (n[r] === e) {
										n.splice(r, 1);
										break;
									}
						}
					}
				]),
				Config
			);
		})();
		function _slicedToArray(t, e) {
			return (
				(function _arrayWithHoles(t) {
					if (Array.isArray(t)) return t;
				})(t) ||
				(function _iterableToArrayLimit(t, e) {
					var n = [],
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (
							var a, s = t[Symbol.iterator]();
							!(r = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e);
							r = !0
						);
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					return n;
				})(t, e) ||
				(function _nonIterableRest() {
					throw new TypeError('Invalid attempt to destructure non-iterable instance');
				})()
			);
		}
		function downloader_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function downloader_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var Zt = function Download(t, e) {
				downloader_classCallCheck(this, Download),
					(this.url = t),
					(this.actualUrl = e),
					(this.progress = 0),
					(this.totalBytes = 0),
					(this.content = void 0),
					(this.status = 'downloading'),
					(this.errorMessage = '');
			},
			Yt = function DownloadData(t, e) {
				downloader_classCallCheck(this, DownloadData),
					(this.download = new Zt(t, e)),
					(this.promise = null),
					(this.progressCallbacks = []),
					(this.request = null);
			},
			Xt = (function () {
				function Downloader() {
					downloader_classCallCheck(this, Downloader),
						(this._replacements = new Map()),
						(this._currentDownloads = new Map());
				}
				return (
					(function downloader_createClass(t, e, n) {
						return e && downloader_defineProperties(t.prototype, e), n && downloader_defineProperties(t, n), t;
					})(Downloader, [
						{
							key: 'getReplacement',
							value: function getReplacement(t) {
								return this._replacements.get(t);
							}
						},
						{
							key: 'setReplacement',
							value: function setReplacement(t, e) {
								this._replacements.set(t, e);
							}
						},
						{
							key: 'cancel',
							value: function cancel(t) {
								var e = this.processUrl(t),
									n = this._currentDownloads.get(e);
								void 0 !== n && null !== n.request && n.request.abort();
							}
						},
						{
							key: 'processUrl',
							value: function processUrl(t) {
								var e = t,
									n = !0,
									r = !1,
									i = void 0;
								try {
									for (var o, a = this._replacements[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
										var s = _slicedToArray(o.value, 2),
											l = s[0],
											c = s[1];
										e = e.replace('$' + l, c);
									}
								} catch (t) {
									(r = !0), (i = t);
								} finally {
									try {
										n || null == a.return || a.return();
									} finally {
										if (r) throw i;
									}
								}
								return e;
							}
						},
						{
							key: 'download',
							value: function download(t, e, n) {
								var r = this,
									i = this.processUrl(t),
									o = this._currentDownloads.get(i);
								return void 0 !== o && null !== o.promise
									? (n && o.progressCallbacks.push(n), o.promise)
									: ((o = new Yt(t, i)),
									  this._currentDownloads.set(i, o),
									  (o.promise = new Promise(function (t) {
											var n = new XMLHttpRequest();
											n.addEventListener('load', function () {
												200 <= n.status && n.status <= 299
													? ((o.download.content = n.response), (o.download.status = 'completed'))
													: ((o.download.content = void 0), (o.download.status = 'failed')),
													r._currentDownloads.delete(o.download.actualUrl),
													t(o.download);
											}),
												n.addEventListener('progress', function (t) {
													(o.download.progress = t.lengthComputable ? t.loaded / t.total : 0),
														(o.download.totalBytes = t.lengthComputable ? t.total : 0);
													var e = !0,
														n = !1,
														r = void 0;
													try {
														for (
															var i, a = o.progressCallbacks[Symbol.iterator]();
															!(e = (i = a.next()).done);
															e = !0
														) {
															(0, i.value)(o.download);
														}
													} catch (t) {
														(n = !0), (r = t);
													} finally {
														try {
															e || null == a.return || a.return();
														} finally {
															if (n) throw r;
														}
													}
												}),
												n.addEventListener('abort', function () {
													(o.download.content = void 0),
														(o.download.status = 'cancelled'),
														r._currentDownloads.delete(o.download.actualUrl),
														t(o.download);
												}),
												n.addEventListener('error', function () {
													(o.download.content = void 0),
														(o.download.status = 'failed'),
														(o.download.errorMessage = n.statusText),
														r._currentDownloads.delete(o.download.actualUrl),
														t(o.download);
												}),
												(n.responseType = e ? 'arraybuffer' : 'text'),
												(o.request = n),
												n.open('GET', i),
												n.send();
									  })),
									  o.promise);
							}
						}
					]),
					Downloader
				);
			})();
		function engine_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Kt = (function () {
			function Engine(t) {
				var e = this;
				if (
					((function engine_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Engine),
					!(t instanceof HTMLDivElement))
				)
					throw new Error('The root div param is not an actual div element.');
				(this._rootDiv = t),
					(this._canvas = null),
					(this._renderSize = new st()),
					this._renderSize.freeze(),
					(this._input = new ee(this)),
					(this._config = new qt()),
					(this._downloader = new Xt()),
					(this._textureLoader = null),
					(this._textureLoaderCompressed = null),
					(this._materialManager = null),
					(this._scenes = new m(this, new Map([['scene', ue]]))),
					(this._viewports = new m(this, new Map([['viewport', me]]))),
					(this._lastAppTime = Date.now()),
					(this._realDeltaTime = 0),
					(this._fps = new x()),
					(this._fpsLimit = Number.POSITIVE_INFINITY),
					(this._time = 0),
					(this._timeRate = 0),
					(this._callbacks = []),
					(this._callbacksToRemove = []),
					(this._thisLoop = this._loop.bind(this)),
					(this._threeJsRenderer = null),
					(this._viewportDiv = null),
					'relative' !== this._rootDiv.style.position &&
						'absolute' !== this._rootDiv.style.position &&
						(this._rootDiv.style.position = 'relative'),
					(this._rootDiv.style.userSelect = 'none'),
					(this._rootDiv.style.webkitUserSelect = 'none'),
					(this._rootDiv.style.touchAction = 'none'),
					(this._canvas = document.createElement('canvas')),
					(this._canvas.style.position = 'absolute'),
					(this._canvas.style.left = '0px'),
					(this._canvas.style.top = '0px'),
					(this._canvas.style.width = '100%'),
					(this._canvas.style.height = '100%'),
					this._rootDiv.appendChild(this._canvas),
					(this._viewportDiv = document.createElement('div')),
					(this._viewportDiv.style.position = 'absolute'),
					(this._viewportDiv.style.left = '0px'),
					(this._viewportDiv.style.top = '0px'),
					(this._viewportDiv.style.width = '100%'),
					(this._viewportDiv.style.height = '100%'),
					(this._viewportDiv.style.overflow = 'hidden'),
					this._rootDiv.appendChild(this._viewportDiv);
				try {
					(this._threeJsRenderer = new i.WebGLRenderer({ canvas: this._canvas, antialias: !0 })),
						this._threeJsRenderer.setScissorTest(!0),
						this._threeJsRenderer.setPixelRatio(window.devicePixelRatio),
						(this._textureLoader = new he(this._downloader, this._threeJsRenderer)),
						(this._textureLoaderCompressed = new de(this._downloader, this._config, this._threeJsRenderer)),
						(i.Cache.enabled = !1);
					var n = this._threeJsRenderer.getContext().getShaderInfoLog.bind(this._threeJsRenderer.getContext());
					(this._threeJsRenderer.getContext().getShaderInfoLog = function (t) {
						var e = n(t);
						return e.includes('GL_ARB_gpu_shader5') ? '' : e;
					}),
						Ht.__setContext(this._threeJsRenderer.getContext()),
						(this._materialManager = new ce(this._downloader)),
						window.addEventListener('beforeunload', function () {
							e._threeJsRenderer.forceContextLoss();
						});
				} catch (t) {
					throw (console.log(t), t);
				}
				requestAnimationFrame(this._thisLoop);
			}
			return (
				(function engine_createClass(t, e, n) {
					return e && engine_defineProperties(t.prototype, e), n && engine_defineProperties(t, n), t;
				})(Engine, [
					{
						key: 'getVersion',
						value: function getVersion() {
							return fe;
						}
					},
					{
						key: 'getRootDiv',
						value: function getRootDiv() {
							return this._rootDiv;
						}
					},
					{
						key: 'getRenderSize',
						value: function getRenderSize() {
							return this._renderSize;
						}
					},
					{
						key: 'getCanvas',
						value: function getCanvas() {
							return this._canvas;
						}
					},
					{
						key: 'getViewportDiv',
						value: function getViewportDiv() {
							return this._viewportDiv;
						}
					},
					{
						key: 'getConfig',
						value: function getConfig() {
							return this._config;
						}
					},
					{
						key: 'getInput',
						value: function getInput() {
							return this._input;
						}
					},
					{
						key: 'getDownloader',
						value: function getDownloader() {
							return this._downloader;
						}
					},
					{
						key: 'getTextureLoader',
						value: function getTextureLoader() {
							return this._textureLoader;
						}
					},
					{
						key: 'getTextureLoaderCompressed',
						value: function getTextureLoaderCompressed() {
							return this._textureLoaderCompressed;
						}
					},
					{
						key: 'getMaterialManager',
						value: function getMaterialManager() {
							return this._materialManager;
						}
					},
					{
						key: 'getScene',
						value: function getScene(t) {
							return this._scenes.get(t);
						}
					},
					{
						key: 'getNumScenes',
						value: function getNumScenes() {
							return this._scenes.size;
						}
					},
					{
						key: 'addScene',
						value: function addScene(t) {
							return this._scenes.add('scene', t);
						}
					},
					{
						key: 'removeScene',
						value: function removeScene(t) {
							this._scenes.remove(t);
						}
					},
					{
						key: 'get',
						value: function get(t) {
							var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0,
								n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0,
								r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
								i = this._scenes.get(t);
							return void 0 === e || null === i ? i : i.get(e, n, r);
						}
					},
					{
						key: 'getViewport',
						value: function getViewport(t) {
							return this._viewports.get(t);
						}
					},
					{
						key: 'getNumViewports',
						value: function getNumViewports() {
							return this._viewports.size;
						}
					},
					{
						key: 'addViewport',
						value: function addViewport() {
							var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : '';
							return this._viewports.add('viewport', t);
						}
					},
					{
						key: 'removeViewport',
						value: function removeViewport(t) {
							this._viewports.remove(t);
						}
					},
					{
						key: 'getTime',
						value: function getTime() {
							return this._time;
						}
					},
					{
						key: 'setTime',
						value: function setTime(t) {
							this._time = t;
						}
					},
					{
						key: 'getTimeRate',
						value: function getTimeRate() {
							return this._timeRate;
						}
					},
					{
						key: 'setTimeRate',
						value: function setTimeRate(t) {
							this._timeRate = t;
						}
					},
					{
						key: 'getFPS',
						value: function getFPS() {
							return this._fps.getFPS();
						}
					},
					{
						key: 'getFPSLimit',
						value: function getFPSLimit() {
							return this._fpsLimit;
						}
					},
					{
						key: 'setFPSLimit',
						value: function setFPSLimit(t) {
							this._fpsLimit = t;
						}
					},
					{
						key: 'getDeltaTime',
						value: function getDeltaTime() {
							return this._realDeltaTime;
						}
					},
					{
						key: 'registerComponentType',
						value: function registerComponentType(t, e) {
							if (wr.Components.has(t)) throw new Error("Already registered component type '" + t + "'.");
							wr.Components.set(t, e);
						}
					},
					{
						key: 'unregisterComponentType',
						value: function unregisterComponentType(t) {
							wr.Components.delete(t);
						}
					},
					{
						key: 'registerControllerType',
						value: function registerControllerType(t, e) {
							if (wr.Controllers.has(t)) throw new Error("Already registered controller type '" + t + "'.");
							wr.Controllers.set(t, e);
						}
					},
					{
						key: 'unregisterControllerType',
						value: function unregisterControllerType(t) {
							wr.Controllers.delete(t);
						}
					},
					{
						key: 'waitUntilNextFrame',
						value: function waitUntilNextFrame() {
							var t = this;
							return new Promise(function (e) {
								t.addCallback(function () {
									e();
								}, !1);
							});
						}
					},
					{
						key: 'addCallback',
						value: function addCallback(t, e) {
							this._callbacks.push({ callback: t, recurring: e });
						}
					},
					{
						key: 'removeCallback',
						value: function removeCallback(t) {
							this._callbacksToRemove.push(t);
						}
					},
					{
						key: '__getThreeJsRenderer',
						value: function __getThreeJsRenderer() {
							return this._threeJsRenderer;
						}
					},
					{
						key: '_loop',
						value: function _loop() {
							try {
								var t = Date.now();
								if (((this._realDeltaTime = (t - this._lastAppTime) / 1e3), this._realDeltaTime < 1 / this._fpsLimit))
									return void requestAnimationFrame(this._thisLoop);
								(this._lastAppTime = t),
									this._fps.update(this._realDeltaTime),
									(this._time += this._timeRate * this._realDeltaTime),
									(this._renderSize.x === this._rootDiv.clientWidth &&
										this._renderSize.y === this._rootDiv.clientHeight) ||
										(this._renderSize.thaw(),
										this._renderSize.set(this._rootDiv.clientWidth, this._rootDiv.clientHeight),
										this._renderSize.freeze(),
										this._threeJsRenderer.setSize(this._renderSize.x, this._renderSize.y, !1));
								for (var e = 0; e < this._scenes.size; e++) this._scenes.get(e).__update();
								for (var n = 0; n < this._viewports.size; n++) this._viewports.get(n).__updateViewportVariables();
								for (var r = 0; r < this._scenes.size; r++) this._scenes.get(r).__updateVisuals();
								this._threeJsRenderer.setViewport(0, 0, this._renderSize.x, this._renderSize.y),
									this._threeJsRenderer.setScissor(0, 0, this._renderSize.x, this._renderSize.y),
									this._threeJsRenderer.clear();
								for (var i = 0; i < this._viewports.size; i++) this._viewports.get(i).__render();
								for (var o = 0; o < this._callbacks.length; o++) {
									try {
										this._callbacks[o].callback();
									} catch (t) {
										throw new Error('While executing a callback, ' + t);
									}
									this._callbacks[o].recurring || this._callbacksToRemove.push(this._callbacks[o].callback);
								}
								for (var a = 0, s = this._callbacksToRemove.length; a < s; a++)
									for (var l = 0, c = this._callbacks.length; l < c; l++)
										if (this._callbacks[l].callback === this._callbacksToRemove[a]) {
											this._callbacks.splice(l, 1);
											break;
										}
								this._input.__resetStatesForNextFrame();
							} catch (t) {
								throw (console.log(t), t);
							}
							requestAnimationFrame(this._thisLoop);
						}
					}
				]),
				Engine
			);
		})();
		function entity_typeof(t) {
			return (entity_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function entity_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function entity_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function _get(t, e, n) {
			return (_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function _superPropBase(t, e) {
								for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = entity_getPrototypeOf(t)); );
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function entity_getPrototypeOf(t) {
			return (entity_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function entity_setPrototypeOf(t, e) {
			return (entity_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Wt = (function (t) {
			function Entity(t, e, n) {
				var r;
				return (
					(function entity_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Entity),
					((r = (function entity_possibleConstructorReturn(t, e) {
						return !e || ('object' !== entity_typeof(e) && 'function' != typeof e)
							? entity_assertThisInitialized(t)
							: e;
					})(this, entity_getPrototypeOf(Entity).call(this, t, e, n)))._enabled = !0),
					(r._disabledByAncestor = !1),
					(r._destroyed = !1),
					(r._parent = null),
					(r._children = []),
					(r._position = new yt(Number.NaN, Number.NaN, Number.NaN)),
					r._position.freeze(),
					(r._velocity = new yt(Number.NaN, Number.NaN, Number.NaN)),
					r._velocity.freeze(),
					(r._orientation = new tt(Number.NaN, Number.NaN, Number.NaN, Number.NaN)),
					r._orientation.freeze(),
					(r._angularVelocity = new yt(Number.NaN, Number.NaN, Number.NaN)),
					r._angularVelocity.freeze(),
					(r._cameraSpacePosition = new F()),
					(r._normalSpacePosition = new F()),
					(r._pixelSpacePosition = new F()),
					(r._normalSpaceOcclusionRadius = new F()),
					(r._normalSpaceExtentsRadius = new F()),
					(r._pixelSpaceOcclusionRadius = new F()),
					(r._pixelSpaceExtentsRadius = new F()),
					(r._greatestPixelSpaceOcclusionRadius = 0),
					(r._greatestPixelSpaceExtentsRadius = 0),
					(r._components = new m(entity_assertThisInitialized(r), wr.Components)),
					(r._controllers = new m(entity_assertThisInitialized(r), wr.Controllers)),
					(r._occlusionRadius = 0),
					(r._extentsRadius = 0),
					(r._canOcclude = !0),
					(r._positionCoverage = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
					r._positionCoverage.freeze(),
					(r._orientationCoverage = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
					r._orientationCoverage.freeze(),
					(r._isInPositionCoverage = !1),
					(r._isInOrientationCoverage = !1),
					r
				);
			}
			return (
				(function entity_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && entity_setPrototypeOf(t, e);
				})(Entity, f),
				(function entity_createClass(t, e, n) {
					return e && entity_defineProperties(t.prototype, e), n && entity_defineProperties(t, n), t;
				})(Entity, [
					{
						key: 'getScene',
						value: function getScene() {
							return this.__getCollectionParent();
						}
					},
					{
						key: 'isEnabled',
						value: function isEnabled() {
							return this._enabled && !this._disabledByAncestor;
						}
					},
					{
						key: 'isDisabledByAncestor',
						value: function isDisabledByAncestor() {
							return this._disabledByAncestor;
						}
					},
					{
						key: 'setEnabled',
						value: function setEnabled(t) {
							this._enabled !== t && ((this._enabled = t), this._updateEnabled());
						}
					},
					{
						key: '_updateEnabled',
						value: function _updateEnabled() {
							for (var t = 0; t < this._components.size; t++) this._components.get(t).__updateLoadState();
							for (var e = 0, n = this._children.length; e < n; e++) this._children[e]._updateDisabledByAncestor();
						}
					},
					{
						key: '_updateDisabledByAncestor',
						value: function _updateDisabledByAncestor() {
							for (var t = !1, e = this._parent; null !== e; ) {
								if (!e._enabled || e._disabledByAncestor) {
									t = !0;
									break;
								}
								e = e._parent;
							}
							this._disabledByAncestor !== t && ((this._disabledByAncestor = t), this._updateEnabled());
						}
					},
					{
						key: 'isDestroyed',
						value: function isDestroyed() {
							return this._destroyed;
						}
					},
					{
						key: 'getPosition',
						value: function getPosition() {
							return this._position;
						}
					},
					{
						key: 'setPosition',
						value: function setPosition(t) {
							this._position.thaw(), this._position.copy(t), this._position.freeze();
						}
					},
					{
						key: 'getVelocity',
						value: function getVelocity() {
							return this._velocity;
						}
					},
					{
						key: 'setVelocity',
						value: function setVelocity(t) {
							this._velocity.thaw(), this._velocity.copy(t), this._velocity.freeze();
						}
					},
					{
						key: 'getOrientation',
						value: function getOrientation() {
							return this._orientation;
						}
					},
					{
						key: 'setOrientation',
						value: function setOrientation(t) {
							this._orientation.thaw(), this._orientation.copy(t), this._orientation.freeze();
						}
					},
					{
						key: 'getAngularVelocity',
						value: function getAngularVelocity() {
							return this._angularVelocity;
						}
					},
					{
						key: 'setAngularVelocity',
						value: function setAngularVelocity(t) {
							this._angularVelocity.thaw(), this._angularVelocity.copy(t), this._angularVelocity.freeze();
						}
					},
					{
						key: 'getPositionRelativeToEntity',
						value: function getPositionRelativeToEntity(t, e, n, r) {
							var i = this;
							if ((t.copy(e), void 0 === r)) {
								var o = this.getLowestCommonAncestor(n);
								if (null === o) return void t.copy(yt.NaN);
								for (t.add(t, i.getPosition()); i !== o; ) (i = i.getParent()), t.add(t, i.getPosition());
								if (null !== n)
									for (i = n, t.sub(t, i.getPosition()); i !== o; ) (i = i.getParent()), t.sub(t, i.getPosition());
							} else {
								var a = yt.pool.get(),
									s = this.getLowestCommonAncestor(n, r);
								if (null !== s) {
									for (i.getPositionAtTime(a, r), t.add(t, a); i !== s; )
										(i = i.getParent(r)).getPositionAtTime(a, r), t.add(t, a);
									if (null !== n)
										for ((i = n).getPositionAtTime(a, r), t.sub(t, a); i !== s; )
											(i = i.getParent(r)).getPositionAtTime(a, r), t.sub(t, a);
								} else t.copy(yt.NaN);
								yt.pool.release(a);
							}
						}
					},
					{
						key: 'getVelocityRelativeToEntity',
						value: function getVelocityRelativeToEntity(t, e, n, r) {
							var i = this;
							if ((t.copy(e), void 0 === r)) {
								var o = this.getLowestCommonAncestor(n);
								if (null === o) return void t.copy(yt.NaN);
								for (t.add(t, i.getVelocity()); i !== o; ) (i = i.getParent()), t.add(t, i.getVelocity());
								if (null !== n)
									for (i = n, t.sub(t, i.getVelocity()); i !== o; ) (i = i.getParent()), t.sub(t, i.getVelocity());
							} else {
								var a = yt.pool.get(),
									s = this.getLowestCommonAncestor(n, r);
								if (null !== s) {
									for (i.getVelocityAtTime(a, r), t.add(t, a); i !== s; )
										(i = i.getParent(r)).getVelocityAtTime(a, r), t.add(t, a);
									if (null !== n)
										for ((i = n).getVelocityAtTime(a, r), t.sub(t, a); i !== s; )
											(i = i.getParent(r)).getVelocityAtTime(a, r), t.sub(t, a);
								} else t.copy(yt.NaN);
								yt.pool.release(a);
							}
						}
					},
					{
						key: 'getPositionAtTime',
						value: function getPositionAtTime(t, e) {
							if (this.isEnabled())
								if (void 0 === e) t.copy(this._position);
								else if ((t.set(Number.NaN, Number.NaN, Number.NaN), this._controllers.size > 0))
									for (var n = 0; n < this._controllers.size; n++) {
										var r = this._controllers.get(n);
										r.hasModifiedState('position') &&
											r.getCoverage().contains(e) &&
											r.isEnabled() &&
											r.__updatePositionAtTime(t, e);
									}
								else t.copy(this._position);
							else t.set(Number.NaN, Number.NaN, Number.NaN);
						}
					},
					{
						key: 'getVelocityAtTime',
						value: function getVelocityAtTime(t, e) {
							if (this.isEnabled())
								if (void 0 === e) t.copy(this._velocity);
								else if ((t.set(Number.NaN, Number.NaN, Number.NaN), this._controllers.size > 0))
									for (var n = 0; n < this._controllers.size; n++) {
										var r = this._controllers.get(n);
										r.hasModifiedState('velocity') &&
											r.getCoverage().contains(e) &&
											r.isEnabled() &&
											r.__updateVelocityAtTime(t, e);
									}
								else t.copy(this._velocity);
							else t.set(Number.NaN, Number.NaN, Number.NaN);
						}
					},
					{
						key: 'getOrientationAtTime',
						value: function getOrientationAtTime(t, e) {
							if (this.isEnabled())
								if (void 0 === e) t.copy(this._orientation);
								else if ((t.set(Number.NaN, Number.NaN, Number.NaN, Number.NaN), this._controllers.size > 0))
									for (var n = 0; n < this._controllers.size; n++) {
										var r = this._controllers.get(n);
										r.hasModifiedState('orientation') &&
											r.getCoverage().contains(e) &&
											r.isEnabled() &&
											r.__updateOrientationAtTime(t, e);
									}
								else t.copy(this._orientation);
							else t.set(Number.NaN, Number.NaN, Number.NaN, Number.NaN);
						}
					},
					{
						key: 'getOcclusionRadius',
						value: function getOcclusionRadius() {
							return this._occlusionRadius;
						}
					},
					{
						key: 'getExtentsRadius',
						value: function getExtentsRadius() {
							return this._extentsRadius;
						}
					},
					{
						key: 'setOcclusionRadius',
						value: function setOcclusionRadius(t) {
							this._occlusionRadius = t;
						}
					},
					{
						key: 'setExtentsRadius',
						value: function setExtentsRadius(t) {
							this._extentsRadius = t;
						}
					},
					{
						key: 'getPositionCoverage',
						value: function getPositionCoverage() {
							return this._positionCoverage;
						}
					},
					{
						key: 'getOrientationCoverage',
						value: function getOrientationCoverage() {
							return this._orientationCoverage;
						}
					},
					{
						key: 'isInPositionCoverage',
						value: function isInPositionCoverage() {
							return this._isInPositionCoverage;
						}
					},
					{
						key: 'isInOrientationCoverage',
						value: function isInOrientationCoverage() {
							return this._isInOrientationCoverage;
						}
					},
					{
						key: '__updateCoverage',
						value: function __updateCoverage() {
							var t = 0,
								e = 0;
							this._positionCoverage.thaw(),
								this._orientationCoverage.thaw(),
								this._positionCoverage.set(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY),
								this._orientationCoverage.set(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY);
							for (var n = 0; n < this._controllers.size; n++) {
								var r = this._controllers.get(n);
								r.isEnabled() &&
									(r.hasModifiedState('position') &&
										(this._positionCoverage.union(this._positionCoverage, r.getCoverage()), t++),
									r.hasModifiedState('orientation') &&
										(this._orientationCoverage.union(this._orientationCoverage, r.getCoverage()), e++));
							}
							0 === t && this._positionCoverage.set(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY),
								0 === e && this._orientationCoverage.set(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY),
								this._positionCoverage.freeze(),
								this._orientationCoverage.freeze();
						}
					},
					{
						key: 'canOcclude',
						value: function canOcclude() {
							return this._canOcclude;
						}
					},
					{
						key: 'setCanOcclude',
						value: function setCanOcclude(t) {
							this._canOcclude = t;
						}
					},
					{
						key: 'isOccludingPosition',
						value: function isOccludingPosition(t, e) {
							if (!this._canOcclude || !this.isInPositionCoverage()) return !1;
							var n = J.pool.get();
							U.getLineSphereIntersectionWithLineStartAtOrigin(
								n,
								e,
								this.getCameraSpacePosition(t),
								this._occlusionRadius
							);
							var r = 0 <= n.min + n.max && n.min + n.max < 2;
							return J.pool.release(n), r;
						}
					},
					{
						key: 'getParent',
						value: function getParent(t) {
							if (void 0 === t) return this._parent;
							for (var e = this._controllers.size - 1; e >= 0; e--) {
								var n = this._controllers.get(e);
								if (n.getCoverage().contains(t) && n.isEnabled()) {
									var r = this.getScene().getEntity(n.getParent());
									if (null !== r) return r;
								}
							}
							return null;
						}
					},
					{
						key: 'setParent',
						value: function setParent(t) {
							if (t !== this._parent) {
								var e = yt.pool.get();
								if (
									(this.getPositionRelativeToEntity(e, yt.Zero, t),
									e.isNaN() || this.setPosition(e),
									yt.pool.release(e),
									null !== this._parent)
								)
									for (var n = 0; n < this._parent._children.length; n++) {
										this._parent._children[n] === this && this._parent._children.splice(n, 1);
									}
								(this._parent = t),
									null !== this._parent && this._parent._children.push(this),
									this._clearCameraReferences(),
									this.getScene().getControllerDependencyGraph().needsSorting(),
									this._updateDisabledByAncestor();
							}
						}
					},
					{
						key: '_clearCameraReferences',
						value: function _clearCameraReferences() {
							this._cameraSpacePosition.clear(),
								this._normalSpacePosition.clear(),
								this._pixelSpacePosition.clear(),
								this._normalSpaceOcclusionRadius.clear(),
								this._normalSpaceExtentsRadius.clear(),
								this._pixelSpaceOcclusionRadius.clear(),
								this._pixelSpaceExtentsRadius.clear();
							for (var t = 0, e = this._components.size; t < e; t++) {
								this._components.get(t).__clearCameraDependentsBase();
							}
							for (var n = 0, r = this._children.length; n < r; n++) this._children[n]._clearCameraReferences();
						}
					},
					{
						key: 'getNumChildren',
						value: function getNumChildren() {
							return this._children.length;
						}
					},
					{
						key: 'getChild',
						value: function getChild(t) {
							return this._children[t];
						}
					},
					{
						key: 'getLowestCommonAncestor',
						value: function getLowestCommonAncestor(t, e) {
							if (null === t) return null;
							for (var n = this, r = t, i = 0, o = 0; null !== n.getParent(e); ) (i += 1), (n = n.getParent(e));
							for (; null !== r.getParent(e); ) (o += 1), (r = r.getParent(e));
							for (n = this, r = t; i > o; ) (i -= 1), (n = n.getParent(e));
							for (; o > i; ) (o -= 1), (r = r.getParent(e));
							for (; n !== r && null !== n; ) (n = n.getParent(e)), (r = r.getParent(e));
							return n;
						}
					},
					{
						key: 'getNumComponents',
						value: function getNumComponents() {
							return this._components.size;
						}
					},
					{
						key: 'getComponent',
						value: function getComponent(t) {
							return this._components.get(t);
						}
					},
					{
						key: 'getComponentByType',
						value: function getComponentByType(t) {
							var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
							return this._components.getByType(t, e);
						}
					},
					{
						key: 'addComponent',
						value: function addComponent(t, e, n) {
							return this._components.add(t, e, n);
						}
					},
					{
						key: 'removeComponent',
						value: function removeComponent(t) {
							this._components.remove(t);
						}
					},
					{
						key: 'clearComponents',
						value: function clearComponents() {
							this._components.clear();
						}
					},
					{
						key: 'getNumControllers',
						value: function getNumControllers() {
							return this._controllers.size;
						}
					},
					{
						key: 'getController',
						value: function getController(t) {
							return this._controllers.get(t);
						}
					},
					{
						key: 'getControllerByType',
						value: function getControllerByType(t) {
							var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
							return this._controllers.getByType(t, e);
						}
					},
					{
						key: 'addController',
						value: function addController(t, e, n) {
							var r = this._controllers.add(t, e, n);
							return this.__updateCoverage(), r;
						}
					},
					{
						key: 'removeController',
						value: function removeController(t) {
							this._controllers.remove(t), this.__updateCoverage();
						}
					},
					{
						key: 'clearControllers',
						value: function clearControllers() {
							this._controllers.clear(), this.__updateCoverage();
						}
					},
					{
						key: 'getCameraSpacePosition',
						value: function getCameraSpacePosition(t) {
							var e = this._cameraSpacePosition.get(t);
							return void 0 !== e ? e : yt.NaN;
						}
					},
					{
						key: 'getNormalSpacePosition',
						value: function getNormalSpacePosition(t) {
							var e = this._normalSpacePosition.get(t);
							return void 0 !== e ? e : yt.NaN;
						}
					},
					{
						key: 'getPixelSpacePosition',
						value: function getPixelSpacePosition(t) {
							var e = this._pixelSpacePosition.get(t);
							return void 0 !== e ? e : st.NaN;
						}
					},
					{
						key: 'getNormalSpaceOcclusionRadius',
						value: function getNormalSpaceOcclusionRadius(t) {
							var e = this._normalSpaceOcclusionRadius.get(t);
							return void 0 !== e ? e : Number.NaN;
						}
					},
					{
						key: 'getNormalSpaceExtentsRadius',
						value: function getNormalSpaceExtentsRadius(t) {
							var e = this._normalSpaceExtentsRadius.get(t);
							return void 0 !== e ? e : Number.NaN;
						}
					},
					{
						key: 'getPixelSpaceOcclusionRadius',
						value: function getPixelSpaceOcclusionRadius(t) {
							var e = this._pixelSpaceOcclusionRadius.get(t);
							return void 0 !== e ? e : Number.NaN;
						}
					},
					{
						key: 'getPixelSpaceExtentsRadius',
						value: function getPixelSpaceExtentsRadius(t) {
							var e = this._pixelSpaceExtentsRadius.get(t);
							return void 0 !== e ? e : Number.NaN;
						}
					},
					{
						key: 'getGreatestPixelSpaceOcclusionRadius',
						value: function getGreatestPixelSpaceOcclusionRadius() {
							return this._greatestPixelSpaceOcclusionRadius;
						}
					},
					{
						key: 'getGreatestPixelSpaceExtentsRadius',
						value: function getGreatestPixelSpaceExtentsRadius() {
							return this._greatestPixelSpaceExtentsRadius;
						}
					},
					{
						key: '__setCameraDependentVariables',
						value: function __setCameraDependentVariables(t, e) {
							var n = t.getViewport();
							if (null !== n) {
								var r = this._cameraSpacePosition.get(t);
								void 0 === r ? ((r = new yt()), this._cameraSpacePosition.set(t, r)) : r.thaw(), r.copy(e), r.freeze();
								var i = this._normalSpacePosition.get(t);
								void 0 === i ? ((i = new yt()), this._normalSpacePosition.set(t, i)) : i.thaw(),
									t.getNormalSpacePositionFromCameraSpacePosition(i, r),
									i.freeze();
								var o = this._pixelSpacePosition.get(t);
								void 0 === o ? ((o = new st()), this._pixelSpacePosition.set(t, o)) : o.thaw(),
									n.getPixelSpacePositionFromNormalSpacePosition(o, i),
									o.freeze();
								var a = t.getNormalSpaceRadiusFromRadius(this._occlusionRadius, r.magnitude());
								this._normalSpaceOcclusionRadius.set(t, a);
								var s = t.getNormalSpaceRadiusFromRadius(this._extentsRadius, r.magnitude());
								this._normalSpaceExtentsRadius.set(t, s);
								var l = n.getPixelSpaceRadiusFromNormalSpaceRadius(a);
								this._pixelSpaceOcclusionRadius.set(t, l);
								var c = n.getPixelSpaceRadiusFromNormalSpaceRadius(s);
								this._pixelSpaceExtentsRadius.set(t, c);
							}
						}
					},
					{
						key: '__removeCameraDependents',
						value: function __removeCameraDependents(t) {
							this._cameraSpacePosition.delete(t),
								this._normalSpacePosition.delete(t),
								this._pixelSpacePosition.delete(t),
								this._normalSpaceOcclusionRadius.delete(t),
								this._normalSpaceExtentsRadius.delete(t),
								this._pixelSpaceOcclusionRadius.delete(t),
								this._pixelSpaceExtentsRadius.delete(t);
							for (var e = 0; e < this._components.size; e++) this._components.get(e).__removeCameraDependentsBase(t);
						}
					},
					{
						key: 'get',
						value: function get(t) {
							var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
								n = this._components.getByType(t, e);
							return null !== n ? n : this._controllers.getByType(t, e);
						}
					},
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							var t = [];
							if (this.isEnabled()) {
								for (var e = 0; e < this._controllers.size; e++) t.push(this._controllers.get(e).getLoadedPromise());
								for (var n = 0; n < this._components.size; n++) t.push(this._components.get(n).getLoadedPromise());
							}
							return Promise.all(t).then();
						}
					},
					{
						key: 'toString',
						value: function toString() {
							return this.getName();
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							(this._destroyed = !0), _get(entity_getPrototypeOf(Entity.prototype), '__destroy', this).call(this);
							for (var t = 0; t < this._children.length; t++) this._children[t].setParent(null);
							null !== this._parent && this.setParent(null),
								this._controllers.__destroy(),
								this._components.__destroy();
						}
					},
					{
						key: '__updateParent',
						value: function __updateParent(t) {
							var e = null;
							if (this._positionCoverage.contains(t))
								for (var n = this._controllers.size - 1; n >= 0; n--) {
									var r = this._controllers.get(n);
									if (
										r.getCoverage().contains(t) &&
										r.isEnabled() &&
										null !== (e = this.getScene().getEntity(r.getParent()))
									)
										break;
								}
							null !== e && this.setParent(e);
						}
					},
					{
						key: '__updateIsInCoverages',
						value: function __updateIsInCoverages(t) {
							(this._isInPositionCoverage = this._positionCoverage.contains(t)),
								(this._isInOrientationCoverage = this._orientationCoverage.contains(t));
							for (var e = 0; e < this._components.size; e++) this._components.get(e).__updateLoadState();
						}
					},
					{
						key: '__updateVisuals',
						value: function __updateVisuals() {
							this._greatestPixelSpaceOcclusionRadius = 0;
							for (var t = 0, e = this._pixelSpaceOcclusionRadius.size; t < e; t++) {
								var n = this._pixelSpaceOcclusionRadius.getAt(t).value;
								this._greatestPixelSpaceOcclusionRadius < n && (this._greatestPixelSpaceOcclusionRadius = n);
							}
							this._greatestPixelSpaceExtentsRadius = 0;
							for (var r = 0, i = this._pixelSpaceExtentsRadius.size; r < i; r++) {
								var o = this._pixelSpaceExtentsRadius.getAt(r).value;
								this._greatestPixelSpaceExtentsRadius < o && (this._greatestPixelSpaceExtentsRadius = o);
							}
							for (var a = 0, s = this._components.size; a < s; a++) {
								var l = this._components.get(a);
								l.isEnabled() && l.__updateBase();
							}
						}
					},
					{
						key: '__updateCameraVariables',
						value: function __updateCameraVariables(t, e, n) {
							if (this.isEnabled()) {
								var r = yt.pool.get();
								this === t.getEntity()
									? r.set(0, 0, 0)
									: n
									? r.sub(e.getCameraSpacePosition(t), e.getPosition())
									: r.add(e.getCameraSpacePosition(t), this._position),
									this.__setCameraDependentVariables(t, r),
									this._canOcclude && this._pixelSpaceOcclusionRadius.get(t) >= 1 && t.__addToOccludingEntities(this),
									yt.pool.release(r);
								for (var i = 0, o = this._components.size; i < o; i++) {
									var a = this._components.get(i);
									a !== t && a.isEnabled() && a.__updateCameraVariablesBase(t);
								}
							}
							null === this._parent ||
								(!n && this !== t.getEntity()) ||
								this._parent.__updateCameraVariables(t, this, !0);
							for (var s = 0, l = this._children.length; s < l; s++) {
								var c = this._children[s];
								c !== e && c.__updateCameraVariables(t, this, !1);
							}
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							for (var e = 0, n = this._components.size; e < n; e++) this._components.get(e).__prepareForRenderBase(t);
						}
					}
				]),
				Entity
			);
		})();
		function entity_item_typeof(t) {
			return (entity_item_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function entity_item_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function entity_item_possibleConstructorReturn(t, e) {
			return !e || ('object' !== entity_item_typeof(e) && 'function' != typeof e)
				? (function entity_item_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function entity_item_get(t, e, n) {
			return (entity_item_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function entity_item_superPropBase(t, e) {
								for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = entity_item_getPrototypeOf(t)); );
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function entity_item_getPrototypeOf(t) {
			return (entity_item_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function entity_item_setPrototypeOf(t, e) {
			return (entity_item_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Qt = (function (t) {
			function EntityItem(t, e, n) {
				var r;
				return (
					(function entity_item_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, EntityItem),
					((r = entity_item_possibleConstructorReturn(
						this,
						entity_item_getPrototypeOf(EntityItem).call(this, t, e, n)
					))._enabled = !0),
					(r._destroyed = !1),
					r
				);
			}
			return (
				(function entity_item_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && entity_item_setPrototypeOf(t, e);
				})(EntityItem, f),
				(function entity_item_createClass(t, e, n) {
					return e && entity_item_defineProperties(t.prototype, e), n && entity_item_defineProperties(t, n), t;
				})(EntityItem, [
					{
						key: 'getEntity',
						value: function getEntity() {
							return this.__getCollectionParent();
						}
					},
					{
						key: 'isDestroyed',
						value: function isDestroyed() {
							return this._destroyed;
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							(this._destroyed = !0),
								entity_item_get(entity_item_getPrototypeOf(EntityItem.prototype), '__destroy', this).call(this);
						}
					},
					{
						key: 'isEnabled',
						value: function isEnabled() {
							return this._enabled;
						}
					},
					{
						key: 'setEnabled',
						value: function setEnabled(t) {
							this._enabled = t;
						}
					},
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							return Promise.resolve();
						}
					},
					{ key: '__update', value: function __update() {} }
				]),
				EntityItem
			);
		})();
		function input_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function input_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var te = function Touch() {
				input_classCallCheck(this, Touch),
					(this.identifier = 0),
					(this.pressedPosition = new st()),
					(this.pressedTime = 0),
					(this.lastFramePosition = new st()),
					(this.thisFramePosition = new st());
			},
			ee = (function () {
				function Input(t) {
					var e = this;
					input_classCallCheck(this, Input),
						(this._engine = t),
						(this._activeViewport = null),
						(this._draggedOffset = new st()),
						this._draggedOffset.freeze(),
						(this._zoomedOffset = 0),
						(this._rotatedOffset = 0),
						(this._shiftPressed = !1),
						(this._controlPressed = !1),
						(this._keysPressed = new Set()),
						(this._maxSelectTime = 0.5),
						(this._maxSelectDistance = 5),
						(this._cursorPosition = new st()),
						(this._selected = !1),
						(this._selectedPosition = new st()),
						this._selectedPosition.freeze(),
						(this._touches = []),
						window.addEventListener('keydown', function (t) {
							(t.target instanceof HTMLElement && ['INPUT', 'SELECT', 'TEXTAREA'].includes(t.target.tagName)) ||
								('Control' === t.key ? (e._controlPressed = !0) : 'Shift' === t.key && (e._shiftPressed = !0),
								e._keysPressed.add(t.key.toLowerCase()));
						}),
						window.addEventListener('keyup', function (t) {
							'Control' === t.key ? (e._controlPressed = !1) : 'Shift' === t.key && (e._shiftPressed = !1),
								e._keysPressed.delete(t.key.toLowerCase());
						}),
						this._engine.getRootDiv().addEventListener('mousedown', function (t) {
							if (
								0 === t.button &&
								(document.activeElement instanceof HTMLElement && document.activeElement.blur(),
								0 === e._touches.length)
							) {
								for (
									var n = e._engine.getRootDiv().getBoundingClientRect(), r = null, i = 0;
									i < e._touches.length;
									i++
								)
									0 === e._touches[i].identifier && (r = e._touches[i]);
								null === r && (r = new te()),
									(r.identifier = 0),
									r.pressedPosition.set(t.clientX - n.left, t.clientY - n.top),
									(r.pressedTime = Date.now()),
									r.lastFramePosition.copy(r.pressedPosition),
									r.thisFramePosition.copy(r.pressedPosition),
									e._touches.push(r),
									e._updateActiveViewport();
							}
						}),
						window.addEventListener('mousemove', function (t) {
							var n = e._engine.getRootDiv().getBoundingClientRect();
							if (1 === e._touches.length && 0 === e._touches[0].identifier) {
								var r = e._touches[0];
								r.thisFramePosition.set(t.clientX - n.left, t.clientY - n.top),
									e._draggedOffset.thaw(),
									e._draggedOffset.sub(r.thisFramePosition, r.lastFramePosition);
								var i = Math.max(
									Math.abs(r.thisFramePosition.x - r.pressedPosition.x),
									Math.abs(r.thisFramePosition.y - r.pressedPosition.y)
								);
								(Date.now() - r.pressedTime) / 1e3 <= e._maxSelectTime &&
									i <= e._maxSelectDistance &&
									e._draggedOffset.set(0, 0),
									e._draggedOffset.freeze();
							}
							e._touches.length <= 1 && e._cursorPosition.set(t.clientX - n.left, t.clientY - n.top);
						}),
						window.addEventListener('mouseup', function (t) {
							if (0 === t.button && 1 === e._touches.length && 0 === e._touches[0].identifier) {
								var n = e._engine.getRootDiv().getBoundingClientRect(),
									r = e._touches[0];
								r.thisFramePosition.set(t.clientX - n.left, t.clientY - n.top);
								var i = Math.max(
									Math.abs(r.thisFramePosition.x - r.pressedPosition.x),
									Math.abs(r.thisFramePosition.y - r.pressedPosition.y)
								);
								(Date.now() - r.pressedTime) / 1e3 <= e._maxSelectTime &&
									i <= e._maxSelectDistance &&
									((e._selected = !0),
									e._selectedPosition.thaw(),
									e._selectedPosition.copy(r.thisFramePosition),
									e._selectedPosition.freeze()),
									e._touches.splice(0, 1);
							}
						}),
						this._engine.getRootDiv().addEventListener(
							'wheel',
							function (t) {
								(e._zoomedOffset += Math.sign(t.deltaY)), t.preventDefault();
							},
							{ passive: !1 }
						),
						this._engine.getRootDiv().addEventListener(
							'touchstart',
							function (t) {
								for (var n = e._engine.getRootDiv().getBoundingClientRect(), r = 0; r < t.changedTouches.length; r++) {
									for (var i = t.changedTouches[r], o = null, a = 0; a < e._touches.length; a++)
										e._touches[a].identifier === i.identifier && (o = e._touches[a]);
									null === o && (o = new te()),
										(o.identifier = i.identifier),
										o.pressedPosition.thaw(),
										o.pressedPosition.set(i.pageX - window.pageXOffset - n.left, i.pageY - window.pageYOffset - n.top),
										o.pressedPosition.freeze(),
										(o.pressedTime = Date.now()),
										o.lastFramePosition.copy(o.pressedPosition),
										o.thisFramePosition.copy(o.pressedPosition),
										e._touches.push(o),
										1 === e._touches.length && e._cursorPosition.copy(o.thisFramePosition),
										e._updateActiveViewport();
								}
							},
							{ passive: !1 }
						),
						window.addEventListener('touchmove', function (t) {
							for (var n = e._engine.getRootDiv().getBoundingClientRect(), r = 0; r < t.changedTouches.length; r++)
								for (var i = t.changedTouches[r], o = 0; o < e._touches.length; o++) {
									var a = e._touches[o];
									if (a.identifier === i.identifier)
										if (
											(a.thisFramePosition.set(
												i.pageX - window.pageXOffset - n.left,
												i.pageY - window.pageYOffset - n.top
											),
											1 === e._touches.length)
										) {
											e._draggedOffset.thaw(), e._draggedOffset.sub(a.thisFramePosition, a.lastFramePosition);
											var s = Math.max(
												Math.abs(a.thisFramePosition.x - a.pressedPosition.x),
												Math.abs(a.thisFramePosition.y - a.pressedPosition.y)
											);
											(Date.now() - a.pressedTime) / 1e3 <= e._maxSelectTime &&
												s <= e._maxSelectDistance &&
												e._draggedOffset.set(0, 0),
												e._draggedOffset.freeze(),
												e._cursorPosition.copy(a.thisFramePosition);
										} else if (2 === e._touches.length) {
											var l = st.pool.get();
											l.sub(e._touches[r].thisFramePosition, e._touches[1 - r].thisFramePosition);
											var c = st.pool.get();
											c.sub(e._touches[r].thisFramePosition, e._touches[r].lastFramePosition);
											var u = c.dot(l) / l.magnitude() / c.magnitude(),
												_ = c.cross(l) / l.magnitude() / c.magnitude();
											u < -0.7
												? (e._zoomedOffset += -(u + 0.7) * c.magnitude())
												: u > 0.7
												? (e._zoomedOffset += -(u - 0.7) * c.magnitude())
												: (e._rotatedOffset += _ * c.magnitude()),
												st.pool.release(c),
												st.pool.release(l);
											var p = Math.max(
												Math.abs(a.thisFramePosition.x - a.pressedPosition.x),
												Math.abs(a.thisFramePosition.y - a.pressedPosition.y)
											);
											(Date.now() - a.pressedTime) / 1e3 <= e._maxSelectTime &&
												p <= e._maxSelectDistance &&
												((e._zoomedOffset = 0), (e._rotatedOffset = 0));
										}
								}
						}),
						window.addEventListener('touchend', function (t) {
							for (var n = e._engine.getRootDiv().getBoundingClientRect(), r = 0; r < t.changedTouches.length; r++)
								for (var i = t.changedTouches[r], o = 0; o < e._touches.length; o++) {
									var a = e._touches[o];
									if (a.identifier === i.identifier) {
										if (
											(a.thisFramePosition.set(
												i.pageX - window.pageXOffset - n.left,
												i.pageY - window.pageYOffset - n.top
											),
											1 === e._touches.length)
										) {
											var s = Math.max(
												Math.abs(a.thisFramePosition.x - a.pressedPosition.x),
												Math.abs(a.thisFramePosition.y - a.pressedPosition.y)
											);
											(Date.now() - a.pressedTime) / 1e3 <= e._maxSelectTime &&
												s <= e._maxSelectDistance &&
												((e._selected = !0),
												e._selectedPosition.thaw(),
												e._selectedPosition.copy(a.thisFramePosition),
												e._selectedPosition.freeze());
										}
										e._touches.splice(o, 1);
									}
								}
						}),
						window.addEventListener('touchcancel', function () {});
				}
				return (
					(function input_createClass(t, e, n) {
						return e && input_defineProperties(t.prototype, e), n && input_defineProperties(t, n), t;
					})(Input, [
						{
							key: 'getActiveViewport',
							value: function getActiveViewport() {
								return this._activeViewport;
							}
						},
						{
							key: 'getDraggedOffset',
							value: function getDraggedOffset() {
								return this._draggedOffset;
							}
						},
						{
							key: 'getZoomedOffset',
							value: function getZoomedOffset() {
								return this._zoomedOffset;
							}
						},
						{
							key: 'isShiftPressed',
							value: function isShiftPressed() {
								return this._shiftPressed;
							}
						},
						{
							key: 'isControlPressed',
							value: function isControlPressed() {
								return this._controlPressed;
							}
						},
						{
							key: 'isKeyPressed',
							value: function isKeyPressed(t) {
								return this._keysPressed.has(t);
							}
						},
						{
							key: 'isSelected',
							value: function isSelected() {
								return this._selected;
							}
						},
						{
							key: 'getSelectedPosition',
							value: function getSelectedPosition() {
								return this._selectedPosition;
							}
						},
						{
							key: 'getCursorPosition',
							value: function getCursorPosition() {
								return this._cursorPosition;
							}
						},
						{
							key: '__setActiveViewport',
							value: function __setActiveViewport(t) {
								this._activeViewport = t;
							}
						},
						{
							key: '__resetStatesForNextFrame',
							value: function __resetStatesForNextFrame() {
								for (var t = 0; t < this._touches.length; t++)
									this._touches[t].lastFramePosition.copy(this._touches[t].thisFramePosition);
								(this._selected = !1),
									(this._altSelected = !1),
									this._draggedOffset.thaw(),
									this._draggedOffset.set(0, 0),
									this._draggedOffset.freeze(),
									(this._zoomedOffset = 0),
									(this._rotatedOffset = 0);
							}
						},
						{
							key: '_updateActiveViewport',
							value: function _updateActiveViewport() {
								this._activeViewport = null;
								for (var t = this._engine.getNumViewports() - 1; t >= 0; t--) {
									var e = this._engine.getViewport(t).getBounds();
									if (this._engine.getViewport(t).isEnabled() && e.contains(this._touches[0].pressedPosition)) {
										this._activeViewport = this._engine.getViewport(t);
										break;
									}
								}
							}
						}
					]),
					Input
				);
			})(),
			ne = n(272),
			re = n(273),
			ie = n(274),
			oe = n(275),
			ae = n(276),
			se = n(277);
		function material_manager_typeof(t) {
			return (material_manager_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function material_manager_slicedToArray(t, e) {
			return (
				(function material_manager_arrayWithHoles(t) {
					if (Array.isArray(t)) return t;
				})(t) ||
				(function material_manager_iterableToArrayLimit(t, e) {
					var n = [],
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (
							var a, s = t[Symbol.iterator]();
							!(r = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e);
							r = !0
						);
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					return n;
				})(t, e) ||
				(function material_manager_nonIterableRest() {
					throw new TypeError('Invalid attempt to destructure non-iterable instance');
				})()
			);
		}
		function material_manager_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function material_manager_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function material_manager_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var le = function Resource(t) {
				material_manager_classCallCheck(this, Resource), (this.value = t), (this.useCount = 0);
			},
			ce = (function () {
				function MaterialManager(t) {
					material_manager_classCallCheck(this, MaterialManager),
						(this._downloader = t),
						(this._cache = new Map()),
						(this._clonedMaterials = new Map()),
						(this._promises = new Map()),
						this._preload();
				}
				return (
					(function material_manager_createClass(t, e, n) {
						return (
							e && material_manager_defineProperties(t.prototype, e), n && material_manager_defineProperties(t, n), t
						);
					})(MaterialManager, [
						{
							key: 'get',
							value: (function () {
								var t = (function material_manager_asyncToGenerator(t) {
									return function () {
										var e = this,
											n = arguments;
										return new Promise(function (r, i) {
											var o = t.apply(e, n);
											function _next(t) {
												material_manager_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
											}
											function _throw(t) {
												material_manager_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
											}
											_next(void 0);
										});
									};
								})(
									regeneratorRuntime.mark(function _callee(t) {
										var e, n, r, i;
										return regeneratorRuntime.wrap(
											function _callee$(o) {
												for (;;)
													switch ((o.prev = o.next)) {
														case 0:
															if (void 0 !== (e = this._cache.get(t))) {
																o.next = 7;
																break;
															}
															if (void 0 === (n = this._promises.get(t))) {
																o.next = 7;
																break;
															}
															return (o.next = 6), n;
														case 6:
															e = o.sent;
														case 7:
															if (void 0 !== e) {
																o.next = 20;
																break;
															}
															return (o.next = 10), this._downloader.download(t, !1);
														case 10:
															if ('completed' === (r = o.sent).status && 'string' == typeof r.content) {
																o.next = 13;
																break;
															}
															throw new Error('Failed to download material "' + t + '".');
														case 13:
															return (i = JSON.parse(r.content)), (o.t0 = le), (o.next = 17), this._load(t, i);
														case 17:
															(o.t1 = o.sent), (e = new o.t0(o.t1)), this._cache.set(t, e);
														case 20:
															return (e.useCount += 1), o.abrupt('return', this._clone(e.value, t));
														case 22:
														case 'end':
															return o.stop();
													}
											},
											_callee,
											this
										);
									})
								);
								return function get(e) {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'getPreloaded',
							value: function getPreloaded(t) {
								var e = this._cache.get(t);
								if (void 0 === e) throw new Error('Invalid pre-loaded material "' + t + '".');
								return (e.useCount += 1), this._clone(e.value, t);
							}
						},
						{
							key: 'release',
							value: function release(t) {
								var e = this._clonedMaterials.get(t);
								if (void 0 !== e) {
									this._clonedMaterials.delete(t);
									var n = this._cache.get(e);
									n && ((n.useCount -= 1), 0 === n.useCount && (this._unload(n.value), this._cache.delete(e)));
								}
							}
						},
						{
							key: '_unload',
							value: function _unload(t) {
								var e = t.uniforms;
								for (var n in e)
									Object.prototype.hasOwnProperty.call(e, n) &&
										null !== e[n].value &&
										void 0 !== e[n].value.dispose &&
										e[n].value.dispose();
								t.dispose();
							}
						},
						{
							key: '_preload',
							value: function _preload() {
								var t = new Map();
								t.set('basic', ne),
									t.set('basic_alpha', re),
									t.set('line', ie),
									t.set('plumes', oe),
									t.set('sprite', ae),
									t.set('sprite_particles', se);
								var e = !0,
									n = !1,
									r = void 0;
								try {
									for (var i, o = t[Symbol.iterator](); !(e = (i = o.next()).done); e = !0) {
										var a = material_manager_slicedToArray(i.value, 2),
											s = a[0],
											l = a[1],
											c = this._load(s, l),
											u = new le(c);
										(u.useCount += 1), this._cache.set(s, u);
									}
								} catch (t) {
									(n = !0), (r = t);
								} finally {
									try {
										e || null == o.return || o.return();
									} finally {
										if (n) throw r;
									}
								}
							}
						},
						{
							key: '_load',
							value: function _load(t, e) {
								try {
									var n = {};
									if (e.uniforms)
										for (var r = 0, o = Object.entries(e.uniforms); r < o.length; r++) {
											var a = material_manager_slicedToArray(o[r], 2),
												s = a[0],
												l = a[1];
											[
												'modelMatrix',
												'modelViewMatrix',
												'projectionMatrix',
												'viewMatrix',
												'normalMatrix',
												'cameraPosition'
											].includes(s) || (n[s] = new i.Uniform(this._getUniformValueFromType(l)));
										}
									var c = !1,
										u = !0,
										_ = i.FrontSide,
										p = i.NoBlending;
									if (e.properties) {
										switch (
											(!0 === e.properties.transparent && (c = !0),
											!1 === e.properties.depthWrite && (u = !1),
											e.properties.side)
										) {
											case 'front':
												_ = i.FrontSide;
												break;
											case 'back':
												_ = i.BackSide;
												break;
											case 'double':
												_ = i.DoubleSide;
										}
										switch (e.properties.blending) {
											case 'normal':
												p = i.NormalBlending;
												break;
											case 'additive':
												p = i.AdditiveBlending;
												break;
											case 'subtractive':
												p = i.SubtractiveBlending;
												break;
											case 'multiply':
												p = i.MultiplyBlending;
												break;
											case 'custom':
												p = i.CustomBlending;
										}
									}
									if ('object' !== material_manager_typeof(e.vertex) || 'string' != typeof e.vertex.code)
										throw new Error('Missing vertex stage code.');
									if ('object' !== material_manager_typeof(e.fragment) || 'string' != typeof e.fragment.code)
										throw new Error('Missing fragment stage code.');
									if (Array.isArray(e.vertex.extensions)) {
										var h = '',
											d = !0,
											f = !1,
											m = void 0;
										try {
											for (var g, y = e.vertex.extensions[Symbol.iterator](); !(d = (g = y.next()).done); d = !0) {
												var v = g.value;
												Ht.hasGLExtension(v) && (h += '#extension GL_' + v + ': enable\n');
											}
										} catch (t) {
											(f = !0), (m = t);
										} finally {
											try {
												d || null == y.return || y.return();
											} finally {
												if (f) throw m;
											}
										}
										var b = !0,
											x = !1,
											S = void 0;
										try {
											for (var T, w = e.vertex.extensions[Symbol.iterator](); !(b = (T = w.next()).done); b = !0) {
												var C = T.value;
												Ht.hasGLExtension(C) && (h += '#define L_' + C + ' true\n'),
													Ht.isWebGL2() && 'EXT_frag_depth' === C && (h += '#define L_' + C + ' true\n');
											}
										} catch (t) {
											(x = !0), (S = t);
										} finally {
											try {
												b || null == w.return || w.return();
											} finally {
												if (x) throw S;
											}
										}
										e.vertex.code = h + e.vertex.code;
									}
									if (Array.isArray(e.fragment.extensions)) {
										var P = '',
											E = !0,
											k = !1,
											O = void 0;
										try {
											for (var A, R = e.fragment.extensions[Symbol.iterator](); !(E = (A = R.next()).done); E = !0) {
												var I = A.value;
												Ht.hasGLExtension(I) && (P += '#extension GL_' + I + ': enable\n');
											}
										} catch (t) {
											(k = !0), (O = t);
										} finally {
											try {
												E || null == R.return || R.return();
											} finally {
												if (k) throw O;
											}
										}
										var M = !0,
											L = !1,
											j = void 0;
										try {
											for (var z, N = e.fragment.extensions[Symbol.iterator](); !(M = (z = N.next()).done); M = !0) {
												var F = z.value;
												Ht.hasGLExtension(F) && (P += '#define L_' + F + ' true\n');
											}
										} catch (t) {
											(L = !0), (j = t);
										} finally {
											try {
												M || null == N.return || N.return();
											} finally {
												if (L) throw j;
											}
										}
										e.fragment.code = P + e.fragment.code;
									}
									var D = new i.RawShaderMaterial({
										uniforms: n,
										vertexShader: zt.fix(e.vertex.code, 'vertex'),
										fragmentShader: zt.fix(e.fragment.code, 'fragment'),
										transparent: c,
										depthWrite: u,
										side: _,
										blending: p
									});
									return (D.needsUpdate = !0), D;
								} catch (e) {
									throw new Error('while processing material "' + t + '", ' + e.message);
								}
							}
						},
						{
							key: '_getUniformValueFromType',
							value: function _getUniformValueFromType(t) {
								switch (t) {
									case 'int':
									case 'float':
										return 0;
									case 'ivec2':
									case 'vec2':
										return new i.Vector2(0, 0);
									case 'ivec3':
									case 'vec3':
										return new i.Vector3(0, 0, 0);
									case 'ivec4':
									case 'vec4':
										return new i.Vector4(0, 0, 0, 0);
									case 'mat3':
										return new i.Matrix3();
									case 'mat4':
										return new i.Matrix4();
									case 'sampler2D':
									case 'samplerCube':
										return null;
								}
								if (t.endsWith(']')) {
									for (
										var e = t.indexOf('['),
											n = t.indexOf(']'),
											r = t.substr(0, e),
											o = Number.parseInt(t.substr(e + 1, n - e - 1)),
											a = [],
											s = 0;
										s < o;
										s++
									)
										a.push(this._getUniformValueFromType(r));
									return a;
								}
								throw new Error('Unrecognized type: ' + t + '.');
							}
						},
						{
							key: '_clone',
							value: function _clone(t, e) {
								for (var n = t.clone(), r = 0, i = Object.entries(t.uniforms); r < i.length; r++) {
									var o = material_manager_slicedToArray(i[r], 2),
										a = o[0],
										s = o[1].value;
									if (Array.isArray(s)) {
										var l = s[0];
										if (
											l &&
											(l.isColor ||
												l.isMatrix3 ||
												l.isMatrix4 ||
												l.isVector2 ||
												l.isVector3 ||
												l.isVector4 ||
												l.isTexture)
										) {
											t.uniforms[a].value = [];
											for (var c = 0; c < s.length; c++) t.uniforms[a].value[c] = s[c].clone();
										}
									}
								}
								return (n.needsUpdate = !0), this._clonedMaterials.set(n, e), n;
							}
						}
					]),
					MaterialManager
				);
			})();
		function scene_typeof(t) {
			return (scene_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function _toConsumableArray(t) {
			return (
				(function _arrayWithoutHoles(t) {
					if (Array.isArray(t)) {
						for (var e = 0, n = new Array(t.length); e < t.length; e++) n[e] = t[e];
						return n;
					}
				})(t) ||
				(function _iterableToArray(t) {
					if (Symbol.iterator in Object(t) || '[object Arguments]' === Object.prototype.toString.call(t))
						return Array.from(t);
				})(t) ||
				(function _nonIterableSpread() {
					throw new TypeError('Invalid attempt to spread non-iterable instance');
				})()
			);
		}
		function scene_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function scene_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function scene_get(t, e, n) {
			return (scene_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function scene_superPropBase(t, e) {
								for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = scene_getPrototypeOf(t)); );
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function scene_getPrototypeOf(t) {
			return (scene_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function scene_setPrototypeOf(t, e) {
			return (scene_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ue = (function (t) {
			function Scene(t, e, n) {
				var r;
				return (
					(function scene_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Scene),
					((r = (function scene_possibleConstructorReturn(t, e) {
						return !e || ('object' !== scene_typeof(e) && 'function' != typeof e) ? scene_assertThisInitialized(t) : e;
					})(this, scene_getPrototypeOf(Scene).call(this, t, e, n)))._camera = null),
					(r._entities = new m(scene_assertThisInitialized(r), new Map([['entity', Wt]]))),
					(r._controllerDependencyGraph = new v()),
					(r._ambientLightColor = new z(0.02, 0.02, 0.02)),
					r._ambientLightColor.freeze(),
					(r._lightSources = []),
					(r._threeJsScene = null),
					(r._threeJsScene = new i.Scene()),
					r._controllerDependencyGraph.setUpdateItemCallback(function (t) {
						t.getEntity().isEnabled() &&
							t.getCoverage().contains(t.getEntity().getScene().getEngine().getTime()) &&
							t.isEnabled() &&
							t.__update();
					}),
					r._controllerDependencyGraph.setCompareItemCallback(function (t, e) {
						if (t === e) return !1;
						if (!(t.getEntity().isEnabled() && e.getEntity().isEnabled() && t.isEnabled() && e.isEnabled())) return !1;
						var n = t.getEntity().getScene().getEngine().getTime();
						if (!t.getCoverage().contains(n) || !e.getCoverage().contains(n)) return !1;
						var r = !0,
							i = !1,
							o = void 0;
						try {
							for (var a, s = e.__modifiedStates[Symbol.iterator](); !(r = (a = s.next()).done); r = !0) {
								var l = a.value;
								if (t.hasDependentState(e.getEntity().getName(), l)) return !0;
							}
						} catch (t) {
							(i = !0), (o = t);
						} finally {
							try {
								r || null == s.return || s.return();
							} finally {
								if (i) throw o;
							}
						}
						if (
							_toConsumableArray(t.__modifiedStates).filter(function (t) {
								return e.__modifiedStates.has(t);
							}).length > 0 &&
							t.getEntity() === e.getEntity()
						)
							for (var c = t.getEntity(), u = 0, _ = c.getNumControllers(); u < _; u++) {
								var p = c.getController(u);
								if (e === p) return !0;
								if (t === p) break;
							}
						if (t.getEntity().getParent() === e.getEntity()) {
							if (
								(t.hasModifiedState('position') && e.hasModifiedState('position')) ||
								(t.hasModifiedState('velocity') && e.hasModifiedState('velocity'))
							)
								return !0;
							var h = !0,
								d = !1,
								f = void 0;
							try {
								for (var m, g = e.__modifiedStates[Symbol.iterator](); !(h = (m = g.next()).done); h = !0) {
									var y = m.value;
									if (t.hasDependentState('parent', y)) return !0;
								}
							} catch (t) {
								(d = !0), (f = t);
							} finally {
								try {
									h || null == g.return || g.return();
								} finally {
									if (d) throw f;
								}
							}
						}
						return !1;
					}),
					r
				);
			}
			return (
				(function scene_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && scene_setPrototypeOf(t, e);
				})(Scene, f),
				(function scene_createClass(t, e, n) {
					return e && scene_defineProperties(t.prototype, e), n && scene_defineProperties(t, n), t;
				})(Scene, [
					{
						key: 'getEngine',
						value: function getEngine() {
							return this.__getCollectionParent();
						}
					},
					{
						key: 'getEntity',
						value: function getEntity(t) {
							return this._entities.get(t);
						}
					},
					{
						key: 'getNumEntities',
						value: function getNumEntities() {
							return this._entities.size;
						}
					},
					{
						key: 'addEntity',
						value: function addEntity(t) {
							return this._entities.add('entity', t);
						}
					},
					{
						key: 'removeEntity',
						value: function removeEntity(t) {
							this._entities.remove(t);
						}
					},
					{
						key: 'get',
						value: function get(t) {
							var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0,
								n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
								r = this._entities.get(t);
							return void 0 === e || null === r ? r : r.get(e, n);
						}
					},
					{
						key: 'getControllerDependencyGraph',
						value: function getControllerDependencyGraph() {
							return this._controllerDependencyGraph;
						}
					},
					{
						key: 'getAmbientLightColor',
						value: function getAmbientLightColor() {
							return this._ambientLightColor;
						}
					},
					{
						key: 'setAmbientLightColor',
						value: function setAmbientLightColor(t) {
							this._ambientLightColor.thaw(), this._ambientLightColor.copy(t), this._ambientLightColor.freeze();
						}
					},
					{
						key: '__addLightSource',
						value: function __addLightSource(t) {
							for (
								var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
									n = 0,
									r = this._lightSources.length;
								n < r;
								n++
							) {
								var i = this._lightSources[n];
								if (i.getEntityName() === t && i.getComponentTypeIndex() === e)
									throw new Error('Light source on '.concat(t, ' with type index ').concat(e, ' already added.'));
							}
							var o = new bt(this);
							o.setByType(t, 'lightSource', e), this._lightSources.push(o);
						}
					},
					{
						key: '__removeLightSource',
						value: function __removeLightSource(t) {
							for (
								var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
									n = 0,
									r = this._lightSources.length;
								n < r;
								n++
							) {
								var i = this._lightSources[n];
								if (i.getEntityName() === t && i.getComponentTypeIndex() === e)
									return void this._lightSources.splice(n, 1);
							}
							throw new Error('Light source on '.concat(t, ' with type index ').concat(e, ' not found.'));
						}
					},
					{
						key: 'getLightSource',
						value: function getLightSource(t) {
							return 0 <= t && t < this._lightSources.length ? this._lightSources[t].get() : null;
						}
					},
					{
						key: 'getNumLightSources',
						value: function getNumLightSources() {
							return this._lightSources.length;
						}
					},
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							for (var t = [], e = 0, n = this._entities.size; e < n; e++)
								t.push(this._entities.get(e).getLoadedPromise());
							return Promise.all(t).then();
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							scene_get(scene_getPrototypeOf(Scene.prototype), '__destroy', this).call(this),
								this._entities.__destroy();
						}
					},
					{
						key: 'getThreeJsScene',
						value: function getThreeJsScene() {
							return this._threeJsScene;
						}
					},
					{
						key: '__update',
						value: function __update() {
							for (var t = this.getEngine().getTime(), e = this._entities.size - 1; e >= 0; e--) {
								var n = this._entities.get(e);
								n.__updateParent(t), n.__updateIsInCoverages(t);
							}
							this._controllerDependencyGraph.update();
						}
					},
					{
						key: '__updateVisuals',
						value: function __updateVisuals() {
							for (var t = this._entities.size - 1; t >= 0; t--) {
								var e = this._entities.get(t);
								e.isInPositionCoverage() && e.isEnabled() && this._entities.get(t).__updateVisuals();
							}
						}
					},
					{
						key: '__removeCameraDependents',
						value: function __removeCameraDependents(t) {
							for (var e = this._entities.size - 1; e >= 0; e--) this._entities.get(e).__removeCameraDependents(t);
						}
					}
				]),
				Scene
			);
		})();
		function texture_loader_typeof(t) {
			return (texture_loader_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function texture_loader_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function texture_loader_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						texture_loader_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						texture_loader_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function texture_loader_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function texture_loader_getPrototypeOf(t) {
			return (texture_loader_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function texture_loader_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function texture_loader_setPrototypeOf(t, e) {
			return (texture_loader_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var _e = (function (t) {
				function TextureLoader(t, e) {
					var n;
					return (
						(function texture_loader_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, TextureLoader),
						((n = (function texture_loader_possibleConstructorReturn(t, e) {
							return !e || ('object' !== texture_loader_typeof(e) && 'function' != typeof e)
								? texture_loader_assertThisInitialized(t)
								: e;
						})(this, texture_loader_getPrototypeOf(TextureLoader).call(this)))._downloader = t),
						(n._renderer = e),
						(n._crossOrigin = 'anonymous'),
						(n._path = void 0),
						(n._white = null),
						(n._black = null),
						(n._clear = null),
						(n._pink = null),
						(n._threeJsTextureLoader = new i.TextureLoader()),
						n._threeJsTextureLoader.setCrossOrigin(n._crossOrigin),
						n._threeJsTextureLoader.setPath(n._path),
						(n._white = TextureLoader._newTexture(new z(1, 1, 1, 1))),
						(n._black = TextureLoader._newTexture(new z(0, 0, 0, 1))),
						(n._clear = TextureLoader._newTexture(new z(0, 0, 0, 0))),
						(n._pink = TextureLoader._newTexture(new z(1, 105 / 255, 180 / 255, 1))),
						i.DefaultLoadingManager.addHandler(/.$/i, texture_loader_assertThisInitialized(n)),
						n
					);
				}
				return (
					(function texture_loader_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && texture_loader_setPrototypeOf(t, e);
					})(TextureLoader, i.Loader),
					(function texture_loader_createClass(t, e, n) {
						return e && texture_loader_defineProperties(t.prototype, e), n && texture_loader_defineProperties(t, n), t;
					})(
						TextureLoader,
						[
							{
								key: 'loadIntoUniform',
								value: (function () {
									var t = texture_loader_asyncToGenerator(
										regeneratorRuntime.mark(function _callee(t, e, n) {
											return regeneratorRuntime.wrap(
												function _callee$(r) {
													for (;;)
														switch ((r.prev = r.next)) {
															case 0:
																return r.abrupt(
																	'return',
																	this.loadTexture(e, n).then(function (e) {
																		null !== t.value && t.value.dispose(), (t.value = e);
																	})
																);
															case 1:
															case 'end':
																return r.stop();
														}
												},
												_callee,
												this
											);
										})
									);
									return function loadIntoUniform(e, n, r) {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'loadCubeTexture',
								value: (function () {
									var t = texture_loader_asyncToGenerator(
										regeneratorRuntime.mark(function _callee2(t, e) {
											var n,
												r,
												o,
												a,
												s = this;
											return regeneratorRuntime.wrap(function _callee2$(l) {
												for (;;)
													switch ((l.prev = l.next)) {
														case 0:
															for (
																n = new i.CubeTexture(),
																	r = [],
																	o = function _loop(i) {
																		var o = t.replace('$FACE', pe[i]);
																		r.push(
																			new Promise(function (t) {
																				s.loadTexture(o, e).then(function (e) {
																					(n.images[i] = e.image), t();
																				});
																			})
																		);
																	},
																	a = 0;
																a < 6;
																a++
															)
																o(a);
															return l.abrupt(
																'return',
																Promise.all(r).then(function () {
																	return (n.needsUpdate = !0), n;
																})
															);
														case 5:
														case 'end':
															return l.stop();
													}
											}, _callee2);
										})
									);
									return function loadCubeTexture(e, n) {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'loadTexture',
								value: (function () {
									var t = texture_loader_asyncToGenerator(
										regeneratorRuntime.mark(function _callee3(t, e) {
											var n = this;
											return regeneratorRuntime.wrap(function _callee3$(r) {
												for (;;)
													switch ((r.prev = r.next)) {
														case 0:
															return r.abrupt(
																'return',
																new Promise(function (r, i) {
																	n.load(
																		t,
																		function (t) {
																			r(t);
																		},
																		void 0,
																		function (t, e) {
																			i(new Error('Failed to load ' + e));
																		},
																		e
																	);
																})
															);
														case 1:
														case 'end':
															return r.stop();
													}
											}, _callee3);
										})
									);
									return function loadTexture(e, n) {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'generateEnvMap',
								value: function generateEnvMap(t) {
									var e = t;
									if (!(t instanceof i.CubeTexture)) {
										var n = {
											depthBuffer: !1,
											stencilBuffer: !1,
											generateMipmaps: !0,
											minFilter: i.LinearMipMapLinearFilter,
											magFilter: i.LinearFilter
										};
										e = new i.WebGLCubeRenderTarget(512, n).fromEquirectangularTexture(this._renderer, t).texture;
									}
									var r = new i.PMREMGenerator(this._renderer);
									return r.compileEquirectangularShader(), r.fromEquirectangular(e).texture;
								}
							},
							{
								key: 'load',
								value: function load(t, e, n, r, o) {
									var a = null;
									if (
										('white' === (t = this._downloader.processUrl(t))
											? (a = this._white)
											: 'black' === t
											? (a = this._black)
											: 'clear' === t
											? (a = this._clear)
											: 'pink' === t && (a = this._pink),
										null !== a)
									)
										e(a);
									else if (t.includes('.mp4')) {
										var s = document.createElement('video');
										(s.src = t),
											(s.autoplay = !0),
											(s.loop = !1),
											((a = new i.VideoTexture(s)).format = i.RGBAFormat),
											(a.flipY = !1),
											(a.needsUpdate = !0),
											e(a);
									} else
										this._threeJsTextureLoader.load(
											t,
											function (t) {
												(t.flipY = !1),
													!1 === o && ((t.minFilter = i.LinearFilter), (t.generateMipmaps = !1)),
													(t.needsUpdate = !0),
													e(t);
											},
											void 0,
											function (e) {
												r(e, t);
											}
										);
									return a;
								}
							},
							{
								key: 'setCrossOrigin',
								value: function setCrossOrigin(t) {
									return (this.crossOrigin = t), this;
								}
							},
							{
								key: 'setPath',
								value: function setPath(t) {
									return (this.path = t), this;
								}
							},
							{
								key: 'crossOrigin',
								get: function get() {
									return this._crossOrigin;
								},
								set: function set(t) {
									(this._crossOrigin = t),
										this._threeJsTextureLoader && this._threeJsTextureLoader.setCrossOrigin(this._crossOrigin);
								}
							},
							{
								key: 'path',
								get: function get() {
									return this._path;
								},
								set: function set(t) {
									(this._path = t), this._threeJsTextureLoader && this._threeJsTextureLoader.setPath(this._path);
								}
							}
						],
						[
							{
								key: '_newTexture',
								value: function _newTexture(t) {
									var e = document.createElement('canvas');
									(e.width = 1), (e.height = 1);
									var n = e.getContext('2d');
									return (
										(n.fillStyle = 'rgba(' + 255 * t.r + ',' + 255 * t.g + ',' + 255 * t.b + ',' + 255 * t.a + ')'),
										n.fillRect(0, 0, 1, 1),
										new i.CanvasTexture(e)
									);
								}
							}
						]
					),
					TextureLoader
				);
			})(),
			pe = ['posx', 'negx', 'posy', 'negy', 'posz', 'negz'],
			he = _e;
		function texture_loader_compressed_typeof(t) {
			return (texture_loader_compressed_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function texture_loader_compressed_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function texture_loader_compressed_possibleConstructorReturn(t, e) {
			return !e || ('object' !== texture_loader_compressed_typeof(e) && 'function' != typeof e)
				? (function texture_loader_compressed_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function texture_loader_compressed_get(t, e, n) {
			return (texture_loader_compressed_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function texture_loader_compressed_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) &&
									null !== (t = texture_loader_compressed_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function texture_loader_compressed_getPrototypeOf(t) {
			return (texture_loader_compressed_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function texture_loader_compressed_setPrototypeOf(t, e) {
			return (texture_loader_compressed_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var de = (function (t) {
				function TextureLoaderCompressed(t, e, n) {
					var r;
					return (
						(function texture_loader_compressed_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, TextureLoaderCompressed),
						((r = texture_loader_compressed_possibleConstructorReturn(
							this,
							texture_loader_compressed_getPrototypeOf(TextureLoaderCompressed).call(this, t, n)
						))._config = e),
						(r._threeJsKTXLoader = new s.a()),
						r._threeJsKTXLoader.setCrossOrigin(r._crossOrigin),
						r._threeJsKTXLoader.setPath(r._path),
						r
					);
				}
				return (
					(function texture_loader_compressed_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && texture_loader_compressed_setPrototypeOf(t, e);
					})(TextureLoaderCompressed, he),
					(function texture_loader_compressed_createClass(t, e, n) {
						return (
							e && texture_loader_compressed_defineProperties(t.prototype, e),
							n && texture_loader_compressed_defineProperties(t, n),
							t
						);
					})(TextureLoaderCompressed, [
						{
							key: 'load',
							value: function load(t, e, n, r, o) {
								if (null !== t.match(/_n\.[^.]+$/))
									return texture_loader_compressed_get(
										texture_loader_compressed_getPrototypeOf(TextureLoaderCompressed.prototype),
										'load',
										this
									).call(this, t, e, n, r, o);
								var a = null;
								return (
									'white' === (t = this._downloader.processUrl(t))
										? (a = this._white)
										: 'black' === t
										? (a = this._black)
										: 'clear' === t
										? (a = this._clear)
										: 'pink' === t && (a = this._pink),
									null !== a
										? e(a)
										: ((t = t.replace(/\.(\w+)$/, '-' + Ht.__getCompressedTextureExtension() + '.ktx')),
										  this._threeJsKTXLoader.load(
												t,
												function (t) {
													(t.flipY = !1),
														(t.needsUpdate = !0),
														!1 === o && ((t.minFilter = i.LinearFilter), (t.generateMipmaps = !1)),
														(t.ktxFormat = t.format),
														e(t);
												},
												void 0,
												function (e) {
													r(e, t);
												}
										  )),
									a
								);
							}
						}
					]),
					TextureLoaderCompressed
				);
			})(),
			fe = '33.0.0';
		function viewport_typeof(t) {
			return (viewport_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function viewport_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function viewport_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function viewport_get(t, e, n) {
			return (viewport_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function viewport_superPropBase(t, e) {
								for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = viewport_getPrototypeOf(t)); );
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function viewport_getPrototypeOf(t) {
			return (viewport_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function viewport_setPrototypeOf(t, e) {
			return (viewport_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var me = (function (t) {
			function Viewport(t, e, n) {
				var r;
				!(function viewport_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Viewport),
					((r = (function viewport_possibleConstructorReturn(t, e) {
						return !e || ('object' !== viewport_typeof(e) && 'function' != typeof e)
							? viewport_assertThisInitialized(t)
							: e;
					})(this, viewport_getPrototypeOf(Viewport).call(this, t, e, n)))._enabled = !0),
					(r._camera = null),
					(r._div = document.createElement('div')),
					(r._bounds = new Z(0, 0, 0, 0)),
					r._bounds.freeze(),
					(r._backgroundColor = new z(0, 0, 0, 1)),
					r._backgroundColor.freeze(),
					(r._threeJsBackgroundColor = new i.Color()),
					(r._div.style.position = 'absolute'),
					(r._div.style.overflow = 'hidden'),
					(r._div.id = e || ''),
					r._div.classList.add('viewport'),
					r._enabled || (r._div.style.display = 'none'),
					r.getEngine().getViewportDiv().appendChild(r._div);
				var o = r.getEngine().getRootDiv();
				r._bounds.thaw(),
					r._bounds.set(
						r._div.offsetLeft - o.offsetLeft,
						r._div.offsetTop - o.offsetTop,
						r._div.offsetWidth,
						r._div.offsetHeight
					),
					r._bounds.freeze();
				var a = r.getEngine().getInput();
				return null === a.getActiveViewport() && a.__setActiveViewport(viewport_assertThisInitialized(r)), r;
			}
			return (
				(function viewport_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && viewport_setPrototypeOf(t, e);
				})(Viewport, f),
				(function viewport_createClass(t, e, n) {
					return e && viewport_defineProperties(t.prototype, e), n && viewport_defineProperties(t, n), t;
				})(Viewport, [
					{
						key: 'getEngine',
						value: function getEngine() {
							return this.__getCollectionParent();
						}
					},
					{
						key: 'getDiv',
						value: function getDiv() {
							return this._div;
						}
					},
					{
						key: 'getBounds',
						value: function getBounds() {
							return this._bounds;
						}
					},
					{
						key: 'getBackgroundColor',
						value: function getBackgroundColor() {
							return this._backgroundColor;
						}
					},
					{
						key: 'setBackgroundColor',
						value: function setBackgroundColor(t) {
							this._backgroundColor.thaw(),
								(this._backgroundColor = t),
								this._backgroundColor.freeze(),
								this._threeJsBackgroundColor.setRGB(
									this._backgroundColor.r,
									this._backgroundColor.g,
									this._backgroundColor.b
								);
						}
					},
					{
						key: 'getCamera',
						value: function getCamera() {
							return this._camera;
						}
					},
					{
						key: 'setCamera',
						value: function setCamera(t) {
							(this._camera = t), null !== this._camera && this._camera.__setViewport(this);
						}
					},
					{
						key: 'isEnabled',
						value: function isEnabled() {
							return this._enabled;
						}
					},
					{
						key: 'setEnabled',
						value: function setEnabled(t) {
							(this._enabled = t),
								this._enabled ? (this._div.style.display = 'block') : (this._div.style.display = 'none');
						}
					},
					{
						key: 'getNormalSpacePositionFromPixelSpacePosition',
						value: function getNormalSpacePositionFromPixelSpacePosition(t, e) {
							(t.x = (2 * (e.x - this._bounds.origin.x)) / this._bounds.size.x - 1),
								(t.y = 1 - (2 * (e.y - this._bounds.origin.y)) / this._bounds.size.y),
								(t.z = 1);
						}
					},
					{
						key: 'getPixelSpacePositionFromNormalSpacePosition',
						value: function getPixelSpacePositionFromNormalSpacePosition(t, e) {
							(t.x = (this._bounds.size.x * (e.x + 1)) / 2 + this._bounds.origin.x),
								(t.y = (this._bounds.size.y * (1 - e.y)) / 2 + this._bounds.origin.y);
						}
					},
					{
						key: 'getPixelSpaceRadiusFromNormalSpaceRadius',
						value: function getPixelSpaceRadiusFromNormalSpaceRadius(t) {
							return t * Math.max(this._bounds.size.x, this._bounds.size.y);
						}
					},
					{
						key: 'getNormalSpaceRadiusFromPixelSpaceRadius',
						value: function getNormalSpaceRadiusFromPixelSpaceRadius(t) {
							return t / Math.max(this._bounds.size.x, this._bounds.size.y);
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							viewport_get(viewport_getPrototypeOf(Viewport.prototype), '__destroy', this).call(this),
								this._div.parentNode.removeChild(this._div);
						}
					},
					{
						key: '__updateViewportVariables',
						value: function __updateViewportVariables() {
							this._enabled &&
								(this._bounds.thaw(),
								this._bounds.set(
									this._div.offsetLeft,
									this._div.offsetTop,
									this._div.offsetWidth,
									this._div.offsetHeight
								),
								this._bounds.freeze(),
								null !== this._camera && this._camera.__updateCameraVariablesForConnectedScene());
						}
					},
					{
						key: '__render',
						value: function __render() {
							if (this._enabled) {
								var t = this.getEngine().__getThreeJsRenderer(),
									e = this.getEngine().getRootDiv().offsetHeight - this._div.offsetTop - this._div.offsetHeight;
								if (
									(t.setViewport(this._bounds.origin.x, e, this._bounds.size.x, this._bounds.size.y),
									t.setScissor(this._bounds.origin.x, e, this._bounds.size.x, this._bounds.size.y),
									this._threeJsBackgroundColor.setRGB(
										this._backgroundColor.r,
										this._backgroundColor.g,
										this._backgroundColor.b
									),
									t.setClearColor(this._threeJsBackgroundColor, this._backgroundColor.a),
									null !== this._camera)
								) {
									for (var n = this._camera.getEntity().getScene(), r = 0; r < n.getNumEntities(); r++) {
										n.getEntity(r).isEnabled() && n.getEntity(r).__prepareForRender(this._camera);
									}
									var i = this._camera.getEntity().get('dynEnvMap');
									i instanceof Me && i.__render(), this._camera.__render();
									var o = this._camera.getEntity().get('spout');
									o instanceof Xe && o.__render();
								} else this.getEngine().__getThreeJsRenderer().clear();
							}
						}
					}
				]),
				Viewport
			);
		})();
		function base_component_typeof(t) {
			return (base_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function base_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function base_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== base_component_typeof(e) && 'function' != typeof e)
				? (function base_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function base_component_get(t, e, n) {
			return (base_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function base_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = base_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function base_component_getPrototypeOf(t) {
			return (base_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function base_component_setPrototypeOf(t, e) {
			return (base_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ge = (function (t) {
			function BaseComponent(t, e, n) {
				var r;
				return (
					(function base_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, BaseComponent),
					((r = base_component_possibleConstructorReturn(
						this,
						base_component_getPrototypeOf(BaseComponent).call(this, t, e, n)
					))._radius = 0.5),
					(r._pixelSpaceRadiusPerCamera = new F()),
					(r._greatestPixelSpaceRadius = 0),
					(r._loadState = 'unloaded'),
					(r._forceLoaded = !1),
					(r._resourcesLoadedCallback = null),
					(r._resourcesUnloadedCallback = null),
					(r._loadedPromise = Promise.resolve()),
					(r._excludedCameras = new Set()),
					(r._threeJsObjects = []),
					(r._threeJsMaterials = []),
					(r._usesEntityOrientation = !1),
					r
				);
			}
			return (
				(function base_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && base_component_setPrototypeOf(t, e);
				})(BaseComponent, Qt),
				(function base_component_createClass(t, e, n) {
					return e && base_component_defineProperties(t.prototype, e), n && base_component_defineProperties(t, n), t;
				})(BaseComponent, [
					{
						key: '__destroy',
						value: function __destroy() {
							'loaded' === this._loadState && this._unloadResources(),
								base_component_get(base_component_getPrototypeOf(BaseComponent.prototype), '__destroy', this).call(
									this
								);
						}
					},
					{
						key: 'setEnabled',
						value: function setEnabled(t) {
							base_component_get(base_component_getPrototypeOf(BaseComponent.prototype), 'setEnabled', this).call(
								this,
								t
							),
								this.__updateLoadState();
						}
					},
					{
						key: 'getRadius',
						value: function getRadius() {
							return this._radius;
						}
					},
					{
						key: '__setRadius',
						value: function __setRadius(t) {
							this._radius = t;
						}
					},
					{
						key: 'getPixelSpaceRadiusInCamera',
						value: function getPixelSpaceRadiusInCamera(t) {
							return this._pixelSpaceRadiusPerCamera.get(t);
						}
					},
					{
						key: 'getGreatestPixelSpaceRadius',
						value: function getGreatestPixelSpaceRadius() {
							return this._greatestPixelSpaceRadius;
						}
					},
					{
						key: 'getThreeJsObjects',
						value: function getThreeJsObjects() {
							return this._threeJsObjects;
						}
					},
					{
						key: 'getThreeJsMaterials',
						value: function getThreeJsMaterials() {
							return this._threeJsMaterials;
						}
					},
					{
						key: 'getThreeJsObjectByName',
						value: function getThreeJsObjectByName(t) {
							for (var e = 0; e < this._threeJsObjects.length; e++) {
								var n = this._threeJsObjects[e];
								if (n.name === t) return n;
							}
							return null;
						}
					},
					{
						key: 'getLoadState',
						value: function getLoadState() {
							return this._loadState;
						}
					},
					{
						key: 'setForceLoaded',
						value: function setForceLoaded(t) {
							(this._forceLoaded = t), this._forceLoaded && 'unloaded' === this._loadState && this._loadResources();
						}
					},
					{
						key: '__updateLoadState',
						value: function __updateLoadState() {
							var t = this.getEntity(),
								e = t.isEnabled() && this.isEnabled(),
								n = t.isInPositionCoverage() && (t.isInOrientationCoverage() || !this._usesEntityOrientation);
							e && (this._forceLoaded || (n && this._greatestPixelSpaceRadius > 0.5)) && 'unloaded' === this._loadState
								? this._loadResources()
								: (e && (this._forceLoaded || (n && !(this._greatestPixelSpaceRadius < 0.25)))) ||
								  'loaded' !== this._loadState ||
								  this._unloadResources();
						}
					},
					{
						key: 'resetResources',
						value: function resetResources() {
							'loading' === this._loadState
								? (this._loadState = 'unloaded')
								: 'loaded' === this._loadState && this._unloadResources();
						}
					},
					{
						key: 'setResourcesLoadedCallback',
						value: function setResourcesLoadedCallback(t) {
							this._resourcesLoadedCallback = t;
						}
					},
					{
						key: 'setResourcesUnloadedCallback',
						value: function setResourcesUnloadedCallback(t) {
							this._resourcesUnloadedCallback = t;
						}
					},
					{
						key: '_loadResources',
						value: function _loadResources() {
							var t = this;
							(this._loadState = 'loading'),
								(this._loadedPromise = this.__loadResources().then(function () {
									'loading' === t._loadState
										? ((t._loadState = 'loaded'), null !== t._resourcesLoadedCallback && t._resourcesLoadedCallback())
										: t._unloadResources();
								}));
						}
					},
					{
						key: '_unloadResources',
						value: function _unloadResources() {
							this.__unloadResources(),
								(this._loadState = 'unloaded'),
								(this._threeJsObjects = []),
								(this._threeJsMaterials = []),
								null !== this._resourcesUnloadedCallback && this._resourcesUnloadedCallback();
						}
					},
					{
						key: '__loadResources',
						value: function __loadResources() {
							return Promise.resolve();
						}
					},
					{ key: '__unloadResources', value: function __unloadResources() {} },
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							return this._loadedPromise;
						}
					},
					{
						key: '__updateCameraVariablesBase',
						value: function __updateCameraVariablesBase(t) {
							var e = t.getViewport(),
								n = t.getNormalSpaceRadiusFromRadius(
									this._radius,
									this.getEntity().getCameraSpacePosition(t).magnitude()
								),
								r = e.getPixelSpaceRadiusFromNormalSpaceRadius(n);
							this._pixelSpaceRadiusPerCamera.set(t, r), this.__updateCameraVariables(t);
						}
					},
					{
						key: '__updateBase',
						value: function __updateBase() {
							this._greatestPixelSpaceRadius = 0;
							for (var t = 0, e = this._pixelSpaceRadiusPerCamera.size; t < e; t++) {
								var n = this._pixelSpaceRadiusPerCamera.getAt(t).value;
								this._greatestPixelSpaceRadius < n && (this._greatestPixelSpaceRadius = n);
							}
							this.__updateLoadState(), this.__update();
						}
					},
					{
						key: '__prepareForRenderBase',
						value: function __prepareForRenderBase(t) {
							if ('loaded' === this._loadState)
								if (this._excludedCameras.has(t))
									for (var e = 0; e < this._threeJsObjects.length; e++) this._threeJsObjects[e].visible = !1;
								else {
									for (var n = 0; n < this._threeJsObjects.length; n++) this._threeJsObjects[n].visible = !0;
									if ((this.__prepareForRender(t), !Ht.hasFragDepth()))
										for (var r = 0; r < this._threeJsMaterials.length; r++) {
											var i = this._threeJsMaterials[r].uniforms;
											void 0 !== i.nearDistance &&
												((i.nearDistance.value = t.getAutoNearDistance()),
												(i.midDistance.value = t.getAutoMidDistance()));
										}
									for (var o = 0; o < this._threeJsObjects.length; o++) this._threeJsObjects[o].updateMatrix();
								}
						}
					},
					{ key: '__updateCameraVariables', value: function __updateCameraVariables(t) {} },
					{ key: '__prepareForRender', value: function __prepareForRender(t) {} },
					{
						key: 'getUsesEntityOrientation',
						value: function getUsesEntityOrientation() {
							return this._usesEntityOrientation;
						}
					},
					{
						key: '__setUsesEntityOrientation',
						value: function __setUsesEntityOrientation(t) {
							(this._usesEntityOrientation = t), this.__updateLoadState();
						}
					},
					{
						key: 'isExcludedFromCamera',
						value: function isExcludedFromCamera(t) {
							return this._excludedCameras.has(t);
						}
					},
					{
						key: 'setExcludedFromCamera',
						value: function setExcludedFromCamera(t, e) {
							!e && this._excludedCameras.has(t)
								? this._excludedCameras.delete(t)
								: e &&
								  !this._excludedCameras.has(t) &&
								  (this.__removeCameraDependents(t), this._excludedCameras.add(t));
						}
					},
					{
						key: '__removeCameraDependentsBase',
						value: function __removeCameraDependentsBase(t) {
							this._pixelSpaceRadiusPerCamera.delete(t), this.__removeCameraDependents(t);
						}
					},
					{
						key: '__clearCameraDependentsBase',
						value: function __clearCameraDependentsBase() {
							this._pixelSpaceRadiusPerCamera.clear(), this.__clearCameraDependents();
						}
					},
					{ key: '__removeCameraDependents', value: function __removeCameraDependents(t) {} },
					{ key: '__clearCameraDependents', value: function __clearCameraDependents() {} },
					{
						key: 'toString',
						value: function toString() {
							for (var t = 0, e = 0, n = this.getEntity().getNumComponents(); e < n; e++) {
								var r = this.getEntity().getComponent(e);
								if (this === r) break;
								this.getType() === r.getType() && (t += 1);
							}
							return this.getEntity().getName() + '.' + this.getType() + '.' + t;
						}
					}
				]),
				BaseComponent
			);
		})();
		ge._tempThreeJsQuaternion = new i.Quaternion();
		var ye = ge;
		function atmosphere_component_typeof(t) {
			return (atmosphere_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function atmosphere_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function atmosphere_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== atmosphere_component_typeof(e) && 'function' != typeof e)
				? (function atmosphere_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function atmosphere_component_get(t, e, n) {
			return (atmosphere_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function atmosphere_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = atmosphere_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function atmosphere_component_getPrototypeOf(t) {
			return (atmosphere_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function atmosphere_component_setPrototypeOf(t, e) {
			return (atmosphere_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ve = (function (t) {
				function AtmosphereComponent(t, e, n) {
					var r;
					return (
						(function atmosphere_component_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, AtmosphereComponent),
						((r = atmosphere_component_possibleConstructorReturn(
							this,
							atmosphere_component_getPrototypeOf(AtmosphereComponent).call(this, t, e, n)
						))._density = 0),
						(r._scaleHeight = 1),
						(r._emissivity = 0),
						(r._color = new z()),
						r._color.freeze(),
						(r._sunBrightness = 1),
						(r._sunsetColor = new z()),
						r._sunsetColor.freeze(),
						(r._sunsetIntensity = 0),
						(r._equatorialRadius = void 0),
						(r._polarRadius = void 0),
						r.__setUsesEntityOrientation(!0),
						r
					);
				}
				return (
					(function atmosphere_component_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && atmosphere_component_setPrototypeOf(t, e);
					})(AtmosphereComponent, ye),
					(function atmosphere_component_createClass(t, e, n) {
						return (
							e && atmosphere_component_defineProperties(t.prototype, e),
							n && atmosphere_component_defineProperties(t, n),
							t
						);
					})(AtmosphereComponent, [
						{
							key: 'getDensity',
							value: function getDensity() {
								return this._density;
							}
						},
						{
							key: 'setDensity',
							value: function setDensity(t) {
								(this._density = t), Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'density', t);
							}
						},
						{
							key: 'getScaleHeight',
							value: function getScaleHeight() {
								return this._scaleHeight;
							}
						},
						{
							key: 'setScaleHeight',
							value: function setScaleHeight(t) {
								(this._scaleHeight = t), Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'scaleHeight', t);
							}
						},
						{
							key: 'getEmissivity',
							value: function getEmissivity() {
								return this._emissivity;
							}
						},
						{
							key: 'setEmissivity',
							value: function setEmissivity(t) {
								(this._emissivity = t), Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'emissivity', t);
							}
						},
						{
							key: 'getColor',
							value: function getColor() {
								return this._color;
							}
						},
						{
							key: 'setColor',
							value: function setColor(t) {
								this._color.thaw(),
									this._color.copy(t),
									this._color.freeze(),
									Ut.setUniformColorRGB(this.getThreeJsMaterials()[0], 'color', t);
							}
						},
						{
							key: 'getSunBrightness',
							value: function getSunBrightness() {
								return this._sunBrightness;
							}
						},
						{
							key: 'setSunBrightness',
							value: function setSunBrightness(t) {
								(this._sunBrightness = t), Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'sunBrightness', t);
							}
						},
						{
							key: 'getSunsetColor',
							value: function getSunsetColor() {
								return this._sunsetColor;
							}
						},
						{
							key: 'setSunsetColor',
							value: function setSunsetColor(t) {
								this._sunsetColor.thaw(),
									this._sunsetColor.copy(t),
									this._sunsetColor.freeze(),
									Ut.setUniformColorRGB(this.getThreeJsMaterials()[0], 'sunsetColor', t);
							}
						},
						{
							key: 'getSunsetIntensity',
							value: function getSunsetIntensity() {
								return this._sunsetIntensity;
							}
						},
						{
							key: 'setSunsetIntensity',
							value: function setSunsetIntensity(t) {
								(this._sunsetIntensity = t), Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'sunsetIntensity', t);
							}
						},
						{
							key: 'getEquatorialRadius',
							value: function getEquatorialRadius() {
								if (void 0 !== this._equatorialRadius) return this._equatorialRadius;
								var t = this.getEntity().get('spheroid');
								return t instanceof qe ? t.getEquatorialRadius() : 0;
							}
						},
						{
							key: 'getPolarRadius',
							value: function getPolarRadius() {
								if (void 0 !== this._polarRadius) return this._polarRadius;
								var t = this.getEntity().get('spheroid');
								return t instanceof qe ? t.getPolarRadius() : 0;
							}
						},
						{
							key: 'setRadii',
							value: function setRadii(t, e) {
								(this._equatorialRadius = t), (this._polarRadius = e);
							}
						},
						{
							key: '__update',
							value: function __update() {
								var t = this._equatorialRadius;
								if (void 0 === t) {
									var e = this.getEntity().get('spheroid');
									t = e instanceof qe ? e.getEquatorialRadius() : 0;
								}
								var n = this._polarRadius;
								if (void 0 === n) {
									var r = this.getEntity().get('spheroid');
									n = r instanceof qe ? r.getPolarRadius() : 0;
								}
								this.__setRadius(Math.max(t, n)),
									Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'equatorialRadius', t),
									Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'polarRadius', n),
									atmosphere_component_get(
										atmosphere_component_getPrototypeOf(AtmosphereComponent.prototype),
										'__update',
										this
									).call(this);
							}
						},
						{
							key: '__prepareForRender',
							value: function __prepareForRender(t) {
								var e = yt.pool.get();
								e.neg(this.getEntity().getCameraSpacePosition(t)),
									e.rotateInverse(this.getEntity().getOrientation(), e),
									Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'cameraPosition', e),
									yt.pool.release(e),
									jt.setLightSourceUniforms(this.getThreeJsMaterials(), this.getEntity(), t),
									Ut.setUniformQuaternion(
										this.getThreeJsMaterials()[0],
										'entityOrientation',
										this.getEntity().getOrientation()
									),
									Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity()),
									Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
							}
						},
						{
							key: '__loadResources',
							value: function __loadResources() {
								var t = new i.RawShaderMaterial({
									uniforms: {
										lightPositions: new i.Uniform([
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0),
											new i.Vector3(1, 0, 0)
										]),
										lightColors: new i.Uniform([
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0),
											new i.Vector3(0, 0, 0)
										]),
										lightRadii: new i.Uniform([0, 0, 0, 0, 0]),
										numLights: new i.Uniform(0),
										density: new i.Uniform(this._density),
										scaleHeight: new i.Uniform(this._scaleHeight),
										emissivity: new i.Uniform(this._emissivity),
										equatorialRadius: new i.Uniform(1),
										polarRadius: new i.Uniform(1),
										cameraPosition: new i.Uniform(new i.Vector3(1, 0, 0)),
										entityOrientation: new i.Uniform(new i.Vector4(1, 0, 0, 0)),
										color: new i.Uniform(new i.Vector3(this._color.r, this._color.g, this._color.b)),
										sunBrightness: new i.Uniform(this._sunBrightness),
										sunsetColor: new i.Uniform(
											new i.Vector3(this._sunsetColor.r, this._sunsetColor.g, this._sunsetColor.b)
										),
										sunsetIntensity: new i.Uniform(this._sunsetIntensity),
										nearDistance: new i.Uniform(0),
										midDistance: new i.Uniform(0)
									},
									vertexShader: zt.fix(be, 'vertex'),
									fragmentShader: zt.fix(xe, 'fragment'),
									transparent: !0,
									depthWrite: !1,
									blending: i.NormalBlending
								});
								this.getThreeJsMaterials().push(t);
								var e = Ut.createMeshObject(this, t, [{ name: 'position', dimensions: 3 }]);
								this.getThreeJsObjects().push(e);
								for (
									var n = T.pi / 63,
										r = T.twoPi / 128,
										o = new Float32Array(24768),
										a = new Uint16Array(48384),
										s = yt.pool.get(),
										l = Et.pool.get(),
										c = 0;
									c < 64;
									c++
								) {
									(l.lat = c * n - T.halfPi), (l.alt = 0);
									for (var u = Math.cos(l.lat), _ = Math.sin(l.lat), p = 0; p < 129; p++) {
										l.lon = p * r - T.pi;
										var h = 129 * c + p;
										(o[3 * h + 0] = u * Math.cos(l.lon)), (o[3 * h + 1] = u * Math.sin(l.lon)), (o[3 * h + 2] = _);
										var d = 128 * c + p;
										c < 63 &&
											p < 128 &&
											((a[6 * d + 0] = 129 * (c + 0) + (p + 0)),
											(a[6 * d + 1] = 129 * (c + 1) + (p + 0)),
											(a[6 * d + 2] = 129 * (c + 1) + (p + 1)),
											(a[6 * d + 3] = 129 * (c + 0) + (p + 0)),
											(a[6 * d + 4] = 129 * (c + 1) + (p + 1)),
											(a[6 * d + 5] = 129 * (c + 0) + (p + 1)));
									}
								}
								return (
									Et.pool.release(l),
									yt.pool.release(s),
									Ut.setVertices(e.geometry, 'position', o),
									Ut.setIndices(e.geometry, a),
									Ut.setRenderOrder(e, -1),
									Ut.useInDynEnvMap(e, !0),
									Promise.resolve()
								);
							}
						},
						{
							key: '__unloadResources',
							value: function __unloadResources() {
								Ut.destroyAllObjectsAndMaterials(this);
							}
						}
					]),
					AtmosphereComponent
				);
			})(),
			be =
				'\n\tattribute vec3 position;\n\tuniform mat4 projectionMatrix;\n\tuniform mat4 modelViewMatrix;\n\n\tuniform float scaleHeight;\n\tuniform float equatorialRadius;\n\tuniform float polarRadius;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvarying vec3 localPosition;\n\n\tvoid main() {\n\t\tfloat scaleHeightMultiplier = 20.0;\n\t\tlocalPosition = vec3(position.x * (equatorialRadius + scaleHeight * scaleHeightMultiplier), position.y * (equatorialRadius + scaleHeight * scaleHeightMultiplier), position.z * (polarRadius + scaleHeight * scaleHeightMultiplier));\n\t\tvec4 viewPosition = modelViewMatrix * vec4(localPosition, 1.);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}',
			xe =
				"\n\tuniform vec3 lightPositions[5];\n\tuniform vec3 lightColors[5];\n\tuniform int numLights;\n\n\tuniform float density;\n\tuniform float scaleHeight;\n\tuniform float equatorialRadius;\n\tuniform float polarRadius;\n\tuniform vec3 cameraPosition;\n\tuniform vec4 entityOrientation;\n\tuniform vec3 color;\n\tuniform float emissivity;\n\tuniform float sunBrightness;\n\tuniform vec3 sunsetColor;\n\tuniform float sunsetIntensity;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvarying vec3 localPosition;\n\n\tconst int numIterations = 5;\n\n\t// Inverse rotate a vector by a quaternion.\n\tvec3 quatRotInv(vec4 q, vec3 v) {\n\t\tfloat tx = q.w * v.x - q.y * v.z + q.z * v.y;\n\t\tfloat ty = q.w * v.y - q.z * v.x + q.x * v.z;\n\t\tfloat tz = q.w * v.z - q.x * v.y + q.y * v.x;\n\t\tfloat tw = q.x * v.x + q.y * v.y + q.z * v.z;\n\t\tfloat x = tx * q.w + tw * q.x + ty * q.z - tz * q.y;\n\t\tfloat y = ty * q.w + tw * q.y + tz * q.x - tx * q.z;\n\t\tfloat z = tz * q.w + tw * q.z + tx * q.y - ty * q.x;\n\t\treturn vec3(x, y, z);\n\t}\n\n\t// Given an origin and direction, computes the sampling start and end as distance from the origin in the direction.\n\tvoid getStartEndSamples(out float start, out float end, vec3 origin, vec3 direction, float maxDistance, float groundRadius, float atmosphereScaleHeight) {\n\t\t// Get the along the ray perpendicular to the sphere.\n\t\tfloat perpD = -dot(origin, direction);\n\t\tvec3 perp = origin + direction * perpD;\n\n\t\t// Figure out the sample distance.\n\t\tfloat atmosphereRadius = groundRadius + atmosphereScaleHeight * 6.0;\n\t\tfloat chordHalfLength = sqrt(max(0.0, atmosphereRadius * atmosphereRadius - dot(perp, perp)));\n\n\t\t// Figure out starting and ending sample points, and step distance.\n\t\tstart = max(0.0, perpD - chordHalfLength);\n\t\tend = min(maxDistance, perpD + chordHalfLength);\n\t}\n\n\t// Gets the density of the atmosphere at a given position.\n\tfloat getDensity(vec3 position, float radius, float density, float atmosphereScaleHeight) {\n\t\treturn density * exp(min(radius - length(position), 0.0) / atmosphereScaleHeight);\n\t}\n\n\t// Returns 0 if the ray does not intersect and 1.0 if the ray very intersects (with a gradient inbetween).\n\tfloat getDayLevel(vec3 origin, vec3 direction, float radius, float scaleHeight) {\n\t\tfloat blendHeight = scaleHeight * radius / 200.0;\n\t\tfloat perpD = -dot(origin, direction);\n\t\tfloat depth = radius - sqrt(dot(origin, origin) - sign(perpD) * perpD * perpD);\n\t\tif (depth < 0.0) { // day\n\t\t\treturn 1.0 - max(0.0, 0.25 * depth / blendHeight + 0.25);\n\t\t}\n\t\telse { // night\n\t\t\treturn 1.0 - min(1.0, 0.75 * depth / blendHeight + 0.25);\n\t\t}\n\t}\n\n\tfloat easeInOut(float x, float sharpness) {\n\t\tfloat b = sharpness;\n\t\tif (x < 0.5) {\n\t\t\treturn max(0.0, (pow(b, 2.0 * x) - 1.0) / (2.0 * (b - 1.0)));\n\t\t}\n\t\telse {\n\t\t\treturn min(1.0, 1.0 - (pow(b, 2.0 * (1.0 - x)) - 1.0) / (2.0 * (b - 1.0)));\n\t\t}\n\t}\n\n\tvec3 adjustOverbrightness(vec3 color) {\n\t\tfloat maxColor = max(color.r, max(color.g, color.b));\n\t\tif (maxColor > 1.0) {\n\t\t\tfloat f = (maxColor - 1.0) / maxColor;\n\t\t\tcolor.r = min(1.0, pow(color.r / maxColor, 1.0 / maxColor));\n\t\t\tcolor.g = min(1.0, pow(color.g / maxColor, 1.0 / maxColor));\n\t\t\tcolor.b = min(1.0, pow(color.b / maxColor, 1.0 / maxColor));\n\t\t}\n\t\treturn color;\n\t}\n\n\t// Calculates a glow around the light direction (the star).\n\tfloat glow(float spread, float amount, float lightDotCamera) {\n\t\treturn amount * spread / (1.0 + spread - lightDotCamera);\n\t}\n\n\t// Gets the color for an atmosphere.\n\tvec4 getColor(float totalDensity, vec3 lightColor, vec3 lightPosition, float spheroidRatio, vec3 positionS, vec3 cameraPositionS, vec3 cameraToPositionUnit) {\n\t\t// The color that will be added onto gl_FragColor.\n\t\tvec4 outColor;\n\n\t\t// Apply the total density to the transparency of the atmosphere.\n\t\toutColor.a = clamp(totalDensity, 0.0, 1.0);\n\n\t\t// Multiply it all together with the source light color.\n\t\toutColor.rgb = lightColor * color * clamp(pow(15.0 * totalDensity / (density * equatorialRadius), 0.2), 0.75, 1.0);\n\n\t\t// Make it more opaque when lower down.\n\t\toutColor.a = mix(outColor.a, 1.0, getDensity(cameraPositionS, equatorialRadius + scaleHeight, 1.0, 2.0 * scaleHeight));\n\n\t\t// Make the alpha dependent on the brightness of the light.\n\t\toutColor.a *= length(lightColor) / sqrt(3.0);\n\n\t\t// Clamp it to make it clean for the day/night transition.\n\t\toutColor.a = clamp(outColor.a, 0.0, 1.0);\n\n\t\thighp vec3 lightPositionS = quatRotInv(entityOrientation, lightPosition);\n\t\tlightPositionS.z *= spheroidRatio;\n\n\t\thighp vec3 lightToPosition = positionS - lightPositionS;\n\t\thighp vec3 lightToPositionUnit = normalize(lightToPosition / 1.0e8);\n\n\t\t// Get the day level, from 0 to 1, and apply it to the alpha. Lots of tricks to get it looking good on earth.\n\t\tvec3 dayRefUp = normalize(cameraPositionS - min(0.0, dot(cameraPositionS, cameraToPositionUnit)) * cameraToPositionUnit);\n\t\tfloat dayLevel = -dot(lightToPositionUnit, dayRefUp);\n\t\toutColor.rgb *= mix(emissivity, 1.0, easeInOut(0.5 + 2.0 * dayLevel, 2.0));\n\t\toutColor.a *= mix(emissivity, 1.0, easeInOut(1.0 + 2.0 * dayLevel, 2.0));\n\n\t\t// Brighten up the atmosphere when looking from space toward the sun.\n\t\tfloat lightDotCamera = max(0.0, -dot(lightToPositionUnit, cameraToPositionUnit));\n\t\toutColor.a = clamp(outColor.a * (1.0 + glow(0.004, 1.0, lightDotCamera)), 0.0, 1.0);\n\n\t\t// Add narrower sun glare.\n\t\toutColor.rgb *= lightColor * (1.0 + sunBrightness * outColor.a * glow(0.00004, 1.0, lightDotCamera));\n\n\t\t// Add broader sun glare.\n\t\toutColor.rgb *= lightColor * (1.0 + sunBrightness * outColor.a * glow(0.04, 0.125, lightDotCamera));\n\n\t\t// Apply the sunset.\n\t\tfloat lightDotHorizon = pow(clamp(1.0 - dot(lightToPositionUnit, dayRefUp), 0.0, 1.0), 2.0);\n\t\tfloat cameraDotHorizon = pow(clamp(1.0 - dot(cameraToPositionUnit, dayRefUp), 0.0, 1.0), 8.0);\n\t\tfloat sunsetAmount = sunsetIntensity * lightDotHorizon * cameraDotHorizon * glow(0.04, 0.5, lightDotCamera);\n\t\toutColor.rgb = mix(outColor.rgb, sunsetColor, clamp(sunsetAmount, 0.0, 1.0));\n\n\t\treturn outColor;\n\t}\n\n\tvoid main(void) {\n\t\t// Convert everything into a sphere frame.\n\t\tfloat spheroidRatio = equatorialRadius / polarRadius;\n\t\thighp vec3 positionS = localPosition;\n\t\thighp vec3 cameraPositionS = cameraPosition;\n\t\tpositionS.z *= spheroidRatio;\n\t\tcameraPositionS.z *= spheroidRatio;\n\n\t\thighp vec3 cameraToPosition = positionS - cameraPositionS;\n\t\thighp float cameraToPositionDist = length(cameraToPosition / 1.0e8) * 1.0e8;\n\t\thighp vec3 cameraToPositionUnit = cameraToPosition / cameraToPositionDist;\n\n\t\t// Get the start and end of the sampling from the camera to the position.\n\t\tfloat start;\n\t\tfloat end;\n\t\tgetStartEndSamples(start, end, cameraPositionS, cameraToPositionUnit, 1.0e24, equatorialRadius, scaleHeight);\n\t\tfloat step = 1.0 / float(numIterations - 1);\n\t\tfloat stepDist = step * (end - start);\n\n\t\t// Do the sampling.\n\t\tfloat totalDensity = 0.0;\n\t\tfloat segmentStart = start;\n\t\tfor (int j = 0; j < numIterations; j++) {\n\t\t\t// Get the distance that this segment covers.\n\t\t\tfloat segDist = stepDist;\n\t\t\tif (j == 0 || j == numIterations - 1) {\n\t\t\t\tsegDist *= 0.5;\n\t\t\t}\n\n\t\t\t// Get the segment start that we're looking at.\n\t\t\tvec3 p = cameraPositionS + segmentStart * cameraToPositionUnit;\n\n\t\t\t// Get the density at that segment start. It'll be the density for the whole segment.\n\t\t\tfloat densityAtP = getDensity(p, equatorialRadius, density, scaleHeight);\n\n\t\t\t// Add it to the total density.\n\t\t\ttotalDensity += densityAtP * segDist;\n\n\t\t\t// Next step.\n\t\t\tsegmentStart += stepDist;\n\t\t}\n\n\t\t// For each light,\n\t\tfor (int i = 0; i < 5; i++) {\n\t\t\tif (i >= numLights) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// If it's not a camera light,\n\t\t\tif (length(lightPositions[i]) > 0.0) { \n\t\t\t\t// Add on the color for the light.\n\t\t\t\tgl_FragColor += getColor(totalDensity, lightColors[i], lightPositions[i], spheroidRatio, positionS, cameraPositionS, cameraToPositionUnit);\n\t\t\t}\n\t\t}\n\n\t\t// Adjust for values that are greater than one.\n\t\tgl_FragColor.rgb = adjustOverbrightness(gl_FragColor.rgb);\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t#endif\n\t}",
			Se = ve;
		function camera_component_typeof(t) {
			return (camera_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function camera_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function camera_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== camera_component_typeof(e) && 'function' != typeof e)
				? (function camera_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function camera_component_get(t, e, n) {
			return (camera_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function camera_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = camera_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function camera_component_getPrototypeOf(t) {
			return (camera_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function camera_component_setPrototypeOf(t, e) {
			return (camera_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Te = (function (t) {
			function CameraComponent(t, e, n) {
				var r;
				return (
					(function camera_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, CameraComponent),
					((r = camera_component_possibleConstructorReturn(
						this,
						camera_component_getPrototypeOf(CameraComponent).call(this, t, e, n)
					))._threeJsRenderer = r.getEntity().getScene().getEngine().__getThreeJsRenderer()),
					(r._viewport = null),
					(r._threeJsScene = n.getScene().getThreeJsScene()),
					(r._fieldOfView = 1.0471975512),
					(r._nearDistance = void 0),
					(r._autoNearDistance = 0),
					(r._midDistance = void 0),
					(r._autoMidDistance = 0),
					(r._aspectRatio = 1),
					(r._renderSize = new st()),
					(r._occludingEntities = []),
					(r._threeJsCamera = new i.PerspectiveCamera(75, r._aspectRatio, 0.1, 1e3)),
					(r._threeJsComposer = null),
					(r._outlinePass = new l.a(void 0, r._threeJsScene, r._threeJsCamera, [])),
					(r._outlinePass.enabled = !1),
					(r._threeJsUnrealBloomPass = new u.a(void 0, 0, 0, 0)),
					(r._threeJsUnrealBloomPass.enabled = !1),
					r.__setupEffectComposer(),
					r
				);
			}
			return (
				(function camera_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && camera_component_setPrototypeOf(t, e);
				})(CameraComponent, ye),
				(function camera_component_createClass(t, e, n) {
					return (
						e && camera_component_defineProperties(t.prototype, e), n && camera_component_defineProperties(t, n), t
					);
				})(CameraComponent, [
					{
						key: 'getViewport',
						value: function getViewport() {
							return this._viewport;
						}
					},
					{
						key: 'getFieldOfView',
						value: function getFieldOfView() {
							return this._fieldOfView;
						}
					},
					{
						key: 'getHorizontalFieldOfView',
						value: function getHorizontalFieldOfView() {
							return this._aspectRatio >= 1
								? this._fieldOfView
								: 2 * Math.atan(Math.tan(this._fieldOfView / 2) * this._aspectRatio);
						}
					},
					{
						key: 'getVerticalFieldOfView',
						value: function getVerticalFieldOfView() {
							return this._aspectRatio > 1
								? 2 * Math.atan(Math.tan(this._fieldOfView / 2) / this._aspectRatio)
								: this._fieldOfView;
						}
					},
					{
						key: 'setFieldOfView',
						value: function setFieldOfView(t) {
							this._fieldOfView = t;
						}
					},
					{
						key: 'getNearDistance',
						value: function getNearDistance() {
							return this._nearDistance;
						}
					},
					{
						key: 'setNearDistance',
						value: function setNearDistance(t) {
							this._nearDistance = t;
						}
					},
					{
						key: 'getAutoNearDistance',
						value: function getAutoNearDistance() {
							return this._autoNearDistance;
						}
					},
					{
						key: 'getMidDistance',
						value: function getMidDistance() {
							return this._midDistance;
						}
					},
					{
						key: 'setMidDistance',
						value: function setMidDistance(t) {
							this._midDistance = t;
						}
					},
					{
						key: 'getAutoMidDistance',
						value: function getAutoMidDistance() {
							return this._autoMidDistance;
						}
					},
					{
						key: 'getNormalSpacePositionFromCameraSpacePosition',
						value: function getNormalSpacePositionFromCameraSpacePosition(t, e) {
							var n = tt.pool.get();
							n.copy(this.getEntity().getOrientation()), n.inverse(n);
							var r = yt.pool.get();
							r.rotate(n, e),
								tt.pool.release(n),
								(t.x = (this._threeJsCamera.projectionMatrix.elements[0] * r.x) / r.y),
								(t.y = (this._threeJsCamera.projectionMatrix.elements[9] * r.z) / r.y),
								(t.z =
									this._threeJsCamera.projectionMatrix.elements[6] +
									this._threeJsCamera.projectionMatrix.elements[14] / r.y),
								yt.pool.release(r);
						}
					},
					{
						key: 'getNormalSpaceRadiusFromRadius',
						value: function getNormalSpaceRadiusFromRadius(t, e) {
							return t / e / Math.tan(this._fieldOfView / 2);
						}
					},
					{
						key: 'getCameraSpacePositionFromNormalSpacePosition',
						value: function getCameraSpacePositionFromNormalSpacePosition(t, e) {
							var n = yt.pool.get();
							(n.y =
								this._threeJsCamera.projectionMatrix.elements[14] /
								(e.z - this._threeJsCamera.projectionMatrix.elements[6])),
								(n.x = (e.x * n.y) / this._threeJsCamera.projectionMatrix.elements[0]),
								(n.z = (e.y * n.y) / this._threeJsCamera.projectionMatrix.elements[9]),
								t.rotate(this.getEntity().getOrientation(), n),
								yt.pool.release(n);
						}
					},
					{
						key: 'getRadiusFromNormalSpaceRadius',
						value: function getRadiusFromNormalSpaceRadius(t, e) {
							return t * e * Math.tan(this._fieldOfView / 2);
						}
					},
					{
						key: 'isPositionOccluded',
						value: function isPositionOccluded(t) {
							for (var e = 0; e < this._occludingEntities.length; e++)
								if (this._occludingEntities[e].isOccludingPosition(this, t)) return !0;
							return !1;
						}
					},
					{
						key: 'getNearestIntersectingEntity',
						value: function getNearestIntersectingEntity(t) {
							for (
								var e = Number.POSITIVE_INFINITY, n = null, r = J.pool.get(), i = 0;
								i < this._occludingEntities.length;
								i++
							) {
								var o = this._occludingEntities[i].getCameraSpacePosition(this);
								if (
									(U.getLineSphereIntersectionWithLineStartAtOrigin(
										r,
										t,
										o,
										this._occludingEntities[i].getOcclusionRadius()
									),
									!Number.isNaN(r.min) && r.min >= 0)
								) {
									var a = r.min * o.magnitude();
									a < e && ((e = a), (n = this._occludingEntities[i]));
								}
							}
							return J.pool.release(r), n;
						}
					},
					{
						key: 'setBloom',
						value: function setBloom(t) {
							(this._threeJsUnrealBloomPass.enabled = t > 0), (this._threeJsUnrealBloomPass.strength = t);
						}
					},
					{
						key: 'setOutline',
						value: function setOutline(t, e, n) {
							if (((this._outlinePass.enabled = null !== e), null !== e)) {
								if (void 0 !== n) this._outlinePass.selectedObjects = [e.getThreeJsObjectByName(n)];
								else {
									var r = e.getThreeJsObjects();
									this._outlinePass.selectedObjects = [];
									for (var i = 0, o = r.length; i < o; i++)
										r[i].parent === this._threeJsScene && this._outlinePass.selectedObjects.push(r[i]);
								}
								this._outlinePass.visibleEdgeColor.setRGB(t.r, t.g, t.b),
									this._outlinePass.hiddenEdgeColor.setRGB(t.r / 4, t.g / 4, t.b / 4);
							}
							this.__setupEffectComposer();
						}
					},
					{
						key: '__addToOccludingEntities',
						value: function __addToOccludingEntities(t) {
							for (var e = 0; e < this._occludingEntities.length; e++) if (this._occludingEntities[e] === t) return;
							this._occludingEntities.push(t);
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							camera_component_get(camera_component_getPrototypeOf(CameraComponent.prototype), '__destroy', this).call(
								this
							),
								this.getEntity().getScene().__removeCameraDependents(this),
								null !== this._viewport && this._viewport.setCamera(null);
						}
					},
					{
						key: '__updateCameraVariablesForConnectedScene',
						value: function __updateCameraVariablesForConnectedScene() {
							var t = this._viewport.getBounds().size;
							if (!t.equals(this._renderSize)) {
								var e = t.x / t.y;
								this._aspectRatio !== e && (this._aspectRatio = e),
									this._threeJsComposer.setSize(t.x, t.y),
									this._renderSize.copy(t);
							}
							Ht.hasFragDepth() ||
								(void 0 === this._midDistance
									? null !== this.getEntity().getParent() &&
									  (this._autoMidDistance =
											this.getEntity().getPosition().magnitude() + 10 * this.getEntity().getParent().getExtentsRadius())
									: (this._autoMidDistance = this._midDistance)),
								void 0 === this._nearDistance
									? null !== this.getEntity().getParent()
										? (this._autoNearDistance = Math.max(
												1e-5,
												0.01 *
													(this.getEntity().getPosition().magnitude() - this.getEntity().getParent().getExtentsRadius())
										  ))
										: (this._autoNearDistance = Math.max(1e-5, 0.01 * this.getEntity().getPosition().magnitude()))
									: (this._autoNearDistance = this._nearDistance),
								this._updateProjectionMatrix(),
								this.getEntity().__updateCameraVariables(this, null, !1);
							for (var n = 0; n < this._occludingEntities.length; n++)
								(this._occludingEntities[n].getPixelSpaceOcclusionRadius(this) < 1 ||
									!this._occludingEntities[n].isEnabled() ||
									!this._occludingEntities[n].canOcclude() ||
									null === this.getEntity().getScene().get(this._occludingEntities[n].getName())) &&
									(this._occludingEntities.splice(n, 1), n--);
						}
					},
					{
						key: '__render',
						value: function __render() {
							var t = this.getEntity().getOrientation();
							CameraComponent._tempThreeJsQuaternion.set(t.x, t.y, t.z, t.w),
								this._threeJsCamera.setRotationFromQuaternion(CameraComponent._tempThreeJsQuaternion),
								this._threeJsComposer.render();
						}
					},
					{
						key: '__setViewport',
						value: function __setViewport(t) {
							null !== this._viewport && this._viewport !== t && this._viewport.setCamera(null), (this._viewport = t);
						}
					},
					{
						key: '__setupEffectComposer',
						value: function __setupEffectComposer() {
							var t = { format: i.RGBFormat, stencilBuffer: !1 },
								e = null,
								n = new i.Vector2();
							if (
								(this._threeJsRenderer.getSize(n),
								Ht.isWebGL2() && !this._outlinePass.enabled
									? ((e = new i.WebGLMultisampleRenderTarget(n.x, n.y, t)).samples = 4)
									: (e = new i.WebGLRenderTarget(n.x, n.y, t)),
								null !== this._threeJsComposer)
							)
								this._threeJsComposer.reset(e);
							else {
								this._threeJsComposer = new o.a(this._threeJsRenderer, e);
								var r = new c.a(this._threeJsScene, this._threeJsCamera);
								this._threeJsComposer.addPass(r),
									this._threeJsComposer.addPass(this._outlinePass),
									this._threeJsComposer.addPass(this._threeJsUnrealBloomPass);
							}
						}
					},
					{
						key: '_updateProjectionMatrix',
						value: function _updateProjectionMatrix() {
							if (this._fieldOfView > 0 && this._fieldOfView < 180 && this._aspectRatio > 0) {
								var t = Math.tan(this._fieldOfView / 2),
									e = 0,
									n = 0;
								this._aspectRatio >= 1
									? ((e = 1 / t), (n = this._aspectRatio / t))
									: ((e = 1 / (t * this._aspectRatio)), (n = 1 / t));
								var r = Number.EPSILON - 1,
									o = this._autoNearDistance * (2 - Number.EPSILON),
									a = new i.Matrix4();
								a.set(e, 0, 0, 0, 0, 0, n, 0, 0, r, 0, o, 0, 1, 0, 0), (this._threeJsCamera.projectionMatrix = a);
								var s = new i.Matrix4();
								s.set(1 / e, 0, 0, 0, 0, 0, 0, 1, 0, 1 / n, 0, 0, 0, 0, 1 / o, -r / o),
									(this._threeJsCamera.projectionMatrixInverse = s);
							}
						}
					},
					{
						key: '__loadResources',
						value: function __loadResources() {
							return Promise.resolve();
						}
					},
					{ key: '__unloadResources', value: function __unloadResources() {} }
				]),
				CameraComponent
			);
		})();
		function cmts_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function cmts_component_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						cmts_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						cmts_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function cmts_component_typeof(t) {
			return (cmts_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function cmts_component_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function cmts_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function cmts_component_createClass(t, e, n) {
			return e && cmts_component_defineProperties(t.prototype, e), n && cmts_component_defineProperties(t, n), t;
		}
		function cmts_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== cmts_component_typeof(e) && 'function' != typeof e)
				? (function cmts_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function cmts_component_get(t, e, n) {
			return (cmts_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function cmts_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = cmts_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function cmts_component_getPrototypeOf(t) {
			return (cmts_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function cmts_component_inherits(t, e) {
			if ('function' != typeof e && null !== e)
				throw new TypeError('Super expression must either be null or a function');
			(t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),
				e && cmts_component_setPrototypeOf(t, e);
		}
		function cmts_component_setPrototypeOf(t, e) {
			return (cmts_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var we = (function (t) {
				function CMTSComponent(t, e, n) {
					var r;
					return (
						cmts_component_classCallCheck(this, CMTSComponent),
						((r = cmts_component_possibleConstructorReturn(
							this,
							cmts_component_getPrototypeOf(CMTSComponent).call(this, t, e, n)
						))._threeJsScene = r.getEntity().getScene().getThreeJsScene()),
						(r._endPoints = new F()),
						(r._planetographic = !1),
						(r._heightScale = 1),
						(r._numEndPointsLoading = 0),
						(r._minLevel = Number.NEGATIVE_INFINITY),
						(r._maxLevel = Number.POSITIVE_INFINITY),
						(r._tileOffsets = []),
						(r._splitJoinThresholdFactor = 1),
						(r._spheroid = new Y(1, 1)),
						(r._shadowEntities = []),
						(r._engine = r.getEntity().getScene().getEngine()),
						(r._cameraPositions = []),
						(r._rootTiles = [null, null, null, null, null, null]),
						(r._tilesLoadedPromise = null),
						(r._transitionsCompleteCallback = null),
						(r._textureCache = new vt(
							function (t) {
								return r.getEntity().getScene().getEngine().getTextureLoader().loadTexture(t, !1);
							},
							function (t) {
								t.then(function (t) {
									t.dispose();
								});
							}
						)),
						(r._numLoadsThisFrame = 0),
						r.__setRadius(Math.max(r._spheroid.equatorialRadius, r._spheroid.polarRadius)),
						r
					);
				}
				return (
					cmts_component_inherits(CMTSComponent, ye),
					cmts_component_createClass(CMTSComponent, [
						{
							key: 'setBaseUrl',
							value: function setBaseUrl(t, e) {
								this.resetResources(), this._endPoints.set(t, { url: e, configuration: null });
							}
						},
						{
							key: 'isPlanetographic',
							value: function isPlanetographic() {
								return this._planetographic;
							}
						},
						{
							key: 'setPlanetographic',
							value: function setPlanetographic(t) {
								(this._planetographic = t), this.resetResources();
							}
						},
						{
							key: 'getHeightScale',
							value: function getHeightScale() {
								return this._heightScale;
							}
						},
						{
							key: 'setHeightScale',
							value: function setHeightScale(t) {
								(this._heightScale = t), this.resetResources();
							}
						},
						{
							key: 'getMinLevel',
							value: function getMinLevel() {
								return this._minLevel;
							}
						},
						{
							key: 'setMinLevel',
							value: function setMinLevel(t) {
								this._minLevel = t;
							}
						},
						{
							key: 'getMaxLevel',
							value: function getMaxLevel() {
								return this._maxLevel;
							}
						},
						{
							key: 'setMaxLevel',
							value: function setMaxLevel(t) {
								this._maxLevel = t;
							}
						},
						{
							key: 'addTileOffset',
							value: function addTileOffset(t, e, n, r, i, o, a) {
								this._tileOffsets.push({ offset: t, face: e, level: n, min: new st(r, i), max: new st(o, a) }),
									this.resetResources();
							}
						},
						{
							key: 'removeTileOffset',
							value: function removeTileOffset(t, e, n, r, i, o) {
								for (var a = 0; a < this._tileOffsets.length; a++) {
									var s = this._tileOffsets[a];
									if (s.face === e && s.level === t && s.min.x === n && s.min.y === r && s.max.x === i && s.max.y === o)
										return this._tileOffsets.splice(a, 1), void this.resetResources();
								}
							}
						},
						{
							key: 'getEquatorialRadius',
							value: function getEquatorialRadius() {
								return this._spheroid.equatorialRadius;
							}
						},
						{
							key: 'getPolarRadius',
							value: function getPolarRadius() {
								return this._spheroid.polarRadius;
							}
						},
						{
							key: 'setRadii',
							value: function setRadii(t, e) {
								this._spheroid.thaw(),
									(this._spheroid.equatorialRadius = t),
									(this._spheroid.polarRadius = e),
									this._spheroid.freeze(),
									this.__setRadius(Math.max(this._spheroid.equatorialRadius, this._spheroid.polarRadius)),
									this.resetResources();
							}
						},
						{
							key: 'getNumShadowEntities',
							value: function getNumShadowEntities() {
								return this._shadowEntities.length;
							}
						},
						{
							key: 'getShadowEntity',
							value: function getShadowEntity(t) {
								return this._shadowEntities[t];
							}
						},
						{
							key: 'setShadowEntities',
							value: function setShadowEntities(t) {
								this._shadowEntities = t.slice(0);
								for (var e = t.length > 0, n = 0, r = this.getThreeJsMaterials().length; n < r; n++)
									Ut.setDefine(this.getThreeJsMaterials()[n], 'shadowEntities', e);
							}
						},
						{
							key: 'getSpheroid',
							value: function getSpheroid() {
								return this._spheroid;
							}
						},
						{
							key: 'getGroundPosition',
							value: function getGroundPosition(t, e, n) {
								var r = Et.pool.get();
								this._spheroid.llaFromXYZ(r, e, !0), (r.alt = 0), this._spheroid.xyzFromLLA(t, r);
								var i = yt.pool.get();
								this._spheroid.upFromLLA(i, r);
								var o = this._endPoints.get('height');
								if (void 0 !== o) {
									var a = yt.pool.get();
									Tt.xyzToUVFace(a, t);
									var s = this._rootTiles[a.z];
									if (null == s) return void t.copy(yt.NaN);
									for (; s.children.length > 0; ) {
										var l = 1 << (s.getLevel() + 1),
											c = Math.floor(a.x * l - 2 * s.getTileCoord().x),
											u = Math.floor(a.y * l - 2 * s.getTileCoord().y);
										s = s.children[2 * u + c];
									}
									var _ = s.getHeightData();
									if (null !== _) {
										var p = 1 << s.getLevel(),
											h = (a.x * p - s.getTileCoord().x) * (_.width - 2) + 1,
											d = (1 - (a.y * p - s.getTileCoord().y)) * (_.width - 2) + 1,
											f = Ce.getLinearInterpolatedHeightPixel(h, d, _.data, _.width),
											m = o.configuration,
											g = m.heightRange[0] * this._heightScale,
											y = (m.heightRange[1] - m.heightRange[0]) * this._heightScale;
										t.addMult(t, i, g + f * y);
									}
									yt.pool.release(a);
								}
								t.addMult(t, i, n), Et.pool.release(r), yt.pool.release(i);
							}
						},
						{
							key: 'getTilesLoadedPromise',
							value: function getTilesLoadedPromise() {
								return this._tilesLoadedPromise || Promise.resolve();
							}
						},
						{
							key: '__destroy',
							value: function __destroy() {
								for (var t = 0; t < 6; t++) null !== this._rootTiles[t] && this._rootTiles[t].destroy();
								cmts_component_get(cmts_component_getPrototypeOf(CMTSComponent.prototype), '__destroy', this).call(
									this
								);
							}
						},
						{
							key: '__update',
							value: function __update() {
								var t = this;
								if ('loaded' === this.getLoadState()) {
									if (null === this._rootTiles[0]) {
										if (0 !== this._numEndPointsLoading) return;
										for (var e = 0; e < 6; e++)
											(this._rootTiles[e] = new Ce(this, null, e, 0, new st(0, 0))), this._rootTiles[e].forceLoad();
									}
									for (var n = !1; this._cameraPositions.length > this._engine.getNumViewports(); )
										this._cameraPositions.pop();
									for (; this._cameraPositions.length < this._engine.getNumViewports(); )
										this._cameraPositions.push(new yt());
									for (var r = 0, i = this._engine.getNumViewports(); r < i; r++) {
										var o = this._cameraPositions[r];
										this._engine
											.getViewport(r)
											.getCamera()
											.getEntity()
											.getPositionRelativeToEntity(o, yt.Zero, this.getEntity()),
											o.rotateInverse(this.getEntity().getOrientation(), o);
									}
									this._numLoadsThisFrame = 0;
									for (var a = 0; a < 6; a++) n = this._rootTiles[a].update() || n;
									if (
										(null === this._tilesLoadedPromise &&
											n &&
											(this._tilesLoadedPromise = new Promise(function (e) {
												t._transitionsCompleteCallback = e;
											})),
										null !== this._tilesLoadedPromise && !n)
									) {
										var s = this._transitionsCompleteCallback;
										(this._tilesLoadedPromise = null), (this._transitionsCompleteCallback = null), s();
									}
								}
							}
						},
						{
							key: '__prepareForRender',
							value: function __prepareForRender(t) {
								if (null !== this._rootTiles[0]) {
									Ut.setOrientationToEntity(this.getThreeJsObjects(), this.getEntity());
									for (var e = 0; e < 6; e++) this._rootTiles[e].prepareForRender(t);
									for (var n = 0, r = this._shadowEntities.length; n < r; n++) {
										var i = this._shadowEntities[n];
										if ('string' == typeof i) {
											var o = this.getEntity().getScene().get(i);
											o instanceof Wt && (i = o);
										}
										null !== i && (this._shadowEntities[n] = i);
									}
									var a = this.getEntity().getComponentByType('atmosphere');
									a instanceof Se
										? jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, a, !0)
										: jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, null, !0);
								}
							}
						},
						{
							key: '__loadResources',
							value: function __loadResources() {
								for (
									var t = this,
										e = [],
										n = function _loop(n, r) {
											var i = t._endPoints.getAt(n),
												o = i.value.url;
											t._numEndPointsLoading += 1;
											var a = t
												.getEntity()
												.getScene()
												.getEngine()
												.getDownloader()
												.download(o + '/configuration.json', !1)
												.then(function (e) {
													if ('failed' === e.status) throw new Error('Failed to download ' + o + '/configuration.json');
													if ('completed' === e.status && 'string' == typeof e.content) {
														var n = JSON.parse(e.content);
														(i.value.configuration = n), (t._numEndPointsLoading -= 1);
													}
												});
											e.push(a);
										},
										r = 0,
										i = this._endPoints.size;
									r < i;
									r++
								)
									n(r);
								return Promise.all(e);
							}
						},
						{
							key: '__unloadResources',
							value: function __unloadResources() {
								for (var t = 0; t < 6; t++) null !== this._rootTiles[t] && this._rootTiles[t].destroy();
								this._rootTiles = [null, null, null, null, null, null];
								for (var e = 0, n = this._endPoints.size; e < n; e++)
									this._endPoints.getAt(e).value.configuration = null;
							}
						},
						{
							key: '__getNumLoadsThisFrame',
							value: function __getNumLoadsThisFrame() {
								return this._numLoadsThisFrame;
							}
						},
						{
							key: '__incNumLoadsThisFrame',
							value: function __incNumLoadsThisFrame() {
								this._numLoadsThisFrame += 1;
							}
						},
						{
							key: '__getEndPoints',
							value: function __getEndPoints() {
								return this._endPoints;
							}
						},
						{
							key: '__endPointsAreLoaded',
							value: function __endPointsAreLoaded() {
								return 0 === this._numEndPointsLoading;
							}
						},
						{
							key: '__getTileOffsets',
							value: function __getTileOffsets() {
								return this._tileOffsets;
							}
						},
						{
							key: '__getTextureCache',
							value: function __getTextureCache() {
								return this._textureCache;
							}
						},
						{
							key: '__getCameraPositions',
							value: function __getCameraPositions() {
								return this._cameraPositions;
							}
						},
						{
							key: '__getThreeJsScene',
							value: function __getThreeJsScene() {
								return this._threeJsScene;
							}
						},
						{
							key: '__getSplitJoinThresholdFactor',
							value: function __getSplitJoinThresholdFactor() {
								return this._splitJoinThresholdFactor;
							}
						}
					]),
					CMTSComponent
				);
			})(),
			Ce = (function (t) {
				function CMTSTile(t, e, n, r, i) {
					var o;
					cmts_component_classCallCheck(this, CMTSTile),
						((o = cmts_component_possibleConstructorReturn(
							this,
							cmts_component_getPrototypeOf(CMTSTile).call(this, e)
						))._component = t),
						(o._face = n),
						(o._level = r),
						(o._tile = new st()),
						o._tile.copy(i),
						(o._isLeaf = !0),
						(o._center = new yt()),
						(o._radius = 0),
						(o._threeJsMaterial = null),
						(o._textureLevels = new F()),
						(o._texturePromises = new F()),
						(o._threeJsObject = null),
						(o._heightData = null),
						(o._tileOffset = o._getTileOffset());
					for (var a = 0; a < 2; a++)
						for (var s = 0; s < 2; s++)
							for (var l = 0; l < o._component.__getEndPoints().size; l++) {
								var c = o._component.__getEndPoints().getAt(l).value.configuration;
								o._isLeaf =
									o._isLeaf &&
									!CMTSTile._isInABoundary(c, o._face, o._level + 1, new st(2 * o._tile.x + s, 2 * o._tile.y + a));
							}
					CMTSTile.cmtsCoordToPosition(
						o._center,
						o._face,
						o._level,
						o._tile.x + 0.5,
						o._tile.y + 0.5,
						t.getSpheroid(),
						t.isPlanetographic()
					);
					var u = new yt();
					CMTSTile.cmtsCoordToPosition(
						u,
						o._face,
						o._level,
						o._tile.x,
						o._tile.y,
						t.getSpheroid(),
						t.isPlanetographic()
					),
						u.sub(o._center, u),
						(o._radius = u.magnitude());
					for (var _ = o._component.__getEndPoints(), p = 0; p < _.size; p++) {
						var h = _.getAt(p).key,
							d = _.getAt(p).value;
						if (CMTSTile._isInABoundary(d.configuration, o._face, o._level, o._tile)) o._textureLevels.set(h, o._level);
						else {
							for (var f = o.getParent(); null !== f && f._level !== f._textureLevels.getAt(p).value; )
								f = f.getParent();
							null !== f ? o._textureLevels.set(h, f._textureLevels.getAt(p).value) : o._textureLevels.set(h, 0);
						}
					}
					return o;
				}
				return (
					cmts_component_inherits(CMTSTile, E),
					cmts_component_createClass(
						CMTSTile,
						[
							{
								key: 'getLevel',
								value: function getLevel() {
									return this._level;
								}
							},
							{
								key: 'getTileCoord',
								value: function getTileCoord() {
									return this._tile;
								}
							},
							{
								key: 'getHeightData',
								value: function getHeightData() {
									return this._heightData;
								}
							},
							{
								key: 'createNewTile',
								value: function createNewTile(t, e, n) {
									var r = this._level + 1,
										i = new st(2 * t._tile.x + n, 2 * t._tile.y + e);
									return new CMTSTile(t._component, this, this._face, r, i);
								}
							},
							{
								key: 'checkSplit',
								value: function checkSplit() {
									return (
										!(this._isLeaf || this._level >= this._component.getMaxLevel()) &&
										!(this._component.__getNumLoadsThisFrame() > 1) &&
										(this._level < this._component.getMinLevel() ||
											this._getNearestDistance() < this._component.__getSplitJoinThresholdFactor() * this._radius)
									);
								}
							},
							{
								key: 'checkJoin',
								value: function checkJoin() {
									return (
										0 !== this._level &&
										(this._level > this._component.getMaxLevel() ||
											(!(this._level <= this._component.getMinLevel()) &&
												this._getNearestDistance() >
													this._component.__getSplitJoinThresholdFactor() * this._radius * 4))
									);
								}
							},
							{
								key: 'load',
								value: (function () {
									var t = cmts_component_asyncToGenerator(
										regeneratorRuntime.mark(function _callee() {
											var t,
												e,
												n,
												r,
												i = this;
											return regeneratorRuntime.wrap(
												function _callee$(o) {
													for (;;)
														switch ((o.prev = o.next)) {
															case 0:
																if ((this._component.__incNumLoadsThisFrame(), null === this._threeJsMaterial)) {
																	o.next = 3;
																	break;
																}
																throw new Error('Tile already has material.');
															case 3:
																for (
																	this._threeJsMaterial = jt.get(),
																		this._component.getThreeJsMaterials().push(this._threeJsMaterial),
																		this._threeJsMaterial.defines.shadowEntities =
																			this._component.getNumShadowEntities() > 0,
																		t = this._component.__getEndPoints(),
																		e = [],
																		n = function _loop2(n) {
																			var r = t.getAt(n).key,
																				o = t.getAt(n).value,
																				a = null,
																				s = i._textureLevels.get(r),
																				l = i._tile.x >> (i._level - s),
																				c = i._tile.y >> (i._level - s),
																				u =
																					o.url +
																					'/' +
																					i._face +
																					'/' +
																					s +
																					'/' +
																					l +
																					'/' +
																					c +
																					'.' +
																					o.configuration.extension;
																			(a = i._component.__getTextureCache().get(u)),
																				e.push(
																					a
																						.then(function (t) {
																							i._setTexture(r, t);
																						})
																						.catch(function () {
																							return (
																								i._component.__getTextureCache().release(a),
																								(a = i._component.__getTextureCache().get('pink')).then(function (t) {
																									i._setTexture(r, t);
																								})
																							);
																						})
																				),
																				i._texturePromises.set(r, a);
																		},
																		r = 0;
																	r < t.size;
																	r++
																)
																	n(r);
																return o.abrupt('return', Promise.all(e));
															case 11:
															case 'end':
																return o.stop();
														}
												},
												_callee,
												this
											);
										})
									);
									return function load() {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'unload',
								value: (function () {
									var t = cmts_component_asyncToGenerator(
										regeneratorRuntime.mark(function _callee2() {
											var t, e, n, r;
											return regeneratorRuntime.wrap(
												function _callee2$(i) {
													for (;;)
														switch ((i.prev = i.next)) {
															case 0:
																if (null !== this._threeJsMaterial) {
																	i.next = 2;
																	break;
																}
																throw new Error('Tile has no material to unload.');
															case 2:
																(t = this._component.getThreeJsMaterials()), (e = 0), (n = t.length);
															case 4:
																if (!(e < n)) {
																	i.next = 11;
																	break;
																}
																if (t[e] !== this._threeJsMaterial) {
																	i.next = 8;
																	break;
																}
																return t.splice(e, 1), i.abrupt('break', 11);
															case 8:
																e++, (i.next = 4);
																break;
															case 11:
																for (
																	this._threeJsMaterial.dispose(), this._threeJsMaterial = null, r = 0;
																	r < this._texturePromises.size;
																	r++
																)
																	this._component.__getTextureCache().release(this._texturePromises.getAt(r).value);
															case 14:
															case 'end':
																return i.stop();
														}
												},
												_callee2,
												this
											);
										})
									);
									return function unload() {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'activate',
								value: (function () {
									var t = cmts_component_asyncToGenerator(
										regeneratorRuntime.mark(function _callee3() {
											var t,
												e,
												n,
												r,
												i,
												o,
												a,
												s,
												l,
												c,
												u,
												_,
												p,
												h,
												d,
												f,
												m,
												g,
												y,
												v,
												b,
												x,
												S,
												w,
												C,
												P,
												E,
												k,
												O,
												A,
												R,
												I,
												M,
												L,
												j,
												z,
												N,
												D,
												U,
												V,
												B,
												G,
												J,
												$,
												H,
												q,
												Z,
												Y,
												X,
												K,
												W,
												Q,
												tt;
											return regeneratorRuntime.wrap(
												function _callee3$(et) {
													for (;;)
														switch ((et.prev = et.next)) {
															case 0:
																if (null === this._threeJsObject && null !== this._threeJsMaterial) {
																	et.next = 2;
																	break;
																}
																throw new Error('NULL');
															case 2:
																for (
																	t = [
																		{ name: 'position', dimensions: 3 },
																		{ name: 'normal', dimensions: 3 },
																		{ name: 'uv', dimensions: 2 }
																	],
																		(e = this._textureLevels.has('normal')) &&
																			(t.push({ name: 'tangent', dimensions: 3 }),
																			t.push({ name: 'bitangent', dimensions: 3 })),
																		n = 0;
																	n < this._textureLevels.size;
																	n++
																)
																	'color' !== (r = this._textureLevels.getAt(n).key) &&
																		'height' !== r &&
																		t.push({ name: r + 'UV', dimensions: 2 });
																for (
																	this._threeJsObject = Ut.createMeshObject(this._component, this._threeJsMaterial, t),
																		this._component.getThreeJsObjects().push(this._threeJsObject),
																		Ut.useInDynEnvMap(this._threeJsObject, !0),
																		i = this._threeJsMaterial.uniforms.colorTexture.value.image.width - 2,
																		o = new F(),
																		a = new F(),
																		s = new F(),
																		l = 0;
																	l < this._textureLevels.size;
																	l++
																)
																	(c = this._textureLevels.getAt(l).key),
																		(u = 1 << (this._level - this._textureLevels.get(c))),
																		a.set(
																			c,
																			new st(
																				(this._tile.x - Math.floor(this._tile.x / u) * u) / u,
																				(this._tile.y - Math.floor(this._tile.y / u) * u) / u
																			)
																		),
																		s.set(c, new st(1 / u, 1 / u));
																for (
																	_ = this._heightData
																		? Math.min(Math.ceil(this._heightData.width * s.get('height').x) + 1, 129)
																		: 5 << T.clamp(2 - this._level, 0, 2),
																		p = this._heightData
																			? Math.min(Math.ceil(this._heightData.height * s.get('height').y) + 1, 129)
																			: 5 << T.clamp(2 - this._level, 0, 2),
																		h = _ * p,
																		d = new Float32Array(3 * h),
																		f = new Float32Array(3 * h),
																		m = null,
																		g = null,
																		e && ((m = new Float32Array(3 * h)), (g = new Float32Array(3 * h))),
																		y = new Uint16Array((_ - 1) * (p - 1) * 6),
																		v = 0;
																	v < this._textureLevels.size;
																	v++
																)
																	(b = this._textureLevels.getAt(v).key), o.set(b, new Float32Array(2 * h));
																for (
																	x = 0,
																		S = 0,
																		this._textureLevels.has('height') &&
																			((w = this._component.__getEndPoints().get('height').configuration),
																			(x = w.heightRange[0] * this._component.getHeightScale()),
																			(S = (w.heightRange[1] - w.heightRange[0]) * this._component.getHeightScale())),
																		C = new st(),
																		P = new yt(),
																		E = new yt(),
																		k = new yt(),
																		O = new yt(),
																		A = new Et(),
																		R = this._component.getSpheroid(),
																		I = this._component.isPlanetographic(),
																		M = 0;
																	M < p;
																	M++
																)
																	for (L = 0; L < _; L++) {
																		for (
																			j = M * _ + L,
																				C.set(this._tile.x + (L - 1) / (_ - 3), this._tile.y + (M - 1) / (p - 3)),
																				CMTSTile.cmtsCoordToPosition(
																					P,
																					this._face,
																					this._level,
																					T.clamp(C.x, this._tile.x, this._tile.x + 1),
																					T.clamp(C.y, this._tile.y, this._tile.y + 1),
																					R,
																					I
																				),
																				e &&
																					(CMTSTile.cmtsCoordToTangent(k, this._face, this._level, C.x, C.y, R, I),
																					CMTSTile.cmtsCoordToBitangent(O, this._face, this._level, C.x, C.y, R, I)),
																				R.llaFromXYZ(A, P, I),
																				R.upFromLLA(E, A),
																				this._heightData &&
																					((z = this._heightData.data),
																					(N = a.get('height')),
																					(D = s.get('height')),
																					(U = this._heightData.width - 2),
																					CMTSTile.getHeightPos(P, E, L, M, z, N, _, p, D, U, x, S),
																					this._textureLevels.has('normal') ||
																						((V = yt.pool.get()),
																						(B = yt.pool.get()),
																						(G = yt.pool.get()),
																						(J = yt.pool.get()),
																						CMTSTile.cmtsCoordToPosition(
																							V,
																							this._face,
																							this._level,
																							C.x - 1 / (_ - 3),
																							C.y,
																							R,
																							I
																						),
																						CMTSTile.getHeightPos(V, E, L - 1, M, z, N, _, p, D, U, x, S),
																						CMTSTile.cmtsCoordToPosition(
																							B,
																							this._face,
																							this._level,
																							C.x + 1 / (_ - 3),
																							C.y,
																							R,
																							I
																						),
																						CMTSTile.getHeightPos(B, E, L + 1, M, z, N, _, p, D, U, x, S),
																						CMTSTile.cmtsCoordToPosition(
																							G,
																							this._face,
																							this._level,
																							C.x,
																							C.y - 1 / (p - 3),
																							R,
																							I
																						),
																						CMTSTile.getHeightPos(G, E, L, M - 1, z, N, _, p, D, U, x, S),
																						CMTSTile.cmtsCoordToPosition(
																							J,
																							this._face,
																							this._level,
																							C.x,
																							C.y + 1 / (p - 3),
																							R,
																							I
																						),
																						CMTSTile.getHeightPos(J, E, L, M + 1, z, N, _, p, D, U, x, S),
																						V.sub(B, V),
																						G.sub(J, G),
																						E.cross(V, G),
																						E.normalize(E),
																						yt.pool.release(V),
																						yt.pool.release(B),
																						yt.pool.release(G),
																						yt.pool.release(J))),
																				(0 !== L && 0 !== M && L !== _ - 1 && M !== p - 1) ||
																					(($ = P.magnitude()), P.mult(P, Math.max(0, ($ - 1) / $))),
																				P.sub(P, this._tileOffset),
																				d[3 * j + 0] = P.x,
																				d[3 * j + 1] = P.y,
																				d[3 * j + 2] = P.z,
																				f[3 * j + 0] = E.x,
																				f[3 * j + 1] = E.y,
																				f[3 * j + 2] = E.z,
																				e &&
																					((m[3 * j + 0] = k.x),
																					(m[3 * j + 1] = k.y),
																					(m[3 * j + 2] = k.z),
																					(g[3 * j + 0] = O.x),
																					(g[3 * j + 1] = O.y),
																					(g[3 * j + 2] = O.z)),
																				H = 0;
																			H < this._textureLevels.size;
																			H++
																		)
																			(q = this._textureLevels.getAt(H).key),
																				(Z = a.get(q)),
																				(Y = s.get(q)),
																				((X = o.get(q))[2 * j + 0] =
																					((Z.x + ((L - 1) / (_ - 3)) * Y.x) * i) / (i + 2) + 1 / (i + 2)),
																				(X[2 * j + 1] =
																					1 - (((Z.y + ((M - 1) / (p - 3)) * Y.y) * i) / (i + 2) + 1 / (i + 2)));
																		L < _ - 1 &&
																			M < p - 1 &&
																			((y[6 * (K = M * (_ - 1) + L) + 0] = _ * (M + 0) + (L + 0)),
																			(y[6 * K + 1] = _ * (M + 0) + (L + 1)),
																			(y[6 * K + 2] = _ * (M + 1) + (L + 1)),
																			(y[6 * K + 3] = _ * (M + 0) + (L + 0)),
																			(y[6 * K + 4] = _ * (M + 1) + (L + 1)),
																			(y[6 * K + 5] = _ * (M + 1) + (L + 0)));
																	}
																Ut.setVertices(this._threeJsObject.geometry, 'position', d),
																	Ut.setVertices(this._threeJsObject.geometry, 'normal', f),
																	e &&
																		(Ut.setVertices(this._threeJsObject.geometry, 'tangent', m),
																		Ut.setVertices(this._threeJsObject.geometry, 'bitangent', g)),
																	(W = 0);
															case 40:
																if (!(W < this._textureLevels.size)) {
																	et.next = 49;
																	break;
																}
																if (((Q = this._textureLevels.getAt(W).key), (tt = o.get(Q)), 'height' !== Q)) {
																	et.next = 45;
																	break;
																}
																return et.abrupt('continue', 46);
															case 45:
																'color' === Q
																	? Ut.setVertices(this._threeJsObject.geometry, 'uv', tt)
																	: Ut.setVertices(this._threeJsObject.geometry, Q + 'UV', tt);
															case 46:
																W++, (et.next = 40);
																break;
															case 49:
																Ut.setIndices(this._threeJsObject.geometry, y);
															case 50:
															case 'end':
																return et.stop();
														}
												},
												_callee3,
												this
											);
										})
									);
									return function activate() {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'deactivate',
								value: (function () {
									var t = cmts_component_asyncToGenerator(
										regeneratorRuntime.mark(function _callee4() {
											var t, e, n;
											return regeneratorRuntime.wrap(
												function _callee4$(r) {
													for (;;)
														switch ((r.prev = r.next)) {
															case 0:
																(t = this._component.getThreeJsObjects()), (e = 0), (n = t.length);
															case 2:
																if (!(e < n)) {
																	r.next = 9;
																	break;
																}
																if (t[e] !== this._threeJsObject) {
																	r.next = 6;
																	break;
																}
																return t.splice(e, 1), r.abrupt('break', 9);
															case 6:
																e++, (r.next = 2);
																break;
															case 9:
																Ut.destroyObject(this._threeJsObject), (this._threeJsObject = null);
															case 11:
															case 'end':
																return r.stop();
														}
												},
												_callee4,
												this
											);
										})
									);
									return function deactivate() {
										return t.apply(this, arguments);
									};
								})()
							},
							{
								key: 'update',
								value: function update() {
									if (!this._component.__endPointsAreLoaded()) return !1;
									for (var t = this.check(), e = 0, n = this.children.length; e < n; e++)
										t = this.children[e].update() || t;
									return t;
								}
							},
							{
								key: '_getNearestDistance',
								value: function _getNearestDistance() {
									for (
										var t = Number.POSITIVE_INFINITY, e = this._component.__getCameraPositions(), n = 0, r = e.length;
										n < r;
										n++
									) {
										var i = e[n];
										CMTSTile._pos.sub(i, this._center);
										var o = CMTSTile._pos.magnitude() - this._radius;
										t > o && (t = o);
									}
									return t;
								}
							},
							{
								key: 'toString',
								value: function toString() {
									return this._face + '/' + this._level + '/' + this._tile.x + '/' + this._tile.y;
								}
							},
							{
								key: 'prepareForRender',
								value: function prepareForRender(t) {
									Ut.setPositionToEntity(this._threeJsObject, this._component.getEntity(), t, this._tileOffset, !0);
									for (var e = 0, n = this.children.length; e < n; e++) this.children[e].prepareForRender(t);
								}
							},
							{
								key: '_setTexture',
								value: function _setTexture(t, e) {
									if ('loaded' === this._component.getLoadState())
										if ('height' === t) {
											var n = document.createElement('canvas');
											(n.width = e.image.width), (n.height = e.image.height);
											var r = n.getContext('2d', { desynchronized: !0, alpha: !1 });
											r.drawImage(e.image, 0, 0),
												e.dispose(),
												(this._heightData = r.getImageData(0, 0, e.image.width, e.image.height)),
												this._component.__getTextureCache().release(this._texturePromises.get('height')),
												this._texturePromises.delete('height');
											var i = this._component.getSpheroid();
											CMTSTile.cmtsCoordToPosition(
												this._center,
												this._face,
												this._level,
												this._tile.x + 0.5,
												this._tile.y + 0.5,
												i,
												this._component.isPlanetographic()
											);
											var o = yt.pool.get(),
												a = Et.pool.get();
											i.llaFromXYZ(a, this._center, this._component.isPlanetographic()), i.upFromLLA(o, a);
											var s = CMTSTile.getLinearInterpolatedHeightPixel(
													this._heightData.width / 2,
													this._heightData.height / 2,
													this._heightData.data,
													this._heightData.width
												),
												l = this._component.__getEndPoints().get('height').configuration,
												c = l.heightRange[0] * this._component.getHeightScale(),
												u = (l.heightRange[1] - l.heightRange[0]) * this._component.getHeightScale();
											this._center.addMult(this._center, o, c + s * u), yt.pool.release(o), Et.pool.release(a);
										} else
											(this._threeJsMaterial.uniforms[t + 'Texture'].value = e),
												'normal' === t
													? ((this._threeJsMaterial.defines.normalMap = !0),
													  (this._threeJsMaterial.defines.normalUVs = !0),
													  (this._threeJsMaterial.defines.hasBitangents = !0),
													  this._threeJsMaterial.uniforms.normalScale.value.set(
															this._component.getHeightScale(),
															this._component.getHeightScale()
													  ),
													  (this._threeJsMaterial.uniforms.specularIntensity.value = 0),
													  (this._threeJsMaterial.uniforms.specularHardness.value = 100))
													: 'specular' === t
													? ((this._threeJsMaterial.defines.specularMap = !0),
													  (this._threeJsMaterial.defines.specularUVs = !0))
													: 'night' === t
													? ((this._threeJsMaterial.defines.nightMap = !0),
													  (this._threeJsMaterial.defines.nightUVs = !0))
													: 'decal' === t &&
													  ((this._threeJsMaterial.defines.decalMap = !0),
													  (this._threeJsMaterial.defines.decalUVs = !0));
								}
							},
							{
								key: '_getTileOffset',
								value: function _getTileOffset() {
									for (var t = this._component.__getTileOffsets(), e = 0, n = t.length; e < n; e++) {
										var r = t[e];
										if (!(r.face !== this._face || r.level > this._level)) {
											var i = 1 << (this._level - r.level);
											if (
												r.min.x * i <= this._tile.x &&
												this._tile.x < (r.max.x + 1) * i &&
												r.min.y * i <= this._tile.y &&
												this._tile.y < (r.max.y + 1) * i
											)
												return r.offset;
										}
									}
									return yt.Zero;
								}
							}
						],
						[
							{
								key: '_getGreatestLevel',
								value: function _getGreatestLevel(t, e, n, r) {
									for (var i = Number.NEGATIVE_INFINITY, o = 0, a = t.boundaries.length; o < a; o++) {
										var s = t.boundaries[o];
										if (s.face === e) {
											var l = s.lastLevel - n;
											s.min[0] <= r.x >> l &&
												r.x >> l <= s.max[0] &&
												s.min[1] <= r.y >> l &&
												r.y >> l <= s.max[1] &&
												i < s.lastLevel &&
												(i = s.lastLevel);
										}
									}
									return i;
								}
							},
							{
								key: '_isInABoundary',
								value: function _isInABoundary(t, e, n, r) {
									for (var i = !1, o = 0, a = t.boundaries.length; o < a; o++) {
										var s = t.boundaries[o];
										if (s.face === e && !(s.lastLevel < n)) {
											var l = 1 << (s.lastLevel - n);
											r.x < Math.floor(s.min[0] / l) ||
												Math.floor(s.max[0] / l) < r.x ||
												r.y < Math.floor(s.min[1] / l) ||
												Math.floor(s.max[1] / l) < r.y ||
												(i = !0);
										}
									}
									return i;
								}
							},
							{
								key: 'getHeightPos',
								value: function getHeightPos(t, e, n, r, i, o, a, s, l, c, u, _) {
									var p = (((o.x + ((n - 1) / (a - 3)) * l.x) * c) / (c + 2) + 1 / (c + 2)) * (c + 2),
										h = (1 - (((o.y + ((r - 1) / (s - 3)) * l.y) * c) / (c + 2) + 1 / (c + 2))) * (c + 2),
										d = this.getLinearInterpolatedHeightPixel(p, h, i, c + 2);
									t.addMult(t, e, u + d * _);
								}
							},
							{
								key: 'getLinearInterpolatedHeightPixel',
								value: function getLinearInterpolatedHeightPixel(t, e, n, r) {
									var i = Math.floor(t),
										o = Math.floor(e),
										a = t - i,
										s = e - o,
										l = Math.abs(a - 0.5),
										c = Math.abs(s - 0.5),
										u = this.getHeightFromPixel(i, o, n, r) * ((1 - l) * (1 - c));
									return (
										a >= 0.5
											? ((u += this.getHeightFromPixel(i + 1, o, n, r) * (l * (1 - c))),
											  s < 0.5
													? (u += this.getHeightFromPixel(i + 1, o - 1, n, r) * (l * c))
													: s >= 0.5 && (u += this.getHeightFromPixel(i + 1, o + 1, n, r) * (l * c)))
											: a < 0.5 &&
											  ((u += this.getHeightFromPixel(i - 1, o, n, r) * (l * (1 - c))),
											  s < 0.5
													? (u += this.getHeightFromPixel(i - 1, o - 1, n, r) * (l * c))
													: s >= 0.5 && (u += this.getHeightFromPixel(i - 1, o + 1, n, r) * (l * c))),
										s >= 0.5
											? (u += this.getHeightFromPixel(i, o + 1, n, r) * ((1 - l) * c))
											: s < 0.5 && (u += this.getHeightFromPixel(i, o - 1, n, r) * ((1 - l) * c)),
										u
									);
								}
							},
							{
								key: 'getHeightFromPixel',
								value: function getHeightFromPixel(t, e, n, r) {
									t = T.clamp(t, 0, r - 1);
									var i = 4 * ((e = T.clamp(e, 0, r - 1)) * r + t);
									return n[i + 0] / 255 + n[i + 1] / 255 / 256 + n[i + 2] / 255 / 65536;
								}
							},
							{
								key: 'cmtsCoordToPosition',
								value: function cmtsCoordToPosition(t, e, n, r, i, o, a) {
									var s = 2 * (r / (1 << Math.max(n, 0))) - 1,
										l = 2 * (i / (1 << Math.max(n, 0))) - 1,
										c = this._basis[e];
									t.set(
										c[0].x * s + c[1].x * l + c[2].x,
										c[0].y * s + c[1].y * l + c[2].y,
										c[0].z * s + c[1].z * l + c[2].z
									),
										t.normalize(t),
										o.llaFromXYZ(this._lla, t, !1),
										(this._lla.alt = 0),
										(this._lla.planetographic = a),
										o.xyzFromLLA(t, this._lla);
								}
							},
							{
								key: 'cmtsCoordToTangent',
								value: function cmtsCoordToTangent(t, e, n, r, i, o, a) {
									this.cmtsCoordToPosition(t, e, n, r, i, o, a);
									var s = this._basis[e];
									t.setNormalTo(t, s[0]);
								}
							},
							{
								key: 'cmtsCoordToBitangent',
								value: function cmtsCoordToBitangent(t, e, n, r, i, o, a) {
									this.cmtsCoordToPosition(t, e, n, r, i, o, a);
									var s = this._basis[e];
									t.setNormalTo(t, s[1]);
								}
							}
						]
					),
					CMTSTile
				);
			})();
		(Ce._basis = [
			[yt.YAxis, yt.ZAxis, yt.XAxis],
			[yt.XAxisNeg, yt.ZAxis, yt.YAxis],
			[yt.YAxisNeg, yt.ZAxis, yt.XAxisNeg],
			[yt.XAxis, yt.ZAxis, yt.YAxisNeg],
			[yt.YAxis, yt.XAxisNeg, yt.ZAxis],
			[yt.YAxis, yt.XAxis, yt.ZAxisNeg]
		]),
			(Ce._lla = new Et()),
			(Ce._pos = new yt());
		var Pe = we;
		function comet_tail_component_typeof(t) {
			return (comet_tail_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function comet_tail_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function comet_tail_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function comet_tail_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== comet_tail_component_typeof(e) && 'function' != typeof e)
				? (function comet_tail_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function comet_tail_component_getPrototypeOf(t) {
			return (comet_tail_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function comet_tail_component_setPrototypeOf(t, e) {
			return (comet_tail_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ee = (function (t) {
			function CometTailComponent(t, e, n) {
				var r;
				return (
					(function comet_tail_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, CometTailComponent),
					((r = comet_tail_component_possibleConstructorReturn(
						this,
						comet_tail_component_getPrototypeOf(CometTailComponent).call(this, t, e, n)
					))._lightSource = new wt(r.getEntity().getScene())),
					(r._timeLength = 6e5),
					(r._numberOfParticles = 200),
					(r._color = new z()),
					r._color.freeze(),
					(r._starAccelerationMultiplier = 1),
					(r._timeOfParticle0 = 0),
					r
				);
			}
			return (
				(function comet_tail_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && comet_tail_component_setPrototypeOf(t, e);
				})(CometTailComponent, ye),
				(function comet_tail_component_createClass(t, e, n) {
					return (
						e && comet_tail_component_defineProperties(t.prototype, e),
						n && comet_tail_component_defineProperties(t, n),
						t
					);
				})(CometTailComponent, [
					{
						key: 'getLightSource',
						value: function getLightSource() {
							return this._lightSource.getName();
						}
					},
					{
						key: 'setLightSource',
						value: function setLightSource(t) {
							this._lightSource.setName(t);
						}
					},
					{
						key: 'getTimeLength',
						value: function getTimeLength() {
							return this._timeLength;
						}
					},
					{
						key: 'setTimeLength',
						value: function setTimeLength(t) {
							(this._timeLength = t), this.resetResources();
						}
					},
					{
						key: 'getStarAccelerationMultiplier',
						value: function getStarAccelerationMultiplier() {
							return this._starAccelerationMultiplier;
						}
					},
					{
						key: 'setStarAccelerationMultiplier',
						value: function setStarAccelerationMultiplier(t) {
							(this._starAccelerationMultiplier = t),
								Ut.setUniformNumber(
									this.getThreeJsMaterials()[0],
									'starAccelerationMultiplier',
									this._starAccelerationMultiplier
								);
						}
					},
					{
						key: 'getNumberOfParticles',
						value: function getNumberOfParticles() {
							return this._numberOfParticles;
						}
					},
					{
						key: 'setNumberOfParticles',
						value: function setNumberOfParticles(t) {
							(this._numberOfParticles = t), this.resetResources();
						}
					},
					{
						key: 'getColor',
						value: function getColor() {
							return this._color;
						}
					},
					{
						key: 'setColor',
						value: function setColor(t) {
							this._color.thaw(),
								this._color.copy(t),
								this._color.freeze(),
								Ut.setUniformColorRGBA(this.getThreeJsMaterials()[0], 'color', this._color);
						}
					},
					{
						key: '__update',
						value: function __update() {
							if (
								(this.__setRadius(
									Math.max(
										this.getEntity().getExtentsRadius(),
										this._timeLength * this.getEntity().getVelocity().magnitude()
									)
								),
								'loaded' === this.getLoadState())
							) {
								for (
									var t = this.getEntity().getScene().getEngine().getTime(),
										e = this.getThreeJsObjects()[0].geometry.attributes.originTime.array,
										n = 0,
										r = this._numberOfParticles;
									n < r;
									n++
								) {
									var i = e[n] + this._timeOfParticle0;
									(i < t - this._timeLength || i > t) && this._newParticle(n, T.wrap(i, t - this._timeLength, t));
								}
								this._numberOfParticles > 1
									? Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'time', t - this._timeOfParticle0)
									: Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'time', 0);
								var o = this._lightSource.get();
								if (null !== o) {
									var a = o.getComponentByType('lightSource');
									null !== a &&
										Ut.setUniformNumber(
											this.getThreeJsMaterials()[0],
											'starAbsoluteMagnitude',
											a.getAbsoluteMagnitude()
										);
									var s = yt.pool.get();
									this.getEntity().getPositionRelativeToEntity(s, yt.Zero, o),
										Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'positionOfEntity', s),
										yt.pool.release(s);
								}
							}
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							Ut.setPositionToEntity(this.getThreeJsObjects(), this.getEntity(), t);
							var e = this.getEntity().getCameraSpacePosition(t);
							if ((Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'positionInCamera', e), e.magnitude() < 4e4))
								this.getThreeJsObjects()[0].visible = !1;
							else {
								var n = (e.magnitude() - 4e4) / 4e5;
								(this.getThreeJsMaterials()[0].uniforms.color.value.w = this._color.a * T.clamp01(n)),
									(this.getThreeJsObjects()[0].visible = !0);
							}
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function comet_tail_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											comet_tail_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											comet_tail_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e, n, r, o, a, s, l, c, u, _;
									return regeneratorRuntime.wrap(
										function _callee$(p) {
											for (;;)
												switch ((p.prev = p.next)) {
													case 0:
														for (
															t = new i.RawShaderMaterial({
																uniforms: {
																	time: new i.Uniform(0),
																	timeLength: new i.Uniform(0),
																	positionInCamera: new i.Uniform(new i.Vector3()),
																	starAbsoluteMagnitude: new i.Uniform(0),
																	starAccelerationMultiplier: new i.Uniform(0),
																	positionOfEntity: new i.Uniform(new i.Vector3()),
																	color: new i.Uniform(new i.Vector4())
																},
																vertexShader: zt.fix(CometTailComponent.vertexShader, 'vertex'),
																fragmentShader: zt.fix(CometTailComponent.fragmentShader, 'fragment'),
																transparent: !0,
																depthWrite: !1,
																blending: i.AdditiveBlending,
																side: i.DoubleSide
															}),
																this.getThreeJsMaterials().push(t),
																e = new Float32Array([-1, -1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0]),
																n = new Uint16Array([0, 1, 2, 2, 3, 0]),
																r = new Float32Array(1 * this._numberOfParticles),
																o = new Float32Array(3 * this._numberOfParticles),
																a = new Float32Array(1 * this._numberOfParticles),
																(s = new i.InstancedBufferGeometry()).setAttribute(
																	'position',
																	new i.BufferAttribute(e, 3)
																),
																s.setAttribute('originTime', new i.InstancedBufferAttribute(r, 1)),
																s.setAttribute('originPosition', new i.InstancedBufferAttribute(o, 3)),
																s.setAttribute('accelerationMultiplier', new i.InstancedBufferAttribute(a, 1)),
																s.setIndex(new i.BufferAttribute(n, 1)),
																s.instanceCount = this._numberOfParticles,
																l = Ut.createMeshObjectGivenGeometry(this, t, s),
																this.getThreeJsObjects().push(l),
																c = this.getEntity().getScene().getEngine().getTime(),
																u = 0,
																_ = this._numberOfParticles;
															u < _;
															u++
														)
															this._newParticle(u, c - (u / _) * this._timeLength);
														Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'timeLength', this._timeLength),
															Ut.setUniformNumber(
																this.getThreeJsMaterials()[0],
																'starAccelerationMultiplier',
																this._starAccelerationMultiplier
															),
															Ut.setUniformColorRGBA(this.getThreeJsMaterials()[0], 'color', this._color);
													case 21:
													case 'end':
														return p.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this);
						}
					},
					{
						key: '_newParticle',
						value: function _newParticle(t, e) {
							var n = e,
								r = this.getThreeJsObjects()[0].geometry.attributes.originTime,
								i = r.array;
							if (t > 0) i[t] = n - this._timeOfParticle0;
							else {
								for (var o = 1, a = this._numberOfParticles; o < a; o++) i[o] += this._timeOfParticle0 - n;
								(this._timeOfParticle0 = n), (i[0] = 0);
							}
							r.needsUpdate = !0;
							var s = yt.pool.get(),
								l = this._lightSource.get();
							null !== l && this.getEntity().getPositionRelativeToEntity(s, yt.Zero, l, n);
							var c = this.getThreeJsObjects()[0].geometry.attributes.originPosition,
								u = c.array;
							(u[3 * t + 0] = s.x),
								(u[3 * t + 1] = s.y),
								(u[3 * t + 2] = s.z),
								(c.needsUpdate = !0),
								yt.pool.release(s);
							var _ = this.getThreeJsObjects()[0].geometry.attributes.accelerationMultiplier;
							(_.array[t] = 0 + 1 * Math.random()), (_.needsUpdate = !0);
						}
					}
				]),
				CometTailComponent
			);
		})();
		(Ee.vertexShader =
			'\n\tattribute vec3 position;\n\tattribute float originTime;\n\tattribute vec3 originPosition;\n\tattribute vec3 originStarPosition;\n\tattribute vec3 originExternalAcceleration;\n\tattribute float accelerationMultiplier;\n\n\tuniform float time;\n\tuniform float timeLength;\n\tuniform vec3 positionInCamera;\n\tuniform float starAbsoluteMagnitude;\n\tuniform float starAccelerationMultiplier;\n\tuniform vec3 positionOfEntity;\n\tuniform mat4 viewMatrix;\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec2 vPosition;\n\tvarying float vAlpha;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\t// Get the position of the center point of the quad in model space.\n\t\tfloat deltaTime = time - originTime;\n\t\tvec3 externalAcceleration = starAccelerationMultiplier * accelerationMultiplier * normalize(originPosition) * 5.0e7 * pow(2.51188643151, 20.0 - starAbsoluteMagnitude) / dot(originPosition, originPosition);\n\t\tvec3 modelPosition = externalAcceleration * pow(deltaTime, 1.5);\n\n\t\t// Get a general expansion scale in all directions.\n\t\tfloat expansion = 0.2 * max(1.0e5, length(modelPosition));\n\n\t\t// Get the stretch direction in view space.\n\t\tvec3 modelStretch = modelPosition;\n\t\tvec3 cameraDirection = normalize(positionInCamera);\n\t\tmodelStretch = modelStretch - dot(cameraDirection, modelStretch) * cameraDirection;\n\t\tvec4 viewStretch = viewMatrix * vec4(modelStretch, 1.0);\n\n\t\t// Get the stretch amounts in the x and y directions.\n\t\tvec2 stretch2d = vec2(max(expansion, 2.0 * length(viewStretch.xz)), expansion);\n\n\t\t// Do the stretch calculation on the vertex position in view space.\n\t\t// It translates it, rotates it, stretches it, and unrotates it.\n\t\tvec2 translate = 0.5 * normalize(vec2(viewStretch.xz));\n\t\tfloat angle = length(viewStretch.xz) > 0.0 ? atan(viewStretch.z, viewStretch.x) : 0.0;\n\t\tfloat cosAngle = cos(angle);\n\t\tfloat sinAngle = sin(angle);\n\t\tfloat stretchedX = (stretch2d.x * cosAngle * cosAngle + stretch2d.y * sinAngle * sinAngle) * 0.5 * (position.x + translate.x) + (stretch2d.x - stretch2d.y) * sinAngle * cosAngle * 0.5 * (position.y + translate.y);\n\t\tfloat stretchedY = (stretch2d.x - stretch2d.y) * sinAngle * cosAngle * 0.5 * (position.x + translate.x) + (stretch2d.x * sinAngle * sinAngle + stretch2d.y * cosAngle * cosAngle) * 0.5 * (position.y + translate.y);\n\n\t\t// Get the position in view space and then in normalized space.\n\t\tvec4 viewPosition = vec4(stretchedX, 0.0, stretchedY, 0.0) + modelViewMatrix * vec4(modelPosition, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\n\t\t// Set the varying variables for adjusting te\n\t\tvPosition = vec2(cosAngle * position.x + sinAngle * position.y, -sinAngle * position.x + cosAngle * position.y);\n\t\tvAlpha = sqrt(1.0 - sqrt(deltaTime / timeLength));\n\n\t\t// Make the gas fade far from the star.\n\t\tvAlpha *= min(1.0, 1.0 - length(originPosition) / 7.0e8);\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}'),
			(Ee.fragmentShader =
				'\n\tuniform vec4 color;\n\n\tvarying vec2 vPosition;\n\tvarying float vAlpha;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\t// Set the color to be a circle tinted by the color.\n\t\tgl_FragColor = vec4(color.rgb, 0.5 * color.a) * max(0.0, 1.0 - dot(vPosition, vPosition)) * vAlpha;\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t#endif\n\t}');
		var ke = Ee;
		function connected_sprite_component_typeof(t) {
			return (connected_sprite_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function connected_sprite_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function connected_sprite_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function connected_sprite_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== connected_sprite_component_typeof(e) && 'function' != typeof e)
				? (function connected_sprite_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function connected_sprite_component_getPrototypeOf(t) {
			return (connected_sprite_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function connected_sprite_component_setPrototypeOf(t, e) {
			return (connected_sprite_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Oe = (function (t) {
			function ConnectedSpriteComponent(t, e, n) {
				var r;
				return (
					(function connected_sprite_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ConnectedSpriteComponent),
					((r = connected_sprite_component_possibleConstructorReturn(
						this,
						connected_sprite_component_getPrototypeOf(ConnectedSpriteComponent).call(this, t, e, n)
					))._entity1 = null),
					(r._entity1Offset = new yt()),
					r._entity1Offset.freeze(),
					(r._entity2 = null),
					(r._entity2Offset = new yt()),
					r._entity2Offset.freeze(),
					(r._width = 1),
					(r._widthUnits = 'km'),
					(r._textureUrl = ''),
					(r._textureAspectRatio = 1),
					(r._textureRepeat = !0),
					(r._colorMultiplier = new z(1, 1, 1, 1)),
					r._colorMultiplier.freeze(),
					(r._blending = 'normal'),
					r
				);
			}
			return (
				(function connected_sprite_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && connected_sprite_component_setPrototypeOf(t, e);
				})(ConnectedSpriteComponent, ye),
				(function connected_sprite_component_createClass(t, e, n) {
					return (
						e && connected_sprite_component_defineProperties(t.prototype, e),
						n && connected_sprite_component_defineProperties(t, n),
						t
					);
				})(ConnectedSpriteComponent, [
					{
						key: 'getEntity1',
						value: function getEntity1() {
							return this._entity1;
						}
					},
					{
						key: 'setEntity1',
						value: function setEntity1(t) {
							this._entity1 = t;
						}
					},
					{
						key: 'getEntity1Offset',
						value: function getEntity1Offset() {
							return this._entity1Offset;
						}
					},
					{
						key: 'setEntity1Offset',
						value: function setEntity1Offset(t) {
							this._entity1Offset.thaw(), this._entity1Offset.copy(t), this._entity1Offset.freeze();
						}
					},
					{
						key: 'getEntity2',
						value: function getEntity2() {
							return this._entity2;
						}
					},
					{
						key: 'setEntity2',
						value: function setEntity2(t) {
							this._entity2 = t;
						}
					},
					{
						key: 'getEntity2Offset',
						value: function getEntity2Offset() {
							return this._entity2Offset;
						}
					},
					{
						key: 'setEntity2Offset',
						value: function setEntity2Offset(t) {
							this._entity2Offset.thaw(), this._entity2Offset.copy(t), this._entity2Offset.freeze();
						}
					},
					{
						key: 'getWidth',
						value: function getWidth() {
							return this._width;
						}
					},
					{
						key: 'setWidth',
						value: function setWidth(t) {
							this._width = t;
						}
					},
					{
						key: 'getWidthUnits',
						value: function getWidthUnits() {
							return this._widthUnits;
						}
					},
					{
						key: 'setWidthUnits',
						value: function setWidthUnits(t) {
							(this._widthUnits = t),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'pixelBased', 'px' === t ? 1 : 0);
						}
					},
					{
						key: 'getTextureUrl',
						value: function getTextureUrl() {
							return this._textureUrl;
						}
					},
					{
						key: 'setTextureUrl',
						value: function setTextureUrl(t) {
							(this._textureUrl = t), this.resetResources();
						}
					},
					{
						key: 'getTextureRepeat',
						value: function getTextureRepeat() {
							return this._textureRepeat;
						}
					},
					{
						key: 'setTextureRepeat',
						value: function setTextureRepeat(t) {
							this._textureRepeat = t;
						}
					},
					{
						key: 'getColorMultiplier',
						value: function getColorMultiplier() {
							return this._colorMultiplier;
						}
					},
					{
						key: 'setColorMultiplier',
						value: function setColorMultiplier(t) {
							this._colorMultiplier.thaw(),
								this._colorMultiplier.copy(t),
								this._colorMultiplier.freeze(),
								Ut.setUniformColorRGBA(this.getThreeJsMaterials()[0], 'color', this._colorMultiplier, 1);
						}
					},
					{
						key: 'setBlending',
						value: function setBlending(t) {
							(this._blending = t), Ut.setBlending(this.getThreeJsMaterials()[0], t);
						}
					},
					{
						key: '__update',
						value: function __update() {
							if (
								null !== this._entity1 &&
								null !== this._entity2 &&
								this._entity1.isEnabled() &&
								this._entity2.isEnabled()
							) {
								var t = yt.pool.get();
								this._entity1.getPositionRelativeToEntity(t, yt.Zero, this._entity2),
									this.__setRadius(t.magnitude() + this._entity1.getExtentsRadius() + this._entity2.getExtentsRadius()),
									yt.pool.release(t);
							}
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							if (
								null !== this._entity1 &&
								null !== this._entity2 &&
								this._entity1.isEnabled() &&
								this._entity2.isEnabled()
							) {
								var e = this._entity1.getCameraSpacePosition(t),
									n = this._entity2.getCameraSpacePosition(t),
									r = yt.pool.get(),
									i = yt.pool.get();
								r.rotate(this._entity1.getOrientation(), this._entity1Offset),
									r.add(e, r),
									i.rotate(this._entity2.getOrientation(), this._entity2Offset),
									i.add(n, i);
								var o = r.magnitude(),
									a = i.magnitude(),
									s = this._width / 2,
									l = this._width / 2,
									c = this._width / 2,
									u = 1;
								if ('px' === this._widthUnits) {
									(s = t.getViewport().getNormalSpaceRadiusFromPixelSpaceRadius(s)),
										(s = t.getRadiusFromNormalSpaceRadius(s, o)),
										(l = t.getViewport().getNormalSpaceRadiusFromPixelSpaceRadius(l)),
										(c = t.getViewport().getNormalSpaceRadiusFromPixelSpaceRadius(c)),
										(c = t.getRadiusFromNormalSpaceRadius(c, a));
									var _ = yt.pool.get();
									_.sub(i, r),
										(u = T.clamp01(-_.dot(r) / _.dot(_))),
										_.addMult(r, _, u),
										(l = t.getRadiusFromNormalSpaceRadius(l, _.magnitude())),
										yt.pool.release(_),
										t.getNormalSpacePositionFromCameraSpacePosition(r, r),
										t.getNormalSpacePositionFromCameraSpacePosition(i, i);
									var p = st.pool.get(),
										h = st.pool.get();
									t.getViewport().getPixelSpacePositionFromNormalSpacePosition(p, r),
										t.getViewport().getPixelSpacePositionFromNormalSpacePosition(h, i),
										r.set(p.x, p.y, 0),
										i.set(h.x, h.y, 0),
										st.pool.release(p),
										st.pool.release(h);
								}
								var d = yt.pool.get(),
									f = yt.pool.get();
								d.sub(i, r), o < a ? f.copy(r) : f.copy(i), f.cross(f, d), f.normalize(f);
								var m = (d.magnitude() / this._width) * this._textureAspectRatio;
								m > 1e3 && ((u = 1e3 / m), o > a && (u = 1 - u));
								var g = this.getThreeJsObjects()[0].geometry.getAttribute('position'),
									y = g.array;
								o < a
									? (this.getThreeJsObjects()[0].position.set(r.x, r.y, r.z),
									  (y[0] = 0 - f.x * s),
									  (y[1] = 0 - f.y * s),
									  (y[2] = 0 - f.z * s),
									  (y[3] = 0 + f.x * s),
									  (y[4] = 0 + f.y * s),
									  (y[5] = 0 + f.z * s),
									  (y[6] = d.x * u - f.x * l),
									  (y[7] = d.y * u - f.y * l),
									  (y[8] = d.z * u - f.z * l),
									  (y[9] = d.x * u + f.x * l),
									  (y[10] = d.y * u + f.y * l),
									  (y[11] = d.z * u + f.z * l),
									  (y[12] = d.x - f.x * c),
									  (y[13] = d.y - f.y * c),
									  (y[14] = d.z - f.z * c),
									  (y[15] = d.x + f.x * c),
									  (y[16] = d.y + f.y * c),
									  (y[17] = d.z + f.z * c))
									: (this.getThreeJsObjects()[0].position.set(i.x, i.y, i.z),
									  (y[0] = 0 - f.x * c),
									  (y[1] = 0 - f.y * c),
									  (y[2] = 0 - f.z * c),
									  (y[3] = 0 + f.x * c),
									  (y[4] = 0 + f.y * c),
									  (y[5] = 0 + f.z * c),
									  (y[6] = -d.x * (1 - u) - f.x * l),
									  (y[7] = -d.y * (1 - u) - f.y * l),
									  (y[8] = -d.z * (1 - u) - f.z * l),
									  (y[9] = -d.x * (1 - u) + f.x * l),
									  (y[10] = -d.y * (1 - u) + f.y * l),
									  (y[11] = -d.z * (1 - u) + f.z * l),
									  (y[12] = -d.x - f.x * s),
									  (y[13] = -d.y - f.y * s),
									  (y[14] = -d.z - f.z * s),
									  (y[15] = -d.x + f.x * s),
									  (y[16] = -d.y + f.y * s),
									  (y[17] = -d.z + f.z * s)),
									(g.needsUpdate = !0),
									(y = (g = this.getThreeJsObjects()[0].geometry.getAttribute('uv')).array),
									this._textureRepeat
										? (this._widthUnits,
										  o < a
												? ((y[0] = 0),
												  (y[1] = 0),
												  (y[2] = 1),
												  (y[3] = 0),
												  (y[4] = 0),
												  (y[5] = m * u),
												  (y[6] = 1),
												  (y[7] = m * u),
												  (y[8] = 0),
												  (y[9] = m),
												  (y[10] = 1),
												  (y[11] = m))
												: ((y[0] = 0),
												  (y[1] = 0),
												  (y[2] = 1),
												  (y[3] = 0),
												  (y[4] = 0),
												  (y[5] = m * (1 - u)),
												  (y[6] = 1),
												  (y[7] = m * (1 - u)),
												  (y[8] = 0),
												  (y[9] = m),
												  (y[10] = 1),
												  (y[11] = m)))
										: o < a
										? ((y[0] = 0),
										  (y[1] = 1),
										  (y[2] = 1),
										  (y[3] = 1),
										  (y[4] = 0),
										  (y[5] = 1 - u),
										  (y[6] = 1),
										  (y[7] = 1 - u),
										  (y[8] = 0),
										  (y[9] = 0),
										  (y[10] = 1),
										  (y[11] = 0))
										: ((y[0] = 0),
										  (y[1] = 0),
										  (y[2] = 1),
										  (y[3] = 0),
										  (y[4] = 0),
										  (y[5] = 1 - u),
										  (y[6] = 1),
										  (y[7] = 1 - u),
										  (y[8] = 0),
										  (y[9] = 1),
										  (y[10] = 1),
										  (y[11] = 1)),
									(g.needsUpdate = !0),
									yt.pool.release(r),
									yt.pool.release(i),
									yt.pool.release(d),
									yt.pool.release(f);
							} else this.getThreeJsObjects()[0].visible = !1;
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function connected_sprite_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											connected_sprite_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											connected_sprite_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e, n;
									return regeneratorRuntime.wrap(
										function _callee$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														return (r.next = 2), Ut.loadTexture(this, this._textureUrl, !1, !1);
													case 2:
														if (
															(((t = r.sent).wrapT = i.RepeatWrapping),
															(this._textureAspectRatio = t.image.width / t.image.height),
															'loading' === this.getLoadState())
														) {
															r.next = 8;
															break;
														}
														return t.dispose(), r.abrupt('return');
													case 8:
														(e = this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded('sprite')),
															this.getThreeJsMaterials().push(e),
															Ut.setBlending(this.getThreeJsMaterials()[0], this._blending),
															Ut.setUniformColorRGBA(e, 'color', this._colorMultiplier, 1),
															Ut.setUniformTexture(e, 'colorTexture', t),
															(n = Ut.createMeshObject(this, e, [
																{ name: 'position', dimensions: 3 },
																{ name: 'uv', dimensions: 2 }
															])),
															this.getThreeJsObjects().push(n),
															Ut.setVertices(n.geometry, 'position', new Float32Array(18)),
															Ut.setVertices(n.geometry, 'uv', new Float32Array(12)),
															Ut.setIndices(n.geometry, new Uint16Array([0, 2, 3, 3, 1, 0, 2, 4, 5, 5, 3, 2]));
													case 18:
													case 'end':
														return r.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this);
						}
					}
				]),
				ConnectedSpriteComponent
			);
		})();
		function div_component_typeof(t) {
			return (div_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function div_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function div_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== div_component_typeof(e) && 'function' != typeof e)
				? (function div_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function div_component_getPrototypeOf(t) {
			return (div_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function div_component_setPrototypeOf(t, e) {
			return (div_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ae = (function (t) {
			function DivComponent(t, e, n) {
				var r;
				return (
					(function div_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, DivComponent),
					((r = div_component_possibleConstructorReturn(
						this,
						div_component_getPrototypeOf(DivComponent).call(this, t, e, n)
					))._activeCamera = null),
					(r._fadeWhenCloseToCamera = !0),
					(r._fadeWhenCloseToParent = !0),
					(r._div = document.createElement('div')),
					(r._div.style.position = 'absolute'),
					(r._div.style.left = '0'),
					(r._div.style.top = '0'),
					(r._div.style.transform = 'translate(0%, 0%);'),
					(r._alignment = new st(0, 0.5)),
					r._alignment.freeze(),
					(r._sizeInPx = new st(0, 0)),
					(r._currentHTML = ''),
					r.__setRadius(Number.POSITIVE_INFINITY),
					r
				);
			}
			return (
				(function div_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && div_component_setPrototypeOf(t, e);
				})(DivComponent, ye),
				(function div_component_createClass(t, e, n) {
					return e && div_component_defineProperties(t.prototype, e), n && div_component_defineProperties(t, n), t;
				})(DivComponent, [
					{
						key: 'getDiv',
						value: function getDiv() {
							return this._div;
						}
					},
					{
						key: 'getActiveCamera',
						value: function getActiveCamera() {
							return this._activeCamera;
						}
					},
					{
						key: 'setActiveCamera',
						value: function setActiveCamera(t) {
							(this._activeCamera = t), this.resetResources();
						}
					},
					{
						key: 'getFadeWhenCloseToCamera',
						value: function getFadeWhenCloseToCamera() {
							return this._fadeWhenCloseToCamera;
						}
					},
					{
						key: 'setFadeWhenCloseToCamera',
						value: function setFadeWhenCloseToCamera(t) {
							this._fadeWhenCloseToCamera = t;
						}
					},
					{
						key: 'getFadeWhenCloseToParent',
						value: function getFadeWhenCloseToParent() {
							return this._fadeWhenCloseToParent;
						}
					},
					{
						key: 'setFadeWhenCloseToParent',
						value: function setFadeWhenCloseToParent(t) {
							this._fadeWhenCloseToParent = t;
						}
					},
					{
						key: 'getAlignment',
						value: function getAlignment() {
							return this._alignment;
						}
					},
					{
						key: 'setAlignment',
						value: function setAlignment(t) {
							this._alignment.thaw(), this._alignment.copy(t), this._alignment.freeze();
						}
					},
					{
						key: '__loadResources',
						value: function __loadResources() {
							return Promise.resolve();
						}
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							null !== this._div.parentNode && this._div.parentNode.removeChild(this._div);
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							if (null === this._activeCamera) {
								var e = this.getEntity().getScene().getEngine().getViewport(0);
								null !== e && (this._activeCamera = e.getCamera());
							}
							if (
								this._activeCamera === t &&
								null !== this._activeCamera &&
								null !== this._activeCamera.getViewport()
							) {
								this._activeCamera.getViewport().getDiv() !== this._div.parentNode &&
									this._activeCamera.getViewport().getDiv().appendChild(this._div);
								var n = 1;
								if (n > 0 && this._fadeWhenCloseToCamera) {
									var r = this.getEntity().getNormalSpaceExtentsRadius(t);
									n *= T.clamp01((0.02 - r) / 0.02);
								}
								var i = this.getEntity().getCameraSpacePosition(t);
								if (n > 0 && this._fadeWhenCloseToParent && null !== this.getEntity().getParent())
									for (var o = this.getEntity().getParent(); null !== o; ) {
										if (null !== o.get('div')) {
											var a = yt.pool.get();
											a.sub(this.getEntity().getNormalSpacePosition(t), o.getNormalSpacePosition(t));
											var s = a.magnitude();
											yt.pool.release(a),
												o.getNormalSpaceExtentsRadius(t) < 0.02 && (n *= T.clamp01((s - 0.02) / 0.02));
											break;
										}
										o = o.getParent();
									}
								if (
									(n > 0 &&
										(null !== this.getEntity().getParent() && this.getEntity().getParent().isOccludingPosition(t, i)
											? (n = 0)
											: t.isPositionOccluded(i) && (n = 0)),
									n > 0)
								) {
									var l = yt.pool.get();
									t.getEntity().getOrientation().getAxis(l, 1),
										l.dot(this.getEntity().getCameraSpacePosition(t)) <= 0 && (n = 0),
										yt.pool.release(l);
								}
								if (this._div.style.opacity !== '' + n) {
									if (0 === n || isNaN(n)) return void (this._div.style.visibility = 'hidden');
									(this._div.style.opacity = '' + n), (this._div.style.visibility = 'visible');
								}
								this._currentHTML !== this._div.innerHTML &&
									(this._sizeInPx.set(this._div.offsetWidth, this._div.offsetHeight),
									(this._currentHTML = this._div.innerHTML));
								var c = t.getViewport().getBounds(),
									u = this.getEntity().getPixelSpacePosition(t),
									_ = u.x - this._sizeInPx.x * this._alignment.x - c.origin.x,
									p = u.y - this._sizeInPx.y * this._alignment.y - c.origin.y;
								this._div.style.transform = 'translate('.concat(_, 'px, ').concat(p, 'px)');
							}
						}
					}
				]),
				DivComponent
			);
		})();
		function dynamic_environment_map_component_typeof(t) {
			return (dynamic_environment_map_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function dynamic_environment_map_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function dynamic_environment_map_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== dynamic_environment_map_component_typeof(e) && 'function' != typeof e)
				? (function dynamic_environment_map_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function dynamic_environment_map_component_get(t, e, n) {
			return (dynamic_environment_map_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function dynamic_environment_map_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) &&
									null !== (t = dynamic_environment_map_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function dynamic_environment_map_component_getPrototypeOf(t) {
			return (dynamic_environment_map_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function dynamic_environment_map_component_setPrototypeOf(t, e) {
			return (dynamic_environment_map_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Re = (function (t) {
				function DynamicEnvironmentMapComponent(t, e, n) {
					var r;
					return (
						(function dynamic_environment_map_component_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, DynamicEnvironmentMapComponent),
						((r = dynamic_environment_map_component_possibleConstructorReturn(
							this,
							dynamic_environment_map_component_getPrototypeOf(DynamicEnvironmentMapComponent).call(this, t, e, n)
						))._faceSize = 64),
						(r._threeJsRenderer = r.getEntity().getScene().getEngine().__getThreeJsRenderer()),
						(r._threeJsFaceCameras = []),
						(r._threeJsFaceRenderTargets = []),
						(r._threeJsQuad = new i.Mesh()),
						(r._threeJsScene = new i.Scene()),
						(r._threeJsCubeCamera = new i.OrthographicCamera(-1, 1, -1, 1, -1, 1)),
						(r._envMapTexture = new i.WebGLRenderTarget(4 * r._faceSize, 4 * r._faceSize, {
							minFilter: i.LinearFilter,
							magFilter: i.LinearFilter,
							wrapS: i.ClampToEdgeWrapping,
							wrapT: i.ClampToEdgeWrapping
						})),
						r._setupFaceCameras(),
						r._setupQuad(),
						r
					);
				}
				return (
					(function dynamic_environment_map_component_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && dynamic_environment_map_component_setPrototypeOf(t, e);
					})(DynamicEnvironmentMapComponent, ye),
					(function dynamic_environment_map_component_createClass(t, e, n) {
						return (
							e && dynamic_environment_map_component_defineProperties(t.prototype, e),
							n && dynamic_environment_map_component_defineProperties(t, n),
							t
						);
					})(DynamicEnvironmentMapComponent, [
						{
							key: 'getFaceSize',
							value: function getFaceSize() {
								return this._faceSize;
							}
						},
						{
							key: 'setFaceSize',
							value: function setFaceSize(t) {
								(this._faceSize = t),
									this._envMapTexture.width !== 4 * this._faceSize &&
										(this._envMapTexture.setSize(4 * this._faceSize, 4 * this._faceSize),
										(this._threeJsQuad.material.uniforms.faceSize.value = this._faceSize));
								for (var e = 0; e < 6; e++) this._threeJsFaceRenderTargets[e].setSize(this._faceSize, this._faceSize);
							}
						},
						{
							key: 'getTexture',
							value: function getTexture() {
								return this._envMapTexture.texture;
							}
						},
						{
							key: '__destroy',
							value: function __destroy() {
								this._threeJsQuad.geometry.dispose(),
									this._threeJsQuad.material.dispose(),
									this._envMapTexture.dispose();
								for (var t = 0; t < this._threeJsFaceRenderTargets.length; t++)
									this._threeJsFaceRenderTargets[t].dispose();
								dynamic_environment_map_component_get(
									dynamic_environment_map_component_getPrototypeOf(DynamicEnvironmentMapComponent.prototype),
									'__destroy',
									this
								).call(this);
							}
						},
						{
							key: '__render',
							value: function __render() {
								this._updateProjectionMatrix();
								var t = 0.7071067811865476;
								Ie.set(0, 0, -t, t),
									this._threeJsFaceCameras[0].setRotationFromQuaternion(Ie),
									Ie.set(0, 0, 0, 1),
									this._threeJsFaceCameras[1].setRotationFromQuaternion(Ie),
									Ie.set(0, 0, t, t),
									this._threeJsFaceCameras[2].setRotationFromQuaternion(Ie),
									Ie.set(0, 0, 1, 0),
									this._threeJsFaceCameras[3].setRotationFromQuaternion(Ie),
									Ie.set(0.5, -0.5, -0.5, 0.5),
									this._threeJsFaceCameras[4].setRotationFromQuaternion(Ie),
									Ie.set(-0.5, 0.5, -0.5, 0.5),
									this._threeJsFaceCameras[5].setRotationFromQuaternion(Ie);
								for (var e = 0; e < 6; e++)
									this._threeJsRenderer.setRenderTarget(this._threeJsFaceRenderTargets[e]),
										this._threeJsRenderer.render(
											this.getEntity().getScene().getThreeJsScene(),
											this._threeJsFaceCameras[e]
										);
								this._threeJsRenderer.setRenderTarget(this._envMapTexture),
									this._threeJsRenderer.render(this._threeJsScene, this._threeJsCubeCamera);
							}
						},
						{
							key: '_setupFaceCameras',
							value: function _setupFaceCameras() {
								for (var t = 0; t < 6; t++) {
									this._threeJsFaceCameras.push(new i.PerspectiveCamera(90, 1, 0.1, 1e3));
									var e = new i.Matrix4();
									e.set(1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0),
										(this._threeJsFaceCameras[t].projectionMatrix = e);
									var n = new i.Matrix4();
									n.set(1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0),
										(this._threeJsFaceCameras[t].projectionMatrixInverse = n),
										this._threeJsFaceCameras[t].layers.set(1);
									var r = new i.WebGLRenderTarget(this._faceSize, this._faceSize, {
										minFilter: i.LinearFilter,
										magFilter: i.LinearFilter
									});
									this._threeJsFaceRenderTargets.push(r);
								}
							}
						},
						{
							key: '_updateProjectionMatrix',
							value: function _updateProjectionMatrix() {
								var t = this.getEntity().get('camera');
								if (t instanceof Te)
									for (
										var e = 1 - Number.EPSILON, n = -t.getAutoNearDistance() * (2 - Number.EPSILON), r = 0;
										r < 6;
										r++
									)
										(this._threeJsFaceCameras[r].projectionMatrix.elements[6] = e),
											(this._threeJsFaceCameras[r].projectionMatrix.elements[14] = n),
											(this._threeJsFaceCameras[r].projectionMatrixInverse.elements[11] = 1 / n),
											(this._threeJsFaceCameras[r].projectionMatrixInverse.elements[15] = -e / n);
							}
						},
						{
							key: '_setupQuad',
							value: function _setupQuad() {
								var t = new i.BufferGeometry(),
									e = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]),
									n = new Uint16Array([0, 1, 2, 0, 2, 3]);
								t.setAttribute('position', new i.BufferAttribute(e, 2)), t.setIndex(new i.BufferAttribute(n, 1));
								for (
									var r = { textures: new i.Uniform([]), faceSize: new i.Uniform(this._faceSize) }, o = 0;
									o < 6;
									o++
								)
									r.textures.value.push(this._threeJsFaceRenderTargets[o].texture);
								var a = new i.RawShaderMaterial({
									uniforms: r,
									vertexShader:
										'\n\t\t\t\tattribute vec2 position;\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\t\t\t\t\txy = position;\n\t\t\t\t}',
									fragmentShader:
										"\n\t\t\t\tprecision mediump float;\n\t\t\t\tuniform sampler2D textures[6];\n\t\t\t\tuniform float faceSize;\n\n\t\t\t\tvarying vec2 xy;\n\n\t\t\t\tvoid adjustTextureCoordsForBorders(inout int textureIndex, inout vec2 xyInTexture, in float pixelSize) {\n\t\t\t\t\t// Get the pixells in pixel-space.\n\t\t\t\t\tvec2 xyInPixels = xyInTexture * pixelSize;\n\n\t\t\t\t\t// Flip the x since this code is for surface cubes, but we're inside out.\n\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\n\t\t\t\t\t// If it's a border, adjust the pixel it's reading the next pixel in one face over.\n\t\t\t\t\t// This allows for nice linear filtering to happen on the material side of things.\n\t\t\t\t\tif (xyInPixels.x < 0.6 || xyInPixels.x > pixelSize - 0.6 || xyInPixels.y < 0.6 || xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\tif (0 <= textureIndex && textureIndex <= 3) { // One of the horizontal faces\n\t\t\t\t\t\t\tif (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = (textureIndex + 1);\n\t\t\t\t\t\t\t\tif (textureIndex == 4) {\n\t\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = textureIndex - 1;\n\t\t\t\t\t\t\t\tif (textureIndex == -1) {\n\t\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 0) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 1) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 2) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 3) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 4) {\n\t\t\t\t\t\t\tif (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 5) {\n\t\t\t\t\t\t\tif (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Shrink all pixels so that they fit within the border.\n\t\t\t\t\t// The border pixels have already been modified so that they work with this equation.\n\t\t\t\t\txyInPixels.x = ((pixelSize - 1.0) * xyInPixels.x - pixelSize) / (pixelSize - 3.0);\n\t\t\t\t\txyInPixels.y = ((pixelSize - 1.0) * xyInPixels.y - pixelSize) / (pixelSize - 3.0);\n\n\t\t\t\t\t// Flip the x back.\n\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\n\t\t\t\t\t// Go back into unit-space.\n\t\t\t\t\txyInTexture = xyInPixels / pixelSize;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\t// Make it pink everywhere else for easy debugging.\n\t\t\t\t\tvec3 color = vec3(1.0, 0.0, 0.5);\n\t\t\t\t\t// Get the mip level, size, and offset.\n\t\t\t\t\tfloat level = floor(1.0 - log2(1.0 - xy.y)); // 0 is base, then 1, etc.\n\t\t\t\t\tfloat mipSizeX = pow(2.0, -level); // 1, .5, .25, .125, etc.\n\t\t\t\t\tfloat mipOffsetY = 1.0 - pow(2.0, -level); // 0, .5, .75, .875, etc.\n\t\t\t\t\t// Get the xy within the mip level. Note the x value is * 3 for less computing further on.\n\t\t\t\t\tvec2 xyInMip;\n\t\t\t\t\txyInMip.x = 0.5 * (xy.x + 1.0) / mipSizeX * 4.0;\n\t\t\t\t\txyInMip.y = (xy.y + 1.0 - 2.0 * mipOffsetY) / mipSizeX;\n\t\t\t\t\tif (xyInMip.x <= 3.0) {\n\t\t\t\t\t\tint textureIndex = int(floor(xyInMip.y * 2.0) * 3.0 + floor(xyInMip.x));\n\t\t\t\t\t\t// Get the xy within the face/texture.\n\t\t\t\t\t\tvec2 xyInTexture;\n\t\t\t\t\t\txyInTexture.x = 1.0 - xyInMip.x + floor(xyInMip.x);\n\t\t\t\t\t\txyInTexture.y = 2.0 * (xyInMip.y - floor(xyInMip.y * 2.0) / 2.0);\n\t\t\t\t\t\t// Adjust the coordinates and face to account for borders.\n\t\t\t\t\t\tadjustTextureCoordsForBorders(textureIndex, xyInTexture, faceSize * mipSizeX);\n\t\t\t\t\t\t// Set the color based on the face (textureIndex) and the coords.\n\t\t\t\t\t\tfor (int i = 0; i < 6; i++) {\n\t\t\t\t\t\t\tif (i == textureIndex) {\n\t\t\t\t\t\t\t\tcolor = texture2D(textures[i], xyInTexture).rgb;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(color, 1.0);\n\t\t\t\t}",
									depthTest: !1,
									depthWrite: !1
								});
								(this._threeJsQuad = new i.Mesh(t, a)),
									(this._threeJsQuad.frustumCulled = !1),
									this._threeJsScene.add(this._threeJsQuad);
							}
						}
					]),
					DynamicEnvironmentMapComponent
				);
			})(),
			Ie = new i.Quaternion(),
			Me = Re;
		function gizmo_component_typeof(t) {
			return (gizmo_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function gizmo_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function gizmo_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== gizmo_component_typeof(e) && 'function' != typeof e)
				? (function gizmo_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function gizmo_component_getPrototypeOf(t) {
			return (gizmo_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function gizmo_component_setPrototypeOf(t, e) {
			return (gizmo_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Le = (function (t) {
			function GizmoComponent(t, e, n) {
				var r;
				return (
					(function gizmo_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, GizmoComponent),
					((r = gizmo_component_possibleConstructorReturn(
						this,
						gizmo_component_getPrototypeOf(GizmoComponent).call(this, t, e, n)
					))._size = void 0),
					(r._relativeToEntity = !0),
					(r._joint = ''),
					(r._jointObject = null),
					(r._model = null),
					(r._lineMesh = null),
					r.__setRadius(2 * n.getExtentsRadius()),
					r.__setUsesEntityOrientation(r._relativeToEntity),
					r
				);
			}
			return (
				(function gizmo_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && gizmo_component_setPrototypeOf(t, e);
				})(GizmoComponent, ye),
				(function gizmo_component_createClass(t, e, n) {
					return e && gizmo_component_defineProperties(t.prototype, e), n && gizmo_component_defineProperties(t, n), t;
				})(GizmoComponent, [
					{
						key: 'getSize',
						value: function getSize() {
							return void 0 !== this._size ? this._size : Math.max(1e-4, 2 * this.getEntity().getExtentsRadius());
						}
					},
					{
						key: 'setSize',
						value: function setSize(t) {
							(this._size = t), this.__setRadius(this.getSize());
						}
					},
					{
						key: 'isRelativeToEntity',
						value: function isRelativeToEntity() {
							return this._relativeToEntity;
						}
					},
					{
						key: 'setRelativeToEntity',
						value: function setRelativeToEntity(t) {
							(this._relativeToEntity = t), this.__setUsesEntityOrientation(this._relativeToEntity);
						}
					},
					{
						key: 'setJoint',
						value: function setJoint(t, e) {
							if (((this._joint = t), e)) this._model = e;
							else {
								var n = this.getEntity().get('model');
								n instanceof De && (this._model = n);
							}
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							if (
								('' === this._joint ||
									(null !== this._jointObject && this._jointObject.name === this._joint) ||
									null === this._model ||
									(this._jointObject = this._model.getThreeJsObjectByName(this._joint)),
								null !== this._jointObject)
							) {
								var e = yt.pool.get(),
									n = this._jointObject;
								for (
									GizmoComponent._tempThreeJsVector3.copy(n.position),
										GizmoComponent._tempThreeJsQuaternion.copy(n.quaternion);
									null !== n.parent && n.parent !== this._model.getThreeJsObjects()[0];

								)
									(n = n.parent),
										GizmoComponent._tempThreeJsVector3.add(n.position),
										GizmoComponent._tempThreeJsQuaternion.multiplyQuaternions(
											n.quaternion,
											GizmoComponent._tempThreeJsQuaternion
										);
								e.copyFromThreeJs(GizmoComponent._tempThreeJsVector3),
									e.mult(e, 0.001),
									e.rotate(this._model.getRotation(), e),
									Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t, e, !0),
									yt.pool.release(e);
								var r = tt.pool.get();
								r.copyFromThreeJs(GizmoComponent._tempThreeJsQuaternion),
									r.mult(this._model.getRotation(), r),
									Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity(), r),
									tt.pool.release(r);
							} else
								this._relativeToEntity
									? Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity())
									: Ut.setOrientation(this.getThreeJsObjects()[0], tt.Identity),
									Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
							Ut.setScale(this.getThreeJsObjects()[0], this.getSize()), this._lineMesh.prepareForRender(t);
						}
					},
					{
						key: '__loadResources',
						value: function __loadResources() {
							this._lineMesh = new Ot(this);
							var t = [];
							t.push(new yt(0, 0, 0)),
								t.push(new yt(1, 0, 0)),
								t.push(new yt(0, 0, 0)),
								t.push(new yt(0, 1, 0)),
								t.push(new yt(0, 0, 0)),
								t.push(new yt(0, 0, 1)),
								this._lineMesh.setPositions(t);
							var e = [];
							e.push(new z(1, 0, 0)),
								e.push(new z(1, 0, 0)),
								e.push(new z(0, 1, 0)),
								e.push(new z(0, 1, 0)),
								e.push(new z(0, 0, 1)),
								e.push(new z(0, 0, 1)),
								this._lineMesh.setColors(e);
							var n = [];
							return (
								n.push(2),
								n.push(2),
								n.push(2),
								n.push(2),
								n.push(2),
								n.push(2),
								this._lineMesh.setWidths(n),
								Promise.resolve()
							);
						}
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this), (this._lineMesh = null);
						}
					}
				]),
				GizmoComponent
			);
		})();
		Le._tempThreeJsVector3 = new i.Vector3();
		var je = Le;
		function label_component_typeof(t) {
			return (label_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function label_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function label_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function label_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== label_component_typeof(e) && 'function' != typeof e)
				? (function label_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function label_component_getPrototypeOf(t) {
			return (label_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function label_component_setPrototypeOf(t, e) {
			return (label_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ze = (function (t) {
			function LabelComponent(t, e, n) {
				var r;
				!(function label_component_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, LabelComponent),
					((r = label_component_possibleConstructorReturn(
						this,
						label_component_getPrototypeOf(LabelComponent).call(this, t, e, n)
					))._text = '<PLACEHOLDER>'),
					(r._fontFamily = 'Arial'),
					(r._fontSize = 16),
					(r._color = new z()),
					r._color.freeze(),
					(r._ignoreDistance = !1),
					(r._alignment = new st(0, 0.5)),
					r._alignment.freeze(),
					(r._pixelOffset = new st(0, 0)),
					r._pixelOffset.freeze(),
					(r._pixelSize = new st()),
					(r._normalSpaceBounds = new Map()),
					(r._devicePixelRatio = 1),
					(r._canvas = null);
				var i = n.getScene().getEngine().getConfig().getValue('fontFamily');
				'string' == typeof i && (r._fontFamily = i);
				var o = n.getScene().getEngine().getConfig().getValue('fontSize');
				return 'number' == typeof o && (r._fontSize = o), r.__setRadius(Number.POSITIVE_INFINITY), r;
			}
			return (
				(function label_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && label_component_setPrototypeOf(t, e);
				})(LabelComponent, ye),
				(function label_component_createClass(t, e, n) {
					return e && label_component_defineProperties(t.prototype, e), n && label_component_defineProperties(t, n), t;
				})(LabelComponent, [
					{
						key: 'getText',
						value: function getText() {
							return this._text;
						}
					},
					{
						key: 'setText',
						value: function setText(t) {
							(this._text = t), this._updateText();
						}
					},
					{
						key: 'getFontFamily',
						value: function getFontFamily() {
							return this._fontFamily;
						}
					},
					{
						key: 'setFontFamily',
						value: function setFontFamily(t) {
							(this._fontFamily = t), this._updateText();
						}
					},
					{
						key: 'getFontSize',
						value: function getFontSize() {
							return this._fontSize;
						}
					},
					{
						key: 'setFontSize',
						value: function setFontSize(t) {
							(this._fontSize = t), this._updateText();
						}
					},
					{
						key: 'getColor',
						value: function getColor() {
							return this._color;
						}
					},
					{
						key: 'setColor',
						value: function setColor(t) {
							this._color.thaw(), this._color.copy(t), this._color.freeze();
						}
					},
					{
						key: 'setIgnoreDistance',
						value: function setIgnoreDistance(t) {
							this._ignoreDistance = t;
						}
					},
					{
						key: 'getAlignment',
						value: function getAlignment() {
							return this._alignment;
						}
					},
					{
						key: 'setAlignment',
						value: function setAlignment(t) {
							this._alignment.thaw(), this._alignment.copy(t), this._alignment.freeze(), this._updateText();
						}
					},
					{
						key: 'getPixelOffset',
						value: function getPixelOffset() {
							return this._pixelOffset;
						}
					},
					{
						key: 'setPixelOffset',
						value: function setPixelOffset(t) {
							this._pixelOffset.thaw(), this._pixelOffset.copy(t), this._pixelOffset.freeze();
						}
					},
					{
						key: 'getNormalSpaceBounds',
						value: function getNormalSpaceBounds(t) {
							return this._normalSpaceBounds.get(t);
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							var e = this.getEntity().getCameraSpacePosition(t),
								n = t.getViewport().getBounds().size,
								r = yt.pool.get(),
								i = tt.pool.get();
							i.inverse(t.getEntity().getOrientation()), r.rotate(i, e), tt.pool.release(i);
							var o = (2 * r.y * Math.tan(t.getFieldOfView() / 2)) / (Math.max(n.x, n.y) * this._devicePixelRatio);
							yt.pool.release(r);
							var a = yt.pool.get(),
								s = yt.pool.get(),
								l = yt.pool.get();
							t.getEntity().getOrientation().getAxis(a, 0),
								t.getEntity().getOrientation().getAxis(s, 2),
								l.mult(a, this._pixelOffset.x * o),
								l.addMult(l, s, this._pixelOffset.y * o),
								Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t, l, !1),
								yt.pool.release(a),
								yt.pool.release(s),
								this._normalSpaceBounds.has(t) || this._normalSpaceBounds.set(t, new Z());
							var c = this._normalSpaceBounds.get(t);
							c.thaw();
							var u = yt.pool.get();
							l.add(l, e),
								t.getNormalSpacePositionFromCameraSpacePosition(u, l),
								(c.origin.x = u.x - (this._pixelSize.x * this._alignment.x) / n.x),
								(c.origin.y = u.y - (this._pixelSize.y * this._alignment.y) / n.y),
								-1 <= u.z && u.z <= 1
									? (c.size.scaleInv(this._pixelSize, n), c.size.mult(c.size, 2))
									: c.size.set(0, 0),
								c.freeze(),
								yt.pool.release(u),
								yt.pool.release(l);
							var _ = 1,
								p = this.getEntity().getNormalSpaceExtentsRadius(t);
							if (
								(this._ignoreDistance || (_ *= T.clamp01((0.02 - p) / 0.02)), null !== this.getEntity().getParent())
							) {
								var h = t.getNormalSpaceRadiusFromRadius(this.getEntity().getPosition().magnitude(), e.magnitude()),
									d = this.getEntity().getParent().getNormalSpaceExtentsRadius(t);
								!this._ignoreDistance && d < 0.02 && (_ *= T.clamp01((h - 0.02) / 0.02));
							}
							if (
								(null !== this.getEntity().getParent() && this.getEntity().getParent().isOccludingPosition(t, e)
									? (_ = 0)
									: t.isPositionOccluded(e) && (_ = 0),
								0 !== _)
							) {
								var f = tt.pool.get();
								f.copy(t.getEntity().getOrientation());
								var m = tt.pool.get();
								m.set(Math.sqrt(0.5), Math.sqrt(0.5), 0, 0),
									f.mult(f, m),
									tt.pool.release(m),
									Ut.setOrientation(this.getThreeJsObjects()[0], f),
									tt.pool.release(f);
							}
							if ((0 === _ && (c.thaw(), c.size.set(0, 0), c.freeze()), 0 !== _)) {
								var g = st.pool.get();
								g.set(o * this._canvas.width, o * this._canvas.height),
									Ut.setUniformVector2(this.getThreeJsMaterials()[0], 'size', g),
									st.pool.release(g);
							}
							var y = z.pool.get();
							y.copy(this._color),
								(y.a *= _),
								Ut.setUniformColorRGBA(this.getThreeJsMaterials()[0], 'colorMultiplier', y),
								z.pool.release(y);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function label_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											label_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											label_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e;
									return regeneratorRuntime.wrap(
										function _callee$(n) {
											for (;;)
												switch ((n.prev = n.next)) {
													case 0:
														0 === LabelComponent._useCount &&
															((LabelComponent._threeJsGeometry = Ut.createGeometry([
																{ name: 'position', dimensions: 3 },
																{ name: 'uv', dimensions: 2 }
															])),
															Ut.setVertices(
																LabelComponent._threeJsGeometry,
																'position',
																new Float32Array([0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0])
															),
															Ut.setVertices(
																LabelComponent._threeJsGeometry,
																'uv',
																new Float32Array([0, 1, 1, 1, 1, 0, 0, 0])
															),
															Ut.setIndices(LabelComponent._threeJsGeometry, new Uint16Array([0, 1, 2, 2, 3, 0])),
															(LabelComponent._threeJsMaterial = new i.ShaderMaterial({
																uniforms: {
																	colorMultiplier: new i.Uniform(new i.Vector4(1, 1, 1, 1)),
																	size: new i.Uniform(new i.Vector2(1, 1)),
																	colorTexture: new i.Uniform(null),
																	origin: new i.Uniform(new i.Vector2(0, 0))
																},
																vertexShader:
																	'\n\t\t\t\t\tuniform vec2 size;\n\t\t\t\t\tuniform vec2 origin;\n\t\t\t\t\tvarying vec2 fUV;\n\t\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t#endif\n\t\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4((position.x - origin.x) * size.x, (position.y - origin.y) * size.y, 0.0, 1.0);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tfUV = uv;\n\t\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}',
																fragmentShader:
																	'\n\t\t\t\t\tuniform vec4 colorMultiplier;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tvarying vec2 fUV;\n\t\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\t\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, fUV);\n\t\t\t\t\t\tgl_FragColor *= colorMultiplier;\n\t\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}',
																side: i.DoubleSide
															})),
															Ut.setupLogDepthBuffering(LabelComponent._threeJsMaterial)),
															(LabelComponent._useCount += 1),
															(t = LabelComponent._threeJsMaterial.clone()),
															this.getThreeJsMaterials().push(t),
															Ut.setTransparent(t, !0),
															Ut.setOverlay(t, !0),
															Ut.setUniformColorRGBA(t, 'colorMultiplier', this._color),
															Ut.setUniformVector2(t, 'origin', this._alignment),
															(e = Ut.createMeshObjectGivenGeometry(this, t, LabelComponent._threeJsGeometry)),
															this.getThreeJsObjects().push(e),
															(this._canvas = document.createElement('canvas')),
															(this._canvas.width = 1),
															(this._canvas.height = 1),
															this._updateText();
													case 14:
													case 'end':
														return n.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							(LabelComponent._useCount -= 1),
								0 === LabelComponent._useCount &&
									(Ut.destroyGeometry(LabelComponent._threeJsGeometry),
									Ut.destroyMaterial(LabelComponent._threeJsMaterial));
							var t = this.getThreeJsObjects()[0];
							null !== t.parent && t.parent.remove(t), this.getThreeJsMaterials()[0].dispose(), (this._canvas = null);
						}
					},
					{
						key: '_updateText',
						value: function _updateText() {
							if (null !== this._canvas) {
								var t = this._canvas.getContext('2d');
								(this._devicePixelRatio = window.devicePixelRatio),
									(t.font = this._fontSize + 'px ' + this._fontFamily);
								var e = t.measureText(this._text);
								this._pixelSize.set(e.width * this._devicePixelRatio, this._fontSize * this._devicePixelRatio);
								var n = T.ceilPow2(this._pixelSize.x),
									r = T.ceilPow2(this._pixelSize.y);
								(n === this._canvas.width && r === this._canvas.height) ||
									((this._canvas.width = n), (this._canvas.height = r)),
									t.clearRect(0, 0, this._canvas.width, this._canvas.height),
									(this._canvas.style.width = n / this._devicePixelRatio + 'px'),
									(this._canvas.style.height = r / this._devicePixelRatio + 'px'),
									(t.font = this._pixelSize.y + 'px ' + this._fontFamily),
									(t.fillStyle = 'rgba(255, 255, 255, 255)'),
									t.fillText(
										this._text,
										(this._canvas.width - this._pixelSize.x) * T.clamp01(this._alignment.x),
										this._canvas.height -
											0.1875 * this._pixelSize.y -
											(this._canvas.height - this._pixelSize.y) * T.clamp01(this._alignment.y)
									);
								var i = this.getThreeJsMaterials()[0];
								Ut.setUniformTexture(i, 'colorTexture', Ut.loadTextureFromCanvas(this._canvas)),
									Ut.setUniformVector2(i, 'origin', this._alignment);
							}
						}
					},
					{
						key: '__removeCameraDependents',
						value: function __removeCameraDependents(t) {
							this._normalSpaceBounds.delete(t);
						}
					},
					{
						key: '__clearCameraDependents',
						value: function __clearCameraDependents() {
							this._normalSpaceBounds.clear();
						}
					}
				]),
				LabelComponent
			);
		})();
		(ze._threeJsMaterial = null), (ze._threeJsGeometry = null), (ze._useCount = 0);
		var Ne = ze;
		function light_source_component_typeof(t) {
			return (light_source_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function light_source_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function light_source_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== light_source_component_typeof(e) && 'function' != typeof e)
				? (function light_source_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function light_source_component_get(t, e, n) {
			return (light_source_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function light_source_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) &&
									null !== (t = light_source_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function light_source_component_getPrototypeOf(t) {
			return (light_source_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function light_source_component_setPrototypeOf(t, e) {
			return (light_source_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Fe = (function (t) {
			function LightSourceComponent(t, e, n) {
				var r;
				return (
					(function light_source_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, LightSourceComponent),
					((r = light_source_component_possibleConstructorReturn(
						this,
						light_source_component_getPrototypeOf(LightSourceComponent).call(this, t, e, n)
					))._color = new z(1, 1, 1)),
					r._color.freeze(),
					(r._absoluteMagnitude = 1),
					r.__setRadius(Number.POSITIVE_INFINITY),
					r
				);
			}
			return (
				(function light_source_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && light_source_component_setPrototypeOf(t, e);
				})(LightSourceComponent, ye),
				(function light_source_component_createClass(t, e, n) {
					return (
						e && light_source_component_defineProperties(t.prototype, e),
						n && light_source_component_defineProperties(t, n),
						t
					);
				})(LightSourceComponent, [
					{
						key: 'getColor',
						value: function getColor() {
							return this._color;
						}
					},
					{
						key: 'setColor',
						value: function setColor(t) {
							this._color.thaw(), this._color.copy(t), this._color.freeze();
						}
					},
					{
						key: 'getAbsoluteMagnitude',
						value: function getAbsoluteMagnitude() {
							return this._absoluteMagnitude;
						}
					},
					{
						key: 'setAbsoluteMagnitude',
						value: function setAbsoluteMagnitude(t) {
							this._absoluteMagnitude = t;
						}
					},
					{
						key: '__loadResources',
						value: function __loadResources() {
							return (
								this.getEntity().getScene().__addLightSource(this.getEntity().getName(), this.getTypeIndex()),
								Promise.resolve()
							);
						}
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							this.getEntity().getScene().__removeLightSource(this.getEntity().getName(), this.getTypeIndex());
						}
					},
					{
						key: '__setTypeIndex',
						value: function __setTypeIndex(t) {
							'loaded' === this.getLoadState() &&
								this.getEntity().getScene().__removeLightSource(this.getEntity().getName(), this.getTypeIndex()),
								light_source_component_get(
									light_source_component_getPrototypeOf(LightSourceComponent.prototype),
									'__setTypeIndex',
									this
								).call(this, t),
								'loaded' === this.getLoadState() &&
									this.getEntity().getScene().__addLightSource(this.getEntity().getName(), this.getTypeIndex());
						}
					}
				]),
				LightSourceComponent
			);
		})();
		function model_component_typeof(t) {
			return (model_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function model_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function model_component_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						model_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						model_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function model_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function model_component_getPrototypeOf(t) {
			return (model_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function model_component_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function model_component_setPrototypeOf(t, e) {
			return (model_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var De = (function (t) {
			function ModelComponent(t, e, n) {
				var r;
				return (
					(function model_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ModelComponent),
					((r = (function model_component_possibleConstructorReturn(t, e) {
						return !e || ('object' !== model_component_typeof(e) && 'function' != typeof e)
							? model_component_assertThisInitialized(t)
							: e;
					})(this, model_component_getPrototypeOf(ModelComponent).call(this, t, e, n)))._url = ''),
					(r._shadowEntities = []),
					(r._translation = new yt()),
					r._translation.freeze(),
					(r._rotation = new tt()),
					r._rotation.freeze(),
					(r._urlReferenceMap = new Map()),
					(r._threeJsAnimationClips = new Map()),
					(r._hiddenObjects = new F()),
					(r._scale = new yt(0.001, 0.001, 0.001)),
					r._scale.freeze(),
					(r._modelRadius = NaN),
					(r._environmentCubemapUrl = ''),
					(r._environmentCylindricalUrl = ''),
					(r._environmentCubemap = null),
					(r._environmentIntensity = 0.5),
					(r._dynamicEnvironmentMapComponent = null),
					(r._useCompressedTextures = !1),
					(r._onConfigChanged = r._onConfigChanged.bind(model_component_assertThisInitialized(r))),
					r.__setRadius(r.getEntity().getExtentsRadius()),
					r
				);
			}
			return (
				(function model_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && model_component_setPrototypeOf(t, e);
				})(ModelComponent, ye),
				(function model_component_createClass(t, e, n) {
					return e && model_component_defineProperties(t.prototype, e), n && model_component_defineProperties(t, n), t;
				})(ModelComponent, [
					{
						key: 'getUrl',
						value: function getUrl() {
							return this._url;
						}
					},
					{
						key: 'setUrl',
						value: function setUrl(t) {
							'' !== this._url && this.getEntity().getScene().getEngine().getDownloader().cancel(this._url),
								this.resetResources(),
								(this._modelRadius = NaN),
								(this._loading = !1),
								(this._url = t);
						}
					},
					{
						key: 'setHiddenObject',
						value: function setHiddenObject(t, e) {
							e && !this._hiddenObjects.has(t)
								? this._hiddenObjects.set(t, null)
								: !e && this._hiddenObjects.has(t) && this._hiddenObjects.delete(t);
						}
					},
					{
						key: 'getTranslation',
						value: function getTranslation() {
							return this._translation;
						}
					},
					{
						key: 'setTranslation',
						value: function setTranslation(t) {
							this._translation.thaw(), (this._translation = t), this._translation.freeze();
						}
					},
					{
						key: 'getScale',
						value: function getScale() {
							return this._scale;
						}
					},
					{
						key: 'setScale',
						value: function setScale(t) {
							this._scale.thaw(),
								'number' == typeof t ? this._scale.set(t, t, t) : this._scale.copy(t),
								this._scale.freeze(),
								Ut.setScale(this.getThreeJsObjects()[0], this._scale),
								isNaN(this._modelRadius)
									? this.__setRadius(this.getEntity().getExtentsRadius())
									: this.__setRadius(Math.max(this._scale.x, this._scale.y, this._scale.z) * this._modelRadius);
						}
					},
					{
						key: 'getRotation',
						value: function getRotation() {
							return this._rotation;
						}
					},
					{
						key: 'setRotation',
						value: function setRotation(t) {
							this._rotation.thaw(), this._rotation.copy(t), this._rotation.freeze();
						}
					},
					{
						key: 'getEnvironmentCubemapUrl',
						value: function getEnvironmentCubemapUrl() {
							return this._environmentCubemapUrl;
						}
					},
					{
						key: 'setEnvironmentCubemapUrl',
						value: function setEnvironmentCubemapUrl(t) {
							this._environmentCubemapUrl = t;
						}
					},
					{
						key: 'getEnvironmentIntensity',
						value: function getEnvironmentIntensity() {
							return this._environmentIntensity;
						}
					},
					{
						key: 'setEnvironmentIntensity',
						value: function setEnvironmentIntensity(t) {
							this._environmentIntensity = t;
							for (var e = 0, n = this.getThreeJsMaterials().length; e < n; e++)
								Ut.setUniformNumber(this.getThreeJsMaterials()[e], 'environmentIntensity', this._environmentIntensity);
						}
					},
					{
						key: 'getEnvironmentCylindricalUrl',
						value: function getEnvironmentCylindricalUrl() {
							return this._environmentCylindricalUrl;
						}
					},
					{
						key: 'setEnvironmentCylindricalUrl',
						value: function setEnvironmentCylindricalUrl(t) {
							this._environmentCylindricalUrl = t;
						}
					},
					{
						key: 'setDynamicEnvironmentMapComponent',
						value: function setDynamicEnvironmentMapComponent(t) {
							this._dynamicEnvironmentMapComponent = t;
							for (var e = 0, n = this.getThreeJsMaterials().length; e < n; e++) {
								var r = this.getThreeJsMaterials()[e];
								void 0 !== r.uniforms.dynEnvTexture &&
									(Ut.setDefine(r, 'dynEnvMap', !0),
									Ut.setUniformTexture(r, 'dynEnvTexture', this._dynamicEnvironmentMapComponent.getTexture()),
									Ut.setUniformNumber(r, 'dynEnvFaceSize', t.getFaceSize()));
							}
							null !== this._environmentCubemap &&
								(this._environmentCubemap.dispose(), (this._environmentCubemap = null));
						}
					},
					{
						key: 'getUseCompressedTextures',
						value: function getUseCompressedTextures() {
							return this._useCompressedTextures;
						}
					},
					{
						key: 'setUseCompressedTextures',
						value: function setUseCompressedTextures(t) {
							this._useCompressedTextures = t;
						}
					},
					{
						key: 'setURLReferenceMap',
						value: function setURLReferenceMap(t) {
							this._urlReferenceMap.clear();
							var e = !0,
								n = !1,
								r = void 0;
							try {
								for (var i, o = t[Symbol.iterator](); !(e = (i = o.next()).done); e = !0) {
									var a = i.value;
									this._urlReferenceMap.set(a[0], a[1]);
								}
							} catch (t) {
								(n = !0), (r = t);
							} finally {
								try {
									e || null == o.return || o.return();
								} finally {
									if (n) throw r;
								}
							}
						}
					},
					{
						key: 'getAnimationClip',
						value: function getAnimationClip(t) {
							return this._threeJsAnimationClips.get(t) || null;
						}
					},
					{
						key: 'getMaterial',
						value: function getMaterial(t) {
							for (var e = this.getThreeJsMaterials(), n = 0, r = e.length; n < r; n++)
								if (e[n].name === t) return e[n];
							return null;
						}
					},
					{
						key: 'updateMaterial',
						value: function updateMaterial(t, e) {
							for (var n, r = this.getThreeJsMaterials(), o = 0; o < r.length; o++) {
								var a = r[o];
								if (a.name === t) {
									(n = a), r.splice(o, 1), r.push(e);
									break;
								}
							}
							if (!n) throw new Error('No material with the name '.concat(t, ' was found in ').concat(this, '.'));
							for (var s = 0, l = this.getThreeJsObjects().length; s < l; s++) {
								var c = this.getThreeJsObjects()[s];
								c instanceof i.Mesh && c.material === n && ((c.material = e), (c.material.name = t));
							}
						}
					},
					{
						key: 'getNumShadowEntities',
						value: function getNumShadowEntities() {
							return this._shadowEntities.length;
						}
					},
					{
						key: 'getShadowEntity',
						value: function getShadowEntity(t) {
							return this._shadowEntities[t];
						}
					},
					{
						key: 'setShadowEntities',
						value: function setShadowEntities(t) {
							this._shadowEntities = t.slice(0);
							for (var e = t.length > 0, n = 0, r = this.getThreeJsMaterials().length; n < r; n++)
								Ut.setDefine(this.getThreeJsMaterials()[n], 'shadowEntities', e);
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							for (var e = 0, n = this._hiddenObjects.size; e < n; e++) {
								var r = this._hiddenObjects.getAt(e);
								null === r.value && (r.value = this.getThreeJsObjectByName(r.key)),
									null !== r.value && (r.value.visible = !1);
							}
							Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t, this._translation, !0),
								Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity(), this._rotation);
							for (var i = 0, o = this._shadowEntities.length; i < o; i++) {
								var a = this._shadowEntities[i];
								if ('string' == typeof a) {
									var s = this.getEntity().getScene().get(a);
									s instanceof Wt && (this._shadowEntities[i] = s);
								}
							}
							jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, null, !1);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = model_component_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2() {
									var t,
										e,
										n,
										r,
										o,
										s = this;
									return regeneratorRuntime.wrap(
										function _callee2$(l) {
											for (;;)
												switch ((l.prev = l.next)) {
													case 0:
														return (
															(t = this.getEntity().getScene().getEngine()),
															(e = this._url.startsWith('blob:') || this._url.endsWith('.glb')),
															(l.prev = 2),
															(l.next = 5),
															t.getDownloader().download(this._url, e)
														);
													case 5:
														if (((n = l.sent), 'loading' === this.getLoadState() && 'cancelled' !== n.status)) {
															l.next = 10;
															break;
														}
														return l.abrupt('return');
													case 10:
														if ('failed' !== n.status) {
															l.next = 14;
															break;
														}
														throw new Error('Failed to load model component file "' + n.url + '": ' + n.errorMessage);
													case 14:
														if (
															n.actualUrl.endsWith('.gltf') ||
															n.actualUrl.endsWith('.glb') ||
															n.actualUrl.startsWith('blob:')
														) {
															l.next = 16;
															break;
														}
														throw new Error('Unknown model format.');
													case 16:
														return (
															(r = new i.LoadingManager()),
															0 === this._urlReferenceMap.size &&
																r.addHandler(
																	/.$/,
																	this._useCompressedTextures ? t.getTextureLoaderCompressed() : t.getTextureLoader()
																),
															r.setURLModifier(function (t) {
																var e = t.substring(t.lastIndexOf('/') + 1);
																return s._urlReferenceMap.has(e) ? s._urlReferenceMap.get(e) : t;
															}),
															(o = new a.a(r)),
															(l.next = 22),
															new Promise(function (e, r) {
																o.parse(
																	n.content,
																	i.LoaderUtils.extractUrlBase(n.actualUrl),
																	(function () {
																		var n = model_component_asyncToGenerator(
																			regeneratorRuntime.mark(function _callee(n) {
																				var r, o, a;
																				return regeneratorRuntime.wrap(function _callee$(l) {
																					for (;;)
																						switch ((l.prev = l.next)) {
																							case 0:
																								for (
																									r = n.scene,
																										s._populateThreeJsObjectsAndMaterials(n.scene),
																										'loading' !== s.getLoadState() &&
																											Ut.destroyAllObjectsAndMaterials(s),
																										s._clean(),
																										Ut.setupObject(s, r),
																										Ut.setScale(r, s._scale),
																										o = new i.Box3().setFromObject(r),
																										s._modelRadius = Math.max(o.min.length(), o.max.length()),
																										s.__setRadius(
																											Math.max(s._scale.x, s._scale.y, s._scale.z) * s._modelRadius
																										),
																										a = 0;
																									a < n.animations.length;
																									a++
																								)
																									s._threeJsAnimationClips.set(n.animations[a].name, n.animations[a]);
																								if (
																									null !== s._dynamicEnvironmentMapComponent ||
																									null !== s._environmentCubemap
																								) {
																									l.next = 19;
																									break;
																								}
																								if ('' === s._environmentCubemapUrl) {
																									l.next = 16;
																									break;
																								}
																								return (
																									(l.next = 14),
																									t
																										.getTextureLoader()
																										.loadCubeTexture(s._environmentCubemapUrl, !0)
																										.then(function (e) {
																											s._environmentCubemap = t.getTextureLoader().generateEnvMap(e);
																										})
																								);
																							case 14:
																								l.next = 19;
																								break;
																							case 16:
																								if ('' === s._environmentCylindricalUrl) {
																									l.next = 19;
																									break;
																								}
																								return (
																									(l.next = 19),
																									t
																										.getTextureLoader()
																										.loadTexture(s._environmentCylindricalUrl, !0)
																										.then(function (e) {
																											s._environmentCubemap = t.getTextureLoader().generateEnvMap(e);
																										})
																								);
																							case 19:
																								s._updateMaterials(),
																									s
																										.getEntity()
																										.getScene()
																										.getEngine()
																										.getConfig()
																										.addEventListener('gammaCorrection', s._onConfigChanged),
																									e();
																							case 22:
																							case 'end':
																								return l.stop();
																						}
																				}, _callee);
																			})
																		);
																		return function (t) {
																			return n.apply(this, arguments);
																		};
																	})(),
																	function (t) {
																		r(new Error('Error loading gltf: '.concat(t)));
																	}
																);
															})
														);
													case 22:
														l.next = 27;
														break;
													case 24:
														throw (
															((l.prev = 24),
															(l.t0 = l.catch(2)),
															new Error('While loading model "'.concat(this._url, '": ').concat(l.t0)))
														);
													case 27:
													case 'end':
														return l.stop();
												}
										},
										_callee2,
										this,
										[[2, 24]]
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							for (var t = 0, e = this._hiddenObjects.size; t < e; t++) this._hiddenObjects.getAt(t).value = null;
							this.getEntity()
								.getScene()
								.getEngine()
								.getConfig()
								.removeEventListener('gammaCorrection', this._onConfigChanged),
								Ut.destroyAllObjectsAndMaterials(this),
								(this._lineMesh = null);
						}
					},
					{
						key: '_populateThreeJsObjectsAndMaterials',
						value: function _populateThreeJsObjectsAndMaterials(t) {
							if ((this.getThreeJsObjects().push(t), t instanceof i.Mesh)) {
								var e = t.material;
								Array.isArray(e) || (e = [e]);
								var n = !0,
									r = !1,
									o = void 0;
								try {
									for (var a, s = e[Symbol.iterator](); !(n = (a = s.next()).done); n = !0) {
										for (var l = a.value, c = !1, u = 0, _ = this.getThreeJsMaterials().length; u < _; u++)
											if (this.getThreeJsMaterials()[u] === l) {
												c = !0;
												break;
											}
										c || this.getThreeJsMaterials().push(l);
									}
								} catch (t) {
									(r = !0), (o = t);
								} finally {
									try {
										n || null == s.return || s.return();
									} finally {
										if (r) throw o;
									}
								}
							}
							for (var p = 0; p < t.children.length; p++) this._populateThreeJsObjectsAndMaterials(t.children[p]);
						}
					},
					{
						key: '_clean',
						value: function _clean() {
							for (var t = /_(lamp|hemi)/i, e = 0; e < this.getThreeJsObjects().length; e++) {
								var n = this.getThreeJsObjects()[e];
								n.name.match(t) && (n.parent && n.parent.remove(n), this.getThreeJsObjects().splice(e, 1), e--);
							}
							for (var r = 0, o = this.getThreeJsObjects().length; r < o; r++) {
								var a = !1,
									s = this.getThreeJsObjects()[r];
								s instanceof i.Mesh &&
									s.geometry instanceof i.BufferGeometry &&
									(s.name.startsWith('_root') && (a = !0),
									s instanceof i.Mesh &&
										s.material instanceof i.Material &&
										'transparent' === s.material.name &&
										(a = !0),
									a && (s.geometry.deleteAttribute('position'), s.geometry.deleteAttribute('normal')));
							}
						}
					},
					{
						key: '_onConfigChanged',
						value: function _onConfigChanged() {
							this._updateMaterials();
						}
					},
					{
						key: '_updateMaterials',
						value: function _updateMaterials() {
							for (var t = 0, e = this.getThreeJsMaterials().length; t < e; t++) {
								var n = this.getThreeJsMaterials()[t];
								if (n instanceof i.MeshStandardMaterial) {
									var r = this._getNewPioneerMaterial(n);
									this.getThreeJsMaterials()[t] = r;
									var o = !1;
									r.defines.normalMap && (o = !0);
									var a = !0,
										s = !1,
										l = void 0;
									try {
										for (var c, u = this.getThreeJsObjects()[Symbol.iterator](); !(a = (c = u.next()).done); a = !0) {
											var _ = c.value;
											if (_ instanceof i.Mesh) {
												var p = !1;
												if (Array.isArray(_.material))
													for (var h = 0, d = _.material.length; h < d; h++)
														_.material[h] === n && ((_.material[h] = r), (p = !0));
												else _.material === n && ((_.material = r), (p = !0));
												p &&
													o &&
													_.geometry instanceof i.BufferGeometry &&
													void 0 === _.geometry.getAttribute('tangent') &&
													Ut.computeTangents(_.geometry);
											}
										}
									} catch (t) {
										(s = !0), (l = t);
									} finally {
										try {
											a || null == u.return || u.return();
										} finally {
											if (s) throw l;
										}
									}
									n.dispose();
								}
							}
						}
					},
					{
						key: '_getNewPioneerMaterial',
						value: function _getNewPioneerMaterial(t) {
							var e = jt.getPBR();
							if (((e.name = t.name), (e.transparent = t.transparent), null !== t.map)) {
								var n = t.map.ktxFormat;
								void 0 !== n && (t.map.format = n), (e.uniforms.colorTexture.value = t.map), (e.defines.colorMap = !0);
							}
							t.roughnessMap && ((e.uniforms.roughnessTexture.value = t.roughnessMap), (e.defines.roughnessMap = !0)),
								t.metalnessMap && ((e.uniforms.metalnessTexture.value = t.metalnessMap), (e.defines.metalnessMap = !0)),
								null !== t.normalMap &&
									((e.uniforms.normalTexture.value = t.normalMap),
									(e.uniforms.normalScale.value = t.normalScale),
									(e.defines.normalMap = !0)),
								null !== t.emissiveMap &&
									((e.uniforms.emissiveTexture.value = t.emissiveMap),
									e.uniforms.emissiveColor.value.copy(t.emissive),
									e.uniforms.emissiveColor.value.multiplyScalar(t.emissiveIntensity),
									(e.defines.emissiveMap = !0)),
								(e.uniforms.color.value = t.color),
								(e.uniforms.roughness.value = t.roughness),
								(e.uniforms.metalness.value = t.metalness);
							var r = 0;
							return (
								null !== this._dynamicEnvironmentMapComponent
									? ((e.defines.dynEnvMap = !0),
									  (e.uniforms.dynEnvTexture.value = this._dynamicEnvironmentMapComponent.getTexture()),
									  (e.uniforms.dynEnvFaceSize.value = this._dynamicEnvironmentMapComponent.getFaceSize()))
									: null !== this._environmentCubemap &&
									  ((e.defines.envMap = !0),
									  (e.defines.envIsCubeUV = !0),
									  (e.uniforms.envTexture.value = this._environmentCubemap),
									  (r = this._environmentCubemap.image.height),
									  (e.uniforms.maxMipLevel.value = Math.log(r) * Math.LOG2E)),
								(e.uniforms.environmentIntensity.value = this._environmentIntensity),
								(e.uniforms.gammaCorrectionFactor.value = this.getEntity()
									.getScene()
									.getEngine()
									.getConfig()
									.getValue('gammaCorrection')),
								this._shadowEntities.length > 0 && (e.defines.shadowEntities = !0),
								(e.needsUpdate = !0),
								e
							);
						}
					}
				]),
				ModelComponent
			);
		})();
		function orbital_particles_component_typeof(t) {
			return (orbital_particles_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function orbital_particles_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function orbital_particles_component_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						orbital_particles_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						orbital_particles_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function orbital_particles_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function orbital_particles_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== orbital_particles_component_typeof(e) && 'function' != typeof e)
				? (function orbital_particles_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function orbital_particles_component_getPrototypeOf(t) {
			return (orbital_particles_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function orbital_particles_component_setPrototypeOf(t, e) {
			return (orbital_particles_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ue = (function (t) {
			function OrbitalParticlesComponent(t, e, n) {
				var r;
				return (
					(function orbital_particles_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, OrbitalParticlesComponent),
					((r = orbital_particles_component_possibleConstructorReturn(
						this,
						orbital_particles_component_getPrototypeOf(OrbitalParticlesComponent).call(this, t, e, n)
					))._scaleOfParticles = 1),
					(r._loadFunction = null),
					(r._orbitalElementsList = []),
					(r._offsetArray = new Float32Array(0)),
					(r._spriteParticles = null),
					r.__setRadius(100 * r.getEntity().getExtentsRadius()),
					r
				);
			}
			return (
				(function orbital_particles_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && orbital_particles_component_setPrototypeOf(t, e);
				})(OrbitalParticlesComponent, ye),
				(function orbital_particles_component_createClass(t, e, n) {
					return (
						e && orbital_particles_component_defineProperties(t.prototype, e),
						n && orbital_particles_component_defineProperties(t, n),
						t
					);
				})(OrbitalParticlesComponent, [
					{
						key: 'getScaleOfParticles',
						value: function getScaleOfParticles() {
							return this._scaleOfParticles;
						}
					},
					{
						key: 'setScaleOfParticles',
						value: function setScaleOfParticles(t) {
							(this._scaleOfParticles = t), this.resetResources();
						}
					},
					{
						key: 'setLoadFunction',
						value: function setLoadFunction(t) {
							(this._loadFunction = t), this.resetResources();
						}
					},
					{
						key: '__update',
						value: function __update() {
							if (null !== this._spriteParticles) {
								for (
									var t = yt.pool.get(),
										e = yt.pool.get(),
										n = this.getEntity().getScene().getEngine().getTime(),
										r = 0,
										i = this._orbitalElementsList.length;
									r < i;
									r++
								)
									this._orbitalElementsList[r].project(t, e, n),
										(this._offsetArray[3 * r + 0] = t.x),
										(this._offsetArray[3 * r + 1] = t.y),
										(this._offsetArray[3 * r + 2] = t.z);
								yt.pool.release(t), yt.pool.release(e), this._spriteParticles.setParticleOffsets(this._offsetArray);
							}
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							this._spriteParticles.prepareForRender(t);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = orbital_particles_component_asyncToGenerator(
								regeneratorRuntime.mark(function _callee() {
									return regeneratorRuntime.wrap(
										function _callee$(t) {
											for (;;)
												switch ((t.prev = t.next)) {
													case 0:
														return (
															(this._spriteParticles = new Nt(this)),
															this.getThreeJsMaterials().push(this._spriteParticles.getThreeJsMaterial()),
															this.getThreeJsObjects().push(this._spriteParticles.getThreeJsObject()),
															(t.next = 5),
															this._initializeParticles()
														);
													case 5:
													case 'end':
														return t.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this), (this._spriteParticles = null);
						}
					},
					{
						key: '_initializeParticles',
						value: (function () {
							var t = orbital_particles_component_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2() {
									var t, e, n, r, i, o, a, s, l, c, u;
									return regeneratorRuntime.wrap(
										function _callee2$(_) {
											for (;;)
												switch ((_.prev = _.next)) {
													case 0:
														if (null !== this._loadFunction) {
															_.next = 2;
															break;
														}
														return _.abrupt('return');
													case 2:
														return (_.next = 4), this._loadFunction();
													case 4:
														for (
															t = _.sent,
																e = t.orbitalElements.length,
																this._orbitalElementsList = [],
																n = 0,
																r = 0,
																i = e;
															r < i;
															r++
														)
															(o = new $()).copy(t.orbitalElements[r]),
																this._orbitalElementsList.push(o),
																(a = o.semiMajorAxis * (1 + o.eccentricity)),
																(n = Math.max(n, a));
														for (
															this.__setRadius(n),
																this._offsetArray = new Float32Array(3 * e),
																s = new Float32Array(4 * e),
																l = new Float32Array(1 * e),
																c = 0,
																u = e;
															c < u;
															c++
														)
															(s[4 * c + 0] = t.colors[c].r),
																(s[4 * c + 1] = t.colors[c].g),
																(s[4 * c + 2] = t.colors[c].b),
																(s[4 * c + 3] = t.colors[c].a),
																(l[1 * c + 0] = t.scales[c] * this._scaleOfParticles);
														this._spriteParticles.setParticleColors(s), this._spriteParticles.setParticleScales(l);
													case 16:
													case 'end':
														return _.stop();
												}
										},
										_callee2,
										this
									);
								})
							);
							return function _initializeParticles() {
								return t.apply(this, arguments);
							};
						})()
					}
				]),
				OrbitalParticlesComponent
			);
		})();
		function particle_spray_component_typeof(t) {
			return (particle_spray_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function particle_spray_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function particle_spray_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function particle_spray_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== particle_spray_component_typeof(e) && 'function' != typeof e)
				? (function particle_spray_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function particle_spray_component_getPrototypeOf(t) {
			return (particle_spray_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function particle_spray_component_setPrototypeOf(t, e) {
			return (particle_spray_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ve = (function (t) {
			function ParticleSprayComponent(t, e, n) {
				var r;
				return (
					(function particle_spray_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ParticleSprayComponent),
					((r = particle_spray_component_possibleConstructorReturn(
						this,
						particle_spray_component_getPrototypeOf(ParticleSprayComponent).call(this, t, e, n)
					))._length = 1),
					(r._spread = 30),
					(r._numberOfParticles = 0),
					(r._speedOfParticles = 0.1),
					(r._sizeOfParticles = 0.1),
					(r._particleSpacingRandom = !0),
					(r._colorOfParticles = new z()),
					r._colorOfParticles.freeze(),
					(r._originOffset = new yt()),
					r._originOffset.freeze(),
					(r._direction = new yt()),
					r._direction.freeze(),
					(r._relativeToEntityOrientation = !0),
					r.__setRadius(r._length),
					r
				);
			}
			return (
				(function particle_spray_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && particle_spray_component_setPrototypeOf(t, e);
				})(ParticleSprayComponent, ye),
				(function particle_spray_component_createClass(t, e, n) {
					return (
						e && particle_spray_component_defineProperties(t.prototype, e),
						n && particle_spray_component_defineProperties(t, n),
						t
					);
				})(ParticleSprayComponent, [
					{
						key: 'getLength',
						value: function getLength() {
							return this._length;
						}
					},
					{
						key: 'setLength',
						value: function setLength(t) {
							(this._length = t),
								this.__setRadius(this._length),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'length', this._length),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'totalTime', this._length / this._speedOfParticles);
						}
					},
					{
						key: 'getSpread',
						value: function getSpread() {
							return this._spread;
						}
					},
					{
						key: 'setSpread',
						value: function setSpread(t) {
							(this._spread = t),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'spread', T.degToRad(this._spread));
						}
					},
					{
						key: 'getNumberOfParticles',
						value: function getNumberOfParticles() {
							return this._numberOfParticles;
						}
					},
					{
						key: 'setNumberOfParticles',
						value: function setNumberOfParticles(t) {
							(this._numberOfParticles = t), this.resetResources();
						}
					},
					{
						key: 'getSpeedOfParticles',
						value: function getSpeedOfParticles() {
							return this._speedOfParticles;
						}
					},
					{
						key: 'setSpeedOfParticles',
						value: function setSpeedOfParticles(t) {
							(this._speedOfParticles = t),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'totalTime', this._length / this._speedOfParticles);
						}
					},
					{
						key: 'getSizeOfParticles',
						value: function getSizeOfParticles() {
							return this._sizeOfParticles;
						}
					},
					{
						key: 'setSizeOfParticles',
						value: function setSizeOfParticles(t) {
							(this._sizeOfParticles = t), this.resetResources();
						}
					},
					{
						key: 'getParticleSpacingRandom',
						value: function getParticleSpacingRandom() {
							return this._particleSpacingRandom;
						}
					},
					{
						key: 'setParticleSpacingRandom',
						value: function setParticleSpacingRandom(t) {
							(this._particleSpacingRandom = t), this.resetResources();
						}
					},
					{
						key: 'getColorOfParticles',
						value: function getColorOfParticles() {
							return this._colorOfParticles;
						}
					},
					{
						key: 'setColorOfParticles',
						value: function setColorOfParticles(t) {
							this._colorOfParticles.thaw(),
								this._colorOfParticles.copy(t),
								this._colorOfParticles.freeze(),
								Ut.setUniformColorRGBA(this.getThreeJsMaterials()[0], 'globalColor', this._colorOfParticles);
						}
					},
					{
						key: 'getOriginOffset',
						value: function getOriginOffset() {
							return this._originOffset;
						}
					},
					{
						key: 'setOriginOffset',
						value: function setOriginOffset(t) {
							this._originOffset.thaw(),
								this._originOffset.copy(t),
								this._originOffset.freeze(),
								Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'originOffset', this._originOffset);
						}
					},
					{
						key: 'getDirection',
						value: function getDirection() {
							return this._direction;
						}
					},
					{
						key: 'setDirection',
						value: function setDirection(t) {
							this._direction.thaw(),
								this._direction.normalize(t),
								this._direction.freeze(),
								Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'direction', this._direction);
							var e = yt.pool.get();
							e.cross(this._direction, yt.XAxis),
								e.isZero() && e.cross(this._direction, yt.YAxis),
								e.normalize(e),
								Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'directionPerp', e),
								yt.pool.release(e);
						}
					},
					{
						key: 'getRelativeToEntityOrientation',
						value: function getRelativeToEntityOrientation() {
							return this._relativeToEntityOrientation;
						}
					},
					{
						key: 'setRelativeToEntityOrientation',
						value: function setRelativeToEntityOrientation(t) {
							this._relativeToEntityOrientation = t;
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							var e = T.wrap(
								this.getEntity().getScene().getEngine().getTime(),
								0,
								this._length / this._speedOfParticles
							);
							if ((Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'time', e), this._relativeToEntityOrientation)) {
								var n = yt.pool.get(),
									r = yt.pool.get();
								n.rotate(this.getEntity().getOrientation(), this._originOffset),
									r.rotate(this.getEntity().getOrientation(), this._direction),
									Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'originOffset', n),
									Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'direction', r);
								var i = yt.pool.get();
								i.cross(r, yt.XAxis),
									i.isZero() && i.cross(r, yt.YAxis),
									i.normalize(i),
									Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'directionPerp', i),
									yt.pool.release(i),
									yt.pool.release(n),
									yt.pool.release(r);
							}
							Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function particle_spray_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											particle_spray_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											particle_spray_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e, n, r, o, a, s, l, c;
									return regeneratorRuntime.wrap(
										function _callee$(u) {
											for (;;)
												switch ((u.prev = u.next)) {
													case 0:
														(t = new i.RawShaderMaterial({
															uniforms: {
																spread: new i.Uniform(0),
																originOffset: new i.Uniform(new i.Vector3()),
																direction: new i.Uniform(new i.Vector3()),
																directionPerp: new i.Uniform(new i.Vector3()),
																length: new i.Uniform(0),
																time: new i.Uniform(0),
																totalTime: new i.Uniform(0),
																globalColor: new i.Uniform(new i.Vector4(1, 1, 1, 1))
															},
															vertexShader: zt.fix(ParticleSprayComponent.vertexShader, 'vertex'),
															fragmentShader: zt.fix(ParticleSprayComponent.fragmentShader, 'fragment'),
															transparent: !0,
															depthWrite: !1,
															blending: i.AdditiveBlending,
															side: i.DoubleSide
														})),
															this.getThreeJsMaterials().push(t),
															(e = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1])),
															(n = new Float32Array(3 * this._numberOfParticles)),
															(r = new Float32Array(4 * this._numberOfParticles)),
															(o = new Float32Array(1 * this._numberOfParticles)),
															(a = new Uint16Array([0, 1, 2, 2, 3, 0])),
															(s = new i.InstancedBufferGeometry()).setAttribute(
																'position',
																new i.BufferAttribute(e, 2)
															),
															s.setAttribute('params', new i.InstancedBufferAttribute(n, 3)),
															s.setAttribute('color', new i.InstancedBufferAttribute(r, 4)),
															s.setAttribute('size', new i.InstancedBufferAttribute(o, 1)),
															s.setIndex(new i.BufferAttribute(a, 1)),
															(s.instanceCount = this._numberOfParticles),
															(l = Ut.createMeshObjectGivenGeometry(this, t, s)),
															this.getThreeJsObjects().push(l),
															Ut.setOrientation(this.getThreeJsObjects()[0], tt.Identity),
															this._initializeParticles(),
															Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'length', this._length),
															Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'spread', T.degToRad(this._spread)),
															Ut.setUniformNumber(
																this.getThreeJsMaterials()[0],
																'totalTime',
																this._length / this._speedOfParticles
															),
															Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'originOffset', this._originOffset),
															Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'direction', this._direction),
															Ut.setUniformColorRGBA(
																this.getThreeJsMaterials()[0],
																'globalColor',
																this._colorOfParticles
															),
															(c = yt.pool.get()).cross(this._direction, yt.XAxis),
															c.isZero() && c.cross(this._direction, yt.YAxis),
															c.normalize(c),
															Ut.setUniformVector3(this.getThreeJsMaterials()[0], 'directionPerp', c),
															yt.pool.release(c);
													case 30:
													case 'end':
														return u.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this);
						}
					},
					{
						key: '_initializeParticles',
						value: function _initializeParticles() {
							for (
								var t = this.getThreeJsObjects()[0].geometry.attributes.params,
									e = this.getThreeJsObjects()[0].geometry.attributes.color,
									n = this.getThreeJsObjects()[0].geometry.attributes.size,
									r = t.array,
									i = e.array,
									o = n.array,
									a = 0,
									s = this._numberOfParticles;
								a < s;
								a++
							)
								(r[3 * a + 0] = 2 * Math.random() - 1),
									(r[3 * a + 1] = 2 * Math.random() - 1),
									this._particleSpacingRandom
										? (r[3 * a + 2] = Math.random())
										: (r[3 * a + 2] = a / this._numberOfParticles),
									(i[4 * a + 0] = 1),
									(i[4 * a + 1] = 1),
									(i[4 * a + 2] = 1),
									(i[4 * a + 3] = 1),
									(o[1 * a + 0] = this._sizeOfParticles);
							(t.needsUpdate = !0), (e.needsUpdate = !0), (n.needsUpdate = !0);
						}
					}
				]),
				ParticleSprayComponent
			);
		})();
		(Ve.vertexShader =
			'\n\tattribute vec2 position;\n\tattribute vec3 params; // x, y are in plane made by direction if z were 1, z is 0 to 1 where the particle is in the total length at time = 0\n\tattribute vec4 color;\n\tattribute float size;\n\n\tuniform float spread;\n\tuniform vec3 originOffset; // in model-space\n\tuniform vec3 direction; // in model-space\n\tuniform vec3 directionPerp; // in model-space\n\tuniform float length;\n\tuniform float time;\n\tuniform float totalTime;\n\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec2 vPosition;\n\tvarying vec4 vColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\tfloat sinSpread = sin(spread);\n\t\tvec3 directionPerp2 = cross(direction, directionPerp);\n\t\tfloat u = mod(params.z + time / totalTime, 1.0);\n\t\tvec3 modelPosition = originOffset + (directionPerp * params.x * sinSpread + directionPerp2 * params.y * sinSpread + direction) * (length * u);\n\t\tvec4 viewPosition = vec4(position.x * size, 0, position.y * size, 1) + modelViewMatrix * vec4(modelPosition, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\n\t\t// Set the varying variables.\n\t\tvPosition = position;\n\t\tvColor = color * u;\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}'),
			(Ve.fragmentShader =
				'\n\tuniform vec4 globalColor;\n\n\tvarying vec2 vPosition;\n\tvarying vec4 vColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\t// Set the color to be a circle tinted by the color and globalColor.\n\t\tgl_FragColor = globalColor * vColor * max(0.0, 1.0 - dot(vPosition, vPosition));\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t#endif\n\t}');
		var Be = Ve;
		function rings_component_typeof(t) {
			return (rings_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function rings_component_slicedToArray(t, e) {
			return (
				(function rings_component_arrayWithHoles(t) {
					if (Array.isArray(t)) return t;
				})(t) ||
				(function rings_component_iterableToArrayLimit(t, e) {
					var n = [],
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (
							var a, s = t[Symbol.iterator]();
							!(r = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e);
							r = !0
						);
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					return n;
				})(t, e) ||
				(function rings_component_nonIterableRest() {
					throw new TypeError('Invalid attempt to destructure non-iterable instance');
				})()
			);
		}
		function rings_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function rings_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function rings_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== rings_component_typeof(e) && 'function' != typeof e)
				? (function rings_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function rings_component_getPrototypeOf(t) {
			return (rings_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function rings_component_setPrototypeOf(t, e) {
			return (rings_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ge = (function (t) {
			function RingsComponent(t, e, n) {
				var r;
				return (
					(function rings_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, RingsComponent),
					((r = rings_component_possibleConstructorReturn(
						this,
						rings_component_getPrototypeOf(RingsComponent).call(this, t, e, n)
					))._lightSource = ''),
					(r._lightSourceObject = null),
					(r._topTextureUrl = ''),
					(r._bottomTextureUrl = ''),
					(r._innerRadius = 0),
					(r._outerRadius = 0),
					(r._topTextureLoadedPromise = null),
					(r._bottomTextureLoadedPromise = null),
					(r._shadowEntities = []),
					r
				);
			}
			return (
				(function rings_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && rings_component_setPrototypeOf(t, e);
				})(RingsComponent, ye),
				(function rings_component_createClass(t, e, n) {
					return e && rings_component_defineProperties(t.prototype, e), n && rings_component_defineProperties(t, n), t;
				})(RingsComponent, [
					{
						key: 'getTopTextureUrl',
						value: function getTopTextureUrl() {
							return this._topTextureUrl;
						}
					},
					{
						key: 'setTopTextureUrl',
						value: function setTopTextureUrl(t) {
							(this._topTextureUrl = t),
								Ut.loadTextureIntoUniform(
									this,
									this.getThreeJsMaterials()[0],
									'topTexture',
									this._topTextureUrl,
									!0,
									!1
								);
						}
					},
					{
						key: 'getBottomTextureUrl',
						value: function getBottomTextureUrl() {
							return this._bottomTextureUrl;
						}
					},
					{
						key: 'setBottomTextureUrl',
						value: function setBottomTextureUrl(t) {
							(this._bottomTextureUrl = t),
								Ut.loadTextureIntoUniform(
									this,
									this.getThreeJsMaterials()[0],
									'bottomTexture',
									this._bottomTextureUrl,
									!0,
									!1
								);
						}
					},
					{
						key: 'getInnerRadius',
						value: function getInnerRadius() {
							return this._innerRadius;
						}
					},
					{
						key: 'setInnerRadius',
						value: function setInnerRadius(t) {
							(this._innerRadius = t),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'innerRadius', this._innerRadius);
						}
					},
					{
						key: 'getOuterRadius',
						value: function getOuterRadius() {
							return this._outerRadius;
						}
					},
					{
						key: 'setOuterRadius',
						value: function setOuterRadius(t) {
							(this._outerRadius = t),
								this.__setRadius(this._outerRadius),
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'outerRadius', this._outerRadius);
						}
					},
					{
						key: 'getTopTexture',
						value: function getTopTexture() {
							var t = this.getThreeJsMaterials()[0];
							return void 0 !== t ? t.uniforms.topTexture.value : null;
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							jt.setLightSourceUniforms(this.getThreeJsMaterials(), this.getEntity(), t),
								jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, null, !1);
							var e = this.getEntity().get('spheroid');
							if (e instanceof qe) {
								var n = this.getThreeJsMaterials()[0];
								Ut.setUniformNumber(n, 'spheroidEquatorialRadius', e.getEquatorialRadius()),
									Ut.setUniformNumber(n, 'spheroidPolarRadius', e.getPolarRadius());
							}
							Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity()),
								Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function rings_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											rings_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											rings_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e, n, r, o, a, s, l, c, u, _, p, h, d;
									return regeneratorRuntime.wrap(
										function _callee$(f) {
											for (;;)
												switch ((f.prev = f.next)) {
													case 0:
														return (
															(t = Ut.loadTexture(this, this._topTextureUrl, !0, !1)),
															(e = Ut.loadTexture(this, this._bottomTextureUrl, !0, !1)),
															(f.next = 4),
															Promise.all([t, e])
														);
													case 4:
														if (
															((n = f.sent),
															(r = rings_component_slicedToArray(n, 2)),
															(o = r[0]),
															(a = r[1]),
															!this.isDestroyed())
														) {
															f.next = 12;
															break;
														}
														return o.dispose(), a.dispose(), f.abrupt('return');
													case 12:
														for (
															s = new i.ShaderMaterial({
																uniforms: {
																	ambientLightColor: new i.Uniform(new i.Color()),
																	lightPositions: new i.Uniform([
																		new i.Vector3(1, 0, 0),
																		new i.Vector3(1, 0, 0),
																		new i.Vector3(1, 0, 0),
																		new i.Vector3(1, 0, 0),
																		new i.Vector3(1, 0, 0)
																	]),
																	lightColors: new i.Uniform([
																		new i.Vector3(0, 0, 0),
																		new i.Vector3(0, 0, 0),
																		new i.Vector3(0, 0, 0),
																		new i.Vector3(0, 0, 0),
																		new i.Vector3(0, 0, 0)
																	]),
																	lightRadii: new i.Uniform([0, 0, 0, 0, 0]),
																	numLights: new i.Uniform(0),
																	entityPos: new i.Uniform(new i.Vector3()),
																	innerRadius: new i.Uniform(this._innerRadius),
																	outerRadius: new i.Uniform(this._outerRadius),
																	topTexture: new i.Uniform(o),
																	bottomTexture: new i.Uniform(a),
																	spheroidEquatorialRadius: new i.Uniform(0),
																	spheroidPolarRadius: new i.Uniform(0)
																},
																vertexShader: RingsComponent.vertexShader,
																fragmentShader: RingsComponent.fragmentShader,
																transparent: !0,
																depthWrite: !1,
																blending: i.NormalBlending,
																side: i.DoubleSide
															}),
																this.getThreeJsMaterials().push(s),
																Ut.setupLogDepthBuffering(s),
																l = Ut.createMeshObject(this, s, [
																	{ name: 'position', dimensions: 3 },
																	{ name: 'normal', dimensions: 3 }
																]),
																10,
																c = new Float32Array(300),
																u = new Float32Array(300),
																_ = new Uint16Array(486),
																p = 0;
															p < 10;
															p++
														)
															for (h = 0; h < 10; h++)
																(c[3 * (d = h + 10 * p) + 0] = (h / 9) * 2 - 1),
																	(c[3 * d + 1] = (p / 9) * 2 - 1),
																	(c[3 * d + 2] = 0),
																	(u[3 * d + 0] = 0),
																	(u[3 * d + 1] = 0),
																	(u[3 * d + 2] = 1),
																	h + 1 < 10 &&
																		p + 1 < 10 &&
																		((_[6 * (h + 9 * p) + 0] = h + 0 + 10 * (p + 0)),
																		(_[6 * (h + 9 * p) + 1] = h + 0 + 10 * (p + 1)),
																		(_[6 * (h + 9 * p) + 2] = h + 1 + 10 * (p + 0)),
																		(_[6 * (h + 9 * p) + 3] = h + 1 + 10 * (p + 0)),
																		(_[6 * (h + 9 * p) + 4] = h + 0 + 10 * (p + 1)),
																		(_[6 * (h + 9 * p) + 5] = h + 1 + 10 * (p + 1)));
														Ut.setVertices(l.geometry, 'position', c),
															Ut.setVertices(l.geometry, 'normal', u),
															Ut.setIndices(l.geometry, _),
															(l.material = s),
															this.getThreeJsObjects().push(l);
													case 26:
													case 'end':
														return f.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this);
						}
					}
				]),
				RingsComponent
			);
		})();
		(Ge.vertexShader =
			'\n\tuniform float outerRadius;\n\n\tvarying vec3 localPosition;\n\tvarying vec3 modelPosition;\n\tvarying vec3 modelNormal;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\tlocalPosition = position * outerRadius;\n\t\tmodelPosition = (modelMatrix * vec4(localPosition, 1.)).xyz;\n\t\tmodelNormal = (modelMatrix * vec4(normal, 0.)).xyz;\n\t\tvec4 viewPosition = viewMatrix * vec4(modelPosition, 1.);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance *(z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}'),
			(Ge.fragmentShader =
				'\n\t#ifndef saturate\n\t\t#define saturate(a) clamp(a, 0.0, 1.0)\n\t#endif\n\n\tuniform vec3 ambientLightColor;\n\tuniform vec3 lightPositions[5];\n\tuniform vec3 lightColors[5];\n\tuniform int numLights;\n\n\tuniform float innerRadius;\n\tuniform float outerRadius;\n\tuniform sampler2D topTexture;\n\tuniform sampler2D bottomTexture;\n\tuniform float spheroidEquatorialRadius;\n\tuniform float spheroidPolarRadius;\n\tuniform vec3 entityPos;\n\n\t// The varying attributes.\n\tvarying vec3 localPosition;\n\tvarying vec3 modelPosition;\n\tvarying vec3 modelNormal;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#endif\n\n\tfloat spheroidShadow(vec3 lightDir, float lightCosAngle, float spheroidScaling, vec3 normal, vec3 ringPos) {\n\t\tvec3 sunDirScaled = normalize(lightDir - (spheroidScaling - 1.0) * lightCosAngle * normal);\n\t\tfloat pDotLScaled = dot(ringPos, sunDirScaled);\n\t\tif(dot(ringPos, ringPos) - pDotLScaled * pDotLScaled < spheroidEquatorialRadius * spheroidEquatorialRadius && pDotLScaled > 0.0) {\n\t\t\treturn 0.0;\n\t\t}\n\t\telse {\n\t\t\treturn 1.0;\n\t\t}\n\t}\n\n\tvoid main(void) {\n\t\tfloat spheroidScaling = spheroidEquatorialRadius / spheroidPolarRadius;\n\t\tvec3 positionDir = normalize(modelPosition);\n\t\tvec3 ringPos = modelPosition - entityPos;\n\t\tvec3 normal = normalize(modelNormal);\n\t\tfloat cameraCosAngle = -dot(positionDir, normal);\n\n\t\t// Calculate the UVs.\n\t\tvec2 uv;\n\t\tuv.x = (length(localPosition) - innerRadius) / (outerRadius - innerRadius);\n\t\tif (uv.x < 0.0 || uv.x > 1.0) {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\treturn;\n\t\t}\n\t\tuv.y = 0.0;\n\n\t\t// Get the pixels at those uvs.\n\t\tvec4 topPixel = texture2D(topTexture, uv);\n\t\tvec4 bottomPixel = texture2D(bottomTexture, uv);\n\n\t\t// For each light,\n\t\tfor (int i = 0; i < 5; i++) {\n\t\t\tif (i >= numLights) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec3 lightDir = normalize(modelPosition - lightPositions[i]);\n\t\t\tfloat lightCosAngle = -dot(lightDir, normal);\n\n\t\t\tfloat cameraDirDotLight = dot(positionDir, lightDir);\n\t\t\tfloat bottomTopRatio = (1.0 + 0.2 * cameraDirDotLight) * sign(cameraCosAngle) * lightCosAngle;\n\t\t\tfloat shadow = spheroidShadow(lightDir, lightCosAngle, spheroidScaling, normal, ringPos);\n\t\t\tvec3 bottomColor = saturate(ambientLightColor + lightColors[i] * (1.0 - bottomTopRatio) * shadow);\n\t\t\tvec3 topColor = 2.0 * saturate(ambientLightColor + lightColors[i] * bottomTopRatio * shadow);\n\n\t\t\tvec3 color = mix(bottomPixel.rgb * bottomColor, topPixel.rgb * topColor, bottomTopRatio);\n\t\t\tgl_FragColor.rgb += color;\n\t\t}\n\n\t\tgl_FragColor.a = topPixel.a;\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t#endif\n\t}');
		var Je = Ge;
		function skybox_component_typeof(t) {
			return (skybox_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function skybox_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function skybox_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function skybox_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== skybox_component_typeof(e) && 'function' != typeof e)
				? (function skybox_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function skybox_component_getPrototypeOf(t) {
			return (skybox_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function skybox_component_setPrototypeOf(t, e) {
			return (skybox_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var $e = (function (t) {
			function SkyboxComponent(t, e, n) {
				var r;
				return (
					(function skybox_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, SkyboxComponent),
					((r = skybox_component_possibleConstructorReturn(
						this,
						skybox_component_getPrototypeOf(SkyboxComponent).call(this, t, e, n)
					))._numLatVerts = 20),
					(r._textureUrl = ''),
					r.__setRadius(1e24),
					r.__setUsesEntityOrientation(!0),
					r
				);
			}
			return (
				(function skybox_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && skybox_component_setPrototypeOf(t, e);
				})(SkyboxComponent, ye),
				(function skybox_component_createClass(t, e, n) {
					return (
						e && skybox_component_defineProperties(t.prototype, e), n && skybox_component_defineProperties(t, n), t
					);
				})(SkyboxComponent, [
					{
						key: 'getTextureUrl',
						value: function getTextureUrl() {
							return this._textureUrl;
						}
					},
					{
						key: 'setTextureUrl',
						value: function setTextureUrl(t) {
							(this._textureUrl = t), this.resetResources();
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity()),
								Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function skybox_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											skybox_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											skybox_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e, n, r, i, o, a, s, l, c, u, _, p, h, d, f;
									return regeneratorRuntime.wrap(
										function _callee$(m) {
											for (;;)
												switch ((m.prev = m.next)) {
													case 0:
														return (m.next = 2), Ut.loadTexture(this, this._textureUrl, !1, !1);
													case 2:
														if (((t = m.sent), 'loading' === this.getLoadState())) {
															m.next = 6;
															break;
														}
														return t.dispose(), m.abrupt('return');
													case 6:
														for (
															e = jt.get(),
																this.getThreeJsMaterials().push(e),
																e.defines.colorMapEmmissive = !0,
																e.needsUpdate = !0,
																e.uniforms.colorTexture.value = t,
																n = Ut.createMeshObject(this, e, [
																	{ name: 'position', dimensions: 3 },
																	{ name: 'uv', dimensions: 2 }
																]),
																this.getThreeJsObjects().push(n),
																Ut.useInDynEnvMap(n, !0),
																r = T.pi / (this._numLatVerts - 1),
																i = T.pi / this._numLatVerts,
																o = (2 * this._numLatVerts + 1) * this._numLatVerts,
																a = new Float32Array(3 * o),
																s = new Float32Array(2 * o),
																l = new Uint16Array(this._numLatVerts * (this._numLatVerts - 1) * 12),
																c = yt.pool.get(),
																u = Et.pool.get(),
																_ = 0;
															_ < this._numLatVerts;
															_++
														)
															for (p = 0; p < 2 * this._numLatVerts + 1; p++)
																(u.lat = _ * r - T.halfPi),
																	(u.lon = p * i - T.pi),
																	(u.alt = 0),
																	(c.x = 5e23 * Math.cos(u.lat) * Math.cos(u.lon)),
																	(c.y = 5e23 * Math.cos(u.lat) * Math.sin(u.lon)),
																	(c.z = 5e23 * Math.sin(u.lat)),
																	(h = _ * (2 * this._numLatVerts + 1) + p),
																	(a[3 * h + 0] = c.x),
																	(a[3 * h + 1] = c.y),
																	(a[3 * h + 2] = c.z),
																	(s[2 * h + 0] = 0.5 - u.lon / T.twoPi),
																	(s[2 * h + 1] = 0.5 - u.lat / T.pi),
																	(d = _ * this._numLatVerts * 2 + p),
																	_ < this._numLatVerts - 1 &&
																		p < 2 * this._numLatVerts &&
																		((l[6 * d + 0] = (2 * this._numLatVerts + 1) * (_ + 0) + (p + 0)),
																		(l[6 * d + 1] = (2 * this._numLatVerts + 1) * (_ + 1) + (p + 0)),
																		(l[6 * d + 2] = (2 * this._numLatVerts + 1) * (_ + 1) + (p + 1)),
																		(l[6 * d + 3] = (2 * this._numLatVerts + 1) * (_ + 0) + (p + 0)),
																		(l[6 * d + 4] = (2 * this._numLatVerts + 1) * (_ + 1) + (p + 1)),
																		(l[6 * d + 5] = (2 * this._numLatVerts + 1) * (_ + 0) + (p + 1)));
														Et.pool.release(u),
															yt.pool.release(c),
															(f = this.getThreeJsObjects()[0].geometry),
															Ut.setVertices(f, 'position', a),
															Ut.setVertices(f, 'uv', s),
															Ut.setIndices(f, l);
													case 29:
													case 'end':
														return m.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this);
						}
					}
				]),
				SkyboxComponent
			);
		})();
		function spheroid_component_typeof(t) {
			return (spheroid_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function spheroid_component_toConsumableArray(t) {
			return (
				(function spheroid_component_arrayWithoutHoles(t) {
					if (Array.isArray(t)) {
						for (var e = 0, n = new Array(t.length); e < t.length; e++) n[e] = t[e];
						return n;
					}
				})(t) ||
				(function spheroid_component_iterableToArray(t) {
					if (Symbol.iterator in Object(t) || '[object Arguments]' === Object.prototype.toString.call(t))
						return Array.from(t);
				})(t) ||
				(function spheroid_component_nonIterableSpread() {
					throw new TypeError('Invalid attempt to spread non-iterable instance');
				})()
			);
		}
		function spheroid_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function spheroid_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== spheroid_component_typeof(e) && 'function' != typeof e)
				? (function spheroid_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function spheroid_component_get(t, e, n) {
			return (spheroid_component_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function spheroid_component_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = spheroid_component_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function spheroid_component_getPrototypeOf(t) {
			return (spheroid_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function spheroid_component_setPrototypeOf(t, e) {
			return (spheroid_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var He = (function (t) {
			function SpheroidComponent(t, e, n) {
				var r;
				return (
					(function spheroid_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, SpheroidComponent),
					((r = spheroid_component_possibleConstructorReturn(
						this,
						spheroid_component_getPrototypeOf(SpheroidComponent).call(this, t, e, n)
					))._textureUrls = new F()),
					(r._textureLODs = new F()),
					(r._textureSizes = new F()),
					(r._spheroid = new Y(1, 1)),
					(r._mapping = 'cylinder'),
					(r._longitudinalRotation = 0),
					(r._numFaces = 1),
					(r._lowerLeftBounds = new Et(-T.halfPi, -T.pi, 0)),
					(r._upperRightBounds = new Et(+T.halfPi, T.pi, 0)),
					(r._cubeMapFaceFrames = Tt._defaultCubeMapFaceFrames),
					(r._shadowEntities = []),
					(r._features = new Set()),
					(r._useCompression = !1),
					r.__setUsesEntityOrientation(!0),
					r
				);
			}
			return (
				(function spheroid_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && spheroid_component_setPrototypeOf(t, e);
				})(SpheroidComponent, ye),
				(function spheroid_component_createClass(t, e, n) {
					return (
						e && spheroid_component_defineProperties(t.prototype, e), n && spheroid_component_defineProperties(t, n), t
					);
				})(SpheroidComponent, [
					{
						key: 'getEquatorialRadius',
						value: function getEquatorialRadius() {
							return this._spheroid.equatorialRadius;
						}
					},
					{
						key: 'getPolarRadius',
						value: function getPolarRadius() {
							return this._spheroid.polarRadius;
						}
					},
					{
						key: 'setRadii',
						value: function setRadii(t, e) {
							this._spheroid.thaw(),
								(this._spheroid.equatorialRadius = t),
								(this._spheroid.polarRadius = e),
								this._spheroid.freeze(),
								this.__setRadius(Math.max(this._spheroid.equatorialRadius, this._spheroid.polarRadius)),
								this.resetResources();
						}
					},
					{
						key: 'getSpheroid',
						value: function getSpheroid() {
							return this._spheroid;
						}
					},
					{
						key: 'getTextureNames',
						value: function getTextureNames() {
							for (var t = [], e = 0; e < this._textureUrls.size; e++) t.push(this._textureUrls.getAt(e).key);
							return t;
						}
					},
					{
						key: 'getTextureUrl',
						value: function getTextureUrl(t) {
							return this._textureUrls.get(t);
						}
					},
					{
						key: 'getTextureSizes',
						value: function getTextureSizes(t) {
							return this._textureSizes.get(t);
						}
					},
					{
						key: 'setTexture',
						value: function setTexture(t, e) {
							var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [4, 512, 4096];
							SpheroidComponent._textureToFeature.has(t) &&
								this.setFeature(SpheroidComponent._textureToFeature.get(t), '' !== e),
								this._textureUrls.set(t, e),
								this._textureSizes.set(t, spheroid_component_toConsumableArray(n));
							var r = this._textureLODs.get(t);
							if (void 0 === r) {
								r = [];
								for (var i = this.getThreeJsMaterials(), o = 0, a = this._numFaces; o < a; o++) {
									var s = new Ft(this);
									if (i.length > 0) {
										var l = i[o].uniforms[t + 'Texture'];
										void 0 !== l && s.setUniform(l);
									}
									r.push(s);
								}
								this._textureLODs.set(t, r);
							}
							for (var c = 0, u = this._numFaces; c < u; c++)
								r[c].setUrl(e.replace('$FACE', c.toString())), r[c].setSizes(n);
						}
					},
					{
						key: 'forceTextureSize',
						value: function forceTextureSize(t, e) {
							var n = this._textureLODs.get(t);
							if (void 0 === n) throw new Error('No texture named "' + t + '" has been defined.');
							for (var r = 0; r < n.length; r++) n[r].setForcedSize(e);
						}
					},
					{
						key: 'unsetTexture',
						value: function unsetTexture(t) {
							SpheroidComponent._textureToFeature.has(t) &&
								this.setFeature(SpheroidComponent._textureToFeature.get(t), !1),
								this._textureUrls.delete(t),
								this._textureLODs.delete(t),
								this._textureSizes.delete(t);
							for (var e = this.getThreeJsMaterials(), n = 0, r = e.length; n < r; n++) {
								var i = e[n].uniforms[t + 'Texture'];
								void 0 !== i && (i.value.dispose(), (i.value = null));
							}
						}
					},
					{
						key: 'getTextureCurrentSize',
						value: function getTextureCurrentSize(t, e) {
							var n = this._textureLODs.get(t);
							if (void 0 !== n && void 0 !== n[e]) return n[e].getCurrentSize();
						}
					},
					{
						key: 'isFeatureEnabled',
						value: function isFeatureEnabled(t) {
							return this._features.has(t);
						}
					},
					{
						key: 'setFeature',
						value: function setFeature(t, e) {
							var n = this.getThreeJsMaterials();
							if (e && !this._features.has(t)) {
								this._features.add(t);
								for (var r = 0, i = n.length; r < i; r++) {
									var o = n[r];
									(o.defines[t] = !0), (o.needsUpdate = !0);
								}
								'normalMap' === t && this._updateMeshes();
							} else if (!e && this._features.has(t)) {
								this._features.delete(t);
								for (var a = 0, s = n.length; a < s; a++) {
									var l = n[a];
									delete l.defines[t], (l.needsUpdate = !0);
								}
								'normalMap' === t && this._updateMeshes();
							}
						}
					},
					{
						key: 'getMapping',
						value: function getMapping() {
							return this._mapping;
						}
					},
					{
						key: 'setMapping',
						value: function setMapping(t) {
							var e = this._numFaces;
							if ('cylinder' === t) this._numFaces = 1;
							else {
								if ('cube' !== t) throw new Error('Invalid mapping type.');
								this._numFaces = 6;
							}
							if (this._numFaces !== e)
								for (var n = 0; n < this._textureLODs.size; n++) {
									for (var r = this._textureLODs.getAt(n).key, i = [], o = 0, a = this._numFaces; o < a; o++) {
										var s = new Ft(this);
										s.setUrl(this._textureUrls.get(r).replace('$FACE', o.toString())),
											s.setSizes(this._textureSizes.get(r)),
											i.push(s);
									}
									this._textureLODs.set(r, i);
								}
							(this._mapping = t), this.resetResources();
						}
					},
					{
						key: 'setBounds',
						value: function setBounds(t, e) {
							this._lowerLeftBounds.copy(t), this._upperRightBounds.copy(e), this.resetResources();
						}
					},
					{
						key: 'setCubeMapLayout',
						value: function setCubeMapLayout(t) {
							this._cubeMapFaceFrames = [];
							for (var e = 0; e < 6; e++) {
								this._cubeMapFaceFrames.push([]);
								for (var n = 0; n < 3; n++) {
									var r = null;
									switch (t[e][n]) {
										case '+x':
											r = yt.XAxis;
											break;
										case '-x':
											r = yt.XAxisNeg;
											break;
										case '+y':
											r = yt.YAxis;
											break;
										case '-y':
											r = yt.YAxisNeg;
											break;
										case '+z':
											r = yt.ZAxis;
											break;
										case '-z':
											r = yt.ZAxisNeg;
											break;
										default:
											throw new Error('Invalid cubemap layout component.');
									}
									this._cubeMapFaceFrames[e][n] = r;
								}
							}
							this.resetResources();
						}
					},
					{
						key: 'getNumShadowEntities',
						value: function getNumShadowEntities() {
							return this._shadowEntities.length;
						}
					},
					{
						key: 'getShadowEntity',
						value: function getShadowEntity(t) {
							return this._shadowEntities[t];
						}
					},
					{
						key: 'setShadowEntities',
						value: function setShadowEntities(t) {
							this._shadowEntities = t.slice(0);
						}
					},
					{
						key: 'getUseCompression',
						value: function getUseCompression() {
							return this._useCompression;
						}
					},
					{
						key: 'setUseCompression',
						value: function setUseCompression(t) {
							this._useCompression = t;
						}
					},
					{
						key: 'getLongitudeRotation',
						value: function getLongitudeRotation() {
							return this._longitudinalRotation;
						}
					},
					{
						key: 'setLongitudeRotation',
						value: function setLongitudeRotation(t) {
							this._longitudinalRotation = t;
						}
					},
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							for (
								var t = [
										spheroid_component_get(
											spheroid_component_getPrototypeOf(SpheroidComponent.prototype),
											'getLoadedPromise',
											this
										).call(this)
									],
									e = 0;
								e < this._textureLODs.size;
								e++
							)
								for (var n = this._textureLODs.getAt(e).value, r = 0, i = n.length; r < i; r++)
									t.push(n[r].getLoadedPromise());
							return Promise.all(t).then();
						}
					},
					{
						key: 'getColorAtPosition',
						value: function getColorAtPosition(t, e, n) {
							var r = yt.pool.get();
							if ('cube' === this._mapping) Tt.xyzToUVFace(r, e, this._cubeMapFaceFrames);
							else if ('cylinder' === this._mapping) {
								var o = Et.pool.get();
								this._spheroid.llaFromXYZ(o, e, !0),
									r.set(o.lon / T.twoPi + 0.5, o.lat / Math.PI + 0.5, 0),
									Et.pool.release(o);
							}
							var a = this._textureLODs.get(n);
							if (void 0 === a) throw new Error('Invalid texture name.');
							var s = a[r.z].getUniform().value,
								l = document.createElement('canvas');
							(l.width = s.image.width), (l.height = s.image.height);
							var c = l.getContext('2d');
							c.drawImage(s.image, 0, 0);
							var u = c.getImageData(0, 0, s.image.width, s.image.height),
								_ = s.format === i.RGBAFormat ? 4 : 3,
								p = (Math.floor((1 - r.y) * u.height) * u.width + Math.floor(r.x * u.width)) * _;
							t.set(u.data[p + 0], u.data[p + 1], u.data[p + 2], 4 === _ ? u.data[p + 3] : 1), yt.pool.release(r);
						}
					},
					{
						key: '__update',
						value: function __update() {
							spheroid_component_get(
								spheroid_component_getPrototypeOf(SpheroidComponent.prototype),
								'__update',
								this
							).call(this);
							for (var t = 0; t < this._textureLODs.size; t++)
								for (var e = this._textureLODs.getAt(t).value, n = 0, r = e.length; n < r; n++) e[n].update();
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							var e = this.getThreeJsObjects(),
								n = tt.pool.get();
							n.setFromAxisAngle(yt.ZAxis, this._longitudinalRotation);
							for (var r = 0; r < e.length; r++)
								Ut.setOrientationToEntity(e[r], this.getEntity(), n), Ut.setPositionToEntity(e[r], this.getEntity(), t);
							tt.pool.release(n);
							for (var i = 0, o = this._shadowEntities.length; i < o; i++) {
								var a = this._shadowEntities[i];
								if ('string' == typeof a) {
									var s = this.getEntity().getScene().get(a);
									s instanceof Wt && (a = s);
								}
								null !== a && (this._shadowEntities[i] = a);
							}
							var l = this.getEntity().getComponentByType('atmosphere');
							jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, l, !0);
						}
					},
					{
						key: '__loadResources',
						value: function __loadResources() {
							for (var t = 0; t < this._numFaces; t++) {
								var e = jt.get();
								this.getThreeJsMaterials().push(e), Ut.setupLogDepthBuffering(e);
								var n = !0,
									r = !1,
									i = void 0;
								try {
									for (var o, a = this._features[Symbol.iterator](); !(n = (o = a.next()).done); n = !0) {
										var s = o.value;
										(e.defines[s] = !0), (e.needsUpdate = !0);
									}
								} catch (t) {
									(r = !0), (i = t);
								} finally {
									try {
										n || null == a.return || a.return();
									} finally {
										if (r) throw i;
									}
								}
								var l = Ut.createMeshObject(this, e, [
									{ name: 'position', dimensions: 3 },
									{ name: 'normal', dimensions: 3 },
									{ name: 'uv', dimensions: 2 }
								]);
								this.getThreeJsObjects().push(l), Ut.useInDynEnvMap(l, !0);
								for (var c = 0; c < this._textureLODs.size; c++) {
									var u = this._textureLODs.getAt(c).key,
										_ = e.uniforms[u + 'Texture'];
									void 0 !== _ && this._textureLODs.get(u)[t].setUniform(_);
								}
							}
							return this._updateMeshes(), Promise.resolve();
						}
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyAllObjectsAndMaterials(this);
							for (var t = 0; t < this._textureLODs.size; t++)
								for (var e = this._textureLODs.getAt(t).key, n = 0; n < this._numFaces; n++)
									this._textureLODs.get(e)[n].setUniform(null);
						}
					},
					{
						key: '_updateMeshes',
						value: function _updateMeshes() {
							if (0 !== this.getThreeJsObjects().length)
								if ('cylinder' === this._mapping) {
									for (
										var t = this._upperRightBounds.lat - this._lowerLeftBounds.lat,
											e = this._upperRightBounds.lon - this._lowerLeftBounds.lon,
											n = Math.max(Math.ceil((100 * t) / T.pi), 4),
											r = Math.max(Math.ceil((200 * e) / T.twoPi), 4),
											i = t / (n - 1),
											o = e / (r - 1),
											a = r * n,
											s = new Float32Array(3 * a),
											l = new Float32Array(3 * a),
											c = new Float32Array(2 * a),
											u = new Uint16Array((r - 1) * (n - 1) * 6),
											_ = yt.pool.get(),
											p = Et.pool.get(),
											h = 0;
										h < n;
										h++
									)
										for (var d = 0; d < r; d++) {
											(p.lat = this._lowerLeftBounds.lat + h * i),
												(p.lon = this._lowerLeftBounds.lon + d * o),
												(p.alt = 0),
												(p.planetographic = !0);
											var f = h * r + d;
											if (
												(this._spheroid.xyzFromLLA(_, p),
												(s[3 * f + 0] = _.x),
												(s[3 * f + 1] = _.y),
												(s[3 * f + 2] = _.z),
												this._spheroid.upFromLLA(_, p),
												(l[3 * f + 0] = _.x),
												(l[3 * f + 1] = _.y),
												(l[3 * f + 2] = _.z),
												(c[2 * f + 0] = d / (r - 1)),
												(c[2 * f + 1] = 1 - h / (n - 1)),
												h + 1 < n && d + 1 < r)
											) {
												var m = h * (r - 1) + d;
												(u[6 * m + 0] = r * (h + 0) + (d + 0)),
													(u[6 * m + 1] = r * (h + 1) + (d + 1)),
													(u[6 * m + 2] = r * (h + 1) + (d + 0)),
													(u[6 * m + 3] = r * (h + 0) + (d + 0)),
													(u[6 * m + 4] = r * (h + 0) + (d + 1)),
													(u[6 * m + 5] = r * (h + 1) + (d + 1));
											}
										}
									Et.pool.release(p), yt.pool.release(_);
									var g = this.getThreeJsObjects()[0];
									Ut.setVertices(g.geometry, 'position', s),
										Ut.setVertices(g.geometry, 'normal', l),
										Ut.setVertices(g.geometry, 'uv', c),
										Ut.setIndices(g.geometry, u),
										this._features.has('normalMap') && Ut.computeTangents(g.geometry);
								} else if ('cube' === this._mapping) {
									for (var y = yt.pool.get(), v = Et.pool.get(), b = 0; b < 6; b++) {
										var x = new Float32Array(7500),
											S = new Float32Array(7500),
											w = new Float32Array(5e3),
											C = new Uint16Array(14406),
											P = !1,
											E = yt.pool.get();
										E.cross(this._cubeMapFaceFrames[b][0], this._cubeMapFaceFrames[b][1]),
											(E.x === this._cubeMapFaceFrames[b][2].x &&
												E.y === this._cubeMapFaceFrames[b][2].y &&
												E.z === this._cubeMapFaceFrames[b][2].z) ||
												(P = !0),
											yt.pool.release(E);
										for (var k = 0, O = 0, A = 0; A < 50; A++)
											for (var R = 0; R < 50; R++)
												y.mult(this._cubeMapFaceFrames[b][0], (2 * R) / 49 - 1),
													y.addMult(y, this._cubeMapFaceFrames[b][1], (2 * A) / 49 - 1),
													y.addMult(y, this._cubeMapFaceFrames[b][2], 1),
													y.normalize(y),
													v.setFromXYZ(y),
													(v.alt = 0),
													(v.planetographic = !0),
													this._spheroid.xyzFromLLA(y, v),
													(x[3 * k + 0] = y.x),
													(x[3 * k + 1] = y.y),
													(x[3 * k + 2] = y.z),
													this._spheroid.upFromLLA(y, v),
													(S[3 * k + 0] = y.x),
													(S[3 * k + 1] = y.y),
													(S[3 * k + 2] = y.z),
													(w[2 * k + 0] = R / 49),
													(w[2 * k + 1] = 1 - A / 49),
													R < 49 &&
														A < 49 &&
														((C[6 * O + 0] = 50 * (A + 0) + (R + 0)),
														(C[6 * O + 3] = 50 * (A + 1) + (R + 1)),
														P
															? ((C[6 * O + 1] = 50 * (A + 1) + (R + 1)),
															  (C[6 * O + 2] = 50 * (A + 0) + (R + 1)),
															  (C[6 * O + 4] = 50 * (A + 0) + (R + 0)),
															  (C[6 * O + 5] = 50 * (A + 1) + (R + 0)))
															: ((C[6 * O + 1] = 50 * (A + 0) + (R + 1)),
															  (C[6 * O + 2] = 50 * (A + 1) + (R + 1)),
															  (C[6 * O + 4] = 50 * (A + 1) + (R + 0)),
															  (C[6 * O + 5] = 50 * (A + 0) + (R + 0))),
														(O += 1)),
													(k += 1);
										var I = this.getThreeJsObjects()[b];
										Ut.setVertices(I.geometry, 'position', x),
											Ut.setVertices(I.geometry, 'normal', S),
											Ut.setVertices(I.geometry, 'uv', w),
											Ut.setIndices(I.geometry, C),
											this._features.has('normalMap') && Ut.computeTangents(I.geometry);
									}
									Et.pool.release(v), yt.pool.release(y);
								}
						}
					}
				]),
				SpheroidComponent
			);
		})();
		He._textureToFeature = new Map([
			['normal', 'normalMap'],
			['night', 'nightMap'],
			['decal', 'decalMap'],
			['specular', 'specularMap']
		]);
		var qe = He;
		function spout_component_typeof(t) {
			return (spout_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function spout_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function spout_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== spout_component_typeof(e) && 'function' != typeof e)
				? (function spout_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function spout_component_getPrototypeOf(t) {
			return (spout_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function spout_component_setPrototypeOf(t, e) {
			return (spout_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ze = (function (t) {
				function SpoutComponent(t, e, n) {
					var r;
					return (
						(function spout_component_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, SpoutComponent),
						((r = spout_component_possibleConstructorReturn(
							this,
							spout_component_getPrototypeOf(SpoutComponent).call(this, t, e, n)
						))._renderWidth = 2048),
						(r._forGlobe = !1),
						(r._globeDistance = 1),
						(r._threeJsRenderer = r.getEntity().getScene().getEngine().__getThreeJsRenderer()),
						(r._threeJsFaceCameras = []),
						(r._threeJsFaceRenderTargets = []),
						(r._threeJsQuad = new i.Mesh()),
						(r._threeJsScene = new i.Scene()),
						(r._threeJsCubeCamera = new i.OrthographicCamera(-1, 1, -1, 1, -1, 1)),
						(r._tagStart = new i.WebGLRenderTarget(2, 3, { minFilter: i.LinearFilter, magFilter: i.NearestFilter })),
						(r._tagEnd = new i.WebGLRenderTarget(3, 2, { minFilter: i.LinearFilter, magFilter: i.NearestFilter })),
						(r._tagSend = new i.WebGLRenderTarget(3, 3, { minFilter: i.LinearFilter, magFilter: i.NearestFilter })),
						(r._spoutTexture = new i.WebGLRenderTarget(r._renderWidth, r._renderWidth / 2, {
							minFilter: i.LinearFilter,
							magFilter: i.NearestFilter
						})),
						r._setupFaceCameras(),
						r._setupQuad(),
						r
					);
				}
				return (
					(function spout_component_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && spout_component_setPrototypeOf(t, e);
					})(SpoutComponent, ye),
					(function spout_component_createClass(t, e, n) {
						return (
							e && spout_component_defineProperties(t.prototype, e), n && spout_component_defineProperties(t, n), t
						);
					})(SpoutComponent, [
						{
							key: 'setRenderWidth',
							value: function setRenderWidth(t) {
								(this._renderWidth = t),
									this._spoutTexture.width !== this._renderWidth &&
										this._spoutTexture.setSize(this._renderWidth, this._renderWidth / 2);
								for (var e = 0; e < 6; e++)
									this._threeJsFaceRenderTargets[e].setSize(this._renderWidth / 4, this._renderWidth / 4);
							}
						},
						{
							key: 'setForGlobe',
							value: function setForGlobe(t, e) {
								if (this._forGlobe !== t) {
									(this._forGlobe = t), (this._globeDistance = e);
									for (var n = 0; n < 6; n++)
										(this._threeJsFaceCameras[n].projectionMatrix.elements[0] = this._forGlobe ? -1 : 1),
											(this._threeJsFaceCameras[n].projectionMatrix.elements[7] = this._forGlobe ? -1 : 1),
											this._threeJsFaceCameras[n].projectionMatrixInverse.getInverse(
												this._threeJsFaceCameras[n].projectionMatrix
											);
									this._threeJsQuad.material instanceof i.RawShaderMaterial &&
										(this._threeJsQuad.material.uniforms.globe.value = this._forGlobe);
								}
							}
						},
						{
							key: '__render',
							value: function __render() {
								this._updateProjectionMatrix();
								var t = 0.7071067811865476,
									e = this.getEntity().getOrientation();
								Ye.set(e.x, e.y, e.z, e.w),
									this._threeJsFaceCameras[0].setRotationFromQuaternion(Ye),
									this._forGlobe
										? Ye.set(t * (e.x + e.y), t * (-e.x + e.y), t * (e.w + e.z), t * (e.w - e.z))
										: Ye.set(t * (e.x - e.y), t * (e.x + e.y), t * (-e.w + e.z), t * (e.w + e.z)),
									this._threeJsFaceCameras[1].setRotationFromQuaternion(Ye),
									Ye.set(e.y, -e.x, e.w, -e.z),
									this._threeJsFaceCameras[2].setRotationFromQuaternion(Ye),
									this._forGlobe
										? Ye.set(t * (e.x - e.y), t * (e.x + e.y), t * (-e.w + e.z), t * (e.w + e.z))
										: Ye.set(t * (e.x + e.y), t * (-e.x + e.y), t * (e.w + e.z), t * (e.w - e.z)),
									this._threeJsFaceCameras[3].setRotationFromQuaternion(Ye),
									Ye.set(t * (e.w + e.x), t * (e.y + e.z), t * (-e.y + e.z), t * (e.w - e.x)),
									this._threeJsFaceCameras[4].setRotationFromQuaternion(Ye),
									Ye.set(t * (-e.w + e.x), t * (e.y - e.z), t * (e.y + e.z), t * (e.w + e.x)),
									this._threeJsFaceCameras[5].setRotationFromQuaternion(Ye);
								for (var n = 0; n < 6; n++)
									this._threeJsRenderer.setRenderTarget(this._threeJsFaceRenderTargets[n]),
										this._threeJsRenderer.render(
											this.getEntity().getScene().getThreeJsScene(),
											this._threeJsFaceCameras[n]
										);
								this._threeJsRenderer.setRenderTarget(this._tagStart),
									this._threeJsRenderer.clearColor(),
									this._threeJsRenderer.setRenderTarget(this._spoutTexture),
									this._threeJsRenderer.clearColor(),
									this._threeJsRenderer.setRenderTarget(this._tagEnd),
									this._threeJsRenderer.clearColor(),
									this._threeJsRenderer.setRenderTarget(null),
									this._threeJsRenderer.setRenderTarget(this._spoutTexture),
									this._threeJsRenderer.render(this._threeJsScene, this._threeJsCubeCamera),
									this._threeJsRenderer.setRenderTarget(this._tagSend),
									this._threeJsRenderer.clearColor();
							}
						},
						{
							key: '_setupFaceCameras',
							value: function _setupFaceCameras() {
								for (var t = 0; t < 6; t++) {
									this._threeJsFaceCameras.push(new i.PerspectiveCamera(90, 1, 0.1, 1e3));
									var e = new i.Matrix4();
									e.set(1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0),
										(this._threeJsFaceCameras[t].projectionMatrix = e),
										this._threeJsFaceCameras[t].projectionMatrixInverse.getInverse(e);
									var n = new i.WebGLRenderTarget(this._renderWidth / 4, this._renderWidth / 4, {
										minFilter: i.LinearFilter,
										magFilter: i.LinearFilter
									});
									this._threeJsFaceRenderTargets.push(n);
								}
							}
						},
						{
							key: '_updateProjectionMatrix',
							value: function _updateProjectionMatrix() {
								var t = this.getEntity().get('camera');
								if (t instanceof Te)
									if (this._forGlobe)
										for (
											var e = Math.max(0.1, t.getAutoNearDistance()),
												n = this._globeDistance,
												r = ((e + n) * (1 - Number.EPSILON)) / (e - n),
												i = (-2 * e * n * (1 - Number.EPSILON)) / (e - n),
												o = i + this._globeDistance * r,
												a = 0;
											a < 6;
											a++
										)
											(this._threeJsFaceCameras[a].projectionMatrix.elements[6] = r),
												(this._threeJsFaceCameras[a].projectionMatrix.elements[14] = i),
												(this._threeJsFaceCameras[a].projectionMatrixInverse.elements[11] = 1 / o),
												(this._threeJsFaceCameras[a].projectionMatrixInverse.elements[13] = -i / o),
												(this._threeJsFaceCameras[a].projectionMatrixInverse.elements[15] = r / o);
									else
										for (
											var s = t.getAutoNearDistance(), l = 1 - Number.EPSILON, c = -s * (2 - Number.EPSILON), u = 0;
											u < 6;
											u++
										)
											(this._threeJsFaceCameras[u].projectionMatrix.elements[6] = l),
												(this._threeJsFaceCameras[u].projectionMatrix.elements[14] = c),
												(this._threeJsFaceCameras[u].projectionMatrixInverse.elements[11] = 1 / c),
												(this._threeJsFaceCameras[u].projectionMatrixInverse.elements[15] = -l / c);
							}
						},
						{
							key: '_setupQuad',
							value: function _setupQuad() {
								var t = new i.BufferGeometry(),
									e = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]),
									n = new Uint16Array([0, 1, 2, 0, 2, 3]);
								t.setAttribute('position', new i.BufferAttribute(e, 2)), t.setIndex(new i.BufferAttribute(n, 1));
								for (var r = { textures: new i.Uniform([]), globe: new i.Uniform(!1) }, o = 0; o < 6; o++)
									r.textures.value.push(this._threeJsFaceRenderTargets[o].texture);
								var a = new i.RawShaderMaterial({
									uniforms: r,
									vertexShader:
										'\n\t\t\t\tattribute vec2 position;\n\t\t\t\tuniform bool globe;\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(globe ? -position.x : position.x, position.y, 0.0, 1.0);\n\t\t\t\t\txy = position;\n\t\t\t\t}',
									fragmentShader:
										'\n\t\t\t\tprecision mediump float;\n\t\t\t\tuniform sampler2D textures[6];\n\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tconst float PI = 3.1415926535897932384626433832795;\n\t\t\t\t\t\n\t\t\t\tvec3 xyToUvFace(vec2 xy) {\n\t\t\t\t\tvec3 xyz = vec3(\n\t\t\t\t\t\tcos(xy.y * PI / 2.0) * cos(xy.x * PI),\n\t\t\t\t\t\tcos(xy.y * PI / 2.0) * sin(xy.x * PI),\n\t\t\t\t\t\tsin(-xy.y * PI / 2.0));\n\n\t\t\t\t\tvec3 basis[3];\n\t\t\t\t\tfloat face;\n\t\t\t\t\tif (xyz.x * xyz.x >= xyz.y * xyz.y && xyz.x * xyz.x >= xyz.z * xyz.z) {\n\t\t\t\t\t\tif (xyz.x >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(1, 0, 0);\n\t\t\t\t\t\t\tface = 0.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, -1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(-1, 0, 0);\n\t\t\t\t\t\t\tface = 2.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (xyz.y * xyz.y >= xyz.x * xyz.x && xyz.y * xyz.y >= xyz.z * xyz.z) {\n\t\t\t\t\t\tif (xyz.y >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(-1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, 1, 0);\n\t\t\t\t\t\t\tface = 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, -1, 0);\n\t\t\t\t\t\t\tface = 3.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (xyz.z >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(-1, 0, 0); basis[2] = vec3(0, 0, 1);\n\t\t\t\t\t\t\tface = 4.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(1, 0, 0); basis[2] = vec3(0, 0, -1);\n\t\t\t\t\t\t\tface = 5.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvec3 uv = vec3(\n\t\t\t\t\t\tbasis[0].x * xyz.x + basis[0].y * xyz.y + basis[0].z * xyz.z,\n\t\t\t\t\t\tbasis[1].x * xyz.x + basis[1].y * xyz.y + basis[1].z * xyz.z,\n\t\t\t\t\t\tbasis[2].x * xyz.x + basis[2].y * xyz.y + basis[2].z * xyz.z);\n\t\t\t\t\tuv.x /= uv.z;\n\t\t\t\t\tuv.y /= uv.z;\n\t\t\t\t\n\t\t\t\t\treturn vec3(0.5 * (uv.x + 1.0), 0.5 * (uv.y + 1.0), face);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 uvFace = xyToUvFace(xy);\n\n\t\t\t\t\tvec4 pixel;\n\t\t\t\t\tint face = int(uvFace.z);\n\n\t\t\t\t\tif (face == 0) {\n\t\t\t\t\t\tpixel = texture2D(textures[0], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 1) {\n\t\t\t\t\t\tpixel = texture2D(textures[1], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 2) {\n\t\t\t\t\t\tpixel = texture2D(textures[2], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 3) {\n\t\t\t\t\t\tpixel = texture2D(textures[3], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 4) {\n\t\t\t\t\t\tpixel = texture2D(textures[4], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 5) {\n\t\t\t\t\t\tpixel = texture2D(textures[5], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\n\t\t\t\t\tgl_FragColor = pixel;\n\t\t\t\t}',
									depthTest: !1,
									depthWrite: !1,
									side: i.DoubleSide
								});
								(this._threeJsQuad = new i.Mesh(t, a)),
									(this._threeJsQuad.frustumCulled = !1),
									this._threeJsScene.add(this._threeJsQuad);
							}
						}
					]),
					SpoutComponent
				);
			})(),
			Ye = new i.Quaternion(),
			Xe = Ze;
		function sprite_component_typeof(t) {
			return (sprite_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function sprite_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function sprite_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function sprite_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== sprite_component_typeof(e) && 'function' != typeof e)
				? (function sprite_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function sprite_component_getPrototypeOf(t) {
			return (sprite_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function sprite_component_setPrototypeOf(t, e) {
			return (sprite_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ke = (function (t) {
			function SpriteComponent(t, e, n) {
				var r;
				return (
					(function sprite_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, SpriteComponent),
					((r = sprite_component_possibleConstructorReturn(
						this,
						sprite_component_getPrototypeOf(SpriteComponent).call(this, t, e, n)
					))._textureUrl = ''),
					(r._size = new st(1, Number.NaN)),
					r._size.freeze(),
					(r._sizeUnits = 'km'),
					(r._colorMultiplier = new z(1, 1, 1, 1)),
					r._colorMultiplier.freeze(),
					(r._alignment = new st(0.5, 0.5)),
					r._alignment.freeze(),
					(r._transparent = !1),
					(r._blending = 'normal'),
					(r._billboard = !1),
					(r._renderOrder = 0),
					r
				);
			}
			return (
				(function sprite_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && sprite_component_setPrototypeOf(t, e);
				})(SpriteComponent, ye),
				(function sprite_component_createClass(t, e, n) {
					return (
						e && sprite_component_defineProperties(t.prototype, e), n && sprite_component_defineProperties(t, n), t
					);
				})(SpriteComponent, [
					{
						key: 'getTextureUrl',
						value: function getTextureUrl() {
							return this._textureUrl;
						}
					},
					{
						key: 'setTextureUrl',
						value: function setTextureUrl(t) {
							(this._textureUrl = t), this.resetResources();
						}
					},
					{
						key: 'getSize',
						value: function getSize() {
							return this._size;
						}
					},
					{
						key: 'setSize',
						value: function setSize(t) {
							this._size.thaw(), this._size.copy(t), this._size.freeze(), this._updateSizeUniform();
						}
					},
					{
						key: 'getSizeUnits',
						value: function getSizeUnits() {
							return this._sizeUnits;
						}
					},
					{
						key: 'setSizeUnits',
						value: function setSizeUnits(t) {
							(this._sizeUnits = t), this._updateSizeUniform();
						}
					},
					{
						key: 'getColorMultiplier',
						value: function getColorMultiplier() {
							return this._colorMultiplier;
						}
					},
					{
						key: 'setColorMultiplier',
						value: function setColorMultiplier(t) {
							this._colorMultiplier.thaw(),
								this._colorMultiplier.copy(t),
								this._colorMultiplier.freeze(),
								Ut.setUniformColorRGBA(this.getThreeJsMaterials()[0], 'colorMultiplier', t);
						}
					},
					{
						key: 'getAlignment',
						value: function getAlignment() {
							return this._alignment;
						}
					},
					{
						key: 'setAlignment',
						value: function setAlignment(t) {
							this._alignment.thaw(),
								this._alignment.copy(t),
								this._alignment.freeze(),
								Ut.setUniformVector2(this.getThreeJsMaterials()[0], 'origin', this._alignment);
						}
					},
					{
						key: 'isBillboard',
						value: function isBillboard() {
							return this._billboard;
						}
					},
					{
						key: 'setBillboard',
						value: function setBillboard(t) {
							this._billboard = t;
						}
					},
					{
						key: 'getTransparent',
						value: function getTransparent() {
							return this._transparent;
						}
					},
					{
						key: 'setTransparent',
						value: function setTransparent(t) {
							(this._transparent = t), Ut.setTransparent(this.getThreeJsMaterials()[0], this._transparent);
						}
					},
					{
						key: 'setBlending',
						value: function setBlending(t) {
							(this._blending = t), Ut.setBlending(this.getThreeJsMaterials()[0], this._blending);
						}
					},
					{
						key: 'getRenderOrder',
						value: function getRenderOrder() {
							return this._renderOrder;
						}
					},
					{
						key: 'setRenderOrder',
						value: function setRenderOrder(t) {
							(this._renderOrder = t), Ut.setRenderOrder(this.getThreeJsObjects()[0], this._renderOrder);
						}
					},
					{
						key: '__prepareForRender',
						value: function __prepareForRender(t) {
							if ('pixels' === this._sizeUnits) {
								var e = st.pool.get(),
									n = this.getEntity().getExtentsRadius() / this.getEntity().getPixelSpaceExtentsRadius(t);
								e.mult(this._size, n),
									Ut.setUniformVector2(this.getThreeJsMaterials()[0], 'size', e),
									st.pool.release(e);
							}
							this.getThreeJsObjects().length > 0 &&
								(this._billboard
									? Ut.setOrientationToBillboard(this.getThreeJsObjects()[0], this.getEntity(), t)
									: Ut.setOrientationToEntity(this.getThreeJsObjects()[0], this.getEntity())),
								Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
						}
					},
					{
						key: '__loadResources',
						value: (function () {
							var t = (function sprite_component_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											sprite_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											sprite_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t, e, n;
									return regeneratorRuntime.wrap(
										function _callee$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														return (r.next = 2), Ut.loadTexture(this, this._textureUrl, !1, !1);
													case 2:
														if (((t = r.sent), 'loading' === this.getLoadState())) {
															r.next = 6;
															break;
														}
														return t.dispose(), r.abrupt('return');
													case 6:
														0 === SpriteComponent._useCount &&
															((SpriteComponent._threeJsGeometry = Ut.createGeometry([
																{ name: 'position', dimensions: 3 },
																{ name: 'uv', dimensions: 2 }
															])),
															Ut.setVertices(
																SpriteComponent._threeJsGeometry,
																'position',
																new Float32Array([0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0])
															),
															Ut.setVertices(
																SpriteComponent._threeJsGeometry,
																'uv',
																new Float32Array([0, 1, 1, 1, 1, 0, 0, 0])
															),
															Ut.setIndices(SpriteComponent._threeJsGeometry, new Uint16Array([0, 1, 2, 2, 3, 0])),
															(SpriteComponent._threeJsMaterial = new i.ShaderMaterial({
																uniforms: {
																	colorMultiplier: new i.Uniform(new i.Vector4(1, 1, 1, 1)),
																	size: new i.Uniform(new i.Vector2(1, 1)),
																	colorTexture: new i.Uniform(null),
																	origin: new i.Uniform(new i.Vector2(0, 0))
																},
																vertexShader:
																	'\n\t\t\t\t\tuniform vec2 size;\n\t\t\t\t\tuniform vec2 origin;\n\t\t\t\t\tvarying vec2 fUV;\n\t\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t#endif\n\t\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4((position.x - origin.x) * size.x, (position.y - origin.y) * size.y, 0.0, 1.0);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tfUV = uv;\n\t\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}',
																fragmentShader:
																	'\n\t\t\t\t\tuniform vec4 colorMultiplier;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tvarying vec2 fUV;\n\t\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\t\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, fUV);\n\t\t\t\t\t\tgl_FragColor *= colorMultiplier;\n\t\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}',
																side: i.DoubleSide
															})),
															Ut.setupLogDepthBuffering(SpriteComponent._threeJsMaterial)),
															(SpriteComponent._useCount += 1),
															(e = SpriteComponent._threeJsMaterial.clone()),
															this.getThreeJsMaterials().push(e),
															Ut.setTransparent(e, this._transparent),
															Ut.setBlending(e, this._blending),
															Ut.setUniformColorRGBA(e, 'colorMultiplier', this._colorMultiplier),
															Ut.setUniformVector2(e, 'origin', this._alignment),
															Ut.setUniformTexture(e, 'colorTexture', t),
															(n = Ut.createMeshObjectGivenGeometry(this, e, SpriteComponent._threeJsGeometry)),
															this.getThreeJsObjects().push(n),
															Ut.setRenderOrder(n, this._renderOrder),
															this._updateSizeUniform();
													case 19:
													case 'end':
														return r.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function __loadResources() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '__unloadResources',
						value: function __unloadResources() {
							Ut.destroyMaterial(this.getThreeJsMaterials()[0]);
							var t = this.getThreeJsObjects()[0];
							void 0 !== t.parent && t.parent.remove(t),
								(SpriteComponent._useCount -= 1),
								0 === SpriteComponent._useCount &&
									(Ut.destroyGeometry(SpriteComponent._threeJsGeometry),
									Ut.destroyMaterial(SpriteComponent._threeJsMaterial));
						}
					},
					{
						key: '_updateSizeUniform',
						value: function _updateSizeUniform() {
							if (this.getThreeJsMaterials().length > 0) {
								var t = this.getThreeJsMaterials()[0].uniforms.colorTexture.value;
								if (null !== t) {
									var e = t.image.width / t.image.height,
										n = st.pool.get();
									Number.isNaN(this._size.x)
										? n.set(this._size.y * e, this._size.y)
										: Number.isNaN(this._size.y)
										? n.set(this._size.x, this._size.x / e)
										: n.set(this._size.x, this._size.y),
										Ut.setUniformVector2(this.getThreeJsMaterials()[0], 'size', n),
										st.pool.release(n),
										'km' === this._sizeUnits
											? this.__setRadius(Math.max(n.x, n.y))
											: this.__setRadius(Number.POSITIVE_INFINITY);
								}
							} else
								'km' === this._sizeUnits
									? Number.isNaN(this._size.x)
										? this.__setRadius(this._size.y)
										: Number.isNaN(this._size.y)
										? this.__setRadius(this._size.y)
										: this.__setRadius(Math.max(this._size.x, this._size.y))
									: this.__setRadius(Number.POSITIVE_INFINITY);
						}
					}
				]),
				SpriteComponent
			);
		})();
		(Ke._threeJsMaterial = null), (Ke._threeJsGeometry = null), (Ke._useCount = 0);
		var We = Ke;
		function starfield_component_typeof(t) {
			return (starfield_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function starfield_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function starfield_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function starfield_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== starfield_component_typeof(e) && 'function' != typeof e)
				? (function starfield_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function starfield_component_getPrototypeOf(t) {
			return (starfield_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function starfield_component_setPrototypeOf(t, e) {
			return (starfield_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function starfield_component_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var Qe = new tt(0.9791532214288992, 0.2031230389823101, 0, 0),
			tn = function Star() {
				starfield_component_classCallCheck(this, Star),
					(this.mag = 0),
					(this.absMag = 0),
					(this.color = new z()),
					(this.position = new yt()),
					(this.particle = null);
			},
			en = (function (t) {
				function StarfieldComponent(t, e, n) {
					var r;
					return (
						starfield_component_classCallCheck(this, StarfieldComponent),
						((r = starfield_component_possibleConstructorReturn(
							this,
							starfield_component_getPrototypeOf(StarfieldComponent).call(this, t, e, n)
						))._url = ''),
						r.__setRadius(1e24),
						r
					);
				}
				return (
					(function starfield_component_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && starfield_component_setPrototypeOf(t, e);
					})(StarfieldComponent, ye),
					(function starfield_component_createClass(t, e, n) {
						return (
							e && starfield_component_defineProperties(t.prototype, e),
							n && starfield_component_defineProperties(t, n),
							t
						);
					})(StarfieldComponent, [
						{
							key: 'getUrl',
							value: function getUrl() {
								return this._url;
							}
						},
						{
							key: 'setUrl',
							value: function setUrl(t) {
								(this._url = t), this.resetResources();
							}
						},
						{
							key: '__prepareForRender',
							value: function __prepareForRender(t) {
								var e = t.getViewport().getBounds(),
									n = Math.sqrt(Math.max(e.size.x, e.size.y) * window.devicePixelRatio) / 60;
								Ut.setUniformNumber(this.getThreeJsMaterials()[0], 'resolutionFactor', n),
									Ut.setPositionToEntity(this.getThreeJsObjects()[0], this.getEntity(), t);
							}
						},
						{
							key: '__loadResources',
							value: (function () {
								var t = (function starfield_component_asyncToGenerator(t) {
									return function () {
										var e = this,
											n = arguments;
										return new Promise(function (r, i) {
											var o = t.apply(e, n);
											function _next(t) {
												starfield_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
											}
											function _throw(t) {
												starfield_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
											}
											_next(void 0);
										});
									};
								})(
									regeneratorRuntime.mark(function _callee() {
										var t, e, n, r, o, a, s, l, c;
										return regeneratorRuntime.wrap(
											function _callee$(u) {
												for (;;)
													switch ((u.prev = u.next)) {
														case 0:
															return (u.next = 2), this._loadStars();
														case 2:
															if (((t = u.sent), !this.isDestroyed())) {
																u.next = 5;
																break;
															}
															return u.abrupt('return');
														case 5:
															for (
																e = new i.ShaderMaterial({
																	vertexShader: StarfieldComponent.vertexShader,
																	fragmentShader: StarfieldComponent.fragmentShader,
																	transparent: !0,
																	blending: i.AdditiveBlending,
																	depthWrite: !1,
																	uniforms: {
																		resolutionFactor: new i.Uniform(1),
																		nearDistance: new i.Uniform(0),
																		midDistance: new i.Uniform(0)
																	}
																}),
																	Ut.setupLogDepthBuffering(e),
																	this.getThreeJsMaterials().push(e),
																	(n = new i.BufferGeometry()).setAttribute(
																		'position',
																		new i.BufferAttribute(new Float32Array(0), 3)
																	),
																	n.setAttribute('color', new i.BufferAttribute(new Float32Array(0), 4)),
																	n.setIndex(new i.BufferAttribute(new Uint16Array(0), 1)),
																	r = new i.Points(n, e),
																	Ut.setupObject(this, r),
																	r.renderOrder = -2,
																	this.getThreeJsObjects().push(r),
																	o = new Float32Array(3 * t.length),
																	a = new Float32Array(4 * t.length),
																	s = new Uint16Array(t.length),
																	l = 0;
																l < t.length;
																l++
															)
																(c = t[l]),
																	(o[3 * l + 0] = c.position.x),
																	(o[3 * l + 1] = c.position.y),
																	(o[3 * l + 2] = c.position.z),
																	(a[4 * l + 0] = c.color.r),
																	(a[4 * l + 1] = c.color.g),
																	(a[4 * l + 2] = c.color.b),
																	(a[4 * l + 3] = c.absMag),
																	(s[l] = l);
															Ut.setVertices(n, 'position', o), Ut.setVertices(n, 'color', a), Ut.setIndices(n, s);
														case 23:
														case 'end':
															return u.stop();
													}
											},
											_callee,
											this
										);
									})
								);
								return function __loadResources() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '__unloadResources',
							value: function __unloadResources() {
								Ut.destroyAllObjectsAndMaterials(this);
							}
						},
						{
							key: '_loadStars',
							value: function _loadStars() {
								return this.getEntity()
									.getScene()
									.getEngine()
									.getDownloader()
									.download(this._url, !0)
									.then(function (t) {
										if ('cancelled' === t.status) return Promise.resolve([]);
										if ('failed' === t.status)
											return Promise.reject(
												new Error('Failed to load starfield component file "' + t.url + '": ' + t.errorMessage)
											);
										if (!(t.content instanceof ArrayBuffer))
											return Promise.reject(
												new Error('Failed to load starfield component file "' + t.url + '": Not a binary file.')
											);
										for (var e = new C(t.content), n = e.readInt32(), r = [], i = 0; i < n; i++) {
											var o = new tn();
											(o.mag = e.readFloat32()),
												(o.absMag = e.readFloat32()),
												(o.color.r = e.readByte() / 255),
												(o.color.g = e.readByte() / 255),
												(o.color.b = e.readByte() / 255),
												o.color.div(o.color, o.color.max()),
												(o.position.y = -e.readFloat32()),
												(o.position.z = e.readFloat32()),
												(o.position.x = e.readFloat32()),
												o.position.rotate(Qe, o.position),
												r.push(o);
										}
										return r;
									});
							}
						}
					]),
					StarfieldComponent
				);
			})();
		(en.vertexShader =
			"\n\t#define PI 3.1415926538\n\n\tattribute vec4 color;\n\tvarying vec4 fColor;\n\n\tuniform float resolutionFactor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\t// Returns the watts per km^2.\n\tfloat absoluteMagnitudeToFlux(float absoluteMagnitude, float distance) {\n\t\tfloat luminosityInWatts = 3.0128e28 * pow(10.0, absoluteMagnitude / -2.5);\n\t\treturn luminosityInWatts / (4.0 * PI * distance * distance);\n\t}\n\n\tvoid main() {\n\t\tvec4 viewPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tfColor = color;\n\n\t\t// Get the flux and brightness of the star at the camera's point.\n\t\tfloat absMag = color.a;\n\t\tfloat distance = length(viewPosition);\n\t\tfloat flux = absoluteMagnitudeToFlux(absMag, distance);\n\t\tfloat brightness = 2.0 * log(1.0 + flux * 1e4);\n\n\t\t// Adjust the color and size so that it is visually pleasing.\n\t\tfColor.a = clamp(brightness * resolutionFactor, 0.05, 1.0);\n\t\tgl_PointSize = clamp(brightness * 4.0 * resolutionFactor, 5.0, 24.0);\n\n\t\t// If it is too close, fade the star.\n\t\tdistance = mix(0.0, fColor.a, clamp((distance - 1.0e12) / 9.0e12, 0.0, 1.0));\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}"),
			(en.fragmentShader =
				'\n\tvarying vec4 fColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\tfloat distanceFromEdge = clamp(1.0 - 2.0 * length(gl_PointCoord - vec2(0.5, 0.5)), 0.0, 1.0);\n\t\tfloat a = pow(distanceFromEdge, 5.0);\n\t\tgl_FragColor.rgb = fColor.rgb;\n\t\tgl_FragColor.a = fColor.a * a;\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = log2(1.0 + fragDepth) * logFactor;\n\t\t#endif\n\t}');
		var nn = en;
		function trail_component_typeof(t) {
			return (trail_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function trail_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function trail_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== trail_component_typeof(e) && 'function' != typeof e)
				? (function trail_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function trail_component_getPrototypeOf(t) {
			return (trail_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function trail_component_setPrototypeOf(t, e) {
			return (trail_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function trail_component_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var rn = function Point() {
				trail_component_classCallCheck(this, Point),
					(this.time = 0),
					(this.position = new yt()),
					(this.velocity = new yt());
			},
			on = (function (t) {
				function TrailComponent(t, e, n) {
					var r;
					return (
						trail_component_classCallCheck(this, TrailComponent),
						((r = trail_component_possibleConstructorReturn(
							this,
							trail_component_getPrototypeOf(TrailComponent).call(this, t, e, n)
						))._color = new z(1, 1, 1, 1)),
						r._color.freeze(),
						(r._alphaFade = 0),
						(r._minWidth = 0),
						(r._maxWidth = 2),
						(r._ignoreDistance = !1),
						(r._startTime = void 0),
						(r._endTime = 0),
						(r._relativeTime = !0),
						(r._relativeToEntity = new wt(r.getEntity().getScene())),
						(r._relativeToEntityOrientation = !1),
						(r._angleCurveThreshold = 0.05235987755),
						(r._points = new d(rn)),
						(r._positions = []),
						(r._colors = []),
						(r._widths = []),
						(r._currentParent = null),
						(r._dashLength = 1),
						(r._dashGapLength = 0),
						(r._lineMesh = null),
						r.__setRadius(Number.POSITIVE_INFINITY),
						r
					);
				}
				return (
					(function trail_component_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && trail_component_setPrototypeOf(t, e);
					})(TrailComponent, ye),
					(function trail_component_createClass(t, e, n) {
						return (
							e && trail_component_defineProperties(t.prototype, e), n && trail_component_defineProperties(t, n), t
						);
					})(TrailComponent, [
						{
							key: 'getColor',
							value: function getColor() {
								return this._color;
							}
						},
						{
							key: 'setColor',
							value: function setColor(t) {
								this._color.thaw(), this._color.copy(t), this._color.freeze();
							}
						},
						{
							key: 'getAlphaFade',
							value: function getAlphaFade() {
								return this._alphaFade;
							}
						},
						{
							key: 'setWidths',
							value: function setWidths(t, e) {
								(this._minWidth = t), (this._maxWidth = e);
							}
						},
						{
							key: 'setAlphaFade',
							value: function setAlphaFade(t) {
								this._alphaFade = t;
							}
						},
						{
							key: 'setDashLength',
							value: function setDashLength(t, e) {
								(this._dashLength = t),
									(this._dashGapLength = e),
									null !== this._lineMesh && this._lineMesh.setDashLength(this._dashLength, this._dashGapLength);
							}
						},
						{
							key: 'getStartTime',
							value: function getStartTime() {
								return this._startTime;
							}
						},
						{
							key: 'setStartTime',
							value: function setStartTime(t) {
								this._startTime = t;
							}
						},
						{
							key: 'getEndTime',
							value: function getEndTime() {
								return this._endTime;
							}
						},
						{
							key: 'setEndTime',
							value: function setEndTime(t) {
								this._endTime = t;
							}
						},
						{
							key: 'isRelativeTime',
							value: function isRelativeTime() {
								return this._relativeTime;
							}
						},
						{
							key: 'setRelativeTime',
							value: function setRelativeTime(t) {
								this._relativeTime = t;
							}
						},
						{
							key: 'getRelativeToEntity',
							value: function getRelativeToEntity() {
								return this._relativeToEntity.getName();
							}
						},
						{
							key: 'setRelativeToEntity',
							value: function setRelativeToEntity(t) {
								this._relativeToEntity.setName(t), this.resetPoints();
							}
						},
						{
							key: 'isRelativeToEntityOrientation',
							value: function isRelativeToEntityOrientation() {
								return this._relativeToEntityOrientation;
							}
						},
						{
							key: 'setRelativeToEntityOrientation',
							value: function setRelativeToEntityOrientation(t) {
								this._relativeToEntityOrientation = t;
							}
						},
						{
							key: 'getAngleCurveThreshold',
							value: function getAngleCurveThreshold() {
								return this._angleCurveThreshold;
							}
						},
						{
							key: 'setAngleCurveThreshold',
							value: function setAngleCurveThreshold(t) {
								(this._angleCurveThreshold = t), this.resetPoints();
							}
						},
						{
							key: 'setIgnoreDistance',
							value: function setIgnoreDistance(t) {
								this._ignoreDistance = t;
							}
						},
						{
							key: 'resetPoints',
							value: function resetPoints() {
								this._points.clear(), (this._positions = []), (this._colors = []), (this._widths = []);
							}
						},
						{
							key: '__loadResources',
							value: function __loadResources() {
								return (this._lineMesh = new Ot(this)), Promise.resolve();
							}
						},
						{
							key: '__unloadResources',
							value: function __unloadResources() {
								Ut.destroyAllObjectsAndMaterials(this), (this._lineMesh = null);
							}
						},
						{
							key: '__prepareForRender',
							value: function __prepareForRender(t) {
								'' === this._relativeToEntity.getName() &&
									this._currentParent !== this.getEntity().getParent() &&
									((this._currentParent = this.getEntity().getParent()), this.resetPoints()),
									this._updatePoints(),
									this._lineMesh.setPositions(this._positions),
									this._lineMesh.setColors(this._colors),
									this._lineMesh.setWidths(this._widths);
								var e = 1;
								this._ignoreDistance || (e *= (0.02 - this.getEntity().getNormalSpaceExtentsRadius(t)) / 0.02);
								this._lineMesh.setAlphaMultiplier(e),
									this._lineMesh.prepareForRender(t),
									Ut.setPositionToEntity(this.getThreeJsObjects(), this.getEntity(), t);
							}
						},
						{
							key: '_updatePoints',
							value: function _updatePoints() {
								var t = J.pool.get(),
									e = this.getEntity().getScene().getEngine().getTime();
								if (this._relativeTime) {
									if (void 0 !== this._startTime) t.min = e - this._startTime;
									else {
										for (var n = null, r = 0; ; r++) {
											var i = this.getEntity().getControllerByType('dynamo', r);
											if (!(i instanceof Mn)) break;
											'orb' === i.getPointType() && i.getCoverage().contains(e) && (n = i);
										}
										if (null !== n) {
											var o = n.getSemiMajorAxis(e),
												a = n.getEccentricity(e),
												s = n.getHeaderValue('gravitationalParameter1') + n.getHeaderValue('gravitationalParameter2'),
												l = o * (a < 1 ? 1 : 16 * Math.min(100, a)),
												c = 2 * Math.PI * l * Math.sqrt(l / s);
											t.min = e - c;
										} else
											t.min =
												e -
												(2 * Math.PI * this.getEntity().getPosition().magnitude()) /
													this.getEntity().getVelocity().magnitude();
									}
									if (void 0 !== this._endTime) t.max = e + this._endTime;
									else {
										for (var u = this.getEntity().getPosition().magnitude(), _ = 0; ; _++) {
											var p = this.getEntity().getControllerByType('dynamo', _);
											if (!(p instanceof Mn)) break;
											if (p.getCoverage().contains(e)) {
												var h = p.getSemiMajorAxis(e);
												if (!isNaN(h)) {
													u = h * Math.sqrt((2 * h - u) / u);
													break;
												}
											}
										}
										t.max = e + (2 * Math.PI * u) / this.getEntity().getVelocity().magnitude();
									}
								} else (t.min = this._startTime), (t.max = this._endTime);
								t.intersection(t, this.getEntity().getPositionCoverage());
								var d = t.length() / 120;
								for (
									this._relativeTime && (this._points.popFront(), this._points.popBack());
									this._points.getCount() > 0 && this._points.peekFront().time < t.min;

								)
									this._points.popFront();
								for (; this._points.getCount() > 0 && this._points.peekBack().time > t.max; ) this._points.popBack();
								for (
									var f = tt.pool.get();
									(0 === this._points.getCount() || this._points.peekFront().time > t.min) &&
									!(this._points.getCount() >= 16e3 && !0 === this._relativeTime);

								) {
									this._points.pushFront();
									var m = this._points.peekFront(),
										g = 0,
										y = Number.POSITIVE_INFINITY,
										v = d;
									this._points.getCount() > 2 && (v = this._points.peekFront(2).time - this._points.peekFront(1).time);
									for (var b = 0; b < 20; ) {
										var x = t.max;
										if (
											(this._points.getCount() > 1 && (x = this._points.peekFront(1).time - v),
											x < t.min && (x = t.min),
											(m.time = x),
											this._getPositionAndVelocity(m.position, m.velocity, m.time),
											m.position.isNaN() || (this._relativeToEntityOrientation && f.isNaN()))
										)
											break;
										var S = 0;
										if (
											(this._points.getCount() > 1 && (S = this._points.peekFront(1).velocity.angle(m.velocity)),
											S > this._angleCurveThreshold)
										)
											(y = v), (v = (g + v) / 2);
										else {
											if (!(this._points.getCount() > 1 && S < this._angleCurveThreshold / 3 && x !== t.min)) break;
											(g = v), y === Number.POSITIVE_INFINITY ? (v *= 2) : (v = (v + y) / 2);
										}
										b++;
									}
									if (m.position.isNaN() || (this._relativeToEntityOrientation && f.isNaN())) {
										this._points.popFront();
										break;
									}
								}
								for (
									tt.pool.release(f), f = tt.pool.get();
									(0 === this._points.getCount() || this._points.peekBack().time < t.max) &&
									!(this._points.getCount() >= 16e3 && !0 === this._relativeTime);

								) {
									this._points.pushBack();
									var T = this._points.peekBack(),
										w = 0,
										C = Number.POSITIVE_INFINITY,
										P = d;
									this._points.getCount() > 2 && (P = this._points.peekBack(1).time - this._points.peekBack(2).time);
									for (var E = 0; E < 20; ) {
										var k = t.min;
										if (
											(this._points.getCount() > 1 && (k = this._points.peekBack(1).time + P),
											k > t.max && (k = t.max),
											(T.time = k),
											this._getPositionAndVelocity(T.position, T.velocity, T.time),
											T.position.isNaN() || (this._relativeToEntityOrientation && f.isNaN()))
										)
											break;
										var O = 0;
										if (
											(this._points.getCount() > 1 && (O = this._points.peekBack(1).velocity.angle(T.velocity)),
											O > this._angleCurveThreshold)
										)
											(C = P), (P = (w + P) / 2);
										else {
											if (!(this._points.getCount() > 1 && O < this._angleCurveThreshold / 3 && k !== t.min)) break;
											(w = P), C === Number.POSITIVE_INFINITY ? (P *= 2) : (P = (P + C) / 2);
										}
										E++;
									}
									if (T.position.isNaN() || (this._relativeToEntityOrientation && f.isNaN())) {
										this._points.popBack();
										break;
									}
								}
								tt.pool.release(f);
								var A = 2 * this._points.getCount() - 2,
									R = 2 * Math.ceil((1.5 * A) / 2);
								if (2.25 * A < this._positions.length || this._positions.length < A) {
									(this._positions = []), (this._colors = []), (this._widths = []);
									for (var I = R, M = 0; M < I; M++)
										this._positions.push(new yt()), this._colors.push(new z()), this._widths.push(1);
								}
								var L =
									'' !== this._relativeToEntity.getName() ? this._relativeToEntity.get() : this.getEntity().getParent();
								if (null !== L) {
									var j = yt.pool.get();
									'' === this._relativeToEntity.getName()
										? j.copy(this.getEntity().getPosition())
										: this.getEntity().getPositionRelativeToEntity(j, yt.Zero, L);
									for (var N = 0, F = this._points.getCount(); N < F; N++)
										this._updatePositionsColorsWidths(
											N,
											t,
											j,
											this._relativeToEntityOrientation ? L.getOrientation() : tt.Identity
										);
									for (var D = Math.max(0, 2 * this._points.getCount() - 2), U = this._colors.length; D < U; D++)
										this._colors[D].a = 0;
									yt.pool.release(j);
								} else this.resetPoints();
								J.pool.release(t);
							}
						},
						{
							key: '_getPositionAndVelocity',
							value: function _getPositionAndVelocity(t, e, n) {
								var r =
									'' !== this._relativeToEntity.getName() ? this._relativeToEntity.get() : this.getEntity().getParent();
								if ('' === this._relativeToEntity.getName()) {
									this.getEntity().getPositionAtTime(t, n), this.getEntity().getVelocityAtTime(e, n);
									var i = this.getEntity().getParent(n);
									null !== i &&
										i !== this._currentParent &&
										(i.getPositionRelativeToEntity(t, t, this._currentParent, n),
										i.getVelocityRelativeToEntity(e, e, this._currentParent, n));
								} else
									null !== r &&
										(this.getEntity().getPositionRelativeToEntity(t, yt.Zero, r, n),
										this.getEntity().getVelocityRelativeToEntity(e, yt.Zero, r, n));
								if (this._relativeToEntityOrientation && null !== r) {
									var o = tt.pool.get();
									r.getOrientationAtTime(o, n), e.rotateInverse(o, e), tt.pool.release(o);
								}
							}
						},
						{
							key: '_updatePositionsColorsWidths',
							value: function _updatePositionsColorsWidths(t, e, n, r) {
								var i =
										'' !== this._relativeToEntity.getName()
											? this._relativeToEntity.get()
											: this.getEntity().getParent(),
									o = this._points.peekFront(t);
								if (t < this._points.getCount() && !n.isNaN()) {
									var a = yt.pool.get();
									if ((a.copy(o.position), this._relativeToEntityOrientation && null !== i)) {
										var s = tt.pool.get();
										i.getOrientationAtTime(s, o.time), s.inverse(s), a.rotate(s, a), a.rotate(r, a), tt.pool.release(s);
									}
									a.sub(a, n),
										t > 0 &&
											(this._positions[2 * t - 1].copy(a),
											this._colors[2 * t - 1].copy(this._color),
											(this._colors[2 * t - 1].a = T.lerp(
												this._alphaFade,
												this._color.a,
												(o.time - e.min) / e.length()
											)),
											(this._widths[2 * t - 1] = T.lerp(
												this._minWidth,
												this._maxWidth,
												(o.time - e.min) / e.length()
											))),
										t < this._points.getCount() - 1 &&
											(this._positions[2 * t + 0].copy(a),
											this._colors[2 * t + 0].copy(this._color),
											(this._colors[2 * t + 0].a = T.lerp(
												this._alphaFade,
												this._color.a,
												(o.time - e.min) / e.length()
											)),
											(this._widths[2 * t + 0] = T.lerp(
												this._minWidth,
												this._maxWidth,
												(o.time - e.min) / e.length()
											))),
										yt.pool.release(a);
								} else
									t > 0 && ((this._colors[2 * t - 2].a = 0), (this._colors[2 * t - 1].a = 0)),
										t < this._points.getCount() - 1 &&
											((this._colors[2 * t + 0].a = 0), (this._colors[2 * t + 1].a = 0));
							}
						}
					]),
					TrailComponent
				);
			})();
		function base_controller_typeof(t) {
			return (base_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function base_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function base_controller_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function base_controller_get(t, e, n) {
			return (base_controller_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function base_controller_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = base_controller_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function base_controller_getPrototypeOf(t) {
			return (base_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function base_controller_setPrototypeOf(t, e) {
			return (base_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var an = (function (t) {
			function BaseController(t, e, n) {
				var r;
				return (
					(function base_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, BaseController),
					((r = (function base_controller_possibleConstructorReturn(t, e) {
						return !e || ('object' !== base_controller_typeof(e) && 'function' != typeof e)
							? base_controller_assertThisInitialized(t)
							: e;
					})(this, base_controller_getPrototypeOf(BaseController).call(this, t, e, n)))._parent = new wt(
						r.getEntity().getScene()
					)),
					(r._coverage = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
					r._coverage.freeze(),
					(r._modifiedStates = new Set()),
					(r._dependentStates = new Set()),
					r.getEntity().getScene().getControllerDependencyGraph().addItem(base_controller_assertThisInitialized(r)),
					r
				);
			}
			return (
				(function base_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && base_controller_setPrototypeOf(t, e);
				})(BaseController, Qt),
				(function base_controller_createClass(t, e, n) {
					return e && base_controller_defineProperties(t.prototype, e), n && base_controller_defineProperties(t, n), t;
				})(BaseController, [
					{
						key: '__destroy',
						value: function __destroy() {
							this.getEntity().getScene().getControllerDependencyGraph().removeItem(this),
								base_controller_get(base_controller_getPrototypeOf(BaseController.prototype), '__destroy', this).call(
									this
								);
						}
					},
					{
						key: 'getParent',
						value: function getParent() {
							return this._parent.getName();
						}
					},
					{
						key: 'setParent',
						value: function setParent(t) {
							this._parent.setName(t);
						}
					},
					{
						key: 'addModifiedState',
						value: function addModifiedState(t) {
							this._modifiedStates.has(t) ||
								(this._modifiedStates.add(t),
								this.getEntity().getScene().getControllerDependencyGraph().needsSorting(),
								('position' !== t && 'orientation' !== t) || this.getEntity().__updateCoverage());
						}
					},
					{
						key: 'removeModifiedState',
						value: function removeModifiedState(t) {
							this._modifiedStates.delete(t) &&
								(this.getEntity().getScene().getControllerDependencyGraph().needsSorting(),
								('position' !== t && 'orientation' !== t) || this.getEntity().__updateCoverage());
						}
					},
					{
						key: 'hasModifiedState',
						value: function hasModifiedState(t) {
							return this._modifiedStates.has(t);
						}
					},
					{
						key: 'addDependentState',
						value: function addDependentState(t, e) {
							this._dependentStates.has(t + '.' + e) ||
								(this._dependentStates.add(t + '.' + e),
								this.getEntity().getScene().getControllerDependencyGraph().needsSorting());
						}
					},
					{
						key: 'removeDependentState',
						value: function removeDependentState(t, e) {
							this._dependentStates.delete(t + '.' + e) &&
								this.getEntity().getScene().getControllerDependencyGraph().needsSorting();
						}
					},
					{
						key: 'hasDependentState',
						value: function hasDependentState(t, e) {
							return this._dependentStates.has(t + '.' + e);
						}
					},
					{
						key: 'getCoverage',
						value: function getCoverage() {
							return this._coverage;
						}
					},
					{
						key: 'setCoverage',
						value: function setCoverage(t) {
							this._coverage.thaw(),
								this._coverage.copy(t),
								this._coverage.freeze(),
								this.getEntity().__updateCoverage();
						}
					},
					{ key: '__updatePositionAtTime', value: function __updatePositionAtTime(t, e) {} },
					{ key: '__updateVelocityAtTime', value: function __updateVelocityAtTime(t, e) {} },
					{ key: '__updateOrientationAtTime', value: function __updateOrientationAtTime(t, e) {} },
					{
						key: 'toString',
						value: function toString() {
							for (var t = 0, e = 0, n = this.getEntity().getNumControllers(); e < n; e++) {
								var r = this.getEntity().getController(e);
								if (this === r) break;
								this.getType() === r.getType() && (t += 1);
							}
							return this.getEntity().getName() + '.' + this.getType() + '.' + t;
						}
					},
					{
						key: '__modifiedStates',
						get: function get() {
							return this._modifiedStates;
						}
					}
				]),
				BaseController
			);
		})();
		function align_controller_typeof(t) {
			return (align_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function align_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function align_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== align_controller_typeof(e) && 'function' != typeof e)
				? (function align_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function align_controller_getPrototypeOf(t) {
			return (align_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function align_controller_setPrototypeOf(t, e) {
			return (align_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var sn = (function (t) {
			function AlignController(t, e, n) {
				var r;
				return (
					(function align_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, AlignController),
					((r = align_controller_possibleConstructorReturn(
						this,
						align_controller_getPrototypeOf(AlignController).call(this, t, e, n)
					))._primaryAlignType = 'none'),
					(r._primaryAxis = new yt(1, 0, 0)),
					r._primaryAxis.freeze(),
					(r._primaryTargetEntity = new wt(r.getEntity().getScene())),
					r._primaryTargetEntity.setRefChangedCallback(function (t, e) {
						r._removeDependentStates(t, r._primaryAlignType), r._addDependentStates(e, r._primaryAlignType);
					}),
					(r._primaryTargetAxis = new yt(1, 0, 0)),
					r._primaryTargetAxis.freeze(),
					(r._secondaryAlignType = 'none'),
					(r._secondaryAxis = new yt(0, 1, 0)),
					r._secondaryAxis.freeze(),
					(r._secondaryTargetEntity = new wt(r.getEntity().getScene())),
					r._secondaryTargetEntity.setRefChangedCallback(function (t, e) {
						r._removeDependentStates(t, r._secondaryAlignType), r._addDependentStates(e, r._secondaryAlignType);
					}),
					(r._secondaryTargetAxis = new yt(0, 1, 0)),
					r._secondaryTargetAxis.freeze(),
					(r._joint = ''),
					(r._jointObject = null),
					(r._model = null),
					(r._modelRootId = 0),
					r.addModifiedState('orientation'),
					r
				);
			}
			return (
				(function align_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && align_controller_setPrototypeOf(t, e);
				})(AlignController, an),
				(function align_controller_createClass(t, e, n) {
					return (
						e && align_controller_defineProperties(t.prototype, e), n && align_controller_defineProperties(t, n), t
					);
				})(AlignController, [
					{
						key: 'getPrimaryAlignType',
						value: function getPrimaryAlignType() {
							return this._primaryAlignType;
						}
					},
					{
						key: 'setPrimaryAlignType',
						value: function setPrimaryAlignType(t) {
							this._primaryAlignType !== t &&
								(this._removeDependentStates(this._primaryTargetEntity.get(), this._primaryAlignType),
								(this._primaryAlignType = t),
								this._addDependentStates(this._primaryTargetEntity.get(), this._primaryAlignType));
						}
					},
					{
						key: 'getPrimaryAxis',
						value: function getPrimaryAxis() {
							return this._primaryAxis;
						}
					},
					{
						key: 'setPrimaryAxis',
						value: function setPrimaryAxis(t) {
							this._primaryAxis.thaw(), this._primaryAxis.copy(t), this._primaryAxis.freeze();
						}
					},
					{
						key: 'getPrimaryTargetEntity',
						value: function getPrimaryTargetEntity() {
							return this._primaryTargetEntity.getName();
						}
					},
					{
						key: 'setPrimaryTargetEntity',
						value: function setPrimaryTargetEntity(t) {
							this._primaryTargetEntity.setName(t);
						}
					},
					{
						key: 'getPrimaryTargetAxis',
						value: function getPrimaryTargetAxis() {
							return this._primaryTargetAxis;
						}
					},
					{
						key: 'setPrimaryTargetAxis',
						value: function setPrimaryTargetAxis(t) {
							this._primaryTargetAxis.thaw(), this._primaryTargetAxis.copy(t), this._primaryTargetAxis.freeze();
						}
					},
					{
						key: 'getSecondaryAlignType',
						value: function getSecondaryAlignType() {
							return this._secondaryAlignType;
						}
					},
					{
						key: 'setSecondaryAlignType',
						value: function setSecondaryAlignType(t) {
							this._secondaryAlignType !== t &&
								(this._removeDependentStates(this._secondaryTargetEntity.get(), this._secondaryAlignType),
								(this._secondaryAlignType = t),
								this._addDependentStates(this._secondaryTargetEntity.get(), this._secondaryAlignType));
						}
					},
					{
						key: 'getSecondaryAxis',
						value: function getSecondaryAxis() {
							return this._secondaryAxis;
						}
					},
					{
						key: 'setSecondaryAxis',
						value: function setSecondaryAxis(t) {
							this._secondaryAxis.thaw(), this._secondaryAxis.copy(t), this._secondaryAxis.freeze();
						}
					},
					{
						key: 'getSecondaryTargetEntity',
						value: function getSecondaryTargetEntity() {
							return this._secondaryTargetEntity.getName();
						}
					},
					{
						key: 'setSecondaryTargetEntity',
						value: function setSecondaryTargetEntity(t) {
							this._secondaryTargetEntity.setName(t);
						}
					},
					{
						key: 'getSecondaryTargetAxis',
						value: function getSecondaryTargetAxis() {
							return this._secondaryTargetAxis;
						}
					},
					{
						key: 'setSecondaryTargetAxis',
						value: function setSecondaryTargetAxis(t) {
							this._secondaryTargetAxis.thaw(), this._secondaryTargetAxis.copy(t), this._secondaryTargetAxis.freeze();
						}
					},
					{
						key: 'setJoint',
						value: function setJoint(t, e) {
							if (((this._joint = t), e)) this._model = e;
							else {
								var n = this.getEntity().get('model');
								n instanceof De && (this._model = n);
							}
							'' !== this._joint
								? (this.addDependentState(this.getEntity().getName(), 'orientation'),
								  this.removeModifiedState('orientation'))
								: (this.removeDependentState(this.getEntity().getName(), 'orientation'),
								  this.addModifiedState('orientation'));
						}
					},
					{
						key: '__updateOrientationAtTime',
						value: function __updateOrientationAtTime(t, e) {
							'' === this._joint && this._getOrientation(t, e);
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = tt.pool.get();
							this._jointObject,
								t.copy(this.getEntity().getOrientation()),
								this._getOrientation(t),
								null !== this._jointObject
									? this._jointObject.quaternion.set(t.x, t.y, t.z, t.w)
									: this.getEntity().setOrientation(t),
								tt.pool.release(t);
						}
					},
					{
						key: '_getOrientation',
						value: function _getOrientation(t, e) {
							if ('' !== this._joint && null !== this._model) {
								var n = this._model.getThreeJsObjects()[0];
								if (
									void 0 !== n &&
									(null === this._jointObject || this._jointObject.name !== this._joint || n.id !== this._modelRootId)
								) {
									var r = this._model.getThreeJsObjectByName(this._joint);
									null !== r && ((this._jointObject = r), (this._modelRootId = n.id));
								}
								if (null === this._jointObject) return;
							}
							var i = yt.pool.get(),
								o = yt.pool.get(),
								a = tt.pool.get(),
								s = tt.pool.get();
							if (null !== this._jointObject) {
								var l = this._jointObject;
								for (
									AlignController._tempThreeJsQuaternion.set(0, 0, 0, 1);
									null !== l.parent && l.parent !== this._model.getThreeJsObjects()[0];

								)
									(l = l.parent),
										AlignController._tempThreeJsQuaternion.multiplyQuaternions(
											l.quaternion,
											AlignController._tempThreeJsQuaternion
										);
								s.copyFromThreeJs(AlignController._tempThreeJsQuaternion),
									s.mult(this._model.getRotation(), s),
									s.mult(t, s);
							} else s.copy(t);
							if (
								(s.isNaN() && s.copy(tt.Identity),
								o.rotate(s, this._primaryAxis),
								this._getAxis(i, this._primaryAlignType, this._primaryTargetEntity, this._primaryTargetAxis, o, e),
								i.isNaN() && i.set(1, 0, 0),
								a.setFromVectorFromTo(o, i),
								t.mult(a, s),
								t.isNaN() && t.copy(tt.Identity),
								yt.pool.release(o),
								tt.pool.release(a),
								'none' !== this._secondaryAlignType &&
									null !== this._secondaryTargetEntity &&
									(this._getAxis(
										i,
										this._secondaryAlignType,
										this._secondaryTargetEntity,
										this._secondaryTargetAxis,
										o,
										e
									),
									!i.isNaN()))
							) {
								var c = tt.pool.get(),
									u = yt.pool.get(),
									_ = yt.pool.get();
								u.rotate(t, this._primaryAxis), _.rotate(t, this._secondaryAxis);
								var p = _.angleAroundAxis(i, u);
								c.setFromAxisAngle(u, p), t.mult(c, t), tt.pool.release(c), yt.pool.release(u), yt.pool.release(_);
							}
							t.normalize(t),
								null !== this._jointObject && t.multInverseL(s, t),
								tt.pool.release(s),
								yt.pool.release(i);
						}
					},
					{
						key: '_getAxis',
						value: function _getAxis(t, e, n, r, i, o) {
							var a = n.get();
							if ('align' === e && null !== a) {
								var s = tt.pool.get();
								a.getOrientationAtTime(s, o), t.rotate(s, r), tt.pool.release(s);
							} else
								'velocity' === e && null !== a
									? (a.getVelocityAtTime(t, o), t.normalize(t))
									: 'point' === e && null !== a
									? (a.getPositionRelativeToEntity(t, yt.Zero, this.getEntity(), o), t.normalize(t))
									: 'position' === e && null !== a
									? t.normalize(a.getPosition())
									: t.copy(i);
						}
					},
					{
						key: '_removeDependentStates',
						value: function _removeDependentStates(t, e) {
							null !== t &&
								('align' === e
									? this.removeDependentState(t.getName(), 'orientation')
									: 'velocity' === e
									? this.removeDependentState(t.getName(), 'velocity')
									: 'point' === e
									? (this.removeDependentState(this.getEntity().getName(), 'position'),
									  this.removeDependentState(t.getName(), 'position'))
									: 'position' === e && this.removeDependentState(t.getName(), 'position'));
						}
					},
					{
						key: '_addDependentStates',
						value: function _addDependentStates(t, e) {
							null !== t &&
								('align' === e
									? this.addDependentState(t.getName(), 'orientation')
									: 'velocity' === e
									? this.addDependentState(t.getName(), 'velocity')
									: 'point' === e
									? (this.addDependentState(this.getEntity().getName(), 'position'),
									  this.addDependentState(t.getName(), 'position'))
									: 'position' === e && this.addDependentState(t.getName(), 'position'));
						}
					}
				]),
				AlignController
			);
		})();
		sn._tempThreeJsQuaternion = new i.Quaternion();
		var ln = sn;
		function animdata_controller_get(t, e, n) {
			return (animdata_controller_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function animdata_controller_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = animdata_controller_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function animdata_controller_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function animdata_controller_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						animdata_controller_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						animdata_controller_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function animdata_controller_typeof(t) {
			return (animdata_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function animdata_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== animdata_controller_typeof(e) && 'function' != typeof e)
				? (function animdata_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function animdata_controller_getPrototypeOf(t) {
			return (animdata_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function animdata_controller_inherits(t, e) {
			if ('function' != typeof e && null !== e)
				throw new TypeError('Super expression must either be null or a function');
			(t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),
				e && animdata_controller_setPrototypeOf(t, e);
		}
		function animdata_controller_setPrototypeOf(t, e) {
			return (animdata_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function animdata_controller_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function animdata_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function animdata_controller_createClass(t, e, n) {
			return (
				e && animdata_controller_defineProperties(t.prototype, e), n && animdata_controller_defineProperties(t, n), t
			);
		}
		var cn = new tt(0.9791532214288992, 0.2031230389823101, 0, 0),
			un = (function () {
				function State() {
					animdata_controller_classCallCheck(this, State);
				}
				return (
					animdata_controller_createClass(State, [
						{ key: 'read', value: function read(t) {} },
						{ key: 'interpolate', value: function interpolate(t, e, n, r) {} }
					]),
					State
				);
			})(),
			_n = (function (t) {
				function PosState() {
					var t;
					return (
						animdata_controller_classCallCheck(this, PosState),
						((t = animdata_controller_possibleConstructorReturn(
							this,
							animdata_controller_getPrototypeOf(PosState).call(this)
						)).position = new yt()),
						(t.velocity = new yt()),
						t
					);
				}
				return (
					animdata_controller_inherits(PosState, un),
					animdata_controller_createClass(PosState, [
						{
							key: 'read',
							value: function read(t) {
								(this.position.y = -t.readFloat64()),
									(this.position.z = t.readFloat64()),
									(this.position.x = t.readFloat64()),
									(this.velocity.y = -t.readFloat64()),
									(this.velocity.z = t.readFloat64()),
									(this.velocity.x = t.readFloat64()),
									this.position.rotate(cn, this.position),
									this.velocity.rotate(cn, this.velocity);
							}
						},
						{
							key: 'interpolate',
							value: function interpolate(t, e, n, r) {
								var i = 1 - r,
									o = i * i,
									a = r * r,
									s = (1 + 2 * r) * o,
									l = r * o,
									c = a * (3 - 2 * r),
									u = a * -i;
								this.position.mult(t.position, s),
									this.position.addMult(this.position, t.velocity, n * l),
									this.position.addMult(this.position, e.position, c),
									this.position.addMult(this.position, e.velocity, n * u);
								var _ = 6 * (a - r),
									p = _,
									h = 3 * a - 4 * r + 1,
									d = -_,
									f = 3 * a - 2 * r;
								this.velocity.mult(t.position, p / n),
									this.velocity.addMult(this.velocity, t.velocity, h),
									this.velocity.addMult(this.velocity, e.position, d / n),
									this.velocity.addMult(this.velocity, e.velocity, f);
							}
						}
					]),
					PosState
				);
			})(),
			pn = (function (t) {
				function OriState() {
					var t;
					return (
						animdata_controller_classCallCheck(this, OriState),
						((t = animdata_controller_possibleConstructorReturn(
							this,
							animdata_controller_getPrototypeOf(OriState).call(this)
						)).orientation = new tt()),
						t
					);
				}
				return (
					animdata_controller_inherits(OriState, un),
					animdata_controller_createClass(OriState, [
						{
							key: 'read',
							value: function read(t) {
								(this.orientation.y = t.readFloat32()),
									(this.orientation.z = -t.readFloat32()),
									(this.orientation.x = -t.readFloat32()),
									(this.orientation.w = t.readFloat32()),
									this.orientation.mult(cn, this.orientation);
							}
						},
						{
							key: 'interpolate',
							value: function interpolate(t, e, n, r) {
								this.orientation.slerp(t.orientation, e.orientation, r);
							}
						}
					]),
					OriState
				);
			})(),
			hn = (function () {
				function DataPoint(t) {
					animdata_controller_classCallCheck(this, DataPoint),
						(this.interval = new J()),
						(this.state = t.__getNewState());
				}
				return (
					animdata_controller_createClass(DataPoint, [
						{
							key: 'read',
							value: function read(t) {
								(this.interval.min = t.readFloat64()), (this.interval.max = t.readFloat64()), this.state.read(t);
							}
						}
					]),
					DataPoint
				);
			})(),
			dn = function AnimdataFile(t, e, n) {
				var r = this;
				animdata_controller_classCallCheck(this, AnimdataFile), (this.interval = new J()), (this.dataPoints = []);
				var i =
					t.getUrl() +
					'/' +
					t.getStateType() +
					'_data/' +
					('00' + e).slice(-3) +
					'.' +
					('000' + (n + 1)).slice(-4) +
					'.animdata';
				this.promise = t
					.getEntity()
					.getScene()
					.getEngine()
					.getDownloader()
					.download(i, !0)
					.then(
						(function () {
							var e = animdata_controller_asyncToGenerator(
								regeneratorRuntime.mark(function _callee(e) {
									var n, i, o, a;
									return regeneratorRuntime.wrap(function _callee$(s) {
										for (;;)
											switch ((s.prev = s.next)) {
												case 0:
													if ('cancelled' !== e.status) {
														s.next = 4;
														break;
													}
													return s.abrupt('return', Promise.resolve());
												case 4:
													if ('failed' !== e.status) {
														s.next = 6;
														break;
													}
													return s.abrupt(
														'return',
														Promise.reject(
															new Error('Failed to load animdata controller file "' + e.url + '": ' + e.errorMessage)
														)
													);
												case 6:
													if (e.content instanceof ArrayBuffer) {
														s.next = 8;
														break;
													}
													return s.abrupt(
														'return',
														Promise.reject(
															new Error('Failed to load animdata controller file "' + e.url + '": Not a binary file.')
														)
													);
												case 8:
													for (
														n = new C(e.content),
															r.interval.min = n.readFloat64(),
															r.interval.max = n.readFloat64(),
															i = n.readInt32(),
															o = 0;
														o < i;
														o++
													)
														(a = new hn(t)).read(n), r.dataPoints.push(a);
												case 13:
												case 'end':
													return s.stop();
											}
									}, _callee);
								})
							);
							return function (t) {
								return e.apply(this, arguments);
							};
						})()
					);
			},
			fn = function FileOverlap() {
				animdata_controller_classCallCheck(this, FileOverlap), (this.fileIndex = 0), (this.interval = new J());
			},
			mn = function BucketOverlap() {
				animdata_controller_classCallCheck(this, BucketOverlap), (this.fileIndex = 0), (this.dataPointIndices = []);
			},
			gn = function Bucket() {
				animdata_controller_classCallCheck(this, Bucket), (this.bucketOverlaps = []);
			},
			yn = function AniminfoFile(t, e, n) {
				var r = this;
				animdata_controller_classCallCheck(this, AniminfoFile), (this.fileOverlaps = new Map()), (this.buckets = []);
				var i =
					t.getUrl() +
					'/' +
					t.getStateType() +
					'_info/' +
					('00' + e).slice(-3) +
					'.' +
					('000' + n).slice(-4) +
					'.animinfo';
				this.promise = t
					.getEntity()
					.getScene()
					.getEngine()
					.getDownloader()
					.download(i, !0)
					.then(
						(function () {
							var t = animdata_controller_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2(t) {
									var e, n, i, o, a, s, l, c, u, _, p, h;
									return regeneratorRuntime.wrap(function _callee2$(d) {
										for (;;)
											switch ((d.prev = d.next)) {
												case 0:
													if ('cancelled' !== t.status) {
														d.next = 4;
														break;
													}
													return d.abrupt('return', Promise.resolve());
												case 4:
													if ('failed' !== t.status) {
														d.next = 6;
														break;
													}
													return d.abrupt(
														'return',
														Promise.reject(
															new Error('Failed to load animdata controller file "' + t.url + '": ' + t.errorMessage)
														)
													);
												case 6:
													if (t.content instanceof ArrayBuffer) {
														d.next = 8;
														break;
													}
													return d.abrupt(
														'return',
														Promise.reject(
															new Error('Failed to load animdata controller file "' + t.url + '": Not a binary file.')
														)
													);
												case 8:
													for (e = new C(t.content), n = e.readInt16(), i = 0; i < n; i++)
														((o = new fn()).fileIndex = e.readInt16()),
															(o.interval.min = e.readFloat64()),
															(o.interval.max = e.readFloat64()),
															r.fileOverlaps.set(o.fileIndex, o);
													for (a = e.readInt16(), s = 0; s < a; s++) {
														for (l = new gn(), c = e.readInt16(), u = 0; u < c; u++) {
															for ((_ = new mn()).fileIndex = e.readInt16(), p = e.readInt16(), h = 0; h < p; h++)
																_.dataPointIndices.push(e.readInt16());
															l.bucketOverlaps.push(_);
														}
														r.buckets.push(l);
													}
												case 13:
												case 'end':
													return d.stop();
											}
									}, _callee2);
								})
							);
							return function (e) {
								return t.apply(this, arguments);
							};
						})()
					);
			},
			vn = function Coverage() {
				animdata_controller_classCallCheck(this, Coverage),
					(this.interval = new J()),
					(this.numDataFiles = 0),
					(this.numBuckets = 0),
					(this.bucketStepSize = 0),
					(this.numBucketsPerAniminfoFile = 0),
					(this.animinfos = new Map()),
					(this.animdatas = new Map());
			},
			bn = function AnimdefFile(t) {
				var e = this;
				animdata_controller_classCallCheck(this, AnimdefFile), (this.coverages = []);
				var n = t.getUrl() + '/' + t.getStateType() + '.animdef';
				this.promise = t
					.getEntity()
					.getScene()
					.getEngine()
					.getDownloader()
					.download(n, !0)
					.then(
						(function () {
							var n = animdata_controller_asyncToGenerator(
								regeneratorRuntime.mark(function _callee3(n) {
									var r, i, o, a;
									return regeneratorRuntime.wrap(function _callee3$(s) {
										for (;;)
											switch ((s.prev = s.next)) {
												case 0:
													if ('cancelled' !== n.status) {
														s.next = 4;
														break;
													}
													return s.abrupt('return', Promise.resolve());
												case 4:
													if ('failed' !== n.status) {
														s.next = 6;
														break;
													}
													return s.abrupt(
														'return',
														Promise.reject(
															new Error('Failed to load animdata controller file "' + n.url + '": ' + n.errorMessage)
														)
													);
												case 6:
													if (n.content instanceof ArrayBuffer) {
														s.next = 8;
														break;
													}
													return s.abrupt(
														'return',
														Promise.reject(
															new Error('Failed to load animdata controller file "' + n.url + '": Not a binary file.')
														)
													);
												case 8:
													for (r = new C(n.content), i = r.readInt16(), o = 0; o < i; o++)
														((a = new vn()).interval.min = r.readFloat64()),
															(a.interval.max = r.readFloat64()),
															(a.numDataFiles = r.readInt16()),
															(a.numBuckets = r.readInt32()),
															(a.bucketStepSize = r.readFloat64()),
															(a.numBucketsPerAniminfoFile = r.readInt16()),
															e.coverages.push(a);
													t.__updateCoverage();
												case 12:
												case 'end':
													return s.stop();
											}
									}, _callee3);
								})
							);
							return function (t) {
								return n.apply(this, arguments);
							};
						})()
					);
			},
			xn = (function (t) {
				function AnimdataController(t, e, n) {
					var r;
					return (
						animdata_controller_classCallCheck(this, AnimdataController),
						((r = animdata_controller_possibleConstructorReturn(
							this,
							animdata_controller_getPrototypeOf(AnimdataController).call(this, t, e, n)
						))._baseUrl = ''),
						(r._stateType = ''),
						(r._animdef = null),
						(r._currentDataPoint = null),
						(r._tempDataPoint = null),
						(r._engine = r.getEntity().getScene().getEngine()),
						(r._forcedCoverage = new J()),
						r._forcedCoverage.copy(r.getCoverage()),
						r
					);
				}
				return (
					animdata_controller_inherits(AnimdataController, an),
					animdata_controller_createClass(AnimdataController, [
						{
							key: 'getUrl',
							value: function getUrl() {
								return this._baseUrl;
							}
						},
						{
							key: 'getStateType',
							value: function getStateType() {
								return this._stateType;
							}
						},
						{
							key: 'setBaseUrlAndStateType',
							value: function setBaseUrlAndStateType(t, e) {
								(this._baseUrl = t),
									(this._stateType = e),
									(this._currentDataPoint = new hn(this)),
									(this._tempDataPoint = new hn(this)),
									(this._animdef = new bn(this)),
									'pos' === this._stateType
										? (this.addModifiedState('position'), this.addModifiedState('velocity'))
										: 'ori' === this._stateType && this.addModifiedState('orientation');
							}
						},
						{
							key: 'setCoverage',
							value: function setCoverage(t) {
								this._forcedCoverage.copy(t), this.__updateCoverage();
							}
						},
						{
							key: '__updateCoverage',
							value: function __updateCoverage() {
								var t = J.pool.get();
								if (null !== this._animdef && this._animdef.coverages.length > 0) {
									t.copy(this._animdef.coverages[0].interval);
									for (var e = 1; e < this._animdef.coverages.length; e++)
										t.union(t, this._animdef.coverages[e].interval);
									t.intersection(t, this._forcedCoverage);
								} else t.copy(this._forcedCoverage), (t.max = t.min);
								animdata_controller_get(
									animdata_controller_getPrototypeOf(AnimdataController.prototype),
									'setCoverage',
									this
								).call(this, t),
									J.pool.release(t);
							}
						},
						{
							key: '__updatePositionAtTime',
							value: function __updatePositionAtTime(t, e) {
								this._tempDataPoint.state instanceof _n &&
									(this._tempDataPoint.interval.min !== e
										? this._getDataPointAtTime(this._tempDataPoint, e) && t.copy(this._tempDataPoint.state.position)
										: t.copy(this._tempDataPoint.state.position));
							}
						},
						{
							key: '__updateVelocityAtTime',
							value: function __updateVelocityAtTime(t, e) {
								this._tempDataPoint.state instanceof _n &&
									(this._tempDataPoint.interval.min !== e
										? this._getDataPointAtTime(this._tempDataPoint, e) && t.copy(this._tempDataPoint.state.velocity)
										: t.copy(this._tempDataPoint.state.velocity));
							}
						},
						{
							key: '__updateOrientationAtTime',
							value: function __updateOrientationAtTime(t, e) {
								this._tempDataPoint.state instanceof pn &&
									this._getDataPointAtTime(this._tempDataPoint, e) &&
									t.copy(this._tempDataPoint.state.orientation);
							}
						},
						{
							key: 'getLoadedPromise',
							value: function getLoadedPromise() {
								return this.downloadDataForInterval(new J(this._engine.getTime(), this._engine.getTime()));
							}
						},
						{
							key: 'downloadDataForInterval',
							value: function downloadDataForInterval(t) {
								var e = this;
								return null === this._animdef
									? null
									: this._animdef.promise.then(
											animdata_controller_asyncToGenerator(
												regeneratorRuntime.mark(function _callee4() {
													var n, r, i, o;
													return regeneratorRuntime.wrap(function _callee4$(a) {
														for (;;)
															switch ((a.prev = a.next)) {
																case 0:
																	(n = []),
																		(r = function _loop(r) {
																			var i = e._animdef.coverages[r];
																			if (i.interval.intersects(t)) {
																				for (
																					var o = Math.floor(
																							(Math.max(t.min, i.interval.min) - i.interval.min) /
																								i.bucketStepSize /
																								i.numBucketsPerAniminfoFile
																						),
																						a = Math.floor(
																							(Math.min(t.max, i.interval.max) - 1e-4 - i.interval.min) /
																								i.bucketStepSize /
																								i.numBucketsPerAniminfoFile
																						),
																						s = function _loop2(o) {
																							i.animinfos.has(o) || i.animinfos.set(o, new yn(e, r, o));
																							var a = i.animinfos.get(o);
																							n.push(
																								a.promise.then(function () {
																									var n = [],
																										o = !0,
																										s = !1,
																										l = void 0;
																									try {
																										for (
																											var c, u = a.fileOverlaps.values()[Symbol.iterator]();
																											!(o = (c = u.next()).done);
																											o = !0
																										) {
																											var _ = c.value;
																											if (_.interval.intersects(t)) {
																												var p = _.fileIndex;
																												i.animdatas.has(p) || i.animdatas.set(p, new dn(e, r, p));
																												var h = i.animdatas.get(p);
																												n.push(h.promise);
																											}
																										}
																									} catch (t) {
																										(s = !0), (l = t);
																									} finally {
																										try {
																											o || null == u.return || u.return();
																										} finally {
																											if (s) throw l;
																										}
																									}
																									return Promise.all(n).then();
																								})
																							);
																						},
																						l = o;
																					l <= a;
																					l++
																				)
																					s(l);
																				return { v: Promise.all(n).then() };
																			}
																		}),
																		(i = 0);
																case 3:
																	if (!(i < e._animdef.coverages.length)) {
																		a.next = 10;
																		break;
																	}
																	if ('object' !== animdata_controller_typeof((o = r(i)))) {
																		a.next = 7;
																		break;
																	}
																	return a.abrupt('return', o.v);
																case 7:
																	i++, (a.next = 3);
																	break;
																case 10:
																case 'end':
																	return a.stop();
															}
													}, _callee4);
												})
											)
									  );
							}
						},
						{
							key: '__getNewState',
							value: function __getNewState() {
								return 'pos' === this._stateType ? new _n() : 'ori' === this._stateType ? new pn() : null;
							}
						},
						{
							key: '__update',
							value: function __update() {
								null !== this._currentDataPoint &&
									this._getDataPointAtTime(this._currentDataPoint, this._engine.getTime()) &&
									(this._currentDataPoint.state instanceof _n &&
										(this.getEntity().setPosition(this._currentDataPoint.state.position),
										this.getEntity().setVelocity(this._currentDataPoint.state.velocity)),
									this._currentDataPoint.state instanceof pn &&
										this.getEntity().setOrientation(this._currentDataPoint.state.orientation));
							}
						},
						{
							key: '_getDataPointAtTime',
							value: function _getDataPointAtTime(t, e) {
								for (var n = 0; n < this._animdef.coverages.length; n++) {
									var r = this._animdef.coverages[n];
									if (r.interval.contains(e)) {
										var i = Math.floor((e - r.interval.min) / r.bucketStepSize / r.numBucketsPerAniminfoFile);
										if (r.animinfos.has(i)) {
											var o = r.animinfos.get(i),
												a = Math.floor((e - r.interval.min) / r.bucketStepSize) - i * r.numBucketsPerAniminfoFile,
												s = o.buckets[a];
											if (void 0 === s) return !1;
											for (var l = 0; l < s.bucketOverlaps.length; l++) {
												var c = s.bucketOverlaps[l],
													u = c.fileIndex;
												if (o.fileOverlaps.get(u).interval.contains(e)) {
													if (r.animdatas.has(u)) {
														for (var _ = r.animdatas.get(u), p = 0; p < c.dataPointIndices.length; p++) {
															var h = c.dataPointIndices[p],
																d = _.dataPoints[h];
															if (void 0 === d) return !1;
															if (d.interval.contains(e)) {
																var f = (e - d.interval.min) / d.interval.length();
																return (
																	(t.interval.min = e),
																	(t.interval.max = e),
																	t.state.interpolate(d.state, _.dataPoints[h + 1].state, d.interval.length(), f),
																	!0
																);
															}
														}
														return !1;
													}
													return r.animdatas.set(u, new dn(this, n, u)), !1;
												}
											}
											return !1;
										}
										return r.animinfos.set(i, new yn(this, n, i)), !1;
									}
								}
								return !1;
							}
						}
					]),
					AnimdataController
				);
			})();
		function coverage_controller_typeof(t) {
			return (coverage_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function coverage_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function coverage_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== coverage_controller_typeof(e) && 'function' != typeof e)
				? (function coverage_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function coverage_controller_getPrototypeOf(t) {
			return (coverage_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function coverage_controller_setPrototypeOf(t, e) {
			return (coverage_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function coverage_controller_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		var Sn = function Coverage(t, e, n, r) {
				coverage_controller_classCallCheck(this, Coverage),
					(this.timeInterval = new J()),
					null === t.min
						? (this.timeInterval.min = Number.NEGATIVE_INFINITY)
						: 'string' == typeof t.min
						? (this.timeInterval.min = A.unixToEt(new Date(t.min).getTime() / 1e3))
						: (this.timeInterval.min = t.min),
					null === t.max
						? (this.timeInterval.max = Number.POSITIVE_INFINITY)
						: 'string' == typeof t.max
						? (this.timeInterval.max = A.unixToEt(new Date(t.max).getTime() / 1e3))
						: (this.timeInterval.max = t.max),
					this.timeInterval.freeze(),
					(this.enterFunction = e),
					(this.exitFunction = n),
					(this.updateFunction = r),
					(this.active = !1);
			},
			Tn = (function (t) {
				function CoverageController(t, e, n) {
					var r;
					return (
						coverage_controller_classCallCheck(this, CoverageController),
						((r = coverage_controller_possibleConstructorReturn(
							this,
							coverage_controller_getPrototypeOf(CoverageController).call(this, t, e, n)
						))._coverages = []),
						r
					);
				}
				return (
					(function coverage_controller_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && coverage_controller_setPrototypeOf(t, e);
					})(CoverageController, an),
					(function coverage_controller_createClass(t, e, n) {
						return (
							e && coverage_controller_defineProperties(t.prototype, e),
							n && coverage_controller_defineProperties(t, n),
							t
						);
					})(CoverageController, [
						{
							key: 'addCoverage',
							value: function addCoverage(t, e, n, r) {
								this._coverages.push(new Sn(t, e, n, r));
							}
						},
						{
							key: 'clearCoverages',
							value: function clearCoverages() {
								this._coverages = [];
							}
						},
						{
							key: 'getStartOfAllCoverages',
							value: function getStartOfAllCoverages() {
								for (var t = Number.POSITIVE_INFINITY, e = 0, n = this._coverages.length; e < n; e++)
									t > this._coverages[e].timeInterval.min && (t = this._coverages[e].timeInterval.min);
								return t;
							}
						},
						{
							key: 'getEndOfAllCoverages',
							value: function getEndOfAllCoverages() {
								for (var t = Number.NEGATIVE_INFINITY, e = 0, n = this._coverages.length; e < n; e++)
									t < this._coverages[e].timeInterval.max && (t = this._coverages[e].timeInterval.max);
								return t;
							}
						},
						{
							key: 'coverageContains',
							value: function coverageContains(t, e) {
								var n = this._coverages[t];
								return void 0 !== n && n.timeInterval.contains(e);
							}
						},
						{
							key: '__update',
							value: function __update() {
								for (
									var t = this.getEntity().getScene().getEngine().getTime(), e = 0, n = this._coverages.length;
									e < n;
									e++
								) {
									var r = this._coverages[e],
										i = r.timeInterval.contains(t);
									!r.active && i && (r.enterFunction && r.enterFunction(this.getEntity()), (r.active = i)),
										r.active && !i && (r.exitFunction && r.exitFunction(this.getEntity()), (r.active = i)),
										i && r.updateFunction && r.updateFunction(this.getEntity());
								}
							}
						}
					]),
					CoverageController
				);
			})();
		function dynamo_controller_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function dynamo_controller_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						dynamo_controller_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						dynamo_controller_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function dynamo_controller_typeof(t) {
			return (dynamo_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function dynamo_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== dynamo_controller_typeof(e) && 'function' != typeof e)
				? dynamo_controller_assertThisInitialized(t)
				: e;
		}
		function dynamo_controller_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function dynamo_controller_get(t, e, n) {
			return (dynamo_controller_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function dynamo_controller_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = dynamo_controller_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function dynamo_controller_getPrototypeOf(t) {
			return (dynamo_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function dynamo_controller_inherits(t, e) {
			if ('function' != typeof e && null !== e)
				throw new TypeError('Super expression must either be null or a function');
			(t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),
				e && dynamo_controller_setPrototypeOf(t, e);
		}
		function dynamo_controller_setPrototypeOf(t, e) {
			return (dynamo_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function dynamo_controller_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function dynamo_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function dynamo_controller_createClass(t, e, n) {
			return e && dynamo_controller_defineProperties(t.prototype, e), n && dynamo_controller_defineProperties(t, n), t;
		}
		var wn = null,
			Cn = null,
			Pn = (function () {
				function Point() {
					dynamo_controller_classCallCheck(this, Point);
				}
				return (
					dynamo_controller_createClass(
						Point,
						[
							{
								key: 'load',
								value: function load(t) {
									this.time = t.readFloat64();
								}
							},
							{ key: 'calculate', value: function calculate(t, e, n, r, i) {} },
							{ key: 'apply', value: function apply(t) {} }
						],
						[
							{
								key: 'readHeader',
								value: function readHeader(t) {
									return {};
								}
							}
						]
					),
					Point
				);
			})(),
			En = (function (t) {
				function PosPoint() {
					var t;
					return (
						dynamo_controller_classCallCheck(this, PosPoint),
						((t = dynamo_controller_possibleConstructorReturn(
							this,
							dynamo_controller_getPrototypeOf(PosPoint).call(this)
						)).position = new yt()),
						(t.velocity = new yt()),
						t
					);
				}
				return (
					dynamo_controller_inherits(PosPoint, Pn),
					dynamo_controller_createClass(
						PosPoint,
						[
							{
								key: 'load',
								value: function load(t) {
									dynamo_controller_get(dynamo_controller_getPrototypeOf(PosPoint.prototype), 'load', this).call(
										this,
										t
									),
										(this.position = new yt(t.readFloat64(), t.readFloat64(), t.readFloat64())),
										(this.velocity = new yt(t.readFloat64(), t.readFloat64(), t.readFloat64()));
								}
							},
							{
								key: 'calculate',
								value: function calculate(t, e, n, r, i) {
									this.time = n;
									var o = T.clamp01((n - t.time) / (e.time - t.time)),
										a = yt.pool.get(),
										s = yt.pool.get();
									a.addMult(t.position, t.velocity, n - t.time),
										s.addMult(e.position, e.velocity, n - e.time),
										this.position.lerp(a, s, o),
										yt.pool.release(a),
										yt.pool.release(s),
										this.velocity.lerp(t.velocity, e.velocity, o);
								}
							},
							{
								key: 'apply',
								value: function apply(t) {
									t.setPosition(this.position), t.setVelocity(this.velocity);
								}
							}
						],
						[
							{
								key: 'readHeader',
								value: function readHeader(t) {
									return {};
								}
							}
						]
					),
					PosPoint
				);
			})(),
			kn = (function (t) {
				function OriPoint() {
					var t;
					return (
						dynamo_controller_classCallCheck(this, OriPoint),
						((t = dynamo_controller_possibleConstructorReturn(
							this,
							dynamo_controller_getPrototypeOf(OriPoint).call(this)
						)).orientation = new tt()),
						(t.angularVelocity = new yt()),
						t
					);
				}
				return (
					dynamo_controller_inherits(OriPoint, Pn),
					dynamo_controller_createClass(
						OriPoint,
						[
							{
								key: 'load',
								value: function load(t) {
									dynamo_controller_get(dynamo_controller_getPrototypeOf(OriPoint.prototype), 'load', this).call(
										this,
										t
									),
										(this.orientation = new tt(t.readFloat64(), t.readFloat64(), t.readFloat64(), t.readFloat64())),
										(this.angularVelocity = new yt(t.readFloat64(), t.readFloat64(), t.readFloat64()));
								}
							},
							{
								key: 'calculate',
								value: function calculate(t, e, n, r, i) {
									this.time = n;
									var o = tt.pool.get(),
										a = tt.pool.get(),
										s = (n - t.time) / (e.time - t.time);
									t._project(o, n, i),
										e._project(a, n, i),
										this.orientation.slerp(o, a, s),
										tt.pool.release(o),
										tt.pool.release(a),
										this.angularVelocity.slerp(t.angularVelocity, e.angularVelocity, s),
										this.angularVelocity.neg(this.angularVelocity),
										this.angularVelocity.rotate(this.orientation, this.angularVelocity);
								}
							},
							{
								key: 'apply',
								value: function apply(t) {
									t.setOrientation(this.orientation), t.setAngularVelocity(this.angularVelocity);
								}
							},
							{
								key: '_project',
								value: function _project(t, e, n) {
									var r = yt.pool.get(),
										i = tt.pool.get();
									r.normalize(this.angularVelocity),
										i.setFromAxisAngle(r, this.angularVelocity.magnitude() * (e - this.time)),
										yt.pool.release(r),
										n ? (i.multInverseR(this.orientation, i), t.mult(t, i)) : t.multInverseR(this.orientation, i),
										tt.pool.release(i);
								}
							}
						],
						[
							{
								key: 'readHeader',
								value: function readHeader(t) {
									return {};
								}
							}
						]
					),
					OriPoint
				);
			})(),
			On = (function (t) {
				function QuatPoint() {
					var t;
					return (
						dynamo_controller_classCallCheck(this, QuatPoint),
						((t = dynamo_controller_possibleConstructorReturn(
							this,
							dynamo_controller_getPrototypeOf(QuatPoint).call(this)
						)).orientation = new tt()),
						(t.angularVelocity = new yt()),
						t
					);
				}
				return (
					dynamo_controller_inherits(QuatPoint, Pn),
					dynamo_controller_createClass(
						QuatPoint,
						[
							{
								key: 'load',
								value: function load(t) {
									dynamo_controller_get(dynamo_controller_getPrototypeOf(QuatPoint.prototype), 'load', this).call(
										this,
										t
									),
										(this.orientation = new tt(t.readFloat64(), t.readFloat64(), t.readFloat64(), t.readFloat64()));
								}
							},
							{
								key: 'calculate',
								value: function calculate(t, e, n, r, i) {
									this.time = n;
									var o = T.clamp01((n - t.time) / (e.time - t.time));
									this.orientation.slerp(t.orientation, e.orientation, o);
								}
							},
							{
								key: 'apply',
								value: function apply(t) {
									t.setOrientation(this.orientation), t.setAngularVelocity(yt.Zero);
								}
							}
						],
						[
							{
								key: 'readHeader',
								value: function readHeader(t) {
									return {};
								}
							}
						]
					),
					QuatPoint
				);
			})(),
			An = (function (t) {
				function OrbPoint() {
					var t;
					return (
						dynamo_controller_classCallCheck(this, OrbPoint),
						((t = dynamo_controller_possibleConstructorReturn(
							this,
							dynamo_controller_getPrototypeOf(OrbPoint).call(this)
						)).oe = new $()),
						t.oe.orbitOrientation.freeze(),
						(t.position = new yt()),
						(t.velocity = new yt()),
						t
					);
				}
				return (
					dynamo_controller_inherits(OrbPoint, Pn),
					dynamo_controller_createClass(
						OrbPoint,
						[
							{
								key: 'load',
								value: function load(t) {
									dynamo_controller_get(dynamo_controller_getPrototypeOf(OrbPoint.prototype), 'load', this).call(
										this,
										t
									),
										(this.oe.epoch = this.time),
										(this.oe.semiMajorAxis = t.readFloat64()),
										(this.oe.eccentricity = t.readFloat64()),
										(this.oe.meanAngularMotion = t.readFloat64()),
										(this.oe.meanAnomalyAtEpoch = t.readFloat64()),
										this.oe.orbitOrientation.thaw(),
										this.oe.orbitOrientation.set(t.readFloat64(), t.readFloat64(), t.readFloat64(), t.readFloat64()),
										this.oe.orbitOrientation.freeze();
								}
							},
							{
								key: 'calculate',
								value: function calculate(t, e, n, r, i) {
									(this.time = n), (this.oe.epoch = n);
									var o = yt.pool.get(),
										a = yt.pool.get(),
										s = yt.pool.get(),
										l = yt.pool.get(),
										c = T.clamp01((n - t.time) / (e.time - t.time));
									t._project(o, s, n, r, i),
										e._project(a, l, n, r, i),
										this.position.lerp(o, a, c),
										this.velocity.lerp(s, l, c),
										yt.pool.release(o),
										yt.pool.release(a),
										yt.pool.release(s),
										yt.pool.release(l);
								}
							},
							{
								key: 'apply',
								value: function apply(t) {
									t.setPosition(this.position), t.setVelocity(this.velocity);
								}
							},
							{
								key: '_project',
								value: function _project(t, e, n, r, i) {
									var o = yt.pool.get(),
										a = yt.pool.get();
									this.oe.project(o, a, n);
									var s = 1;
									1 === r.body
										? (s = r.gravitationalParameter2 / (r.gravitationalParameter1 + r.gravitationalParameter2))
										: 2 === r.body &&
										  (s = -r.gravitationalParameter1 / (r.gravitationalParameter1 + r.gravitationalParameter2)),
										o.mult(o, s),
										a.mult(a, s),
										i ? t.add(o, t) : t.copy(o),
										e.copy(a),
										yt.pool.release(o),
										yt.pool.release(a);
								}
							}
						],
						[
							{
								key: 'readHeader',
								value: function readHeader(t) {
									return { gravitationalParameter1: t.readFloat64(), gravitationalParameter2: t.readFloat64() };
								}
							}
						]
					),
					OrbPoint
				);
			})(),
			Rn = (function () {
				function PointSet(t, e, n, r) {
					dynamo_controller_classCallCheck(this, PointSet),
						(this._PointClass = t),
						(this._version = e),
						(this._numberOfDigits = n),
						(this._name = r),
						(this._pointSets = []),
						(this._points = []),
						(this._hintIndex = 0),
						(this._interval = new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY)),
						(this._loadedState = PointSet.State.NOT_LOADED),
						(this._accessedTime = Number.POSITIVE_INFINITY);
				}
				return (
					dynamo_controller_createClass(PointSet, [
						{
							key: 'getName',
							value: function getName() {
								return this._name;
							}
						},
						{
							key: 'getLoadedState',
							value: function getLoadedState() {
								return this._loadedState;
							}
						},
						{
							key: 'getLoadedTime',
							value: function getLoadedTime() {
								return this._accessedTime;
							}
						},
						{
							key: 'hasPointSets',
							value: function hasPointSets() {
								return 0 !== this._pointSets.length;
							}
						},
						{
							key: 'hasPoints',
							value: function hasPoints() {
								return 0 !== this._points.length;
							}
						},
						{
							key: 'load',
							value: function load(t) {
								var e = !0;
								if (
									((2 === this._version || (1 === this._version && 'def' === this._name)) && (e = 1 === t.readByte()),
									e)
								) {
									for (var n = t.readInt32(), r = 0; r < n; r++) {
										var i = new this._PointClass();
										i.load(t), this._points.push(i);
									}
									this._points.length > 0 &&
										((this._interval.min = this._points[0].time),
										(this._interval.max = this._points[this._points.length - 1].time));
								} else {
									var o = t.readInt32();
									1 === this._version && (this._numberOfDigits = Math.ceil(Math.log10(o)));
									for (var a = 0; a < o; a++) {
										var s = '';
										s =
											'def' === this._name
												? (a + '').padStart(this._numberOfDigits, '0')
												: this._name + '_' + (a + '').padStart(this._numberOfDigits, '0');
										var l = new PointSet(this._PointClass, this._version, this._numberOfDigits, s);
										(l._interval.min = t.readFloat64()),
											1 === this._version
												? (l._interval.max = t.readFloat64())
												: a > 0 && (this._pointSets[a - 1]._interval.max = l._interval.min),
											this._pointSets.push(l);
									}
									2 === this._version && this._pointSets.splice(this._pointSets.length - 1, 1),
										this._pointSets.length > 0 &&
											((this._interval.min = this._pointSets[0]._interval.min),
											(this._interval.max = this._pointSets[this._pointSets.length - 1]._interval.max));
								}
								(this._loadedState = PointSet.State.LOADED), (this._accessedTime = Date.now());
							}
						},
						{
							key: 'loadFromUrl',
							value: function loadFromUrl(t, e) {
								var n = this;
								(this._loadedState = PointSet.State.LOADING),
									t.download(e + '/' + this._name + '.dyn', !0).then(
										(function () {
											var t = dynamo_controller_asyncToGenerator(
												regeneratorRuntime.mark(function _callee(t) {
													var e;
													return regeneratorRuntime.wrap(function _callee$(r) {
														for (;;)
															switch ((r.prev = r.next)) {
																case 0:
																	if ('cancelled' !== t.status) {
																		r.next = 4;
																		break;
																	}
																	return r.abrupt('return', Promise.resolve());
																case 4:
																	if ('failed' !== t.status) {
																		r.next = 6;
																		break;
																	}
																	return r.abrupt(
																		'return',
																		Promise.reject(
																			new Error(
																				'Failed to load dynamo controller file "' + t.url + '": ' + t.errorMessage
																			)
																		)
																	);
																case 6:
																	if (t.content instanceof ArrayBuffer) {
																		r.next = 8;
																		break;
																	}
																	return r.abrupt(
																		'return',
																		Promise.reject(
																			new Error(
																				'Failed to load dynamo controller file "' + t.url + '": Not a binary file.'
																			)
																		)
																	);
																case 8:
																	(e = new C(t.content)), n.load(e);
																case 10:
																case 'end':
																	return r.stop();
															}
													}, _callee);
												})
											);
											return function (e) {
												return t.apply(this, arguments);
											};
										})()
									);
							}
						},
						{
							key: 'unloadOldPointSet',
							value: function unloadOldPointSet() {
								for (var t = 0, e = this._pointSets.length; t < e; t++) {
									var n = this._pointSets[t];
									if (n._loadedState === PointSet.State.LOADED) {
										if (Date.now() - n._accessedTime > 15e3) return n.unload(), !0;
										if (n.unloadOldPointSet()) return !0;
									}
								}
								return !1;
							}
						},
						{
							key: 'unload',
							value: function unload() {
								(this._loadedState = PointSet.State.NOT_LOADED),
									(this._accessedTime = Number.POSITIVE_INFINITY),
									(this._pointSets = []),
									(this._points = []);
							}
						},
						{
							key: 'getPointSet',
							value: function getPointSet(t) {
								if (((this._accessedTime = Date.now()), 0 === this._pointSets.length)) return null;
								if (this._pointSets[this._hintIndex]._interval.contains(t));
								else if (this._hintIndex - 1 >= 0 && this._pointSets[this._hintIndex - 1]._interval.contains(t))
									this._hintIndex -= 1;
								else if (
									this._hintIndex + 1 < this._pointSets.length &&
									this._pointSets[this._hintIndex + 1]._interval.contains(t)
								)
									this._hintIndex += 1;
								else {
									for (var e = 0, n = this._pointSets.length - 1, r = 0; e !== n; )
										(r = Math.ceil((e + n) / 2)), t < this._pointSets[r]._interval.min ? (n = r - 1) : (e = r);
									this._hintIndex = e;
								}
								return this._pointSets[this._hintIndex];
							}
						},
						{
							key: 'getPoints',
							value: function getPoints(t) {
								if (((this._accessedTime = Date.now()), 0 === this._points.length))
									return (wn = null), void (Cn = null);
								if (
									this._hintIndex + 1 < this._points.length &&
									this._points[this._hintIndex].time <= t &&
									t < this._points[this._hintIndex + 1].time
								);
								else if (
									this._hintIndex - 1 >= 0 &&
									this._points[this._hintIndex - 1].time <= t &&
									t < this._points[this._hintIndex].time
								)
									this._hintIndex -= 1;
								else if (
									this._hintIndex + 2 < this._points.length &&
									this._points[this._hintIndex + 1].time <= t &&
									t < this._points[this._hintIndex + 2].time
								)
									this._hintIndex += 1;
								else {
									for (var e = 0, n = this._points.length - 2, r = 0; e !== n; )
										(r = Math.ceil((e + n) / 2)), t < this._points[r].time ? (n = r - 1) : (e = r);
									this._hintIndex = e;
								}
								(wn = this._points[this._hintIndex]), (Cn = this._points[this._hintIndex + 1]);
							}
						}
					]),
					PointSet
				);
			})();
		Rn.State = { NOT_LOADED: 0, LOADING: 1, LOADED: 2 };
		var In = (function (t) {
			function DynamoController(t, e, n) {
				var r;
				return (
					dynamo_controller_classCallCheck(this, DynamoController),
					((r = dynamo_controller_possibleConstructorReturn(
						this,
						dynamo_controller_getPrototypeOf(DynamoController).call(this, t, e, n)
					))._baseUrl = ''),
					(r._dataLoadedAtCurrentTime = !1),
					(r._timeOffset = 0),
					(r._version = 0),
					(r._pointType = ''),
					(r._PointClass = null),
					(r._numberOfDigits = 0),
					(r._header = { body: 0 }),
					(r._incremental = !1),
					(r._pointSet = null),
					(r._downloader = n.getScene().getEngine().getDownloader()),
					(r._lastP0 = null),
					(r._lastP1 = null),
					(r._pCalc = null),
					(r._userCoverage = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
					r._userCoverage.freeze(),
					dynamo_controller_get(
						dynamo_controller_getPrototypeOf(DynamoController.prototype),
						'setCoverage',
						dynamo_controller_assertThisInitialized(r)
					).call(dynamo_controller_assertThisInitialized(r), new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY)),
					r
				);
			}
			return (
				dynamo_controller_inherits(DynamoController, an),
				dynamo_controller_createClass(DynamoController, [
					{
						key: 'getPointType',
						value: function getPointType() {
							return this._pointType;
						}
					},
					{
						key: 'getHeaderValue',
						value: function getHeaderValue(t) {
							return this._header[t];
						}
					},
					{
						key: 'setHeaderValue',
						value: function setHeaderValue(t, e) {
							this._header[t] = e;
						}
					},
					{
						key: 'isIncremental',
						value: function isIncremental() {
							return this._incremental;
						}
					},
					{
						key: 'setIncremental',
						value: function setIncremental(t) {
							this._incremental = t;
						}
					},
					{
						key: 'getBaseUrl',
						value: function getBaseUrl() {
							return this._baseUrl;
						}
					},
					{
						key: 'setBaseUrl',
						value: function setBaseUrl(t) {
							'' !== this._baseUrl &&
								(this._downloader.cancel(this._baseUrl + '/def.dyn'),
								(this._pointSet = null),
								(this._PointClass = null),
								this._userCoverage.thaw(),
								(this._userCoverage = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
								this._userCoverage.freeze(),
								dynamo_controller_get(
									dynamo_controller_getPrototypeOf(DynamoController.prototype),
									'setCoverage',
									this
								).call(this, new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY)),
								(this._dataLoadedAtCurrentTime = !1)),
								(this._baseUrl = t),
								this._baseUrl.endsWith('/') && (this._baseUrl = this._baseUrl.slice(0, -1)),
								this._loadDef();
						}
					},
					{
						key: 'getLoadedPromise',
						value: function getLoadedPromise() {
							var t = this;
							return new Promise(function (e) {
								var n = t.getEntity().getScene().getEngine();
								n.addCallback(function callback() {
									var r = n.getTime();
									(t.isEnabled() &&
										t.getEntity().isEnabled() &&
										'' !== t._baseUrl &&
										(null === t._pointSet || t.getCoverage().contains(r)) &&
										!t._dataLoadedAtCurrentTime) ||
										(n.removeCallback(callback), e());
								}, !0);
							});
						}
					},
					{
						key: 'getTimeOffset',
						value: function getTimeOffset() {
							return this._timeOffset;
						}
					},
					{
						key: 'setTimeOffset',
						value: function setTimeOffset(t) {
							var e = this._timeOffset;
							this._timeOffset = t;
							var n = new J();
							n.copy(this.getCoverage()),
								(n.min += this._timeOffset - e),
								(n.max += this._timeOffset - e),
								dynamo_controller_get(
									dynamo_controller_getPrototypeOf(DynamoController.prototype),
									'setCoverage',
									this
								).call(this, n);
						}
					},
					{
						key: 'setCoverage',
						value: function setCoverage(t) {
							this._userCoverage.thaw(), this._userCoverage.copy(t), this._userCoverage.freeze();
							var e = J.pool.get();
							null !== this._pointSet
								? e.intersection(this._userCoverage, this._pointSet._interval)
								: e.copy(new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY)),
								(e.min += this._timeOffset),
								(e.max += this._timeOffset),
								dynamo_controller_get(
									dynamo_controller_getPrototypeOf(DynamoController.prototype),
									'setCoverage',
									this
								).call(this, e),
								J.pool.release(e);
						}
					},
					{
						key: 'getEccentricity',
						value: function getEccentricity(t) {
							if (
								this._PointClass === An &&
								null !== this._pointSet &&
								(this._getPointsAtTime(t),
								null !== wn && ((this._lastP0 = wn), (this._lastP1 = Cn)),
								null !== this._lastP0)
							) {
								var e = T.clamp01((t - this._lastP0.time) / (this._lastP1.time - this._lastP0.time));
								return T.lerp(this._lastP0.oe.eccentricity, this._lastP1.oe.eccentricity, e);
							}
							return Number.NaN;
						}
					},
					{
						key: 'getSemiMajorAxis',
						value: function getSemiMajorAxis(t) {
							if (
								this._PointClass === An &&
								null !== this._pointSet &&
								(this._getPointsAtTime(t),
								null !== wn && ((this._lastP0 = wn), (this._lastP1 = Cn)),
								null !== this._lastP0)
							) {
								var e = T.clamp01((t - this._lastP0.time) / (this._lastP1.time - this._lastP0.time));
								return T.lerp(this._lastP0.oe.semiMajorAxis, this._lastP1.oe.semiMajorAxis, e);
							}
							return Number.NaN;
						}
					},
					{
						key: 'getOrbitOrientation',
						value: function getOrbitOrientation(t, e) {
							if (
								this._PointClass === An &&
								null !== this._pointSet &&
								(this._getPointsAtTime(e),
								null !== wn && ((this._lastP0 = wn), (this._lastP1 = Cn)),
								null !== this._lastP0)
							) {
								var n = T.clamp01((e - this._lastP0.time) / (this._lastP1.time - this._lastP0.time));
								t.slerp(this._lastP0.oe.orbitOrientation, this._lastP1.oe.orbitOrientation, n);
							}
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							'' !== this._baseUrl && this._downloader.cancel(this._baseUrl + '/def.dyn'),
								dynamo_controller_get(
									dynamo_controller_getPrototypeOf(DynamoController.prototype),
									'__destroy',
									this
								).call(this);
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							if (this.getCoverage().contains(e) && null !== this._pointSet && void 0 !== this._pCalc.position) {
								if (this._pCalc.time !== e) {
									if ((this._getPointsAtTime(e), null === wn)) return;
									this._pCalc.calculate(wn, Cn, e - this._timeOffset, this._header, this._incremental);
								}
								t.copy(this._pCalc.position);
							}
						}
					},
					{
						key: '__updateVelocityAtTime',
						value: function __updateVelocityAtTime(t, e) {
							if (this.getCoverage().contains(e) && null !== this._pointSet && void 0 !== this._pCalc.velocity) {
								if (this._pCalc.time !== e) {
									if ((this._getPointsAtTime(e), null === wn)) return;
									this._pCalc.calculate(wn, Cn, e - this._timeOffset, this._header, this._incremental);
								}
								t.copy(this._pCalc.velocity);
							}
						}
					},
					{
						key: '__updateOrientationAtTime',
						value: function __updateOrientationAtTime(t, e) {
							if (this.getCoverage().contains(e) && null !== this._pointSet && void 0 !== this._pCalc.orientation) {
								if (this._pCalc.time !== e) {
									if ((this._getPointsAtTime(e), null === wn)) return;
									this._pCalc.calculate(wn, Cn, e - this._timeOffset, this._header, this._incremental);
								}
								t.copy(this._pCalc.orientation);
							}
						}
					},
					{
						key: '__update',
						value: function __update() {
							null !== this._pointSet && this._pointSet.unloadOldPointSet();
							var t = this.getEntity().getScene().getEngine().getTime();
							null !== this._pointSet
								? (this._getPointsAtTime(t),
								  null !== wn && ((this._lastP0 = wn), (this._lastP1 = Cn)),
								  null !== this._lastP0
										? (this._pCalc.calculate(
												this._lastP0,
												this._lastP1,
												t - this._timeOffset,
												this._header,
												this._incremental
										  ),
										  this._pCalc.apply(this.getEntity()),
										  (this._dataLoadedAtCurrentTime = !0))
										: (this._dataLoadedAtCurrentTime = !1))
								: (this._dataLoadedAtCurrentTime = !1);
						}
					},
					{
						key: '_loadDef',
						value: (function () {
							var t = dynamo_controller_asyncToGenerator(
								regeneratorRuntime.mark(function _callee3() {
									var t,
										e = this;
									return regeneratorRuntime.wrap(
										function _callee3$(n) {
											for (;;)
												switch ((n.prev = n.next)) {
													case 0:
														return (
															(t = this._baseUrl),
															n.abrupt(
																'return',
																this._downloader
																	.download(this._baseUrl + '/def.dyn', !0)
																	.then(
																		(function () {
																			var t = dynamo_controller_asyncToGenerator(
																				regeneratorRuntime.mark(function _callee2(t) {
																					var n, r;
																					return regeneratorRuntime.wrap(function _callee2$(i) {
																						for (;;)
																							switch ((i.prev = i.next)) {
																								case 0:
																									if ('cancelled' !== t.status) {
																										i.next = 4;
																										break;
																									}
																									return i.abrupt('return', Promise.resolve());
																								case 4:
																									if ('failed' !== t.status) {
																										i.next = 6;
																										break;
																									}
																									return i.abrupt(
																										'return',
																										Promise.reject(
																											new Error(
																												'Failed to load dynamo controller file "' +
																													t.url +
																													'": ' +
																													t.errorMessage
																											)
																										)
																									);
																								case 6:
																									if (t.content instanceof ArrayBuffer) {
																										i.next = 8;
																										break;
																									}
																									return i.abrupt(
																										'return',
																										Promise.reject(
																											new Error(
																												'Failed to load dynamo controller file "' +
																													t.url +
																													'": Not a binary file.'
																											)
																										)
																									);
																								case 8:
																									if (
																										((n = new C(t.content)),
																										(e._version = n.readInt16()),
																										1 === e._version || 2 === e._version)
																									) {
																										i.next = 12;
																										break;
																									}
																									throw new Error(t.url + ' is not Dynamo version 1 or 2');
																								case 12:
																									(e._pointType = n.readString()),
																										'pos' === e._pointType
																											? (e._PointClass = En)
																											: 'ori' === e._pointType
																											? (e._PointClass = kn)
																											: 'quat' === e._pointType
																											? (e._PointClass = On)
																											: 'orb' === e._pointType && (e._PointClass = An),
																										(e._pCalc = new e._PointClass()),
																										e._PointClass === En || e._PointClass === An
																											? (e.addModifiedState('position'), e.addModifiedState('velocity'))
																											: (e._PointClass !== kn && e._PointClass !== On) ||
																											  (e.addModifiedState('orientation'),
																											  e.addModifiedState('angularVelocity')),
																										2 === e._version && (e._numberOfDigits = n.readByte()),
																										(e._header = Object.assign(e._header, e._PointClass.readHeader(n))),
																										(e._pointSet = new Rn(
																											e._PointClass,
																											e._version,
																											e._numberOfDigits,
																											'def'
																										)),
																										e._pointSet.load(n),
																										(r = J.pool.get()).intersection(
																											e._userCoverage,
																											e._pointSet._interval
																										),
																										(r.min += e._timeOffset),
																										(r.max += e._timeOffset),
																										dynamo_controller_get(
																											dynamo_controller_getPrototypeOf(DynamoController.prototype),
																											'setCoverage',
																											e
																										).call(e, r),
																										J.pool.release(r);
																								case 26:
																								case 'end':
																									return i.stop();
																							}
																					}, _callee2);
																				})
																			);
																			return function (e) {
																				return t.apply(this, arguments);
																			};
																		})()
																	)
																	.catch(function (e) {
																		throw new Error('While loading dynamo "'.concat(t, '/def.dyn": ').concat(e));
																	})
															)
														);
													case 2:
													case 'end':
														return n.stop();
												}
										},
										_callee3,
										this
									);
								})
							);
							return function _loadDef() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_getPointsAtTime',
						value: function _getPointsAtTime(t) {
							for (var e = this._pointSet; ; ) {
								if (e.hasPoints()) return void e.getPoints(t - this._timeOffset);
								if (e.getLoadedState() !== Rn.State.LOADED)
									return e.getLoadedState() === Rn.State.NOT_LOADED
										? (e.loadFromUrl(this._downloader, this._baseUrl), (wn = null), void (Cn = null))
										: ((wn = null), void (Cn = null));
								if (null === (e = e.getPointSet(t - this._timeOffset))) return (wn = null), void (Cn = null);
							}
						}
					}
				]),
				DynamoController
			);
		})();
		In.maxLoadedPointSetsPerController = 5;
		var Mn = In;
		function fixed_controller_typeof(t) {
			return (fixed_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function fixed_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function fixed_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== fixed_controller_typeof(e) && 'function' != typeof e)
				? (function fixed_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function fixed_controller_getPrototypeOf(t) {
			return (fixed_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function fixed_controller_setPrototypeOf(t, e) {
			return (fixed_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Ln = (function (t) {
			function FixedController(t, e, n) {
				var r;
				return (
					(function fixed_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, FixedController),
					((r = fixed_controller_possibleConstructorReturn(
						this,
						fixed_controller_getPrototypeOf(FixedController).call(this, t, e, n)
					))._position = null),
					(r._orientation = null),
					r
				);
			}
			return (
				(function fixed_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && fixed_controller_setPrototypeOf(t, e);
				})(FixedController, an),
				(function fixed_controller_createClass(t, e, n) {
					return (
						e && fixed_controller_defineProperties(t.prototype, e), n && fixed_controller_defineProperties(t, n), t
					);
				})(FixedController, [
					{
						key: 'getPosition',
						value: function getPosition() {
							return this._position;
						}
					},
					{
						key: 'setPosition',
						value: function setPosition(t) {
							null !== t
								? (null === this._position && (this._position = new yt()),
								  this._position.thaw(),
								  this._position.copy(t),
								  this._position.freeze())
								: (this._position = null),
								null !== t
									? (this.addModifiedState('position'), this.addModifiedState('velocity'))
									: (this.removeModifiedState('position'), this.removeModifiedState('velocity'));
						}
					},
					{
						key: 'getOrientation',
						value: function getOrientation() {
							return this._orientation;
						}
					},
					{
						key: 'setOrientation',
						value: function setOrientation(t) {
							null !== t
								? (null === this._orientation && (this._orientation = new tt()),
								  this._orientation.thaw(),
								  this._orientation.copy(t),
								  this._orientation.freeze())
								: (this._orientation = null),
								null !== t ? this.addModifiedState('orientation') : this.removeModifiedState('orientation');
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							null !== this._position && t.copy(this._position);
						}
					},
					{
						key: '__updateVelocityAtTime',
						value: function __updateVelocityAtTime(t, e) {
							null !== this._position && t.set(0, 0, 0);
						}
					},
					{
						key: '__updateOrientationAtTime',
						value: function __updateOrientationAtTime(t, e) {
							null !== this._orientation && t.copy(this._orientation);
						}
					},
					{
						key: '__update',
						value: function __update() {
							null !== this._position &&
								(this.getEntity().setPosition(this._position), this.getEntity().setVelocity(yt.Zero)),
								null !== this._orientation && this.getEntity().setOrientation(this._orientation);
						}
					}
				]),
				FixedController
			);
		})();
		function fixed_to_parent_controller_typeof(t) {
			return (fixed_to_parent_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function fixed_to_parent_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function fixed_to_parent_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== fixed_to_parent_controller_typeof(e) && 'function' != typeof e)
				? (function fixed_to_parent_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function fixed_to_parent_controller_getPrototypeOf(t) {
			return (fixed_to_parent_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function fixed_to_parent_controller_setPrototypeOf(t, e) {
			return (fixed_to_parent_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var jn = (function (t) {
			function FixedToParentController(t, e, n) {
				var r;
				!(function fixed_to_parent_controller_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, FixedToParentController),
					((r = fixed_to_parent_controller_possibleConstructorReturn(
						this,
						fixed_to_parent_controller_getPrototypeOf(FixedToParentController).call(this, t, e, n)
					))._lastParentOrientation = new tt());
				var i = r.getEntity().getParent();
				return (
					null !== i && r._lastParentOrientation.copy(i.getOrientation()),
					r.addModifiedState('position'),
					r.addModifiedState('orientation'),
					r.addDependentState('parent', 'orientation'),
					r
				);
			}
			return (
				(function fixed_to_parent_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && fixed_to_parent_controller_setPrototypeOf(t, e);
				})(FixedToParentController, an),
				(function fixed_to_parent_controller_createClass(t, e, n) {
					return (
						e && fixed_to_parent_controller_defineProperties(t.prototype, e),
						n && fixed_to_parent_controller_defineProperties(t, n),
						t
					);
				})(FixedToParentController, [
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getParent();
							if (null !== t) {
								var e = tt.pool.get();
								e.inverse(this._lastParentOrientation), e.mult(t.getOrientation(), e);
								var n = yt.pool.get(),
									r = tt.pool.get();
								n.rotate(e, this.getEntity().getPosition()),
									this.getEntity().setPosition(n),
									r.mult(e, this.getEntity().getOrientation()),
									this.getEntity().setOrientation(r),
									tt.pool.release(r),
									yt.pool.release(n),
									tt.pool.release(e),
									this._lastParentOrientation.copy(t.getOrientation());
							}
						}
					}
				]),
				FixedToParentController
			);
		})();
		function free_fly_controller_typeof(t) {
			return (free_fly_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function free_fly_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function free_fly_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== free_fly_controller_typeof(e) && 'function' != typeof e)
				? (function free_fly_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function free_fly_controller_getPrototypeOf(t) {
			return (free_fly_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function free_fly_controller_setPrototypeOf(t, e) {
			return (free_fly_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var zn = (function (t) {
			function FreeFlyController(t, e, n) {
				var r;
				return (
					(function free_fly_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, FreeFlyController),
					((r = free_fly_controller_possibleConstructorReturn(
						this,
						free_fly_controller_getPrototypeOf(FreeFlyController).call(this, t, e, n)
					))._dragSensitivity = 0.01),
					(r._dragSmoothness = 0.8),
					(r._moveSmoothedValue = new yt(0, 0, 0)),
					(r._changeParentToNearestEntity = !0),
					(r._forcedMoving = new yt()),
					(r._isMoving = !1),
					r.addModifiedState('position'),
					r.addDependentState('parent', 'orientation'),
					r.addDependentState('parent', 'radius'),
					r
				);
			}
			return (
				(function free_fly_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && free_fly_controller_setPrototypeOf(t, e);
				})(FreeFlyController, an),
				(function free_fly_controller_createClass(t, e, n) {
					return (
						e && free_fly_controller_defineProperties(t.prototype, e),
						n && free_fly_controller_defineProperties(t, n),
						t
					);
				})(FreeFlyController, [
					{
						key: 'getDragSensitivity',
						value: function getDragSensitivity() {
							return this._dragSensitivity;
						}
					},
					{
						key: 'setDragSensitivity',
						value: function setDragSensitivity(t) {
							this._dragSensitivity = t;
						}
					},
					{
						key: 'getDragSmoothness',
						value: function getDragSmoothness() {
							return this._dragSmoothness;
						}
					},
					{
						key: 'setDragSmoothness',
						value: function setDragSmoothness(t) {
							this._dragSmoothness = t;
						}
					},
					{
						key: 'getChangeParentToNearestEntity',
						value: function getChangeParentToNearestEntity() {
							return this._changeParentToNearestEntity;
						}
					},
					{
						key: 'setChangeParentToNearestEntity',
						value: function setChangeParentToNearestEntity(t) {
							this._changeParentToNearestEntity = t;
						}
					},
					{
						key: 'getForcedMoving',
						value: function getForcedMoving() {
							return this._forcedMoving;
						}
					},
					{
						key: 'setForcedMoving',
						value: function setForcedMoving(t) {
							this._forcedMoving = t;
						}
					},
					{
						key: 'getParent',
						value: function getParent() {
							if (this._changeParentToNearestEntity && (null === this.getEntity().getParent() || this._isMoving)) {
								var t = this.getEntity().getScene(),
									e = this.getEntity().get('camera');
								if (e instanceof Te) {
									for (var n = null, r = Number.POSITIVE_INFINITY, i = 0, o = t.getNumEntities(); i < o; i++) {
										var a = t.getEntity(i);
										if (a !== this.getEntity() && a.canOcclude()) {
											var s = a.getCameraSpacePosition(e).magnitude() - a.getOcclusionRadius();
											r > s && ((r = s), (n = a));
										}
									}
									return n.getName();
								}
							}
							return '';
						}
					},
					{
						key: '__update',
						value: function __update() {
							if (null !== this.getEntity().getParent()) {
								this.getEntity().getOrientation().isNaN() && this.getEntity().setOrientation(tt.Identity),
									this.getEntity().getPosition().isNaN() && this.getEntity().setPosition(new yt(0, -1, 0));
								var t = yt.pool.get();
								t.set(0, 0, 0);
								var e = this.getEntity().getScene().getEngine().getInput(),
									n = e.getActiveViewport();
								if (null !== n) {
									var r = n.getCamera();
									if (null !== r && r.getEntity() === this.getEntity()) {
										var i = 1;
										e.isKeyPressed('x') && (i = 0.05), e.isKeyPressed('shift') && (i = 5);
										var o = e.getZoomedOffset();
										0 !== o && (t.y += -o * this._dragSensitivity * i),
											e.isKeyPressed('w') && (t.y += this._dragSensitivity * i),
											e.isKeyPressed('s') && (t.y -= this._dragSensitivity * i),
											e.isKeyPressed('d') && (t.x += this._dragSensitivity * i),
											e.isKeyPressed('a') && (t.x -= this._dragSensitivity * i),
											e.isKeyPressed('e') && (t.z += this._dragSensitivity * i),
											e.isKeyPressed('q') && (t.z -= this._dragSensitivity * i);
									}
								}
								t.add(t, this._forcedMoving),
									(this._isMoving = t.magnitudeSqr() > 0),
									this._moveSmoothedValue.lerp(t, this._moveSmoothedValue, this._dragSmoothness),
									!this._isMoving &&
										this._moveSmoothedValue.magnitudeSqr() < 1e-7 &&
										this._moveSmoothedValue.set(0, 0, 0),
									yt.pool.release(t);
								var a = Number.POSITIVE_INFINITY,
									s = this.getEntity().getParent().get('spheroid');
								if (s instanceof qe) {
									var l = yt.pool.get();
									l.rotateInverse(this.getEntity().getParent().getOrientation(), this.getEntity().getPosition());
									var c = Et.pool.get();
									s.getSpheroid().llaFromXYZ(c, l, !1),
										(a = Math.min(a, c.alt)),
										Et.pool.release(c),
										yt.pool.release(l);
								} else
									a = Math.min(
										a,
										this.getEntity().getPosition().magnitude() - this.getEntity().getParent().getOcclusionRadius()
									);
								a = Math.max(0.1, a);
								var u = this.getEntity().getPosition(),
									_ = yt.pool.get(),
									p = yt.pool.get();
								p.rotate(this.getEntity().getOrientation(), this._moveSmoothedValue),
									_.addMult(u, p, a),
									this.getEntity().setPosition(_),
									yt.pool.release(p),
									yt.pool.release(_);
							}
						}
					}
				]),
				FreeFlyController
			);
		})();
		function ground_clamp_controller_typeof(t) {
			return (ground_clamp_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function ground_clamp_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function ground_clamp_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== ground_clamp_controller_typeof(e) && 'function' != typeof e)
				? (function ground_clamp_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function ground_clamp_controller_getPrototypeOf(t) {
			return (ground_clamp_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function ground_clamp_controller_setPrototypeOf(t, e) {
			return (ground_clamp_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Nn = (function (t) {
				function GroundClampController(t, e, n) {
					var r;
					return (
						(function ground_clamp_controller_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, GroundClampController),
						((r = ground_clamp_controller_possibleConstructorReturn(
							this,
							ground_clamp_controller_getPrototypeOf(GroundClampController).call(this, t, e, n)
						))._referenceComponent = null),
						(r._distanceFromGround = 0),
						r.addModifiedState('position'),
						r
					);
				}
				return (
					(function ground_clamp_controller_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && ground_clamp_controller_setPrototypeOf(t, e);
					})(GroundClampController, an),
					(function ground_clamp_controller_createClass(t, e, n) {
						return (
							e && ground_clamp_controller_defineProperties(t.prototype, e),
							n && ground_clamp_controller_defineProperties(t, n),
							t
						);
					})(GroundClampController, [
						{
							key: 'getReferenceComponent',
							value: function getReferenceComponent() {
								return this._referenceComponent;
							}
						},
						{
							key: 'setReferenceComponent',
							value: function setReferenceComponent(t) {
								this._referenceComponent = t;
							}
						},
						{
							key: 'getDistanceFromGround',
							value: function getDistanceFromGround() {
								return this._distanceFromGround;
							}
						},
						{
							key: 'setDistanceFromGround',
							value: function setDistanceFromGround(t) {
								this._distanceFromGround = t;
							}
						},
						{
							key: '__updatePositionAtTime',
							value: function __updatePositionAtTime(t, e) {
								if (null !== this._referenceComponent)
									if (this._referenceComponent.isDestroyed()) this._referenceComponent = null;
									else {
										var n = this._referenceComponent.getEntity(),
											r = this.getEntity().getParent(e);
										if (null !== r) {
											var i = yt.pool.get(),
												o = tt.pool.get();
											n.getOrientationAtTime(o, e),
												r.getPositionRelativeToEntity(i, t, n, e),
												i.rotateInverse(o, i),
												void 0 !== this._referenceComponent.getGroundPosition &&
													this._referenceComponent.getGroundPosition(i, i, this._distanceFromGround),
												i.rotate(o, i),
												n.getPositionRelativeToEntity(t, i, r, e),
												yt.pool.release(i),
												tt.pool.release(o);
										}
									}
							}
						},
						{
							key: '__update',
							value: function __update() {
								if (null !== this._referenceComponent)
									if (this._referenceComponent.isDestroyed()) this._referenceComponent = null;
									else {
										var t = this._referenceComponent.getEntity(),
											e = Fn;
										this.getEntity().getPositionRelativeToEntity(e, yt.Zero, t),
											e.rotateInverse(t.getOrientation(), e),
											void 0 !== this._referenceComponent.getGroundPosition &&
												this._referenceComponent.getGroundPosition(e, e, this._distanceFromGround),
											e.rotate(t.getOrientation(), e),
											t.getPositionRelativeToEntity(e, e, this.getEntity().getParent()),
											this.getEntity().setPosition(e);
									}
							}
						}
					]),
					GroundClampController
				);
			})(),
			Fn = new yt(),
			Dn = Nn;
		function keyframe_controller_typeof(t) {
			return (keyframe_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function keyframe_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function keyframe_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== keyframe_controller_typeof(e) && 'function' != typeof e)
				? (function keyframe_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function keyframe_controller_getPrototypeOf(t) {
			return (keyframe_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function keyframe_controller_setPrototypeOf(t, e) {
			return (keyframe_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Un = (function (t) {
				function KeyframeController(t, e, n) {
					var r;
					return (
						(function keyframe_controller_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, KeyframeController),
						((r = keyframe_controller_possibleConstructorReturn(
							this,
							keyframe_controller_getPrototypeOf(KeyframeController).call(this, t, e, n)
						))._positionKeyframes = []),
						(r._orientationKeyframes = []),
						(r._timesAreRealTime = !1),
						(r._timeOfFirstUpdate = NaN),
						r.setCoverage(new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY)),
						(r._position0 = new yt()),
						(r._position1 = new yt()),
						(r._orientation0 = new tt()),
						(r._orientation1 = new tt()),
						(r._newPosition = new yt()),
						(r._newVelocity = new yt()),
						(r._newOrientation = new tt()),
						(r._tangent0 = new yt()),
						(r._tangent1 = new yt()),
						(r._tempA = new yt()),
						(r._tempB = new yt()),
						r
					);
				}
				return (
					(function keyframe_controller_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && keyframe_controller_setPrototypeOf(t, e);
					})(KeyframeController, an),
					(function keyframe_controller_createClass(t, e, n) {
						return (
							e && keyframe_controller_defineProperties(t.prototype, e),
							n && keyframe_controller_defineProperties(t, n),
							t
						);
					})(KeyframeController, [
						{
							key: 'addPositionKeyframe',
							value: function addPositionKeyframe(t, e) {
								var n = [t, e];
								P.add(n, this._positionKeyframes, Vn),
									1 === this._positionKeyframes.length &&
										(this.addModifiedState('position'), this.addModifiedState('velocity')),
									this._updateCoverage();
							}
						},
						{
							key: 'removePositionKeyframe',
							value: function removePositionKeyframe(t) {
								var e = P.remove(t, this._positionKeyframes, Bn, Gn);
								return (
									e &&
										(0 === this._positionKeyframes.length &&
											(this.removeModifiedState('position'), this.removeModifiedState('velocity')),
										this._updateCoverage()),
									e
								);
							}
						},
						{
							key: 'addOrientationKeyframe',
							value: function addOrientationKeyframe(t, e) {
								var n = [t, e];
								P.add(n, this._orientationKeyframes, Vn),
									1 === this._orientationKeyframes.length && this.addModifiedState('orientation'),
									this._updateCoverage();
							}
						},
						{
							key: 'removeOrientationKeyframe',
							value: function removeOrientationKeyframe(t) {
								var e = P.remove(t, this._orientationKeyframes, Bn, Gn);
								return (
									e &&
										(0 === this._orientationKeyframes.length && this.removeModifiedState('orientation'),
										this._updateCoverage()),
									e
								);
							}
						},
						{
							key: 'areTimesRealTime',
							value: function areTimesRealTime() {
								return this._timesAreRealTime;
							}
						},
						{
							key: 'setTimesAreRealTime',
							value: function setTimesAreRealTime(t) {
								(this._timesAreRealTime = t), this._updateCoverage();
							}
						},
						{
							key: '__updatePositionAtTime',
							value: function __updatePositionAtTime(t, e) {
								this._getPositionAtTime(t, e);
							}
						},
						{
							key: '__updateVelocityAtTime',
							value: function __updateVelocityAtTime(t, e) {
								this._getVelocityAtTime(t, e);
							}
						},
						{
							key: '__updateOrientationAtTime',
							value: function __updateOrientationAtTime(t, e) {
								this._getOrientationAtTime(t, e);
							}
						},
						{
							key: '__update',
							value: function __update() {
								var t = this.getEntity().getScene().getEngine(),
									e = 0;
								this._timesAreRealTime
									? isNaN(this._timeOfFirstUpdate)
										? (this._timeOfFirstUpdate = Date.now() / 1e3)
										: (e = Date.now() / 1e3 - this._timeOfFirstUpdate)
									: (e = t.getTime()),
									this._getPositionAtTime(this._newPosition, e) && this.getEntity().setPosition(this._newPosition),
									this._getVelocityAtTime(this._newVelocity, e) && this.getEntity().setVelocity(this._newVelocity),
									this._getOrientationAtTime(this._newOrientation, e) &&
										this.getEntity().setOrientation(this._newOrientation);
							}
						},
						{
							key: '_getPositionAtTime',
							value: function _getPositionAtTime(t, e) {
								var n = P.getIndex(e, this._positionKeyframes, Bn);
								if (n < this._positionKeyframes.length) {
									if (0 !== n) {
										var r = n - 1,
											i = n,
											o = this._positionKeyframes[r][0],
											a = this._positionKeyframes[i][0];
										if (
											(this._getPositionOfKeyframe(this._position0, this._positionKeyframes[r]),
											this._getPositionOfKeyframe(this._position1, this._positionKeyframes[i]),
											r > 0)
										) {
											var s = this._positionKeyframes[r - 1][0];
											this._getPositionOfKeyframe(this._tempA, this._positionKeyframes[r - 1]),
												this._tempA.sub(this._position0, this._tempA),
												this._tempB.sub(this._position1, this._position0),
												this._tempB.mult(this._tempB, 0.5),
												this._tangent0.addMult(this._tempB, this._tempA, (0.5 * (a - o)) / (o - s));
										} else this._tangent0.sub(this._position1, this._position0);
										if (i < this._positionKeyframes.length - 1) {
											var l = this._positionKeyframes[i + 1][0];
											this._getPositionOfKeyframe(this._tempB, this._positionKeyframes[i + 1]),
												this._tempA.sub(this._position1, this._position0),
												this._tempB.sub(this._tempB, this._position1),
												this._tempA.mult(this._tempA, 0.5),
												this._tangent1.addMult(this._tempA, this._tempB, (0.5 * (a - o)) / (l - a));
										} else this._tangent1.sub(this._position1, this._position0);
										var c = (e - o) / (a - o);
										return (
											this._cubicHermiteSpline(t, this._position0, this._position1, this._tangent0, this._tangent1, c),
											!0
										);
									}
									if (this._positionKeyframes[0][0] === e)
										return this._getPositionOfKeyframe(t, this._positionKeyframes[0]), !0;
								}
								return !1;
							}
						},
						{
							key: '_getVelocityAtTime',
							value: function _getVelocityAtTime(t, e) {
								var n = P.getIndex(e, this._positionKeyframes, Bn);
								if (n < this._positionKeyframes.length) {
									if (0 !== n) {
										var r = n - 1,
											i = n,
											o = this._positionKeyframes[r][0],
											a = this._positionKeyframes[i][0];
										if (
											(this._getPositionOfKeyframe(this._position0, this._positionKeyframes[r]),
											this._getPositionOfKeyframe(this._position1, this._positionKeyframes[i]),
											r > 0)
										) {
											var s = this._positionKeyframes[r - 1][0];
											this._getPositionOfKeyframe(this._tempA, this._positionKeyframes[r - 1]),
												this._tempA.sub(this._position0, this._tempA),
												this._tempB.sub(this._position1, this._position0),
												this._tempB.mult(this._tempB, 0.5),
												this._tangent0.addMult(this._tempB, this._tempA, (0.5 * (a - o)) / (o - s));
										} else this._tangent0.sub(this._position1, this._position0);
										if (i < this._positionKeyframes.length - 1) {
											var l = this._positionKeyframes[i + 1][0];
											this._getPositionOfKeyframe(this._tempB, this._positionKeyframes[i + 1]),
												this._tempA.sub(this._position1, this._position0),
												this._tempB.sub(this._tempB, this._position1),
												this._tempA.mult(this._tempA, 0.5),
												this._tangent1.addMult(this._tempA, this._tempB, (0.5 * (a - o)) / (l - a));
										} else this._tangent1.sub(this._position1, this._position0);
										var c = (e - o) / (a - o);
										return (
											this._cubicHermiteSplineDerivative(
												t,
												this._position0,
												this._position1,
												this._tangent0,
												this._tangent1,
												c
											),
											t.div(t, a - o),
											!0
										);
									}
									if (this._positionKeyframes[0][0] === e) {
										if (this._positionKeyframes.length > 1) {
											var u = this._positionKeyframes[0][0],
												_ = this._positionKeyframes[1][0];
											this._getPositionOfKeyframe(this._position0, this._positionKeyframes[0]),
												this._getPositionOfKeyframe(this._position1, this._positionKeyframes[1]),
												t.sub(this._position1, this._position0),
												t.div(t, _ - u);
										} else t.set(0, 0, 0);
										return !0;
									}
								}
								return !1;
							}
						},
						{
							key: '_getOrientationAtTime',
							value: function _getOrientationAtTime(t, e) {
								var n = P.getIndex(e, this._orientationKeyframes, Bn);
								if (n < this._orientationKeyframes.length) {
									if (0 !== n) {
										var r = n - 1,
											i = n,
											o = this._orientationKeyframes[r][0];
										this._getOrientationOfKeyframe(this._orientation0, this._orientationKeyframes[r]);
										var a = this._orientationKeyframes[i][0];
										return (
											this._getOrientationOfKeyframe(this._orientation1, this._orientationKeyframes[i]),
											t.slerp(this._orientation0, this._orientation1, (e - o) / (a - o)),
											!0
										);
									}
									if (this._orientationKeyframes[0][0] === e)
										return this._getOrientationOfKeyframe(t, this._orientationKeyframes[0]), !0;
								}
								return !1;
							}
						},
						{
							key: '_getPositionOfKeyframe',
							value: function _getPositionOfKeyframe(t, e) {
								var n = e[1];
								if ((t.copy(n.position), void 0 !== n.relativeToEntityOrientation)) {
									var r = void 0 !== e[1].relativeToEntityOrientationTime ? e[1].relativeToEntityOrientationTime : e[0],
										i = n.relativeToEntityOrientation,
										o = tt.pool.get();
									i.getOrientationAtTime(o, r), t.rotate(o, t), tt.pool.release(o);
								}
								if (void 0 !== n.relativeToEntityPosition) {
									var a = void 0 !== e[1].relativeToEntityPositionTime ? e[1].relativeToEntityPositionTime : e[0],
										s = yt.pool.get();
									n.relativeToEntityPosition.getPositionRelativeToEntity(s, yt.Zero, this.getEntity().getParent(), a),
										t.add(s, t),
										yt.pool.release(s);
								}
							}
						},
						{
							key: '_getOrientationOfKeyframe',
							value: function _getOrientationOfKeyframe(t, e) {
								var n = e[1];
								if (void 0 !== n.relativeToEntityOrientation) {
									var r = void 0 !== e[1].relativeToEntityOrientationTime ? e[1].relativeToEntityOrientationTime : e[0];
									n.relativeToEntityOrientation.getOrientationAtTime(t, r), t.mult(t, n.orientation);
								} else t.copy(n.orientation);
							}
						},
						{
							key: '_updateCoverage',
							value: function _updateCoverage() {
								if (this._timesAreRealTime) this.setCoverage(J.Infinite);
								else {
									var t = new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY);
									this._positionKeyframes.length > 0 &&
										((t.min = Math.min(t.min, this._positionKeyframes[0][0])),
										(t.max = Math.max(t.max, this._positionKeyframes[this._positionKeyframes.length - 1][0]))),
										this._orientationKeyframes.length > 0 &&
											((t.min = Math.min(t.min, this._orientationKeyframes[0][0])),
											(t.max = Math.max(t.max, this._orientationKeyframes[this._orientationKeyframes.length - 1][0]))),
										this.setCoverage(t);
								}
							}
						},
						{
							key: '_cubicHermiteSpline',
							value: function _cubicHermiteSpline(t, e, n, r, i, o) {
								var a = o * o,
									s = o * a,
									l = 2 * s - 3 * a + 1,
									c = s - 2 * a + o,
									u = -2 * s + 3 * a,
									_ = s - a;
								(t.x = l * e.x + c * r.x + u * n.x + _ * i.x),
									(t.y = l * e.y + c * r.y + u * n.y + _ * i.y),
									(t.z = l * e.z + c * r.z + u * n.z + _ * i.z);
							}
						},
						{
							key: '_cubicHermiteSplineDerivative',
							value: function _cubicHermiteSplineDerivative(t, e, n, r, i, o) {
								var a = o * o,
									s = 6 * a - 6 * o,
									l = 3 * a - 4 * o + 1,
									c = -6 * a + 6 * o,
									u = 3 * a - 2 * o;
								(t.x = s * e.x + l * r.x + c * n.x + u * i.x),
									(t.y = s * e.y + l * r.y + c * n.y + u * i.y),
									(t.z = s * e.z + l * r.z + c * n.z + u * i.z);
							}
						}
					]),
					KeyframeController
				);
			})(),
			Vn = function isLessAdd(t, e) {
				return t[0] < e[0];
			},
			Bn = function isLess(t, e) {
				return t[0] < e;
			},
			Gn = function isEqual(t, e) {
				return t[0] === e;
			},
			Jn = Un;
		function look_controller_typeof(t) {
			return (look_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function look_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function look_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== look_controller_typeof(e) && 'function' != typeof e)
				? (function look_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function look_controller_getPrototypeOf(t) {
			return (look_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function look_controller_setPrototypeOf(t, e) {
			return (look_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var $n = (function (t) {
			function LookController(t, e, n) {
				var r;
				return (
					(function look_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, LookController),
					((r = look_controller_possibleConstructorReturn(
						this,
						look_controller_getPrototypeOf(LookController).call(this, t, e, n)
					))._dragSensitivity = 0.01),
					(r._dragSmoothness = 0.8),
					(r._yawAngleSmoothedValue = 0),
					(r._pitchAngleSmoothedValue = 0),
					(r._yawAxisType = 'none'),
					(r._yawAxisEntity = null),
					r.addModifiedState('orientation'),
					r
				);
			}
			return (
				(function look_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && look_controller_setPrototypeOf(t, e);
				})(LookController, an),
				(function look_controller_createClass(t, e, n) {
					return e && look_controller_defineProperties(t.prototype, e), n && look_controller_defineProperties(t, n), t;
				})(LookController, [
					{
						key: 'getDragSensitivity',
						value: function getDragSensitivity() {
							return this._dragSensitivity;
						}
					},
					{
						key: 'setDragSensitivity',
						value: function setDragSensitivity(t) {
							this._dragSensitivity = t;
						}
					},
					{
						key: 'getDragSmoothness',
						value: function getDragSmoothness() {
							return this._dragSmoothness;
						}
					},
					{
						key: 'setDragSmoothness',
						value: function setDragSmoothness(t) {
							this._dragSmoothness = t;
						}
					},
					{
						key: 'getYawAxisType',
						value: function getYawAxisType() {
							return this._yawAxisType;
						}
					},
					{
						key: 'setYawAxisType',
						value: function setYawAxisType(t) {
							this._yawAxisType !== t &&
								(null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.removeDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.removeDependentState(this._yawAxisEntity.getName(), 'position')),
								(this._yawAxisType = t),
								null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.addDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.addDependentState(this._yawAxisEntity.getName(), 'position')));
						}
					},
					{
						key: 'getYawAxisEntity',
						value: function getYawAxisEntity() {
							return this._yawAxisEntity;
						}
					},
					{
						key: 'setYawAxisEntity',
						value: function setYawAxisEntity(t) {
							this._yawAxisEntity !== t &&
								(null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.removeDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.removeDependentState(this._yawAxisEntity.getName(), 'position')),
								(this._yawAxisEntity = t),
								null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.addDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.addDependentState(this._yawAxisEntity.getName(), 'position')));
						}
					},
					{
						key: '__update',
						value: function __update() {
							null === this._yawAxisEntity &&
								((this._yawAxisEntity = this.getEntity().getParent()),
								null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.addDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.addDependentState(this._yawAxisEntity.getName(), 'position'))),
								this.getEntity().getOrientation().isNaN() && this.getEntity().setOrientation(tt.Identity);
							var t = 0,
								e = 0,
								n = this.getEntity().getScene().getEngine().getInput(),
								r = n.getActiveViewport();
							if (null !== r) {
								var i = r.getCamera();
								if (null !== i && i.getEntity() === this.getEntity()) {
									var o = 1;
									n.isKeyPressed('x') && (o = 0.05);
									var a = n.getDraggedOffset();
									(t = -a.x * this._dragSensitivity * o), (e = -a.y * this._dragSensitivity * o);
								}
							}
							(this._yawAngleSmoothedValue = T.lerp(t, this._yawAngleSmoothedValue, this._dragSmoothness)),
								(this._pitchAngleSmoothedValue = T.lerp(e, this._pitchAngleSmoothedValue, this._dragSmoothness)),
								Math.abs(this._yawAngleSmoothedValue) < 1e-4 && (this._yawAngleSmoothedValue = 0),
								Math.abs(this._pitchAngleSmoothedValue) < 1e-4 && (this._pitchAngleSmoothedValue = 0);
							var s = yt.pool.get();
							'x-axis' === this._yawAxisType && null !== this._yawAxisEntity
								? this._yawAxisEntity.getOrientation().getAxis(s, 0)
								: 'y-axis' === this._yawAxisType && null !== this._yawAxisEntity
								? this._yawAxisEntity.getOrientation().getAxis(s, 1)
								: 'z-axis' === this._yawAxisType && null !== this._yawAxisEntity
								? this._yawAxisEntity.getOrientation().getAxis(s, 2)
								: 'position' === this._yawAxisType && null !== this._yawAxisEntity
								? s.normalize(this._yawAxisEntity.getPosition())
								: this.getEntity().getOrientation().getAxis(s, 2),
								s.isNaN() && this.getEntity().getOrientation().getAxis(s, 2);
							var l = tt.pool.get();
							l.copy(this.getEntity().getOrientation());
							var c = tt.pool.get(),
								u = yt.pool.get(),
								_ = yt.pool.get();
							this.getEntity().getOrientation().getAxis(_, 1), this.getEntity().getOrientation().getAxis(u, 2);
							var p = u.angleAroundAxis(s, _);
							c.setFromAxisAngle(_, p), c.normalize(c), l.mult(c, l), yt.pool.release(u), yt.pool.release(_);
							var h = yt.pool.get();
							l.getAxis(h, 0),
								c.setFromAxisAngle(h, this._pitchAngleSmoothedValue),
								l.mult(c, l),
								yt.pool.release(h),
								c.setFromAxisAngle(s, this._yawAngleSmoothedValue),
								l.mult(c, l),
								yt.pool.release(s),
								tt.pool.release(c),
								this.getEntity().setOrientation(l),
								tt.pool.release(l);
						}
					}
				]),
				LookController
			);
		})();
		function model_animate_controller_typeof(t) {
			return (model_animate_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function model_animate_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function model_animate_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== model_animate_controller_typeof(e) && 'function' != typeof e)
				? (function model_animate_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function model_animate_controller_getPrototypeOf(t) {
			return (model_animate_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function model_animate_controller_setPrototypeOf(t, e) {
			return (model_animate_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Hn = (function (t) {
			function ModelAnimateController(t, e, n) {
				var r;
				return (
					(function model_animate_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ModelAnimateController),
					((r = model_animate_controller_possibleConstructorReturn(
						this,
						model_animate_controller_getPrototypeOf(ModelAnimateController).call(this, t, e, n)
					))._animations = []),
					r
				);
			}
			return (
				(function model_animate_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && model_animate_controller_setPrototypeOf(t, e);
				})(ModelAnimateController, an),
				(function model_animate_controller_createClass(t, e, n) {
					return (
						e && model_animate_controller_defineProperties(t.prototype, e),
						n && model_animate_controller_defineProperties(t, n),
						t
					);
				})(ModelAnimateController, [
					{
						key: 'setAnimation',
						value: function setAnimation(t, e, n, r) {
							if (null === t) throw new Error('Null model specified.');
							this._animations.push({
								model: t,
								jointName: e,
								animationName: n,
								interval: r,
								animationClip: null,
								rootObject: null,
								jointObject: null,
								animationMixer: null
							});
						}
					},
					{
						key: '__update',
						value: function __update() {
							for (
								var t = this.getEntity().getScene().getEngine().getTime(), e = 0, n = this._animations.length;
								e < n;
								e++
							) {
								var r = this._animations[e];
								if (r.model.isDestroyed()) this._animations.splice(e, 1), e--;
								else if (null !== r.model.getThreeJsObjects()[0]) {
									if (
										(r.rootObject !== r.model.getThreeJsObjects()[0] &&
											((r.rootObject = r.model.getThreeJsObjects()[0]),
											(r.animationClip = null),
											(r.jointObject = null),
											(r.animationMixer = null)),
										null === r.animationClip && (r.animationClip = r.model.getAnimationClip(r.animationName)),
										null === r.jointObject)
									) {
										var o = r.model.getThreeJsObjectByName(r.jointName);
										null !== o && (r.jointObject = o);
									}
									if (
										(null === r.animationMixer &&
											null !== r.animationClip &&
											null !== r.jointObject &&
											((r.animationMixer = new i.AnimationMixer(r.jointObject)),
											r.animationMixer.clipAction(r.animationClip).play()),
										null !== r.animationMixer)
									) {
										var a = T.clamp01((t - r.interval.min) / (r.interval.max - r.interval.min)),
											s =
												(r.animationClip.duration * a * (r.animationClip.tracks[0].times.length - 1)) /
												r.animationClip.tracks[0].times.length;
										r.animationMixer.setTime(s), r.animationMixer.update(0);
									}
								} else r.rootObject = null;
							}
						}
					}
				]),
				ModelAnimateController
			);
		})();
		function orbit_controller_typeof(t) {
			return (orbit_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function orbit_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function orbit_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== orbit_controller_typeof(e) && 'function' != typeof e)
				? (function orbit_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function orbit_controller_getPrototypeOf(t) {
			return (orbit_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function orbit_controller_setPrototypeOf(t, e) {
			return (orbit_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var qn = (function (t) {
			function OrbitController(t, e, n) {
				var r;
				return (
					(function orbit_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, OrbitController),
					((r = orbit_controller_possibleConstructorReturn(
						this,
						orbit_controller_getPrototypeOf(OrbitController).call(this, t, e, n)
					))._dragSensitivity = 0.01),
					(r._dragSmoothness = 0.8),
					(r._yawChangeSmoothedValue = 0),
					(r._pitchChangeSmoothedValue = 0),
					(r._yawAxisType = 'none'),
					(r._yawAxisEntity = null),
					(r._pitchAxisType = 'none'),
					(r._pitchAxisEntity = null),
					(r._slowWhenCloseToParent = !1),
					(r._yawAngleLimits = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
					r._yawAngleLimits.freeze(),
					(r._pitchAngleLimits = new J(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY)),
					r._pitchAngleLimits.freeze(),
					r.addModifiedState('position'),
					r.addModifiedState('orientation'),
					r
				);
			}
			return (
				(function orbit_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && orbit_controller_setPrototypeOf(t, e);
				})(OrbitController, an),
				(function orbit_controller_createClass(t, e, n) {
					return (
						e && orbit_controller_defineProperties(t.prototype, e), n && orbit_controller_defineProperties(t, n), t
					);
				})(OrbitController, [
					{
						key: 'getDragSensitivity',
						value: function getDragSensitivity() {
							return this._dragSensitivity;
						}
					},
					{
						key: 'setDragSensitivity',
						value: function setDragSensitivity(t) {
							this._dragSensitivity = t;
						}
					},
					{
						key: 'getDragSmoothness',
						value: function getDragSmoothness() {
							return this._dragSmoothness;
						}
					},
					{
						key: 'setDragSmoothness',
						value: function setDragSmoothness(t) {
							this._dragSmoothness = t;
						}
					},
					{
						key: 'getYawAxisType',
						value: function getYawAxisType() {
							return this._yawAxisType;
						}
					},
					{
						key: 'setYawAxisType',
						value: function setYawAxisType(t) {
							this._yawAxisType !== t &&
								(null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.removeDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.removeDependentState(this._yawAxisEntity.getName(), 'position')),
								(this._yawAxisType = t),
								null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.addDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.addDependentState(this._yawAxisEntity.getName(), 'position')));
						}
					},
					{
						key: 'getPitchAxisType',
						value: function getPitchAxisType() {
							return this._pitchAxisType;
						}
					},
					{
						key: 'setPitchAxisType',
						value: function setPitchAxisType(t) {
							this._pitchAxisType !== t &&
								(null !== this._pitchAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._pitchAxisType)
										? this.removeDependentState(this._pitchAxisEntity.getName(), 'orientation')
										: 'position' === this._pitchAxisType &&
										  this.removeDependentState(this._pitchAxisEntity.getName(), 'position')),
								(this._pitchAxisType = t),
								null !== this._pitchAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._pitchAxisType)
										? this.addDependentState(this._pitchAxisEntity.getName(), 'orientation')
										: 'position' === this._pitchAxisType &&
										  this.addDependentState(this._pitchAxisEntity.getName(), 'position')));
						}
					},
					{
						key: 'getYawAxisEntity',
						value: function getYawAxisEntity() {
							return this._yawAxisEntity;
						}
					},
					{
						key: 'setYawAxisEntity',
						value: function setYawAxisEntity(t) {
							this._yawAxisEntity !== t &&
								(null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.removeDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.removeDependentState(this._yawAxisEntity.getName(), 'position')),
								(this._yawAxisEntity = t),
								null !== this._yawAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._yawAxisType)
										? this.addDependentState(this._yawAxisEntity.getName(), 'orientation')
										: 'position' === this._yawAxisType &&
										  this.addDependentState(this._yawAxisEntity.getName(), 'position')));
						}
					},
					{
						key: 'getPitchAxisEntity',
						value: function getPitchAxisEntity() {
							return this._pitchAxisEntity;
						}
					},
					{
						key: 'setPitchAxisEntity',
						value: function setPitchAxisEntity(t) {
							this._pitchAxisEntity !== t &&
								(null !== this._pitchAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._pitchAxisType)
										? this.removeDependentState(this._pitchAxisEntity.getName(), 'orientation')
										: 'position' === this._pitchAxisType &&
										  this.removeDependentState(this._pitchAxisEntity.getName(), 'position')),
								(this._pitchAxisEntity = t),
								null !== this._pitchAxisEntity &&
									(['x-axis', 'y-axis', 'z-axis'].includes(this._pitchAxisType)
										? this.addDependentState(this._pitchAxisEntity.getName(), 'orientation')
										: 'position' === this._pitchAxisType &&
										  this.addDependentState(this._pitchAxisEntity.getName(), 'position')));
						}
					},
					{
						key: 'getYawAngleLimits',
						value: function getYawAngleLimits() {
							return this._yawAngleLimits;
						}
					},
					{
						key: 'setYawAngleLimits',
						value: function setYawAngleLimits(t) {
							this._yawAngleLimits.thaw(), this._yawAngleLimits.copy(t), this._yawAngleLimits.freeze();
						}
					},
					{
						key: 'getPitchAngleLimits',
						value: function getPitchAngleLimits() {
							return this._pitchAngleLimits;
						}
					},
					{
						key: 'setPitchAngleLimits',
						value: function setPitchAngleLimits(t) {
							this._pitchAngleLimits.thaw(), this._pitchAngleLimits.copy(t), this._pitchAngleLimits.freeze();
						}
					},
					{
						key: 'isSlowWhenCloseToParent',
						value: function isSlowWhenCloseToParent() {
							return this._slowWhenCloseToParent;
						}
					},
					{
						key: 'slowWhenCloseToParent',
						value: function slowWhenCloseToParent(t) {
							this._slowWhenCloseToParent = t;
						}
					},
					{
						key: '__update',
						value: function __update() {
							if (null !== this.getEntity().getParent()) {
								this.getEntity().getOrientation().isNaN() && this.getEntity().setOrientation(tt.Identity),
									this.getEntity().getPosition().isNaN() && this.getEntity().setPosition(new yt(0, -1, 0));
								var t = 0,
									e = 0,
									n = this.getEntity().getScene().getEngine().getInput(),
									r = n.getActiveViewport();
								if (null !== r) {
									var i = r.getCamera();
									if (null !== i && i.getEntity() === this.getEntity()) {
										var o = 1;
										n.isKeyPressed('x') && (o = 0.05), n.isKeyPressed('shift') && (o = 5);
										var a = n.getDraggedOffset();
										(t = -a.x * this._dragSensitivity * o),
											(e = a.y * this._dragSensitivity * o),
											n.isKeyPressed('d') && (t += this._dragSensitivity * o),
											n.isKeyPressed('a') && (t -= this._dragSensitivity * o),
											n.isKeyPressed('e') && (e -= this._dragSensitivity * o),
											n.isKeyPressed('q') && (e += this._dragSensitivity * o);
									}
								}
								(this._yawChangeSmoothedValue = T.lerp(t, this._yawChangeSmoothedValue, this._dragSmoothness)),
									(this._pitchChangeSmoothedValue = T.lerp(e, this._pitchChangeSmoothedValue, this._dragSmoothness)),
									Math.abs(this._yawChangeSmoothedValue) < 1e-4 && (this._yawChangeSmoothedValue = 0),
									Math.abs(this._pitchChangeSmoothedValue) < 1e-4 && (this._pitchChangeSmoothedValue = 0);
								var s = yt.pool.get();
								null === this._yawAxisEntity && (this._yawAxisEntity = this.getEntity().getParent()),
									'x-axis' === this._yawAxisType && null !== this._yawAxisEntity
										? this._yawAxisEntity.getOrientation().getAxis(s, 0)
										: 'y-axis' === this._yawAxisType && null !== this._yawAxisEntity
										? this._yawAxisEntity.getOrientation().getAxis(s, 1)
										: 'z-axis' === this._yawAxisType && null !== this._yawAxisEntity
										? this._yawAxisEntity.getOrientation().getAxis(s, 2)
										: 'position' === this._yawAxisType && null !== this._yawAxisEntity
										? s.normalize(this._yawAxisEntity.getPosition())
										: this.getEntity().getOrientation().getAxis(s, 2),
									(s.isNaN() || s.isZero()) && this.getEntity().getOrientation().getAxis(s, 2);
								var l = yt.pool.get();
								null === this._pitchAxisEntity && (this._pitchAxisEntity = this.getEntity().getParent()),
									'x-axis' === this._pitchAxisType && null !== this._pitchAxisEntity
										? this._pitchAxisEntity.getOrientation().getAxis(l, 0)
										: 'y-axis' === this._pitchAxisType && null !== this._pitchAxisEntity
										? this._pitchAxisEntity.getOrientation().getAxis(l, 1)
										: 'z-axis' === this._pitchAxisType && null !== this._pitchAxisEntity
										? this._pitchAxisEntity.getOrientation().getAxis(l, 2)
										: 'position' === this._pitchAxisType && null !== this._pitchAxisEntity
										? l.normalize(this._pitchAxisEntity.getPosition())
										: this.getEntity().getOrientation().getAxis(l, 0),
									(l.isNaN() || l.isZero()) && this.getEntity().getOrientation().getAxis(l, 0),
									l.setNormalTo(s, l);
								var c = tt.pool.get();
								c.setFromAxes(l, void 0, s), yt.pool.release(l), yt.pool.release(s);
								var u = yt.pool.get();
								u.rotateInverse(c, this.getEntity().getPosition());
								var _ = 1;
								if (this._slowWhenCloseToParent) {
									var p = this.getEntity().getParent().getOcclusionRadius();
									_ = T.clamp((u.magnitude() - p) / p, 0.001, 1);
								}
								var h = Et.pool.get();
								h.setFromXYZ(u),
									(h.lat += this._pitchChangeSmoothedValue * _),
									(h.lon += this._yawChangeSmoothedValue * _),
									h.lat < 1e-4 - T.halfPi && (h.lat = 1e-4 - T.halfPi),
									h.lat > T.halfPi - 1e-4 && (h.lat = T.halfPi - 1e-4),
									h.lat < this._pitchAngleLimits.min && (h.lat = this._pitchAngleLimits.min),
									h.lat > this._pitchAngleLimits.max && (h.lat = this._pitchAngleLimits.max),
									h.lon < this._yawAngleLimits.min && (h.lon = this._yawAngleLimits.min),
									h.lon > this._yawAngleLimits.max && (h.lon = this._yawAngleLimits.max),
									u.setFromLLA(h),
									Et.pool.release(h),
									u.rotate(c, u),
									tt.pool.release(c),
									this.getEntity().setPosition(u),
									yt.pool.release(u);
							}
						}
					}
				]),
				OrbitController
			);
		})();
		function orbit_keyframe_controller_typeof(t) {
			return (orbit_keyframe_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function orbit_keyframe_controller_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function orbit_keyframe_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function orbit_keyframe_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== orbit_keyframe_controller_typeof(e) && 'function' != typeof e)
				? (function orbit_keyframe_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function orbit_keyframe_controller_get(t, e, n) {
			return (orbit_keyframe_controller_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function orbit_keyframe_controller_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) &&
									null !== (t = orbit_keyframe_controller_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function orbit_keyframe_controller_getPrototypeOf(t) {
			return (orbit_keyframe_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function orbit_keyframe_controller_inherits(t, e) {
			if ('function' != typeof e && null !== e)
				throw new TypeError('Super expression must either be null or a function');
			(t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),
				e && orbit_keyframe_controller_setPrototypeOf(t, e);
		}
		function orbit_keyframe_controller_setPrototypeOf(t, e) {
			return (orbit_keyframe_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Zn = (function (t) {
				function OrbitKeyframeController(t, e, n) {
					var r;
					return (
						orbit_keyframe_controller_classCallCheck(this, OrbitKeyframeController),
						((r = orbit_keyframe_controller_possibleConstructorReturn(
							this,
							orbit_keyframe_controller_getPrototypeOf(OrbitKeyframeController).call(this, t, e, n)
						))._positionKeyframes = []),
						(r._focusKeyframes = []),
						(r._upKeyframes = []),
						(r._timeOfFirstUpdate = NaN),
						(r._resolvePromise = null),
						(r._rejectPromise = null),
						(r._endPromise = new Promise(function (t, e) {
							(r._resolvePromise = t), (r._rejectPromise = e);
						})),
						r.addModifiedState('position'),
						r.addModifiedState('velocity'),
						r.addModifiedState('orientation'),
						r.addModifiedState('angularVelocity'),
						r
					);
				}
				return (
					orbit_keyframe_controller_inherits(OrbitKeyframeController, an),
					(function orbit_keyframe_controller_createClass(t, e, n) {
						return (
							e && orbit_keyframe_controller_defineProperties(t.prototype, e),
							n && orbit_keyframe_controller_defineProperties(t, n),
							t
						);
					})(OrbitKeyframeController, [
						{
							key: 'setPositionKeyframe',
							value: function setPositionKeyframe(t, e, n) {
								if (void 0 !== e) {
									var r = new Xn(this.getEntity().getScene());
									(r.time = t),
										r.position.copy(e),
										r.relativeTo.setName(n),
										P.add(r, this._positionKeyframes, orbit_keyframe_controller_isLess);
								} else {
									var i = P.getIndex(t, this._positionKeyframes, isLessThanTime);
									i < this._positionKeyframes.length &&
										t === this._positionKeyframes[i].time &&
										this._positionKeyframes.splice(i, 1);
								}
							}
						},
						{
							key: 'setFocusKeyframe',
							value: function setFocusKeyframe(t, e) {
								if (void 0 !== e) {
									var n = new Kn(this.getEntity().getScene());
									(n.time = t),
										n.focus.setName(void 0 !== e ? e : ''),
										P.add(n, this._focusKeyframes, orbit_keyframe_controller_isLess);
								} else {
									var r = P.getIndex(t, this._focusKeyframes, isLessThanTime);
									r < this._focusKeyframes.length &&
										t === this._focusKeyframes[r].time &&
										this._focusKeyframes.splice(r, 1);
								}
							}
						},
						{
							key: 'setUpKeyframe',
							value: function setUpKeyframe(t, e) {
								if (void 0 !== e) {
									var n = new Wn();
									(n.time = t), n.up.copy(e), P.add(n, this._upKeyframes, orbit_keyframe_controller_isLess);
								} else {
									var r = P.getIndex(t, this._upKeyframes, isLessThanTime);
									r < this._upKeyframes.length && t === this._upKeyframes[r].time && this._upKeyframes.splice(r, 1);
								}
							}
						},
						{
							key: 'getEndPromise',
							value: function getEndPromise() {
								return this._endPromise;
							}
						},
						{
							key: '__destroy',
							value: function __destroy() {
								orbit_keyframe_controller_get(
									orbit_keyframe_controller_getPrototypeOf(OrbitKeyframeController.prototype),
									'__destroy',
									this
								).call(this),
									null !== this._rejectPromise && this._rejectPromise();
							}
						},
						{
							key: '__update',
							value: function __update() {
								var t = this.getEntity(),
									e = 0;
								if (isNaN(this._timeOfFirstUpdate)) {
									this._timeOfFirstUpdate = Date.now() / 1e3;
									var n = new Xn(t.getScene());
									if (
										((n.time = 0),
										n.position.copy(t.getPosition()),
										n.relativeTo.setName(t.getParent().getName()),
										P.add(n, this._positionKeyframes, orbit_keyframe_controller_isLess),
										null !== t.getParent())
									) {
										var r = new Kn(t.getScene());
										(r.time = 0),
											r.focus.setName(t.getParent().getName()),
											P.add(r, this._focusKeyframes, orbit_keyframe_controller_isLess);
									}
									var i = new Wn();
									(i.time = 0),
										t.getOrientation().getAxis(i.up, 2),
										P.add(i, this._upKeyframes, orbit_keyframe_controller_isLess);
								} else e = Date.now() / 1e3 - this._timeOfFirstUpdate;
								var o = !1,
									a = P.getIndex(e, this._positionKeyframes, isLessThanTime);
								if (a > 0 && a < this._positionKeyframes.length) {
									var s = this._positionKeyframes[a - 1],
										l = this._positionKeyframes[a],
										c = s.relativeTo.get(),
										u = l.relativeTo.get();
									if (null !== c && null !== u) {
										var _ = (e - s.time) / (l.time - s.time),
											p = c;
										_ >= 0.5 && (p = u), t.getParent() !== p && t.setParent(p);
										var h = yt.pool.get(),
											d = yt.pool.get();
										c.getPositionRelativeToEntity(h, s.position, u), u.getPositionRelativeToEntity(d, l.position, c);
										var f = s.position.magnitude() - c.getOcclusionRadius(),
											m = d.magnitude() - c.getOcclusionRadius(),
											g = h.magnitude() - u.getOcclusionRadius(),
											y = l.position.magnitude() - u.getOcclusionRadius();
										if (
											((f = Math.max(f, m / 1e4)),
											(m = Math.max(m, f / 1e4)),
											(g = Math.max(g, y / 1e4)),
											(y = Math.max(y, m / 1e4)),
											f !== m && g !== y)
										) {
											var v = (Math.pow(m, _) * Math.pow(f, 1 - _) - f) / (m - f),
												b = (Math.pow(y, _) * Math.pow(g, 1 - _) - g) / (y - g);
											_ = T.lerp(v, b, _);
										}
										var x = _ * _;
										(_ = x / (2 * (x - _) + 1)),
											c.getPositionRelativeToEntity(h, s.position, p),
											u.getPositionRelativeToEntity(d, l.position, p);
										var S = yt.pool.get();
										c === u ? S.slerp(h, d, _) : S.lerp(h, d, _),
											t.setPosition(S),
											yt.pool.release(S),
											yt.pool.release(h),
											yt.pool.release(d);
									}
								} else if (a === this._positionKeyframes.length) {
									var w = this._positionKeyframes[this._positionKeyframes.length - 1],
										C = w.relativeTo.get();
									t.getParent() !== C && t.setParent(C), t.setPosition(w.position), (o = !0);
								}
								var E = yt.pool.get();
								E.setMagnitude(t.getPosition(), -1);
								var k = yt.pool.get();
								t.getOrientation().getAxis(k, 2);
								var O = !1,
									A = P.getIndex(e, this._focusKeyframes, isLessThanTime);
								if (A > 0 && A < this._focusKeyframes.length) {
									var R = this._focusKeyframes[A - 1],
										I = this._focusKeyframes[A],
										M = R.focus.get(),
										L = I.focus.get(),
										j = t.getParent();
									if (null !== M && null !== L && null !== j) {
										var z = (e - R.time) / (I.time - R.time),
											N = z * z;
										z = N / (2 * (N - z) + 1);
										var F = yt.pool.get(),
											D = yt.pool.get();
										j.getPositionRelativeToEntity(F, t.getPosition(), M),
											j.getPositionRelativeToEntity(D, t.getPosition(), L),
											F.setMagnitude(F, -1),
											D.setMagnitude(D, -1),
											E.slerp(F, D, z),
											yt.pool.release(F),
											yt.pool.release(D);
									}
								} else if (A === this._focusKeyframes.length) {
									var U = this._focusKeyframes[this._focusKeyframes.length - 1].focus.get(),
										V = t.getParent();
									null !== U &&
										null !== V &&
										(V.getPositionRelativeToEntity(E, t.getPosition(), U), E.setMagnitude(E, -1)),
										(O = !0);
								}
								var B = !1,
									G = P.getIndex(e, this._upKeyframes, isLessThanTime);
								if (G > 0 && G < this._upKeyframes.length) {
									var J = this._upKeyframes[G - 1],
										$ = this._upKeyframes[G],
										H = (e - J.time) / ($.time - J.time),
										q = H * H;
									(H = q / (2 * (q - H) + 1)), k.slerp(J.up, $.up, H);
								} else if (G === this._upKeyframes.length) {
									var Z = this._upKeyframes[this._upKeyframes.length - 1];
									k.copy(Z.up), (B = !0);
								}
								var Y = tt.pool.get();
								k.setNormalTo(E, k),
									Y.setFromAxes(void 0, E, k),
									t.setOrientation(Y),
									tt.pool.release(Y),
									yt.pool.release(E),
									o && O && B && ((this._rejectPromise = null), this._resolvePromise());
							}
						}
					]),
					OrbitKeyframeController
				);
			})(),
			Yn = function Keyframe() {
				orbit_keyframe_controller_classCallCheck(this, Keyframe), (this.time = NaN);
			},
			Xn = (function (t) {
				function PositionKeyframe(t) {
					var e;
					return (
						orbit_keyframe_controller_classCallCheck(this, PositionKeyframe),
						((e = orbit_keyframe_controller_possibleConstructorReturn(
							this,
							orbit_keyframe_controller_getPrototypeOf(PositionKeyframe).call(this)
						)).position = new yt()),
						(e.relativeTo = new wt(t)),
						e
					);
				}
				return orbit_keyframe_controller_inherits(PositionKeyframe, Yn), PositionKeyframe;
			})(),
			Kn = (function (t) {
				function FocusKeyframe(t) {
					var e;
					return (
						orbit_keyframe_controller_classCallCheck(this, FocusKeyframe),
						((e = orbit_keyframe_controller_possibleConstructorReturn(
							this,
							orbit_keyframe_controller_getPrototypeOf(FocusKeyframe).call(this)
						)).focus = new wt(t)),
						e
					);
				}
				return orbit_keyframe_controller_inherits(FocusKeyframe, Yn), FocusKeyframe;
			})(),
			Wn = (function (t) {
				function UpKeyframe() {
					var t;
					return (
						orbit_keyframe_controller_classCallCheck(this, UpKeyframe),
						((t = orbit_keyframe_controller_possibleConstructorReturn(
							this,
							orbit_keyframe_controller_getPrototypeOf(UpKeyframe).call(this)
						)).up = new yt()),
						t
					);
				}
				return orbit_keyframe_controller_inherits(UpKeyframe, Yn), UpKeyframe;
			})();
		function orbit_keyframe_controller_isLess(t, e) {
			return t.time < e.time;
		}
		function isLessThanTime(t, e) {
			return t.time < e;
		}
		var Qn = Zn;
		function orbital_elements_controller_typeof(t) {
			return (orbital_elements_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function orbital_elements_controller_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function orbital_elements_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function orbital_elements_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== orbital_elements_controller_typeof(e) && 'function' != typeof e)
				? (function orbital_elements_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function orbital_elements_controller_getPrototypeOf(t) {
			return (orbital_elements_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function orbital_elements_controller_setPrototypeOf(t, e) {
			return (orbital_elements_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var tr = (function (t) {
			function OrbitalElementsController(t, e, n) {
				var r;
				return (
					orbital_elements_controller_classCallCheck(this, OrbitalElementsController),
					((r = orbital_elements_controller_possibleConstructorReturn(
						this,
						orbital_elements_controller_getPrototypeOf(OrbitalElementsController).call(this, t, e, n)
					))._orbitalElementsKeyFrames = []),
					r.setCoverage(new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY)),
					r.addModifiedState('position'),
					r.addModifiedState('velocity'),
					r
				);
			}
			return (
				(function orbital_elements_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && orbital_elements_controller_setPrototypeOf(t, e);
				})(OrbitalElementsController, an),
				(function orbital_elements_controller_createClass(t, e, n) {
					return (
						e && orbital_elements_controller_defineProperties(t.prototype, e),
						n && orbital_elements_controller_defineProperties(t, n),
						t
					);
				})(OrbitalElementsController, [
					{
						key: 'getNumOrbitalElements',
						value: function getNumOrbitalElements() {
							return this._orbitalElementsKeyFrames.length;
						}
					},
					{
						key: 'getOrbitalElements',
						value: function getOrbitalElements(t) {
							return this._orbitalElementsKeyFrames[t];
						}
					},
					{
						key: 'addOrbitalElements',
						value: function addOrbitalElements(t, e) {
							P.add({ time: t, oe: e }, this._orbitalElementsKeyFrames, er, rr), this._updateCoverage();
						}
					},
					{
						key: 'removeOrbitalElements',
						value: function removeOrbitalElements(t) {
							if (t < 0 || this._orbitalElementsKeyFrames.length <= t)
								throw new Error('Invalid index for '.concat(this, '.removeOrbitalElements'));
							this._orbitalElementsKeyFrames.splice(t, 1), this._updateCoverage();
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							this._getPositionAtTime(t, e);
						}
					},
					{
						key: '__updateVelocityAtTime',
						value: function __updateVelocityAtTime(t, e) {
							this._getVelocityAtTime(t, e);
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getScene().getEngine().getTime();
							this._getPositionAtTime(ir, t) && this.getEntity().setPosition(ir),
								this._getVelocityAtTime(or, t) && this.getEntity().setVelocity(or);
						}
					},
					{
						key: '_getPositionAtTime',
						value: function _getPositionAtTime(t, e) {
							var n = P.getIndex(e, this._orbitalElementsKeyFrames, nr),
								r = this._orbitalElementsKeyFrames[Math.max(n - 1, 0)],
								i = this._orbitalElementsKeyFrames[Math.min(n, this._orbitalElementsKeyFrames.length - 1)],
								o = yt.pool.get(),
								a = yt.pool.get();
							r.oe.project(o, or, e), i.oe.project(a, or, e);
							var s = T.clamp01(i.time !== r.time ? (e - r.time) / (i.time - r.time) : 0);
							return t.slerp(o, a, s), yt.pool.release(o), yt.pool.release(a), !0;
						}
					},
					{
						key: '_getVelocityAtTime',
						value: function _getVelocityAtTime(t, e) {
							var n = P.getIndex(e, this._orbitalElementsKeyFrames, nr),
								r = this._orbitalElementsKeyFrames[Math.max(n - 1, 0)],
								i = this._orbitalElementsKeyFrames[Math.min(n, this._orbitalElementsKeyFrames.length - 1)],
								o = yt.pool.get(),
								a = yt.pool.get();
							r.oe.project(ir, o, e), i.oe.project(ir, a, e);
							var s = T.clamp01(i.time !== r.time ? (e - r.time) / (i.time - r.time) : 0);
							return t.slerp(o, a, s), yt.pool.release(o), yt.pool.release(a), !0;
						}
					},
					{
						key: '_updateCoverage',
						value: function _updateCoverage() {
							var t = new J(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY);
							this._orbitalElementsKeyFrames.length > 1 &&
								((t.min = Math.min(t.min, this._orbitalElementsKeyFrames[0].time)),
								(t.max = Math.max(
									t.max,
									this._orbitalElementsKeyFrames[this._orbitalElementsKeyFrames.length - 1].time
								))),
								this.setCoverage(t);
						}
					}
				]),
				OrbitalElementsController
			);
		})();
		tr.OrbitalElementsKeyFrame = (function () {
			return function _class() {
				orbital_elements_controller_classCallCheck(this, _class), (this.time = 0), (this.oe = new $());
			};
		})();
		var er = function isLessAdd(t, e) {
				return t.time < e.time;
			},
			nr = function isLess(t, e) {
				return t.time < e;
			},
			rr = function isEqualAdd(t, e) {
				return t.time === e.time;
			},
			ir = new yt(),
			or = new yt(),
			ar = tr;
		function pick_controller_typeof(t) {
			return (pick_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function pick_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function pick_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== pick_controller_typeof(e) && 'function' != typeof e)
				? (function pick_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function pick_controller_getPrototypeOf(t) {
			return (pick_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function pick_controller_setPrototypeOf(t, e) {
			return (pick_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var sr = (function (t) {
			function PickController(t, e, n) {
				var r;
				return (
					(function pick_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, PickController),
					((r = pick_controller_possibleConstructorReturn(
						this,
						pick_controller_getPrototypeOf(PickController).call(this, t, e, n)
					))._pickedEntity = null),
					(r._callback = null),
					(r._triggerOnHover = !1),
					(r._pickedPosition = new yt()),
					r
				);
			}
			return (
				(function pick_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && pick_controller_setPrototypeOf(t, e);
				})(PickController, an),
				(function pick_controller_createClass(t, e, n) {
					return e && pick_controller_defineProperties(t.prototype, e), n && pick_controller_defineProperties(t, n), t;
				})(PickController, [
					{
						key: 'getPickedEntity',
						value: function getPickedEntity() {
							return this._pickedEntity;
						}
					},
					{
						key: 'setPickedEntity',
						value: function setPickedEntity(t) {
							this._pickedEntity = t;
						}
					},
					{
						key: 'getCallback',
						value: function getCallback() {
							return this._callback;
						}
					},
					{
						key: 'setCallback',
						value: function setCallback(t) {
							this._callback = t;
						}
					},
					{
						key: 'getTriggerOnHover',
						value: function getTriggerOnHover() {
							return this._triggerOnHover;
						}
					},
					{
						key: 'setTriggerOnHover',
						value: function setTriggerOnHover(t) {
							this._triggerOnHover = t;
						}
					},
					{
						key: 'getPickedPosition',
						value: function getPickedPosition() {
							return this._pickedPosition;
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getScene().getEngine().getInput();
							if ((t.isSelected() || this._triggerOnHover) && null !== this._callback && null !== this._pickedEntity) {
								var e = t.getActiveViewport();
								if (null !== e) {
									var n = e.getCamera();
									if (null !== n && n.getEntity() === this.getEntity()) {
										var r = yt.pool.get();
										e.getNormalSpacePositionFromPixelSpacePosition(r, t.getCursorPosition()),
											n.getCameraSpacePositionFromNormalSpacePosition(r, r),
											r.normalize(r);
										var i = J.pool.get(),
											o = this._pickedEntity.getComponentByType('spheroid');
										if (o instanceof qe) {
											var a = o.getEquatorialRadius() / o.getPolarRadius();
											r.rotateInverse(this._pickedEntity.getOrientation(), r), (r.z *= a);
											var s = yt.pool.get();
											s.copy(this._pickedEntity.getCameraSpacePosition(n)),
												s.rotateInverse(this._pickedEntity.getOrientation(), s),
												(s.z *= a),
												U.getLineSphereIntersectionWithLineStartAtOrigin(i, r, s, o.getEquatorialRadius()),
												(r.z /= a),
												r.rotate(this._pickedEntity.getOrientation(), r),
												yt.pool.release(s);
										} else {
											var l = this._pickedEntity.getCameraSpacePosition(n);
											U.getLineSphereIntersectionWithLineStartAtOrigin(
												i,
												r,
												l,
												this._pickedEntity.getOcclusionRadius()
											);
										}
										Number.isNaN(i.min) ||
											(this._pickedPosition.mult(r, i.min),
											n
												.getEntity()
												.getPositionRelativeToEntity(this._pickedPosition, this._pickedPosition, this._pickedEntity),
											this.getEntity()
												.getScene()
												.getEngine()
												.addCallback(this._callback.bind(null, this._pickedPosition), !1)),
											J.pool.release(i),
											yt.pool.release(r);
									}
								}
							}
						}
					}
				]),
				PickController
			);
		})();
		function roll_controller_typeof(t) {
			return (roll_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function roll_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function roll_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== roll_controller_typeof(e) && 'function' != typeof e)
				? (function roll_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function roll_controller_getPrototypeOf(t) {
			return (roll_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function roll_controller_setPrototypeOf(t, e) {
			return (roll_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var lr = (function (t) {
			function RollController(t, e, n) {
				var r;
				return (
					(function roll_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, RollController),
					((r = roll_controller_possibleConstructorReturn(
						this,
						roll_controller_getPrototypeOf(RollController).call(this, t, e, n)
					))._rollSensitivity = 0.01),
					(r._rollSmoothness = 0.8),
					(r._rollAngleSmoothedValue = 0),
					r.addModifiedState('orientation'),
					r
				);
			}
			return (
				(function roll_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && roll_controller_setPrototypeOf(t, e);
				})(RollController, an),
				(function roll_controller_createClass(t, e, n) {
					return e && roll_controller_defineProperties(t.prototype, e), n && roll_controller_defineProperties(t, n), t;
				})(RollController, [
					{
						key: 'getRollSensitivity',
						value: function getRollSensitivity() {
							return this._rollSensitivity;
						}
					},
					{
						key: 'setRollSensitivity',
						value: function setRollSensitivity(t) {
							this._rollSensitivity = t;
						}
					},
					{
						key: 'getRollSmoothness',
						value: function getRollSmoothness() {
							return this._rollSmoothness;
						}
					},
					{
						key: 'setRollSmoothness',
						value: function setRollSmoothness(t) {
							this._rollSmoothness = t;
						}
					},
					{
						key: '__update',
						value: function __update() {
							this.getEntity().getOrientation().isNaN() && this.getEntity().setOrientation(tt.Identity);
							var t = 0,
								e = this.getEntity().getScene().getEngine().getInput(),
								n = e.getActiveViewport();
							if (null !== n) {
								var r = n.getCamera();
								if (null !== r && r.getEntity() === this.getEntity()) {
									var i = 1;
									e.isKeyPressed('x') && (i = 0.05),
										e.isKeyPressed('shift') && (i = 5),
										e.isKeyPressed('c') && (t += this._rollSensitivity * i),
										e.isKeyPressed('z') && (t -= this._rollSensitivity * i);
								}
							}
							if (
								((this._rollAngleSmoothedValue = T.lerp(t, this._rollAngleSmoothedValue, this._rollSmoothness)),
								Math.abs(this._rollAngleSmoothedValue) < 1e-4 && (this._rollAngleSmoothedValue = 0),
								0 !== this._rollAngleSmoothedValue)
							) {
								var o = tt.pool.get(),
									a = tt.pool.get();
								a.setFromAxisAngle(yt.YAxis, this._rollAngleSmoothedValue),
									o.mult(this.getEntity().getOrientation(), a),
									this.getEntity().setOrientation(o),
									tt.pool.release(o),
									tt.pool.release(a);
							}
						}
					}
				]),
				RollController
			);
		})();
		function rotate_controller_typeof(t) {
			return (rotate_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function rotate_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function rotate_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== rotate_controller_typeof(e) && 'function' != typeof e)
				? (function rotate_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function rotate_controller_getPrototypeOf(t) {
			return (rotate_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function rotate_controller_setPrototypeOf(t, e) {
			return (rotate_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var cr = (function (t) {
			function RotateController(t, e, n) {
				var r;
				return (
					(function rotate_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, RotateController),
					((r = rotate_controller_possibleConstructorReturn(
						this,
						rotate_controller_getPrototypeOf(RotateController).call(this, t, e, n)
					))._rotation = new tt()),
					r._rotation.freeze(),
					(r._rotatingPosition = !0),
					(r._rotatingOrientation = !0),
					r.addModifiedState('position'),
					r.addModifiedState('orientation'),
					r
				);
			}
			return (
				(function rotate_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && rotate_controller_setPrototypeOf(t, e);
				})(RotateController, an),
				(function rotate_controller_createClass(t, e, n) {
					return (
						e && rotate_controller_defineProperties(t.prototype, e), n && rotate_controller_defineProperties(t, n), t
					);
				})(RotateController, [
					{
						key: 'getRotation',
						value: function getRotation() {
							return this._rotation;
						}
					},
					{
						key: 'setRotation',
						value: function setRotation(t) {
							this._rotation.thaw(), this._rotation.copy(t), this._rotation.freeze();
						}
					},
					{
						key: 'isRotatingPosition',
						value: function isRotatingPosition() {
							return this._rotatingPosition;
						}
					},
					{
						key: 'setRotatingPosition',
						value: function setRotatingPosition(t) {
							(this._rotatingPosition = t),
								t ? this.addModifiedState('position') : this.removeModifiedState('position');
						}
					},
					{
						key: 'isRotatingOrientation',
						value: function isRotatingOrientation() {
							return this._rotatingOrientation;
						}
					},
					{
						key: 'setRotatingOrientation',
						value: function setRotatingOrientation(t) {
							(this._rotatingOrientation = t),
								t ? this.addModifiedState('orientation') : this.removeModifiedState('orientation');
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							this._rotatingPosition && t.rotate(this._rotation, t);
						}
					},
					{
						key: '__updateVelocityAtTime',
						value: function __updateVelocityAtTime(t, e) {
							this._rotatingPosition && t.rotate(this._rotation, t);
						}
					},
					{
						key: '__updateOrientationAtTime',
						value: function __updateOrientationAtTime(t, e) {
							this._rotatingOrientation && t.mult(this._rotation, t);
						}
					},
					{
						key: '__update',
						value: function __update() {
							if (this._rotatingPosition) {
								var t = yt.pool.get();
								t.rotate(this._rotation, this.getEntity().getPosition()),
									this.getEntity().setPosition(t),
									yt.pool.release(t);
							}
							if (this._rotatingOrientation) {
								var e = tt.pool.get();
								e.mult(this._rotation, this.getEntity().getOrientation()),
									this.getEntity().setOrientation(e),
									tt.pool.release(e);
							}
						}
					}
				]),
				RotateController
			);
		})();
		function rotate_by_parent_orientation_controller_typeof(t) {
			return (rotate_by_parent_orientation_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function rotate_by_parent_orientation_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function rotate_by_parent_orientation_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== rotate_by_parent_orientation_controller_typeof(e) && 'function' != typeof e)
				? (function rotate_by_parent_orientation_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function rotate_by_parent_orientation_controller_getPrototypeOf(t) {
			return (rotate_by_parent_orientation_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function rotate_by_parent_orientation_controller_setPrototypeOf(t, e) {
			return (rotate_by_parent_orientation_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ur = (function (t) {
			function RotateByParentOrientationController(t, e, n) {
				var r;
				return (
					(function rotate_by_parent_orientation_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, RotateByParentOrientationController),
					((r = rotate_by_parent_orientation_controller_possibleConstructorReturn(
						this,
						rotate_by_parent_orientation_controller_getPrototypeOf(RotateByParentOrientationController).call(
							this,
							t,
							e,
							n
						)
					))._rotatingPosition = !0),
					(r._rotatingOrientation = !0),
					r.addModifiedState('position'),
					r.addModifiedState('orientation'),
					r.addDependentState('parent', 'orientation'),
					r
				);
			}
			return (
				(function rotate_by_parent_orientation_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && rotate_by_parent_orientation_controller_setPrototypeOf(t, e);
				})(RotateByParentOrientationController, an),
				(function rotate_by_parent_orientation_controller_createClass(t, e, n) {
					return (
						e && rotate_by_parent_orientation_controller_defineProperties(t.prototype, e),
						n && rotate_by_parent_orientation_controller_defineProperties(t, n),
						t
					);
				})(RotateByParentOrientationController, [
					{
						key: 'isRotatingPosition',
						value: function isRotatingPosition() {
							return this._rotatingPosition;
						}
					},
					{
						key: 'setRotatingPosition',
						value: function setRotatingPosition(t) {
							(this._rotatingPosition = t),
								t ? this.addModifiedState('position') : this.removeModifiedState('position');
						}
					},
					{
						key: 'isRotatingOrientation',
						value: function isRotatingOrientation() {
							return this._rotatingOrientation;
						}
					},
					{
						key: 'setRotatingOrientation',
						value: function setRotatingOrientation(t) {
							(this._rotatingOrientation = t),
								t ? this.addModifiedState('orientation') : this.removeModifiedState('orientation');
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							if (this._rotatingPosition) {
								var n = this.getEntity().getParent();
								if (null !== n) {
									var r = tt.pool.get();
									n.getOrientationAtTime(r, e), t.rotate(r, t), tt.pool.release(r);
								}
							}
						}
					},
					{
						key: '__updateVelocityAtTime',
						value: function __updateVelocityAtTime(t, e) {
							if (this._rotatingPosition) {
								var n = this.getEntity().getParent();
								if (null !== n) {
									var r = tt.pool.get();
									n.getOrientationAtTime(r, e), t.rotate(r, t), tt.pool.release(r);
								}
							}
						}
					},
					{
						key: '__updateOrientationAtTime',
						value: function __updateOrientationAtTime(t, e) {
							if (this._rotatingOrientation) {
								var n = this.getEntity().getParent();
								if (null !== n) {
									var r = tt.pool.get();
									n.getOrientationAtTime(r, e), t.mult(r, t), tt.pool.release(r);
								}
							}
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getParent();
							if (null !== t) {
								if (this._rotatingPosition) {
									var e = yt.pool.get();
									e.rotate(t.getOrientation(), this.getEntity().getPosition()),
										this.getEntity().setPosition(e),
										yt.pool.release(e);
								}
								if (this._rotatingOrientation) {
									var n = tt.pool.get();
									n.mult(t.getOrientation(), this.getEntity().getOrientation()),
										this.getEntity().setOrientation(n),
										tt.pool.release(n);
								}
							}
						}
					}
				]),
				RotateByParentOrientationController
			);
		})();
		function scale_controller_typeof(t) {
			return (scale_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function scale_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function scale_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== scale_controller_typeof(e) && 'function' != typeof e)
				? (function scale_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function scale_controller_getPrototypeOf(t) {
			return (scale_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function scale_controller_setPrototypeOf(t, e) {
			return (scale_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var _r = (function (t) {
			function ScaleController(t, e, n) {
				var r;
				return (
					(function scale_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ScaleController),
					((r = scale_controller_possibleConstructorReturn(
						this,
						scale_controller_getPrototypeOf(ScaleController).call(this, t, e, n)
					))._scale = 1),
					r.addModifiedState('position'),
					r
				);
			}
			return (
				(function scale_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && scale_controller_setPrototypeOf(t, e);
				})(ScaleController, an),
				(function scale_controller_createClass(t, e, n) {
					return (
						e && scale_controller_defineProperties(t.prototype, e), n && scale_controller_defineProperties(t, n), t
					);
				})(ScaleController, [
					{
						key: 'getScale',
						value: function getScale() {
							return this._scale;
						}
					},
					{
						key: 'setScale',
						value: function setScale(t) {
							this._scale = t;
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							t.mult(t, this._scale);
						}
					},
					{
						key: '__updateVelocityAtTime',
						value: function __updateVelocityAtTime(t, e) {
							t.mult(t, this._scale);
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = yt.pool.get();
							t.mult(this.getEntity().getPosition(), this._scale), this.getEntity().setPosition(t), yt.pool.release(t);
						}
					}
				]),
				ScaleController
			);
		})();
		function select_controller_typeof(t) {
			return (select_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function select_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function select_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== select_controller_typeof(e) && 'function' != typeof e)
				? (function select_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function select_controller_getPrototypeOf(t) {
			return (select_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function select_controller_setPrototypeOf(t, e) {
			return (select_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var pr = (function (t) {
			function SelectController(t, e, n) {
				var r;
				return (
					(function select_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, SelectController),
					((r = select_controller_possibleConstructorReturn(
						this,
						select_controller_getPrototypeOf(SelectController).call(this, t, e, n)
					))._callback = null),
					r
				);
			}
			return (
				(function select_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && select_controller_setPrototypeOf(t, e);
				})(SelectController, an),
				(function select_controller_createClass(t, e, n) {
					return (
						e && select_controller_defineProperties(t.prototype, e), n && select_controller_defineProperties(t, n), t
					);
				})(SelectController, [
					{
						key: 'getCallback',
						value: function getCallback() {
							return this._callback;
						}
					},
					{
						key: 'setCallback',
						value: function setCallback(t) {
							this._callback = t;
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getScene().getEngine().getInput();
							if (t.isSelected() && null !== this._callback) {
								var e = t.getActiveViewport();
								if (null !== e) {
									var n = e.getCamera();
									if (null !== n && n.getEntity() === this.getEntity()) {
										var r = yt.pool.get();
										e.getNormalSpacePositionFromPixelSpacePosition(r, t.getSelectedPosition());
										var i = null,
											o = 0,
											a = st.pool.get();
										a.set(r.x, r.y);
										for (var s = this.getEntity().getScene().getNumEntities(), l = 0; l < s; l++) {
											var c = this.getEntity().getScene().getEntity(l);
											if (c.isEnabled()) {
												var u = c.getComponentByType('label');
												if (u instanceof Ne && 'loaded' === u.getLoadState()) {
													var _ = u.getNormalSpaceBounds(n);
													if (void 0 !== _ && _.contains(a)) {
														var p = c.getCameraSpacePosition(n).magnitude();
														(null === i || o > p) && ((i = c), (o = p));
													}
												}
											}
										}
										st.pool.release(a),
											null === i &&
												(n.getCameraSpacePositionFromNormalSpacePosition(r, r),
												r.mult(r, 1 / r.magnitude()),
												(i = n.getNearestIntersectingEntity(r))),
											yt.pool.release(r),
											this.getEntity().getScene().getEngine().addCallback(this._callback.bind(null, i), !1);
									}
								}
							}
						}
					}
				]),
				SelectController
			);
		})();
		function spin_controller_typeof(t) {
			return (spin_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function spin_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function spin_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== spin_controller_typeof(e) && 'function' != typeof e)
				? (function spin_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function spin_controller_getPrototypeOf(t) {
			return (spin_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function spin_controller_setPrototypeOf(t, e) {
			return (spin_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var hr = (function (t) {
				function SpinController(t, e, n) {
					var r;
					return (
						(function spin_controller_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, SpinController),
						((r = spin_controller_possibleConstructorReturn(
							this,
							spin_controller_getPrototypeOf(SpinController).call(this, t, e, n)
						))._axis = new yt(0, 0, 1)),
						r._axis.freeze(),
						(r._axisRelativeToEntity = !0),
						(r._rate = 0),
						(r._referenceAngle = 0),
						(r._referenceTime = void 0),
						(r._clampedToRealTime = !1),
						(r._usingRealTime = !1),
						(r._rotatingPosition = !1),
						(r._joint = ''),
						(r._jointObject = null),
						(r._model = null),
						(r._lastTime = n.getScene().getEngine().getTime()),
						r.addModifiedState('orientation'),
						r
					);
				}
				return (
					(function spin_controller_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && spin_controller_setPrototypeOf(t, e);
					})(SpinController, an),
					(function spin_controller_createClass(t, e, n) {
						return (
							e && spin_controller_defineProperties(t.prototype, e), n && spin_controller_defineProperties(t, n), t
						);
					})(SpinController, [
						{
							key: 'getAxis',
							value: function getAxis() {
								return this._axis;
							}
						},
						{
							key: 'isAxisRelativeToEntity',
							value: function isAxisRelativeToEntity() {
								return this._axisRelativeToEntity;
							}
						},
						{
							key: 'setAxis',
							value: function setAxis(t, e) {
								this._axis.thaw(), this._axis.copy(t), this._axis.freeze(), (this._axisRelativeToEntity = e);
							}
						},
						{
							key: 'getRate',
							value: function getRate() {
								return this._rate;
							}
						},
						{
							key: 'setRate',
							value: function setRate(t) {
								this._rate = t;
							}
						},
						{
							key: 'getReferenceAngle',
							value: function getReferenceAngle() {
								return this._referenceAngle;
							}
						},
						{
							key: 'setReferenceAngle',
							value: function setReferenceAngle(t) {
								this._referenceAngle = t;
							}
						},
						{
							key: 'getReferenceTime',
							value: function getReferenceTime() {
								return this._referenceTime;
							}
						},
						{
							key: 'setReferenceTime',
							value: function setReferenceTime(t) {
								this._referenceTime = t;
							}
						},
						{
							key: 'isClampedToRealTime',
							value: function isClampedToRealTime() {
								return this._clampedToRealTime;
							}
						},
						{
							key: 'setClampedToRealTime',
							value: function setClampedToRealTime(t) {
								this._clampedToRealTime = t;
							}
						},
						{
							key: 'isUsingRealTime',
							value: function isUsingRealTime() {
								return this._usingRealTime;
							}
						},
						{
							key: 'setUsingRealTime',
							value: function setUsingRealTime(t) {
								this._usingRealTime = t;
							}
						},
						{
							key: 'isRotatingPosition',
							value: function isRotatingPosition() {
								return this._rotatingPosition;
							}
						},
						{
							key: 'setRotatingPosition',
							value: function setRotatingPosition(t) {
								(this._rotatingPosition = t),
									t ? this.addModifiedState('position') : this.removeModifiedState('position');
							}
						},
						{
							key: 'setJoint',
							value: function setJoint(t, e) {
								if (((this._joint = t), e)) this._model = e;
								else {
									var n = this.getEntity().get('model');
									n instanceof De && (this._model = n);
								}
								'' !== this._joint ? this.removeModifiedState('orientation') : this.addModifiedState('orientation');
							}
						},
						{
							key: '__updatePositionAtTime',
							value: function __updatePositionAtTime(t, e) {
								if (this._rotatingPosition) {
									var n = 0;
									this._usingRealTime ||
										(void 0 !== this._referenceTime &&
											((n = e - this._referenceTime), (n -= this._referenceAngle / this._rate)));
									var r = tt.pool.get();
									if ((r.setFromAxisAngle(this._axis, this._rate * n), null === this._jointObject)) {
										if (this._axisRelativeToEntity) {
											var i = tt.pool.get();
											this.getEntity().getOrientationAtTime(i, e),
												r.mult(i, r),
												r.multInverseR(r, i),
												tt.pool.release(i);
										}
										t.rotate(r, t);
									}
									tt.pool.release(r);
								}
							}
						},
						{
							key: '__updateOrientationAtTime',
							value: function __updateOrientationAtTime(t, e) {
								var n = 0;
								this._usingRealTime ||
									(void 0 !== this._referenceTime &&
										((n = e - this._referenceTime), (n -= this._referenceAngle / this._rate)));
								var r = tt.pool.get();
								r.setFromAxisAngle(this._axis, this._rate * n),
									null === this._jointObject &&
										(this._axisRelativeToEntity && (r.mult(t, r), r.multInverseR(r, t)), t.mult(r, t), t.normalize(t)),
									tt.pool.release(r);
							}
						},
						{
							key: '__update',
							value: function __update() {
								this.getEntity().getOrientation().isNaN() && this.getEntity().setOrientation(tt.Identity);
								var t = this.getEntity().getScene().getEngine(),
									e = 0;
								if (this._usingRealTime) e = t.getDeltaTime();
								else if (void 0 !== this._referenceTime)
									(e = t.getTime() - this._referenceTime), (e -= this._referenceAngle / this._rate);
								else if (((e = t.getTime() - this._lastTime), this._clampedToRealTime)) {
									var n = t.getDeltaTime();
									e = T.clamp(e, -n, n);
								}
								var r = tt.pool.get();
								if (
									(r.setFromAxisAngle(this._axis, this._rate * e),
									null !== this._jointObject &&
										null !== this._model.getThreeJsObjects()[0] &&
										(this._jointObject = null),
									'' !== this._joint &&
										(null === this._jointObject || this._jointObject.name !== this._joint) &&
										null !== this._model)
								) {
									var i = this._model.getThreeJsObjectByName(this._joint);
									null !== i && (this._jointObject = i);
								}
								var o = this.getEntity().getOrientation();
								if (null !== this._jointObject)
									this._axisRelativeToEntity || (r.multInverseL(o, r), r.mult(r, o)),
										dr.set(r.x, r.y, r.z, r.w),
										this._jointObject.quaternion.multiplyQuaternions(dr, this._jointObject.quaternion),
										this._rotatingPosition && this._jointObject.position.applyQuaternion(dr);
								else {
									var a = tt.pool.get();
									this._axisRelativeToEntity && (r.mult(o, r), r.multInverseR(r, o)), a.mult(r, o), a.normalize(a);
									var s = yt.pool.get();
									if (
										(s.mult(this._axis, this._rate),
										this._axisRelativeToEntity && s.rotate(a, s),
										this.getEntity().setOrientation(a),
										this.getEntity().setAngularVelocity(s),
										yt.pool.release(s),
										tt.pool.release(a),
										this._rotatingPosition)
									) {
										var l = yt.pool.get();
										l.rotate(r, this.getEntity().getPosition()), this.getEntity().setPosition(l), yt.pool.release(l);
									}
								}
								tt.pool.release(r), (this._lastTime = t.getTime());
							}
						}
					]),
					SpinController
				);
			})(),
			dr = new i.Quaternion(),
			fr = hr;
		function tap_controller_typeof(t) {
			return (tap_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function tap_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function tap_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== tap_controller_typeof(e) && 'function' != typeof e)
				? (function tap_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function tap_controller_getPrototypeOf(t) {
			return (tap_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function tap_controller_setPrototypeOf(t, e) {
			return (tap_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var mr = (function (t) {
			function TapController(t, e, n) {
				var r;
				return (
					(function tap_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, TapController),
					((r = tap_controller_possibleConstructorReturn(
						this,
						tap_controller_getPrototypeOf(TapController).call(this, t, e, n)
					))._tapCallback = null),
					r
				);
			}
			return (
				(function tap_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && tap_controller_setPrototypeOf(t, e);
				})(TapController, an),
				(function tap_controller_createClass(t, e, n) {
					return e && tap_controller_defineProperties(t.prototype, e), n && tap_controller_defineProperties(t, n), t;
				})(TapController, [
					{
						key: 'getTapCallback',
						value: function getTapCallback() {
							return this._tapCallback;
						}
					},
					{
						key: 'setTapCallback',
						value: function setTapCallback(t) {
							this._tapCallback = t;
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getScene().getEngine().getInput();
							(!t.isSelected() && t.getDraggedOffset().isZero()) || (null !== this._tapCallback && this._tapCallback());
						}
					}
				]),
				TapController
			);
		})();
		function tle_controller_typeof(t) {
			return (tle_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function tle_controller_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function tle_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function tle_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== tle_controller_typeof(e) && 'function' != typeof e)
				? (function tle_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function tle_controller_getPrototypeOf(t) {
			return (tle_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function tle_controller_setPrototypeOf(t, e) {
			return (tle_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var gr = (function (t) {
				function TLEController(t, e, n) {
					var r;
					return (
						(function tle_controller_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, TLEController),
						((r = tle_controller_possibleConstructorReturn(
							this,
							tle_controller_getPrototypeOf(TLEController).call(this, t, e, n)
						))._satrec = null),
						r.addModifiedState('position'),
						r.addModifiedState('velocity'),
						r
					);
				}
				return (
					(function tle_controller_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && tle_controller_setPrototypeOf(t, e);
					})(TLEController, an),
					(function tle_controller_createClass(t, e, n) {
						return e && tle_controller_defineProperties(t.prototype, e), n && tle_controller_defineProperties(t, n), t;
					})(TLEController, [
						{
							key: 'setSource',
							value: function setSource(t, e) {
								var n = this;
								this.getEntity()
									.getScene()
									.getEngine()
									.getDownloader()
									.download(e, !0)
									.then(
										(function () {
											var e = (function tle_controller_asyncToGenerator(t) {
												return function () {
													var e = this,
														n = arguments;
													return new Promise(function (r, i) {
														var o = t.apply(e, n);
														function _next(t) {
															tle_controller_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
														}
														function _throw(t) {
															tle_controller_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
														}
														_next(void 0);
													});
												};
											})(
												regeneratorRuntime.mark(function _callee(e) {
													var r, i, o, a;
													return regeneratorRuntime.wrap(
														function _callee$(s) {
															for (;;)
																switch ((s.prev = s.next)) {
																	case 0:
																		if ('cancelled' !== e.status) {
																			s.next = 4;
																			break;
																		}
																		return s.abrupt('return', Promise.resolve());
																	case 4:
																		if ('failed' !== e.status) {
																			s.next = 6;
																			break;
																		}
																		return s.abrupt(
																			'return',
																			Promise.reject(
																				new Error(
																					'Failed to load TLE controller file "' + e.url + '": ' + e.errorMessage
																				)
																			)
																		);
																	case 6:
																		if (e.content instanceof ArrayBuffer) {
																			s.next = 8;
																			break;
																		}
																		return s.abrupt(
																			'return',
																			Promise.reject(
																				new Error(
																					'Failed to load TLE controller file "' + e.url + '": Not a binary file.'
																				)
																			)
																		);
																	case 8:
																		r = new C(e.content);
																	case 9:
																		0, (i = ''), (s.prev = 11), (i = r.readLine()), (s.next = 18);
																		break;
																	case 15:
																		throw ((s.prev = 15), (s.t0 = s.catch(11)), new Error('Could not find entry.'));
																	case 18:
																		if (0 !== i.length) {
																			s.next = 20;
																			break;
																		}
																		return s.abrupt('break', 27);
																	case 20:
																		if (((o = r.readLine()), (a = r.readLine()), !i.includes(t) && !o.includes(t))) {
																			s.next = 25;
																			break;
																		}
																		return (n._satrec = _.twoline2satrec(o, a)), s.abrupt('break', 27);
																	case 25:
																		s.next = 9;
																		break;
																	case 27:
																	case 'end':
																		return s.stop();
																}
														},
														_callee,
														null,
														[[11, 15]]
													);
												})
											);
											return function (t) {
												return e.apply(this, arguments);
											};
										})()
									)
									.catch(function (n) {
										throw new Error('While loading TLE "'.concat(t, '" from "').concat(e, '": ').concat(n));
									});
							}
						},
						{
							key: '__updatePositionAtTime',
							value: function __updatePositionAtTime(t, e) {
								if (null !== this._satrec) {
									yr.setTime(1e3 * A.etToUnix(e));
									var n = _.propagate(this._satrec, yr);
									'boolean' != typeof n.position && t.set(n.position.x, n.position.y, n.position.z);
								}
							}
						},
						{
							key: '__updateVelocityAtTime',
							value: function __updateVelocityAtTime(t, e) {
								if (null !== this._satrec) {
									yr.setTime(1e3 * A.etToUnix(e));
									var n = _.propagate(this._satrec, yr);
									'boolean' != typeof n.velocity && t.set(n.velocity.x, n.velocity.y, n.velocity.z);
								}
							}
						},
						{
							key: '__update',
							value: function __update() {
								var t = yt.pool.get();
								if (
									(t.copy(this.getEntity().getScene().getEntity('earth').getPosition()),
									null !== this._satrec && !isNaN(t.x))
								) {
									yr.setTime(1e3 * A.etToUnix(this.getEntity().getScene().getEngine().getTime()));
									var e = _.propagate(this._satrec, yr);
									if ('boolean' != typeof e.position && 'boolean' != typeof e.velocity) {
										var n = yt.pool.get(),
											r = yt.pool.get();
										n.set(e.position.x, e.position.y, e.position.z),
											r.set(e.velocity.x, e.velocity.y, e.velocity.z),
											this.getEntity().setPosition(n),
											this.getEntity().setVelocity(r),
											yt.pool.release(n),
											yt.pool.release(r);
									}
								}
								yt.pool.release(t);
							}
						}
					]),
					TLEController
				);
			})(),
			yr = new Date(),
			vr = gr;
		function transition_controller_typeof(t) {
			return (transition_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function transition_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function transition_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== transition_controller_typeof(e) && 'function' != typeof e)
				? (function transition_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function transition_controller_get(t, e, n) {
			return (transition_controller_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function transition_controller_superPropBase(t, e) {
								for (
									;
									!Object.prototype.hasOwnProperty.call(t, e) && null !== (t = transition_controller_getPrototypeOf(t));

								);
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function transition_controller_getPrototypeOf(t) {
			return (transition_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function transition_controller_setPrototypeOf(t, e) {
			return (transition_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var br = (function (t) {
			function TransitionController(t, e, n) {
				var r;
				return (
					(function transition_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, TransitionController),
					((r = transition_controller_possibleConstructorReturn(
						this,
						transition_controller_getPrototypeOf(TransitionController).call(this, t, e, n)
					))._initialPosition = new yt()),
					r._initialPosition.copy(n.getPosition()),
					(r._initialOrientation = new tt()),
					r._initialOrientation.copy(n.getOrientation()),
					(r._initialParent = n.getParent()),
					(r._transitionStart = Number.NaN),
					(r._transitionTime = 1),
					(r._transitionFunction = r._lerpTransitionFunction),
					(r._resolvePromise = null),
					(r._rejectPromise = null),
					(r._endPromise = new Promise(function (t, e) {
						(r._resolvePromise = t), (r._rejectPromise = e);
					})),
					null !== r._initialParent && r.addDependentState(r._initialParent.getName(), 'position'),
					r
				);
			}
			return (
				(function transition_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && transition_controller_setPrototypeOf(t, e);
				})(TransitionController, an),
				(function transition_controller_createClass(t, e, n) {
					return (
						e && transition_controller_defineProperties(t.prototype, e),
						n && transition_controller_defineProperties(t, n),
						t
					);
				})(TransitionController, [
					{
						key: 'getTransitionTime',
						value: function getTransitionTime() {
							return this._transitionTime;
						}
					},
					{
						key: 'setTransitionTime',
						value: function setTransitionTime(t) {
							this._transitionTime = t;
						}
					},
					{
						key: 'setTransitionFunction',
						value: function setTransitionFunction(t) {
							this._transitionFunction = t;
						}
					},
					{
						key: 'getEndPromise',
						value: function getEndPromise() {
							return this._endPromise;
						}
					},
					{
						key: '__destroy',
						value: function __destroy() {
							transition_controller_get(
								transition_controller_getPrototypeOf(TransitionController.prototype),
								'__destroy',
								this
							).call(this),
								null !== this._rejectPromise && this._rejectPromise();
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this;
							if (
								(Number.isNaN(this._transitionStart) && (this._transitionStart = Date.now() / 1e3),
								this._initialParent !== this.getEntity().getParent())
							)
								if (Date.now() / 1e3 - this._transitionStart < this._transitionTime / 2)
									this.getEntity().setParent(this._initialParent);
								else {
									var e = yt.pool.get();
									null !== this._initialParent
										? this._initialParent.getPositionRelativeToEntity(e, yt.Zero, this.getEntity().getParent())
										: (this.getEntity().getParent().getPositionRelativeToEntity(e, yt.Zero, null), e.neg(e)),
										this._initialPosition.add(this._initialPosition, e),
										yt.pool.release(e),
										(this._initialParent = this.getEntity().getParent());
								}
							var n = this.getEntity().getPosition(),
								r = this.getEntity().getOrientation(),
								i = T.clamp01((Date.now() / 1e3 - this._transitionStart) / this._transitionTime);
							Number.isNaN(i) && (i = 1),
								this._transitionFunction(this.getEntity(), this._initialPosition, n, this._initialOrientation, r, i),
								Date.now() / 1e3 - this._transitionStart >= this._transitionTime &&
									((this._rejectPromise = null),
									this.getEntity()
										.getScene()
										.getEngine()
										.addCallback(function () {
											t.getEntity().removeController(t), t._resolvePromise();
										}, !1));
						}
					},
					{
						key: '_lerpTransitionFunction',
						value: function _lerpTransitionFunction(t, e, n, r, i, o) {
							var a = yt.pool.get(),
								s = tt.pool.get();
							a.lerp(e, n, o),
								s.slerp(r, i, o),
								t.setPosition(a),
								t.setOrientation(s),
								yt.pool.release(a),
								tt.pool.release(s);
						}
					}
				]),
				TransitionController
			);
		})();
		function translate_controller_typeof(t) {
			return (translate_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function translate_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function translate_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== translate_controller_typeof(e) && 'function' != typeof e)
				? (function translate_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function translate_controller_getPrototypeOf(t) {
			return (translate_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function translate_controller_setPrototypeOf(t, e) {
			return (translate_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var xr = (function (t) {
			function TranslateController(t, e, n) {
				var r;
				return (
					(function translate_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, TranslateController),
					((r = translate_controller_possibleConstructorReturn(
						this,
						translate_controller_getPrototypeOf(TranslateController).call(this, t, e, n)
					))._translation = new yt(0, 0, 0)),
					r._translation.freeze(),
					r.addModifiedState('position'),
					r
				);
			}
			return (
				(function translate_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && translate_controller_setPrototypeOf(t, e);
				})(TranslateController, an),
				(function translate_controller_createClass(t, e, n) {
					return (
						e && translate_controller_defineProperties(t.prototype, e),
						n && translate_controller_defineProperties(t, n),
						t
					);
				})(TranslateController, [
					{
						key: 'getTranslation',
						value: function getTranslation() {
							return this._translation;
						}
					},
					{
						key: 'setTranslation',
						value: function setTranslation(t) {
							this._translation.thaw(), this._translation.copy(t), this._translation.freeze();
						}
					},
					{
						key: '__updatePositionAtTime',
						value: function __updatePositionAtTime(t, e) {
							t.add(t, this._translation);
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = yt.pool.get();
							t.add(this._translation, this.getEntity().getPosition()),
								this.getEntity().setPosition(t),
								yt.pool.release(t);
						}
					}
				]),
				TranslateController
			);
		})();
		function zoom_controller_typeof(t) {
			return (zoom_controller_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function zoom_controller_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function zoom_controller_possibleConstructorReturn(t, e) {
			return !e || ('object' !== zoom_controller_typeof(e) && 'function' != typeof e)
				? (function zoom_controller_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function zoom_controller_getPrototypeOf(t) {
			return (zoom_controller_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function zoom_controller_setPrototypeOf(t, e) {
			return (zoom_controller_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Sr = (function (t) {
			function ZoomController(t, e, n) {
				var r;
				return (
					(function zoom_controller_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ZoomController),
					((r = zoom_controller_possibleConstructorReturn(
						this,
						zoom_controller_getPrototypeOf(ZoomController).call(this, t, e, n)
					))._zoomSensitivity = 0.05),
					(r._zoomSmoothness = 0.8),
					(r._zoomSmoothedValue = 1),
					(r._distanceClamp = new J(0.001, Number.POSITIVE_INFINITY)),
					r._distanceClamp.freeze(),
					(r._useSpheroidRadiusForDistance = !1),
					r.addModifiedState('position'),
					r
				);
			}
			return (
				(function zoom_controller_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && zoom_controller_setPrototypeOf(t, e);
				})(ZoomController, an),
				(function zoom_controller_createClass(t, e, n) {
					return e && zoom_controller_defineProperties(t.prototype, e), n && zoom_controller_defineProperties(t, n), t;
				})(ZoomController, [
					{
						key: 'getZoomSensitivity',
						value: function getZoomSensitivity() {
							return this._zoomSensitivity;
						}
					},
					{
						key: 'setZoomSensitivity',
						value: function setZoomSensitivity(t) {
							this._zoomSensitivity = t;
						}
					},
					{
						key: 'getZoomSmoothness',
						value: function getZoomSmoothness() {
							return this._zoomSmoothness;
						}
					},
					{
						key: 'setZoomSmoothness',
						value: function setZoomSmoothness(t) {
							this._zoomSmoothness = t;
						}
					},
					{
						key: 'getDistanceClamp',
						value: function getDistanceClamp() {
							return this._distanceClamp;
						}
					},
					{
						key: 'setDistanceClamp',
						value: function setDistanceClamp(t) {
							this._distanceClamp.thaw(), this._distanceClamp.copy(t), this._distanceClamp.freeze();
						}
					},
					{
						key: 'getUseSpheroidRadiusForDistance',
						value: function getUseSpheroidRadiusForDistance() {
							return this._useSpheroidRadiusForDistance;
						}
					},
					{
						key: 'setUseSpheroidRadiusForDistance',
						value: function setUseSpheroidRadiusForDistance(t) {
							this._useSpheroidRadiusForDistance = t;
						}
					},
					{
						key: '__update',
						value: function __update() {
							var t = this.getEntity().getScene().getEngine().getInput(),
								e = 1,
								n = t.getActiveViewport();
							if (null !== n) {
								var r = n.getCamera();
								if (null !== r && r.getEntity() === this.getEntity()) {
									var i = 1;
									t.isKeyPressed('x') && (i = 0.05), t.isKeyPressed('shift') && (i = 5);
									var o = t.getZoomedOffset();
									0 !== o && (e *= Math.pow(2, o * this._zoomSensitivity * i)),
										t.isKeyPressed('w') && (e /= Math.pow(2, this._zoomSensitivity * i)),
										t.isKeyPressed('s') && (e *= Math.pow(2, this._zoomSensitivity * i));
								}
							}
							(this._zoomSmoothedValue = T.lerp(e, this._zoomSmoothedValue, this._zoomSmoothness)),
								Math.abs(1 - this._zoomSmoothedValue) < 1e-7 && (this._zoomSmoothedValue = 1);
							var a = 1,
								s = Et.pool.get(),
								l = null;
							if (this._useSpheroidRadiusForDistance) {
								var c =
									this.getEntity().getParent().get('spheroid') ||
									this.getEntity().getParent().get('wmts') ||
									this.getEntity().getParent().get('cmts');
								if (c && c.getSpheroid instanceof Function) {
									l = c.getSpheroid();
									var u = yt.pool.get();
									u.rotateInverse(this.getEntity().getParent().getOrientation(), this.getEntity().getPosition()),
										l.llaFromXYZ(s, u, !1),
										(a = s.alt),
										yt.pool.release(u);
								} else
									a = this.getEntity().getPosition().magnitude() - this.getEntity().getParent().getOcclusionRadius();
							} else a = this.getEntity().getPosition().magnitude();
							Number.isNaN(a) && (a = 1),
								(a *= this._zoomSmoothedValue) < this._distanceClamp.min &&
									((a = this._distanceClamp.min), (this._zoomSmoothedValue = 1)),
								a > this._distanceClamp.max && ((a = this._distanceClamp.max), (this._zoomSmoothedValue = 1));
							var _ = yt.pool.get(),
								p = a;
							this._useSpheroidRadiusForDistance &&
								(null !== l
									? ((s.alt = a), l.xyzFromLLA(_, s), (p = _.magnitude()))
									: (p = a + this.getEntity().getParent().getOcclusionRadius())),
								_.normalize(this.getEntity().getPosition()),
								_.mult(_, p),
								this.getEntity().setPosition(_),
								yt.pool.release(_),
								Et.pool.release(s);
						}
					}
				]),
				ZoomController
			);
		})();
		var Tr = function Types() {
			!(function types_classCallCheck(t, e) {
				if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
			})(this, Types);
		};
		(Tr.Components = new Map()).set('atmosphere', Se),
			Tr.Components.set('camera', Te),
			Tr.Components.set('cmts', Pe),
			Tr.Components.set('cometTail', ke),
			Tr.Components.set('connectedSprite', Oe),
			Tr.Components.set('div', Ae),
			Tr.Components.set('dynEnvMap', Me),
			Tr.Components.set('gizmo', je),
			Tr.Components.set('label', Ne),
			Tr.Components.set('lightSource', Fe),
			Tr.Components.set('model', De),
			Tr.Components.set('orbitalParticles', Ue),
			Tr.Components.set('particleSpray', Be),
			Tr.Components.set('rings', Je),
			Tr.Components.set('skybox', $e),
			Tr.Components.set('spheroid', qe),
			Tr.Components.set('spout', Xe),
			Tr.Components.set('sprite', We),
			Tr.Components.set('starfield', nn),
			Tr.Components.set('trail', on),
			(Tr.Controllers = new Map()).set('align', ln),
			Tr.Controllers.set('animdata', xn),
			Tr.Controllers.set('coverage', Tn),
			Tr.Controllers.set('dynamo', Mn),
			Tr.Controllers.set('fixed', Ln),
			Tr.Controllers.set('fixedToParent', jn),
			Tr.Controllers.set('freeFly', zn),
			Tr.Controllers.set('clamp', Dn),
			Tr.Controllers.set('keyframe', Jn),
			Tr.Controllers.set('look', $n),
			Tr.Controllers.set('modelAnimate', Hn),
			Tr.Controllers.set('orbit', qn),
			Tr.Controllers.set('orbitKeyframe', Qn),
			Tr.Controllers.set('orbitalElements', ar),
			Tr.Controllers.set('pick', sr),
			Tr.Controllers.set('roll', lr),
			Tr.Controllers.set('rotate', cr),
			Tr.Controllers.set('rotateByParentOrientation', ur),
			Tr.Controllers.set('scale', _r),
			Tr.Controllers.set('select', pr),
			Tr.Controllers.set('spin', fr),
			Tr.Controllers.set('tap', mr),
			Tr.Controllers.set('tle', vr),
			Tr.Controllers.set('transition', br),
			Tr.Controllers.set('translate', xr),
			Tr.Controllers.set('zoom', Sr);
		var wr = Tr;
		function cameras_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function cameras_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						cameras_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						cameras_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function cameras_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Cr = (function () {
			function Cameras() {
				!(function cameras_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Cameras);
			}
			return (
				(function cameras_createClass(t, e, n) {
					return e && cameras_defineProperties(t.prototype, e), n && cameras_defineProperties(t, n), t;
				})(Cameras, null, [
					{
						key: 'createFullSizeViewportAndCamera',
						value: function createFullSizeViewportAndCamera(t) {
							var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 'main',
								n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'camera',
								r = t.getEngine().addViewport(e);
							(r.getDiv().style.width = '100%'), (r.getDiv().style.height = '100%');
							var i = t.addEntity(n).addComponent('camera');
							i instanceof Te && r.setCamera(i);
						}
					},
					{
						key: 'focusOnEntity',
						value: function focusOnEntity(t, e, n) {
							var r = n.up,
								i = void 0 === r || r,
								o = n.orbiter,
								a = void 0 !== o && o,
								s = t.addController('align');
							s instanceof ln &&
								(s.setPrimaryAlignType('point'),
								s.setPrimaryAxis(yt.YAxis),
								s.setPrimaryTargetEntity(e.getName()),
								i &&
									(a
										? (s.setSecondaryAlignType('position'),
										  s.setSecondaryAxis(yt.ZAxis),
										  s.setSecondaryTargetEntity(e.getName()))
										: (s.setSecondaryAlignType('align'),
										  s.setSecondaryAxis(yt.ZAxis),
										  s.setSecondaryTargetEntity(e.getName()),
										  s.setSecondaryTargetAxis(yt.ZAxis))));
						}
					},
					{
						key: 'lookAtEntity',
						value: (function () {
							var t = cameras_asyncToGenerator(
								regeneratorRuntime.mark(function _callee(t, e, n) {
									var r, i, o, a, s, l, c, u, _, p, h, d;
									return regeneratorRuntime.wrap(function _callee$(f) {
										for (;;)
											switch ((f.prev = f.next)) {
												case 0:
													if (
														((r = n.duration),
														(i = void 0 === r ? 0.5 : r),
														(o = n.finalUp),
														(a = void 0 === o ? void 0 : o),
														(s = n.finalUpRelativeEntity),
														(l = void 0 === s ? void 0 : s),
														(c = n.finalUpPosition),
														(u = void 0 !== c && c),
														!t.getPosition().isNaN())
													) {
														f.next = 3;
														break;
													}
													return f.abrupt('return');
												case 3:
													for (
														_ = new yt(), e.getPositionRelativeToEntity(_, yt.Zero, t), _.normalize(_), p = 0;
														p < t.getNumControllers();
														p++
													)
														t.getController(p).hasModifiedState('orientation') && (t.removeController(p), p--);
													if ((h = t.addController('align')) instanceof ln) {
														f.next = 10;
														break;
													}
													return f.abrupt('return');
												case 10:
													if (
														(h.setPrimaryAlignType('point'),
														h.setPrimaryAxis(yt.YAxis),
														h.setPrimaryTargetEntity(e.getName()),
														void 0 !== a &&
															(void 0 === l && (l = e),
															u
																? (h.setSecondaryAlignType('position'),
																  h.setSecondaryAxis(yt.ZAxis),
																  h.setSecondaryTargetEntity(l.getName()))
																: (h.setSecondaryAlignType('align'),
																  h.setSecondaryAxis(yt.ZAxis),
																  h.setSecondaryTargetEntity(l.getName()),
																  h.setSecondaryTargetAxis(a))),
														(d = t.addController('transition')) instanceof br)
													) {
														f.next = 17;
														break;
													}
													return f.abrupt('return');
												case 17:
													return d.setTransitionTime(i), (f.next = 20), d.getEndPromise();
												case 20:
												case 'end':
													return f.stop();
											}
									}, _callee);
								})
							);
							return function lookAtEntity(e, n, r) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'goToEntity',
						value: (function () {
							var t = cameras_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2(t, e, n) {
									var r, i, o, a, s, l, c, u, _, p, h, d, f, m, g, y, v, b, x, S, T, w, C, P, E, k, O;
									return regeneratorRuntime.wrap(
										function _callee2$(A) {
											for (;;)
												switch ((A.prev = A.next)) {
													case 0:
														if (
															((r = n.up),
															(i = void 0 === r || r),
															(o = n.orbiter),
															(a = void 0 !== o && o),
															(s = n.fixedToParent),
															(l = void 0 !== s && s),
															(c = n.duration),
															(u = void 0 === c ? 1 : c),
															(_ = n.distance),
															(p = void 0 === _ ? void 0 : _),
															(h = n.zoom),
															(d = void 0 === h || h),
															(f = n.destination),
															(m = void 0 === f ? void 0 : f),
															(g = n.destinationUp),
															(y = void 0 === g ? void 0 : g),
															(v = n.destinationInFocusFrame),
															(b = void 0 !== v && v),
															(x = n.transitionFunction),
															(S = void 0 === x ? void 0 : x),
															p || (p = 5 * e.getExtentsRadius()),
															(t.getPosition().isNaN() || t.getOrientation().isNaN()) &&
																(t.setParent(e),
																void 0 === m ? t.setPosition(new yt(0, -p, 0)) : t.setPosition(m),
																t.setOrientation(tt.Identity),
																(u = 0)),
															void 0 === m &&
																((m = new yt()),
																t.getPositionRelativeToEntity(m, yt.Zero, e),
																m.normalize(m),
																m.mult(m, p),
																m.isNaN() && m.set(0, -p, 0)),
															t.clearControllers(),
															(T = t.addController('fixed')) instanceof Ln &&
																(T.setParent(e.getName()),
																T.setPosition(m),
																void 0 !== y &&
																	((w = new yt()),
																	(C = new yt()),
																	w.neg(m),
																	w.normalize(w),
																	C.setNormalTo(w, y),
																	(P = new tt()).setFromAxes(void 0, w, C),
																	T.setOrientation(P))),
															b &&
																((E = t.addController('rotateByParentOrientation')),
																void 0 === y && E.setRotatingOrientation(!1)),
															this.focusOnEntity(t, e, { up: i, orbiter: a }),
															!((k = t.addController('transition')) instanceof br))
														) {
															A.next = 15;
															break;
														}
														return (
															k.setTransitionTime(u), S && k.setTransitionFunction(S), (A.next = 15), k.getEndPromise()
														);
													case 15:
														t.clearControllers(),
															(O = t.addController('orbit')) instanceof qn &&
																(i
																	? a
																		? O.setYawAxisType('position')
																		: O.setYawAxisType('z-axis')
																	: t.addController('roll')),
															l && t.addController('fixedToParent'),
															this.focusOnEntity(t, e, { up: i, orbiter: a }),
															d && t.addController('zoom');
													case 21:
													case 'end':
														return A.stop();
												}
										},
										_callee2,
										this
									);
								})
							);
							return function goToEntity(e, n, r) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'pickOnEntity',
						value: function pickOnEntity(t, e, n, r) {
							var i = t.addController('pick');
							i instanceof sr &&
								(i.setPickedEntity(e),
								i.setCallback(function (t) {
									var i = e.getComponentByType('spheroid');
									if (i instanceof qe) {
										var o = yt.pool.get();
										o.rotateInverse(e.getOrientation(), t);
										var a = Et.pool.get();
										i.getSpheroid().llaFromXYZ(a, o, n), r(o, a), Et.pool.release(a), yt.pool.release(o);
									}
								}));
						}
					},
					{
						key: 'getDistanceToFitEntities',
						value: function getDistanceToFitEntities(t, e, n, r) {
							var i = t.getComponentByType('camera');
							if (!(i instanceof Te)) return NaN;
							for (
								var o = 0,
									a = yt.pool.get(),
									s = Math.sin(i.getHorizontalFieldOfView() / 2),
									l = Math.sin(i.getVerticalFieldOfView() / 2),
									c = Math.tan(i.getHorizontalFieldOfView() / 2),
									u = Math.tan(i.getVerticalFieldOfView() / 2),
									_ = 0;
								_ < r.length;
								_++
							) {
								var p = r[_],
									h = 0,
									d = p.get('rings');
								d instanceof Je && (h = d.getOuterRadius()),
									p.getPositionRelativeToEntity(a, yt.Zero, n),
									a.rotateInverse(e, a),
									(o = Math.max(o, Math.abs(a.x) / c + Math.max(p.getExtentsRadius(), h) / s - a.y)),
									(o = Math.max(o, Math.abs(a.z) / u + Math.max(p.getExtentsRadius(), h) / l - a.y));
							}
							return yt.pool.release(a), o;
						}
					}
				]),
				Cameras
			);
		})();
		new Date();
		function entity_slicedToArray(t, e) {
			return (
				(function entity_arrayWithHoles(t) {
					if (Array.isArray(t)) return t;
				})(t) ||
				(function entity_iterableToArrayLimit(t, e) {
					var n = [],
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (
							var a, s = t[Symbol.iterator]();
							!(r = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e);
							r = !0
						);
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					return n;
				})(t, e) ||
				(function entity_nonIterableRest() {
					throw new TypeError('Invalid attempt to destructure non-iterable instance');
				})()
			);
		}
		function src_entity_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Pr = (function () {
			function Entity() {
				!(function src_entity_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Entity);
			}
			return (
				(function src_entity_createClass(t, e, n) {
					return e && src_entity_defineProperties(t.prototype, e), n && src_entity_defineProperties(t, n), t;
				})(Entity, null, [
					{
						key: 'register',
						value: function register(t) {
							for (var e in t) Object.prototype.hasOwnProperty.call(t, e) && this._entities.set(e, t[e]);
						}
					},
					{
						key: 'create',
						value: function create(t, e, n) {
							var r = Entity._entities.get(t);
							if (void 0 === r) throw new Error('Could not find the options for the entity with name ' + t);
							return this.createFromOptions(t, r, e, n);
						}
					},
					{
						key: 'createFromOptions',
						value: function createFromOptions(t, e, n, r) {
							var i = t;
							r && (r.namePrefix && (i = r.namePrefix + i), r.nameSuffix && (i += r.nameSuffix));
							var o = n.get(i);
							if (o instanceof Wt) return o;
							o = n.addEntity(i);
							try {
								if (
									(e.radius && (o.setOcclusionRadius(e.radius), o.setExtentsRadius(e.radius)),
									e.occlusionRadius && o.setOcclusionRadius(e.occlusionRadius),
									e.extentsRadius && o.setExtentsRadius(e.extentsRadius),
									e.coverages)
								) {
									var a = o.get('coverage');
									if ((null === a && (a = o.addController('coverage')), a instanceof Tn))
										for (var s = 0, l = e.coverages.length; s < l; s++)
											a.addCoverage(
												new J(e.coverages[s].coverage[0], e.coverages[s].coverage[1]),
												e.coverages[s].enter,
												e.coverages[s].exit,
												e.coverages[s].update
											);
								}
								if (e.label) {
									var c = o.addComponent('div');
									if (c instanceof Ae) {
										var u = c.getDiv();
										(u.innerHTML = e.label), (u.className = 'pioneer-label-div');
									}
								}
								if (e.trail) {
									var _ = o.addComponent('trail');
									if (_ instanceof on) {
										if (
											(_.setStartTime(e.trail.length),
											e.trail.color
												? _.setColor(new z(e.trail.color[0], e.trail.color[1], e.trail.color[2], e.trail.color[3]))
												: _.setColor(new z(1, 1, 1, 0.5)),
											e.trail.relativeTo && _.setRelativeToEntity(e.trail.relativeTo),
											e.trail.lengthCoverages)
										) {
											var p = o.get('coverage');
											if (
												(null === p && (p = o.addController('coverage', void 0, o.getController(0))), p instanceof Tn)
											)
												for (
													var h = function _loop(t, n) {
															var r = e.trail.lengthCoverages[t];
															p.addCoverage(
																new J(r[1], r[2]),
																function (t) {
																	t.get('trail').setStartTime(r[0]);
																},
																function (t) {
																	t.get('trail').setStartTime(e.trail.length);
																}
															);
														},
														d = 0,
														f = e.trail.lengthCoverages.length;
													d < f;
													d++
												)
													h(d);
										}
										this._processCoverages(o, _, e.trail.coverages);
									}
								}
								if ((e.spheroid && this._addSpheroid(o, e.spheroid), e.cmts)) {
									var m = o.addComponent('cmts');
									if (m instanceof Pe) {
										if (
											(m.setRadii(e.cmts.equatorialRadius, e.cmts.polarRadius),
											m.setPlanetographic(e.cmts.planetographic),
											e.cmts.textures)
										)
											for (var g in e.cmts.textures) {
												var y = e.cmts.textures[g];
												m.setBaseUrl(g, y);
											}
										e.cmts.shadowEntities && m.setShadowEntities(e.cmts.shadowEntities),
											this._processCoverages(o, m, e.cmts.coverages);
									}
								}
								if (e.model) {
									var v = o.addComponent('model');
									if (v instanceof De) {
										if ((v.setUrl(e.model.url), e.model.rotate)) {
											var b = new tt();
											b.set(1, 0, 0, 0);
											for (var x = 0, S = e.model.rotate.length; x < S; x++) {
												var w = void 0,
													C = void 0,
													P = e.model.rotate[x];
												if (void 0 !== P.x) (w = new yt(1, 0, 0)), (C = P.x);
												else if (void 0 !== P.y) (w = new yt(0, 1, 0)), (C = P.y);
												else {
													if (void 0 === P.z) throw new Error('Invalid model rotate axis.');
													(w = new yt(0, 0, 1)), (C = P.z);
												}
												C = T.degToRad(C);
												var E = new tt();
												E.setFromAxisAngle(w, C), b.mult(E, b);
											}
											v.setRotation(b);
										}
										if (e.model.scale) {
											var k = e.model.scale;
											Array.isArray(k) ? v.setScale(new yt(k[0], k[1], k[2])) : v.setScale(k);
										}
										!0 === e.model.useCompressedTextures && v.setUseCompressedTextures(!0),
											e.model.shadowEntities && v.setShadowEntities(e.model.shadowEntities),
											e.model.environmentMap &&
												(e.model.environmentMap.cubemap
													? (v.setEnvironmentCubemapUrl(e.model.environmentMap.cubemap),
													  v.setEnvironmentCylindricalUrl(''))
													: e.model.environmentMap.cylindrical &&
													  (v.setEnvironmentCylindricalUrl(e.model.environmentMap.cylindrical),
													  v.setEnvironmentCubemapUrl(''))),
											this._processCoverages(o, v, e.model.coverages);
									}
								}
								if (e.comet) {
									var O = o.addComponent('cometTail');
									void 0 !== e.comet.timeLength && O.setTimeLength(e.comet.timeLength), O.setLightSource('sun');
									var A = o.addComponent('cometTail');
									A.setTimeLength(0.5 * O.getTimeLength()),
										A.setColor(new z(0.214, 0.235, 0.371, 0.5)),
										A.setStarAccelerationMultiplier(10),
										A.setLightSource('sun');
									var R = o.addComponent('cometTail');
									R.setStarAccelerationMultiplier(0),
										R.setColor(new z(1, 1, 1, 10)),
										R.setNumberOfParticles(1),
										R.setLightSource('sun');
								}
								if (e.fixed) {
									var I = o.addController('fixed');
									if (I instanceof Ln) {
										if (
											(e.fixed.position && I.setPosition(e.fixed.position),
											e.fixed.orientation && I.setOrientation(e.fixed.orientation),
											e.fixed.parent && I.setParent(e.fixed.parent),
											e.fixed.llaOnSpheroid)
										) {
											var M = n.getEntity(I.getParent());
											if (null !== M) {
												var L = M.get('spheroid');
												if ((null === L && (L = M.get('cmts')), L instanceof qe || L instanceof Pe)) {
													var j = new yt(),
														N = L.getSpheroid();
													N.xyzFromLLA(j, e.fixed.llaOnSpheroid), I.setPosition(j);
													var F = new tt();
													N.orientationFromLLA(F, e.fixed.llaOnSpheroid),
														I.setOrientation(F),
														o.addController('rotateByParentOrientation');
												}
											}
										}
										if (
											(e.fixed.coverage &&
												2 === e.fixed.coverage.length &&
												I.setCoverage(new J(e.fixed.coverage[0], e.fixed.coverage[1])),
											e.fixed.fixedToParent || void 0 !== e.fixed.llaOnSpheroid)
										) {
											var D = o.addController('rotateByParentOrientation');
											e.fixed.coverage &&
												2 === e.fixed.coverage.length &&
												D.setCoverage(new J(e.fixed.coverage[0], e.fixed.coverage[1]));
										}
									}
								}
								if (e.dynamo)
									for (var U = 0, V = e.dynamo.length; U < V; U++) {
										var B = e.dynamo[U],
											G = o.addController('dynamo');
										G instanceof Mn &&
											(B.customUrl ? G.setBaseUrl(B.url) : G.setBaseUrl('$DYNAMIC_ASSETS_URL/dynamo/' + B.url),
											void 0 !== B.parent && G.setParent(B.parent),
											B.parentIsBarycenter && G.setHeaderValue('body', 1),
											B.coverage && 2 === B.coverage.length && G.setCoverage(new J(B.coverage[0], B.coverage[1])));
									}
								if (e.animdata)
									for (var $ = 0, H = e.animdata.length; $ < H; $++) {
										var q = e.animdata[$],
											Z = o.addController('animdata');
										Z instanceof xn &&
											(Z.setBaseUrlAndStateType('$ANIMDATA_URL/' + e.animdata[$].url, e.animdata[$].type),
											void 0 !== q.parent && Z.setParent(q.parent),
											q.coverage && 2 === q.coverage.length && Z.setCoverage(new J(q.coverage[0], q.coverage[1])));
									}
								if (e.tle) {
									var Y = o.addController('tle');
									Y instanceof vr &&
										(void 0 !== e.tle.parent && Y.setParent(e.tle.parent),
										Y.setSource(e.tle.tleName, e.tle.url),
										e.tle.coverage &&
											2 === e.tle.coverage.length &&
											Y.setCoverage(new J(e.tle.coverage[0], e.tle.coverage[1])));
								}
								if (e.align) {
									var X = null;
									if (e.dynamo)
										for (var K = 0; K < e.dynamo.length; K++) {
											var W = e.dynamo[K].url;
											(W.endsWith('ori') || W.endsWith('quat')) && (X = o.getControllerByType('dynamo', K));
										}
									var Q = o.addController('align', void 0, X);
									Q instanceof ln &&
										(Q.setPrimaryAlignType(e.align.primary.type),
										Q.setPrimaryTargetEntity(e.align.primary.target),
										Q.setPrimaryAxis(e.align.primary.axis),
										e.align.primary.targetAxis && Q.setPrimaryTargetAxis(e.align.primary.targetAxis),
										e.align.secondary &&
											(Q.setSecondaryAlignType(e.align.secondary.type),
											Q.setSecondaryTargetEntity(e.align.secondary.target),
											Q.setSecondaryAxis(e.align.secondary.axis),
											e.align.secondary.targetAxis && Q.setSecondaryTargetAxis(e.align.secondary.targetAxis)),
										e.align.coverage &&
											2 === e.align.coverage.length &&
											Q.setCoverage(new J(e.align.coverage[0], e.align.coverage[1])));
								}
								if (e.spin) {
									var et = o.addController('spin');
									et instanceof fr &&
										(et.setAxis(e.spin.axis, !0), et.setRate(T.twoPi / (3600 * e.spin.periodInHours))),
										e.spin.coverage &&
											2 === e.spin.coverage.length &&
											et.setCoverage(new J(e.spin.coverage[0], e.spin.coverage[1]));
								}
								e.postCreateFunction && e.postCreateFunction(o, r);
							} catch (t) {
								throw (null !== o && n.removeEntity(o), new Error('While creating "'.concat(i, '": ').concat(t)));
							}
							return o;
						}
					},
					{
						key: 'getEntityOptions',
						value: function getEntityOptions(t) {
							return Entity._entities.get(t);
						}
					},
					{
						key: 'getEntityNamesInGroup',
						value: function getEntityNamesInGroup(t) {
							var e = new Set();
							if ('' !== t) {
								var n = t.split(',').map(function (t) {
										return t.trim();
									}),
									r = !0,
									i = !1,
									o = void 0;
								try {
									for (var a, s = Entity._entities[Symbol.iterator](); !(r = (a = s.next()).done); r = !0) {
										var l = entity_slicedToArray(a.value, 2),
											c = l[0],
											u = l[1].groups;
										if (u) {
											var _ = !0,
												p = !0,
												h = !1,
												d = void 0;
											try {
												for (var f, m = n[Symbol.iterator](); !(p = (f = m.next()).done); p = !0) {
													var g = f.value;
													u.includes(g) || (_ = !1);
												}
											} catch (t) {
												(h = !0), (d = t);
											} finally {
												try {
													p || null == m.return || m.return();
												} finally {
													if (h) throw d;
												}
											}
											_ && e.add(c);
										}
									}
								} catch (t) {
									(i = !0), (o = t);
								} finally {
									try {
										r || null == s.return || s.return();
									} finally {
										if (i) throw o;
									}
								}
							} else {
								var y = !0,
									v = !1,
									b = void 0;
								try {
									for (var x, S = Entity._entities.keys()[Symbol.iterator](); !(y = (x = S.next()).done); y = !0) {
										c = x.value;
										e.add(c);
									}
								} catch (t) {
									(v = !0), (b = t);
								} finally {
									try {
										y || null == S.return || S.return();
									} finally {
										if (v) throw b;
									}
								}
							}
							return e;
						}
					},
					{
						key: 'getGroups',
						value: function getGroups() {
							var t = new Set(),
								e = !0,
								n = !1,
								r = void 0;
							try {
								for (var i, o = this._entities.values()[Symbol.iterator](); !(e = (i = o.next()).done); e = !0) {
									var a = i.value.groups;
									if (void 0 !== a) for (var s = 0; s < a.length; s++) t.add(a[s]);
								}
							} catch (t) {
								(n = !0), (r = t);
							} finally {
								try {
									e || null == o.return || o.return();
								} finally {
									if (n) throw r;
								}
							}
							return t;
						}
					},
					{
						key: 'createGroup',
						value: function createGroup(t, e, n) {
							var r = this.getEntityNamesInGroup(t),
								i = !0,
								o = !1,
								a = void 0;
							try {
								for (var s, l = r[Symbol.iterator](); !(i = (s = l.next()).done); i = !0) {
									var c = s.value;
									this.create(c, e, n);
								}
							} catch (t) {
								(o = !0), (a = t);
							} finally {
								try {
									i || null == l.return || l.return();
								} finally {
									if (o) throw a;
								}
							}
						}
					},
					{
						key: '_addSpheroid',
						value: function _addSpheroid(t, e) {
							var n = t.addComponent('spheroid');
							if (n instanceof qe) {
								if ((n.setRadii(e.equatorialRadius, e.polarRadius), e.features))
									for (var r = 0, i = e.features.length; r < i; r++) n.setFeature(e.features[r], !0);
								if (e.textures)
									for (var o in (n.setMapping('cube'), e.textures))
										n.setTexture(o, '$STATIC_ASSETS_URL/maps/' + e.textures[o].url, e.textures[o].sizes);
								e.shadowEntities && n.setShadowEntities(e.shadowEntities), this._processCoverages(t, n, e.coverages);
							}
						}
					},
					{
						key: '_processCoverages',
						value: function _processCoverages(t, e, n) {
							if (void 0 !== n) {
								var r = t.get('coverage');
								null === r && (r = t.addController('coverage', void 0, t.getController(0)));
								var i = Number.POSITIVE_INFINITY,
									o = Number.NEGATIVE_INFINITY;
								if (r instanceof Tn)
									for (var a = 0, s = n.length; a < s; a++)
										r.addCoverage(
											new J(n[a][0], n[a][1]),
											function () {
												e.setEnabled(!0);
											},
											function () {
												e.setEnabled(!1);
											}
										),
											(i = Math.min(i, n[a][0])),
											(o = Math.max(o, n[a][1]));
								e instanceof an && e.setCoverage(new J(i, o));
							}
						}
					}
				]),
				Entity
			);
		})();
		Pr._entities = new Map();
		var Er = Pr;
		var kr = n(48);
		function wmts_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function wmts_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function wmts_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function wmts_createClass(t, e, n) {
			return e && wmts_defineProperties(t.prototype, e), n && wmts_defineProperties(t, n), t;
		}
		var Or = (function () {
				function Capabilities(t, e) {
					var n = this;
					wmts_classCallCheck(this, Capabilities),
						(this._endPoint = t),
						(this._capabilitiesXML = null),
						(this._layers = new Map()),
						(this._readyPromise = null),
						(this._readyPromise = e
							.getDownloader()
							.download(this._endPoint + '/1.0.0/WMTSCapabilities.xml', !1)
							.then(function (t) {
								if (
									('string' == typeof t.content &&
										(n._capabilitiesXML = new DOMParser().parseFromString(t.content, 'application/xml')),
									null !== n._capabilitiesXML)
								) {
									var e = n._capabilitiesXML.querySelectorAll('Contents > Layer'),
										r = !0,
										i = !1,
										o = void 0;
									try {
										for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done); r = !0) {
											var l = a.value,
												c = l.querySelector('*|Title').textContent,
												u = l.querySelector('*|Identifier').textContent;
											n._layers.set(c, u);
										}
									} catch (t) {
										(i = !0), (o = t);
									} finally {
										try {
											r || null == s.return || s.return();
										} finally {
											if (i) throw o;
										}
									}
								}
							}));
				}
				return (
					wmts_createClass(Capabilities, [
						{
							key: 'getLayer',
							value: function getLayer(t) {
								var e = null;
								if (null !== this._capabilitiesXML) {
									var n = this._capabilitiesXML.querySelectorAll('Contents > Layer'),
										r = !0,
										i = !1,
										o = void 0;
									try {
										for (var a, s = n[Symbol.iterator](); !(r = (a = s.next()).done); r = !0) {
											var l = a.value;
											t === l.querySelector('*|Identifier').textContent && (e = new Ar(l, this._endPoint + '/1.0.0'));
										}
									} catch (t) {
										(i = !0), (o = t);
									} finally {
										try {
											r || null == s.return || s.return();
										} finally {
											if (i) throw o;
										}
									}
								}
								return e;
							}
						},
						{
							key: 'getTileMatrixSet',
							value: function getTileMatrixSet(t) {
								var e = null;
								if (null !== this._capabilitiesXML) {
									var n = this._capabilitiesXML.querySelectorAll('Contents > TileMatrixSet'),
										r = !0,
										i = !1,
										o = void 0;
									try {
										for (var a, s = n[Symbol.iterator](); !(r = (a = s.next()).done); r = !0) {
											var l = a.value;
											t === l.querySelector('*|Identifier').textContent && (e = new Rr(l));
										}
									} catch (t) {
										(i = !0), (o = t);
									} finally {
										try {
											r || null == s.return || s.return();
										} finally {
											if (i) throw o;
										}
									}
								}
								return e;
							}
						},
						{
							key: 'readyPromise',
							get: function get() {
								return this._readyPromise;
							}
						},
						{
							key: 'endPoint',
							get: function get() {
								return this._endPoint;
							}
						},
						{
							key: 'layers',
							get: function get() {
								return this._layers;
							}
						}
					]),
					Capabilities
				);
			})(),
			Ar = (function () {
				function Layer(t, e) {
					wmts_classCallCheck(this, Layer),
						(this._baseUrl = e),
						(this._title = t.querySelector('*|Title').textContent),
						(this._identifier = t.querySelector('*|Identifier').textContent),
						(this._styles = new Map()),
						(this._defaultStyle = ''),
						(this._boundingBox = new Z()),
						(this._dimensions = new Map()),
						(this._tileMatrixSets = new Set()),
						(this._url = '');
					var n = t.querySelectorAll('Style'),
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (var a, s = n[Symbol.iterator](); !(r = (a = s.next()).done); r = !0) {
							var l = a.value,
								c = l.querySelector('*|Title').textContent,
								u = l.querySelector('*|Identifier').textContent;
							this._styles.set(c, u), 'true' === l.getAttribute('isDefault') && (this._defaultStyle = u);
						}
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					var _ = t.querySelector('*|BoundingBox');
					if ((null === _ && (_ = t.querySelector('*|WGS84BoundingBox')), null === _))
						throw new Error('Layer "' + this._identifier + '" missing a BoundingBox or a WGS84BoundingBox tag.');
					var p = _.querySelector('*|LowerCorner').textContent.split(' '),
						h = _.querySelector('*|UpperCorner').textContent.split(' ');
					this._boundingBox.origin.set(Number.parseFloat(p[0]), Number.parseFloat(p[1])),
						this._boundingBox.size.set(
							Number.parseFloat(h[0]) - this._boundingBox.origin.x,
							Number.parseFloat(h[1]) - this._boundingBox.origin.y
						);
					var d = t.querySelectorAll('Dimension'),
						f = !0,
						m = !1,
						g = void 0;
					try {
						for (var y, v = d[Symbol.iterator](); !(f = (y = v.next()).done); f = !0) {
							var b = y.value,
								x = b.querySelector('*|Identifier').textContent,
								S = b.querySelector('Default').textContent;
							this._dimensions.set(x, S);
						}
					} catch (t) {
						(m = !0), (g = t);
					} finally {
						try {
							f || null == v.return || v.return();
						} finally {
							if (m) throw g;
						}
					}
					var T = t.querySelectorAll('TileMatrixSetLink'),
						w = !0,
						C = !1,
						P = void 0;
					try {
						for (var E, k = T[Symbol.iterator](); !(w = (E = k.next()).done); w = !0) {
							var O = E.value.querySelector('TileMatrixSet').textContent;
							this._tileMatrixSets.add(O);
						}
					} catch (t) {
						(C = !0), (P = t);
					} finally {
						try {
							w || null == k.return || k.return();
						} finally {
							if (C) throw P;
						}
					}
					var A = t.querySelector('ResourceURL');
					(this._url = A.getAttribute('template')),
						/^(?:[a-z]+:)?\/\//i.test(this._url) || (this._url = this._baseUrl + this._url);
				}
				return (
					wmts_createClass(Layer, [
						{
							key: 'title',
							get: function get() {
								return this._title;
							}
						},
						{
							key: 'identifier',
							get: function get() {
								return this._identifier;
							}
						},
						{
							key: 'styles',
							get: function get() {
								return this._styles;
							}
						},
						{
							key: 'defaultStyle',
							get: function get() {
								return this._defaultStyle;
							}
						},
						{
							key: 'boundingBox',
							get: function get() {
								return this._boundingBox;
							}
						},
						{
							key: 'dimensions',
							get: function get() {
								return this._dimensions;
							}
						},
						{
							key: 'tileMatrixSets',
							get: function get() {
								return this._tileMatrixSets;
							}
						},
						{
							key: 'url',
							get: function get() {
								return this._url;
							}
						}
					]),
					Layer
				);
			})(),
			Rr = (function () {
				function TileMatrixSet(t) {
					var e,
						n = this;
					wmts_classCallCheck(this, TileMatrixSet),
						(this._identifier = t.querySelector('*|Identifier').textContent),
						(this._crs = t.querySelector('*|SupportedCRS').textContent),
						(this._boundingBox = new Z()),
						(this._numTiles = []),
						(this._readyPromise = null);
					var r = 0,
						i = !0,
						o = !1,
						a = void 0;
					try {
						for (var s, l = t.querySelectorAll('TileMatrix')[Symbol.iterator](); !(i = (s = l.next()).done); i = !0) {
							var c = s.value,
								u = c.querySelector('ScaleDenominator');
							if (!u) throw new Error('ScaleDenominator tag not found for TileMatrix ' + r + '.');
							var _ = parseFloat(u.innerHTML);
							if (void 0 !== e && Math.abs(2 * _ - e) / _ > 0.01)
								throw new Error(
									'ScaleDenominator for TileMatrix ' + r + ' must be half of the next higher level, but is not.'
								);
							(e = _),
								(this._numTiles[r] = new st(
									parseFloat(c.querySelector('MatrixWidth').innerHTML),
									parseFloat(c.querySelector('MatrixHeight').innerHTML)
								)),
								(r += 1);
						}
					} catch (t) {
						(o = !0), (a = t);
					} finally {
						try {
							i || null == l.return || l.return();
						} finally {
							if (o) throw a;
						}
					}
					this._numLevels = r;
					var p = t.querySelector('TileMatrix'),
						h = Number.parseFloat(p.querySelector('ScaleDenominator').textContent),
						d = new st(
							Number.parseFloat(p.querySelector('TileWidth').textContent),
							Number.parseFloat(p.querySelector('TileHeight').textContent)
						),
						f = 2.8e-7 * h,
						m = new st(f * d.x, f * d.y),
						g = new st(m.x * this._numTiles[0].x, m.y * this._numTiles[0].y),
						y = p.querySelector('TopLeftCorner').textContent.split(' ');
					this._boundingBox.origin.set(Number.parseFloat(y[0]), Number.parseFloat(y[1])),
						(this._readyPromise = TileMatrixSet.setCRS(this._crs).then(function (t) {
							n._crs = t;
							var e = 1e3,
								r = kr.a.defs(n._crs);
							r.to_meter
								? (e = 1e3 / r.to_meter)
								: 'degrees' === r.units
								? (e = 0.00898315284)
								: ('feet' !== r.units && 'us feet' !== r.units) || (e = 3280.83333335),
								(n._boundingBox.size.x = Math.round(g.x * e * 1e6) / 1e6),
								(n._boundingBox.size.y = Math.round(g.y * e * 1e6) / 1e6),
								(n._boundingBox.origin.y = n._boundingBox.origin.y - n._boundingBox.size.y);
						}));
				}
				return (
					wmts_createClass(
						TileMatrixSet,
						[
							{
								key: 'getNumTiles',
								value: function getNumTiles(t) {
									return this._numTiles[t];
								}
							},
							{
								key: 'crsUnitsToXYZ',
								value: function crsUnitsToXYZ(t, e, n) {
									var r = Et.pool.get(),
										i = T.clamp(e.x, this._boundingBox.origin.x, this._boundingBox.origin.x + this._boundingBox.size.x),
										o = T.clamp(e.y, this._boundingBox.origin.y, this._boundingBox.origin.y + this._boundingBox.size.y),
										a = Object(kr.a)(this._crs, 'WGS84', [i, o]);
									r.set(T.degToRad(a[1]), T.degToRad(a[0]), 0, !0), n.xyzFromLLA(t, r), Et.pool.release(r);
								}
							},
							{
								key: 'readyPromise',
								get: function get() {
									return this._readyPromise;
								}
							},
							{
								key: 'identifier',
								get: function get() {
									return this._identifier;
								}
							},
							{
								key: 'boundingBox',
								get: function get() {
									return this._boundingBox;
								}
							},
							{
								key: 'numLevels',
								get: function get() {
									return this._numLevels;
								}
							}
						],
						[
							{
								key: 'setCRS',
								value: (function () {
									var t = (function wmts_asyncToGenerator(t) {
										return function () {
											var e = this,
												n = arguments;
											return new Promise(function (r, i) {
												var o = t.apply(e, n);
												function _next(t) {
													wmts_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
												}
												function _throw(t) {
													wmts_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
												}
												_next(void 0);
											});
										};
									})(
										regeneratorRuntime.mark(function _callee(t) {
											var e, n, r;
											return regeneratorRuntime.wrap(function _callee$(i) {
												for (;;)
													switch ((i.prev = i.next)) {
														case 0:
															if (
																(t.startsWith('urn:ogc:def:crs:') && (t = t.substring('urn:ogc:def:crs:'.length)),
																void 0 !== (e = Ir.get(t)) || !t.startsWith('EPSG::'))
															) {
																i.next = 10;
																break;
															}
															return (
																(n = 'https://epsg.io/' + t.substring('EPSG::'.length) + '.proj4'),
																(i.next = 6),
																fetch(n)
															);
														case 6:
															return (r = i.sent), (i.next = 9), r.text();
														case 9:
															e = i.sent;
														case 10:
															return kr.a.defs(t, e), i.abrupt('return', t);
														case 12:
														case 'end':
															return i.stop();
													}
											}, _callee);
										})
									);
									return function setCRS(e) {
										return t.apply(this, arguments);
									};
								})()
							}
						]
					),
					TileMatrixSet
				);
			})(),
			Ir = new Map();
		function wmts_component_typeof(t) {
			return (wmts_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function wmts_component_slicedToArray(t, e) {
			return (
				(function wmts_component_arrayWithHoles(t) {
					if (Array.isArray(t)) return t;
				})(t) ||
				(function wmts_component_iterableToArrayLimit(t, e) {
					var n = [],
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (
							var a, s = t[Symbol.iterator]();
							!(r = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e);
							r = !0
						);
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					return n;
				})(t, e) ||
				(function wmts_component_nonIterableRest() {
					throw new TypeError('Invalid attempt to destructure non-iterable instance');
				})()
			);
		}
		function wmts_component_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function wmts_component_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						wmts_component_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						wmts_component_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function wmts_component_classCallCheck(t, e) {
			if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
		}
		function wmts_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function wmts_component_createClass(t, e, n) {
			return e && wmts_component_defineProperties(t.prototype, e), n && wmts_component_defineProperties(t, n), t;
		}
		function wmts_component_possibleConstructorReturn(t, e) {
			return !e || ('object' !== wmts_component_typeof(e) && 'function' != typeof e)
				? (function wmts_component_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function wmts_component_getPrototypeOf(t) {
			return (wmts_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function wmts_component_inherits(t, e) {
			if ('function' != typeof e && null !== e)
				throw new TypeError('Super expression must either be null or a function');
			(t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } })),
				e && wmts_component_setPrototypeOf(t, e);
		}
		function wmts_component_setPrototypeOf(t, e) {
			return (wmts_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		Ir.set(
			'EPSG::104903',
			'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]'
		),
			Ir.set(
				'EPSG::104905',
				'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]'
			),
			Ir.set('EPSG::4326', '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'),
			Ir.set(
				'EPSG::3857',
				'+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs'
			),
			Ir.set('OGC:1.3:84', kr.a.defs('WGS84')),
			Ir.set('OGC:1.3:CRS84', kr.a.defs('WGS84')),
			Ir.set('OGC:2:84', kr.a.defs('WGS84'));
		var Mr = (function (t) {
				function WMTSComponent(t, e, n) {
					var r;
					return (
						wmts_component_classCallCheck(this, WMTSComponent),
						((r = wmts_component_possibleConstructorReturn(
							this,
							wmts_component_getPrototypeOf(WMTSComponent).call(this, t, e, n)
						))._capabilities = null),
						(r._endPoint = ''),
						(r._layerIdentifier = ''),
						(r._tileMatrixSetIdentifier = ''),
						(r._style = ''),
						(r._dimensionValues = new Map()),
						(r._minLevel = Number.NEGATIVE_INFINITY),
						(r._maxLevel = Number.POSITIVE_INFINITY),
						(r._splitJoinThresholdFactor = 512),
						(r._layer = null),
						(r._tileMatrixSet = null),
						(r._tileUrl = ''),
						(r._spheroid = new Y(1, 1)),
						(r._shadowEntities = []),
						(r._engine = r.getEntity().getScene().getEngine()),
						(r._cameraPositions = []),
						(r._rootTile = null),
						(r._tilePixeLSize = void 0),
						(r._tilesLoadedPromise = null),
						(r._transitionsCompleteCallback = null),
						(r._loadsThisFrame = 0),
						r.__setRadius(Math.max(r._spheroid.equatorialRadius, r._spheroid.polarRadius)),
						r
					);
				}
				return (
					wmts_component_inherits(WMTSComponent, ye),
					wmts_component_createClass(WMTSComponent, [
						{
							key: 'setEndPoint',
							value: (function () {
								var t = wmts_component_asyncToGenerator(
									regeneratorRuntime.mark(function _callee(t) {
										return regeneratorRuntime.wrap(
											function _callee$(e) {
												for (;;)
													switch ((e.prev = e.next)) {
														case 0:
															(this._endPoint = t), this.resetResources();
														case 2:
														case 'end':
															return e.stop();
													}
											},
											_callee,
											this
										);
									})
								);
								return function setEndPoint(e) {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'setLayer',
							value: function setLayer(t) {
								(this._layerIdentifier = t), this.resetResources();
							}
						},
						{
							key: 'setTileMatrixSet',
							value: function setTileMatrixSet(t) {
								(this._tileMatrixSetIdentifier = t), this.resetResources();
							}
						},
						{
							key: 'setStyle',
							value: function setStyle(t) {
								(this._style = t), this.resetResources();
							}
						},
						{
							key: 'setDimensionValue',
							value: function setDimensionValue(t, e) {
								this._dimensionValues.set(t, e), this.resetResources();
							}
						},
						{
							key: 'getLayers',
							value: function getLayers() {
								return null !== this._capabilities ? this._capabilities.layers : new Map();
							}
						},
						{
							key: 'getMinLevel',
							value: function getMinLevel() {
								return this._minLevel;
							}
						},
						{
							key: 'setMinLevel',
							value: function setMinLevel(t) {
								this._minLevel = t;
							}
						},
						{
							key: 'getMaxLevel',
							value: function getMaxLevel() {
								return this._maxLevel;
							}
						},
						{
							key: 'setMaxLevel',
							value: function setMaxLevel(t) {
								this._maxLevel = t;
							}
						},
						{
							key: 'getEquatorialRadius',
							value: function getEquatorialRadius() {
								return this._spheroid.equatorialRadius;
							}
						},
						{
							key: 'getPolarRadius',
							value: function getPolarRadius() {
								return this._spheroid.polarRadius;
							}
						},
						{
							key: 'setRadii',
							value: function setRadii(t, e) {
								this._spheroid.thaw(),
									(this._spheroid.equatorialRadius = t),
									(this._spheroid.polarRadius = e),
									this._spheroid.freeze(),
									this.__setRadius(Math.max(this._spheroid.equatorialRadius, this._spheroid.polarRadius)),
									this.resetResources();
							}
						},
						{
							key: 'getSpheroid',
							value: function getSpheroid() {
								return this._spheroid;
							}
						},
						{
							key: 'getTilesLoadedPromise',
							value: function getTilesLoadedPromise() {
								return this._tilesLoadedPromise || Promise.resolve();
							}
						},
						{
							key: '__getSpheroid',
							value: function __getSpheroid() {
								return this._spheroid;
							}
						},
						{
							key: '__getLayer',
							value: function __getLayer() {
								return this._layer;
							}
						},
						{
							key: '__getTileMatrixSet',
							value: function __getTileMatrixSet() {
								return this._tileMatrixSet;
							}
						},
						{
							key: '__getTileUrl',
							value: function __getTileUrl() {
								return this._tileUrl;
							}
						},
						{
							key: '__getLayerBounds',
							value: function __getLayerBounds() {
								return null !== this._layer ? this._layer.boundingBox : null;
							}
						},
						{
							key: '__getMaxLevel',
							value: function __getMaxLevel() {
								return this._maxLevel;
							}
						},
						{
							key: '__getMinLevel',
							value: function __getMinLevel() {
								return this._minLevel;
							}
						},
						{
							key: '__getSplitJoinFactor',
							value: function __getSplitJoinFactor() {
								return this._splitJoinThresholdFactor;
							}
						},
						{
							key: '__getTilePixelSize',
							value: function __getTilePixelSize() {
								return this._tilePixeLSize;
							}
						},
						{
							key: '__setTilePixelSize',
							value: function __setTilePixelSize(t) {
								this._tilePixeLSize = t;
							}
						},
						{
							key: '__getLoadsThisFrame',
							value: function __getLoadsThisFrame() {
								return this._loadsThisFrame;
							}
						},
						{
							key: '__incLoadsThisFrame',
							value: function __incLoadsThisFrame() {
								this._loadsThisFrame += 1;
							}
						},
						{
							key: '__getCameraPositions',
							value: function __getCameraPositions() {
								return this._cameraPositions;
							}
						},
						{
							key: '__update',
							value: function __update() {
								var t = this;
								if (null !== this._rootTile) {
									for (; this._cameraPositions.length > this._engine.getNumViewports(); ) this._cameraPositions.pop();
									for (; this._cameraPositions.length < this._engine.getNumViewports(); )
										this._cameraPositions.push(new yt());
									for (var e = yt.pool.get(), n = 0, r = this._engine.getNumViewports(); n < r; n++)
										e.neg(this.getEntity().getCameraSpacePosition(this._engine.getViewport(n).getCamera())),
											this._cameraPositions[n].rotateInverse(this.getEntity().getOrientation(), e);
									yt.pool.release(e), (this._loadsThisFrame = 0);
									var i = this._rootTile.update();
									if (
										(null === this._tilesLoadedPromise &&
											i &&
											(this._tilesLoadedPromise = new Promise(function (e) {
												t._transitionsCompleteCallback = e;
											})),
										null !== this._tilesLoadedPromise && !i)
									) {
										var o = this._transitionsCompleteCallback;
										(this._tilesLoadedPromise = null), (this._transitionsCompleteCallback = null), o();
									}
								}
							}
						},
						{
							key: '__prepareForRender',
							value: function __prepareForRender(t) {
								Ut.setOrientationToEntity(this.getThreeJsObjects(), this.getEntity()),
									Ut.setPositionToEntity(this.getThreeJsObjects(), this.getEntity(), t);
								var e = this.getEntity().getComponentByType('atmosphere');
								e instanceof Se
									? jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, e, !0)
									: jt.setUniforms(this.getThreeJsMaterials(), t, this.getEntity(), this._shadowEntities, null, !0);
							}
						},
						{
							key: '__loadResources',
							value: (function () {
								var t = wmts_component_asyncToGenerator(
									regeneratorRuntime.mark(function _callee2() {
										var t,
											e,
											n,
											r,
											i,
											o,
											a,
											s,
											l,
											c,
											u,
											_,
											p,
											h,
											d,
											f,
											m,
											g,
											y,
											v,
											b,
											x,
											S,
											T,
											w,
											C,
											P = this;
										return regeneratorRuntime.wrap(
											function _callee2$(E) {
												for (;;)
													switch ((E.prev = E.next)) {
														case 0:
															if ('' === this._endPoint) {
																E.next = 90;
																break;
															}
															return (
																(this._capabilities = new Or(this._endPoint, this._engine)),
																(E.next = 4),
																this._capabilities.readyPromise
															);
														case 4:
															if ('' !== (t = this._layerIdentifier)) {
																E.next = 27;
																break;
															}
															if (1 !== (e = this._capabilities.layers).size) {
																E.next = 27;
																break;
															}
															for (
																n = !0, r = !1, i = void 0, E.prev = 11, o = e[Symbol.iterator]();
																!(n = (a = o.next()).done);
																n = !0
															)
																(s = wmts_component_slicedToArray(a.value, 2)), (l = s[1]), (t = l);
															E.next = 19;
															break;
														case 15:
															(E.prev = 15), (E.t0 = E.catch(11)), (r = !0), (i = E.t0);
														case 19:
															(E.prev = 19), (E.prev = 20), n || null == o.return || o.return();
														case 22:
															if (((E.prev = 22), !r)) {
																E.next = 25;
																break;
															}
															throw i;
														case 25:
															return E.finish(22);
														case 26:
															return E.finish(19);
														case 27:
															if ('' !== t) {
																E.next = 29;
																break;
															}
															return E.abrupt('return');
														case 29:
															if (((this._layer = this._capabilities.getLayer(t)), null !== this._layer)) {
																E.next = 32;
																break;
															}
															throw new Error('Invalid layer: "' + t + '".');
														case 32:
															if ('' !== (c = this._tileMatrixSetIdentifier)) {
																E.next = 55;
																break;
															}
															if (1 !== (u = this._layer.tileMatrixSets).size) {
																E.next = 55;
																break;
															}
															for (
																_ = !0, p = !1, h = void 0, E.prev = 39, d = u[Symbol.iterator]();
																!(_ = (f = d.next()).done);
																_ = !0
															)
																(l = f.value), (c = l);
															E.next = 47;
															break;
														case 43:
															(E.prev = 43), (E.t1 = E.catch(39)), (p = !0), (h = E.t1);
														case 47:
															(E.prev = 47), (E.prev = 48), _ || null == d.return || d.return();
														case 50:
															if (((E.prev = 50), !p)) {
																E.next = 53;
																break;
															}
															throw h;
														case 53:
															return E.finish(50);
														case 54:
															return E.finish(47);
														case 55:
															if (
																((this._tileMatrixSet = this._capabilities.getTileMatrixSet(c)),
																null !== this._tileMatrixSet)
															) {
																E.next = 58;
																break;
															}
															throw new Error('Invalid tile matrix set: "' + c + '".');
														case 58:
															return (E.next = 60), this._tileMatrixSet.readyPromise;
														case 60:
															for (
																(m = new Z()).copy(this._tileMatrixSet.boundingBox),
																	1 === this._tileMatrixSet.getNumTiles(0).x && (m.size.x *= 2),
																	1 === this._tileMatrixSet.getNumTiles(0).y &&
																		((m.origin.y -= m.size.y), (m.size.y *= 2)),
																	'' === (g = this._style) && (g = this._layer.defaultStyle),
																	y = !0,
																	v = !1,
																	b = void 0,
																	E.prev = 69,
																	x = this._layer.dimensions[Symbol.iterator]();
																!(y = (S = x.next()).done);
																y = !0
															)
																(T = wmts_component_slicedToArray(S.value, 2)),
																	(w = T[0]),
																	(C = T[1]),
																	this._dimensionValues.has(w) || this._dimensionValues.set(w, C);
															E.next = 77;
															break;
														case 73:
															(E.prev = 73), (E.t2 = E.catch(69)), (v = !0), (b = E.t2);
														case 77:
															(E.prev = 77), (E.prev = 78), y || null == x.return || x.return();
														case 80:
															if (((E.prev = 80), !v)) {
																E.next = 83;
																break;
															}
															throw b;
														case 83:
															return E.finish(80);
														case 84:
															return E.finish(77);
														case 85:
															(this._tileUrl = this._layer.url),
																(this._tileUrl = this._tileUrl.replace(
																	'{TileMatrixSet}',
																	this._tileMatrixSet.identifier
																)),
																(this._tileUrl = this._tileUrl.replace('{Style}', g)),
																this._dimensionValues.forEach(function (t, e) {
																	P._tileUrl = P._tileUrl.replace('{' + e + '}', t);
																}),
																(this._rootTile = new Lr(this, null, -1, 0, 0, m));
														case 90:
														case 'end':
															return E.stop();
													}
											},
											_callee2,
											this,
											[
												[11, 15, 19, 27],
												[20, , 22, 26],
												[39, 43, 47, 55],
												[48, , 50, 54],
												[69, 73, 77, 85],
												[78, , 80, 84]
											]
										);
									})
								);
								return function __loadResources() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '__unloadResources',
							value: function __unloadResources() {
								(this._capabilities = null),
									(this._layer = null),
									(this._tileMatrixSet = null),
									(this._tileUrl = ''),
									this._rootTile.destroy(),
									(this._rootTile = null);
							}
						}
					]),
					WMTSComponent
				);
			})(),
			Lr = (function (t) {
				function WMTSTile(t, e, n, r, i, o) {
					var a;
					wmts_component_classCallCheck(this, WMTSTile),
						((a = wmts_component_possibleConstructorReturn(
							this,
							wmts_component_getPrototypeOf(WMTSTile).call(this, e)
						))._component = t),
						(a._level = n),
						(a._row = r),
						(a._col = i),
						(a._tileBounds = new Z()),
						a._tileBounds.copy(o),
						(a._center = new yt()),
						(a._radius = 0),
						(a._threeJsMaterial = null),
						(a._threeJsObject = null);
					var s = a._component.__getSpheroid(),
						l = a._component.__getTileMatrixSet(),
						c = new yt();
					l.crsUnitsToXYZ(c, a._tileBounds.origin, s);
					var u = new st();
					u.add(a._tileBounds.origin, a._tileBounds.size);
					var _ = new yt();
					l.crsUnitsToXYZ(_, u, s);
					var p = new st();
					p.addMult(a._tileBounds.origin, a._tileBounds.size, 0.5), l.crsUnitsToXYZ(a._center, p, s);
					var h = new yt(),
						d = new yt();
					(h.x = Math.min(c.x, _.x, a._center.x)),
						(h.y = Math.min(c.y, _.y, a._center.y)),
						(h.z = Math.min(c.z, _.z, a._center.z)),
						(d.x = Math.max(c.x, _.x, a._center.x)),
						(d.y = Math.max(c.y, _.y, a._center.y)),
						(d.z = Math.max(c.z, _.z, a._center.z)),
						a._center.add(h, d),
						a._center.mult(a._center, 0.5);
					var f = new yt();
					return f.sub(a._center, h), (a._radius = f.magnitude()), a;
				}
				return (
					wmts_component_inherits(WMTSTile, E),
					wmts_component_createClass(WMTSTile, [
						{
							key: 'createNewTile',
							value: function createNewTile(t, e, n) {
								var r = t._level + 1,
									i = 2 * t._row + e,
									o = 2 * t._col + n,
									a = t._component.__getTileMatrixSet().getNumTiles(t._level + 1);
								if (i >= a.y || o >= a.x) return null;
								var s = new Z();
								return (
									s.origin.set(
										t._tileBounds.origin.x + 0.5 * n * t._tileBounds.size.x,
										t._tileBounds.origin.y + 0.5 * (1 - e) * t._tileBounds.size.y
									),
									s.size.set(0.5 * t._tileBounds.size.x, 0.5 * t._tileBounds.size.y),
									new WMTSTile(t._component, t, r, i, o, s)
								);
							}
						},
						{
							key: 'checkSplit',
							value: function checkSplit() {
								if (this._level >= this._component.__getTileMatrixSet().numLevels - 1) return !1;
								if (!this._tileBounds.intersects(this._component.__getLayerBounds())) return !1;
								if (this._level >= this._component.__getMaxLevel()) return !1;
								if (this._component.__getLoadsThisFrame() >= 1) return !1;
								if (this._level < this._component.__getMinLevel()) return !0;
								if (-1 === this._level) return !0;
								var t = this._component.__getTilePixelSize();
								return (
									void 0 === t &&
										null !== this._threeJsMaterial &&
										((t = this._threeJsMaterial.uniforms.colorTexture.value.image.width),
										this._component.__setTilePixelSize(t)),
									this._getNearestDistance() < (this._component.__getSplitJoinFactor() * this._radius) / t
								);
							}
						},
						{
							key: 'checkJoin',
							value: function checkJoin() {
								if (-1 === this._level) return !1;
								if (this._component.__getLoadsThisFrame() >= 1) return !1;
								if (this._level > this._component.__getMaxLevel()) return !0;
								if (this._level <= this._component.__getMinLevel()) return !1;
								var t = this._component.__getTilePixelSize();
								return (
									void 0 === t &&
										null !== this._threeJsMaterial &&
										((t = this._threeJsMaterial.uniforms.colorTexture.value.image.width),
										this._component.__setTilePixelSize(t)),
									this._getNearestDistance() > (this._component.__getSplitJoinFactor() * this._radius * 4) / t
								);
							}
						},
						{
							key: 'load',
							value: (function () {
								var t = wmts_component_asyncToGenerator(
									regeneratorRuntime.mark(function _callee3() {
										var t;
										return regeneratorRuntime.wrap(
											function _callee3$(e) {
												for (;;)
													switch ((e.prev = e.next)) {
														case 0:
															if (-1 !== this._level) {
																e.next = 2;
																break;
															}
															return e.abrupt('return', Promise.resolve());
														case 2:
															if ((this._component.__incLoadsThisFrame(), null === this._threeJsMaterial)) {
																e.next = 5;
																break;
															}
															throw new Error('Tile already has material.');
														case 5:
															if (!this._tileBounds.intersects(this._component.__getLayerBounds())) {
																e.next = 21;
																break;
															}
															return (
																(this._threeJsMaterial = jt.get()),
																this._component.getThreeJsMaterials().push(this._threeJsMaterial),
																(t = (t = (t = (t = this._component.__getTileUrl()).replace(
																	'{TileMatrix}',
																	'' + this._level
																)).replace('{TileRow}', '' + this._row)).replace('{TileCol}', '' + this._col)),
																(e.prev = 12),
																(e.next = 15),
																Ut.loadTextureIntoUniform(
																	this._component,
																	this._threeJsMaterial,
																	'colorTexture',
																	t,
																	!1,
																	!1
																)
															);
														case 15:
															e.next = 21;
															break;
														case 17:
															return (
																(e.prev = 17),
																(e.t0 = e.catch(12)),
																(e.next = 21),
																Ut.loadTextureIntoUniform(
																	this._component,
																	this._threeJsMaterial,
																	'colorTexture',
																	'pink',
																	!1,
																	!1
																)
															);
														case 21:
														case 'end':
															return e.stop();
													}
											},
											_callee3,
											this,
											[[12, 17]]
										);
									})
								);
								return function load() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'unload',
							value: (function () {
								var t = wmts_component_asyncToGenerator(
									regeneratorRuntime.mark(function _callee4() {
										var t, e, n;
										return regeneratorRuntime.wrap(
											function _callee4$(r) {
												for (;;)
													switch ((r.prev = r.next)) {
														case 0:
															if (-1 !== this._level) {
																r.next = 2;
																break;
															}
															return r.abrupt('return');
														case 2:
															if (null === this._threeJsMaterial) {
																r.next = 15;
																break;
															}
															(t = this._component.getThreeJsMaterials()), (e = 0), (n = t.length);
														case 5:
															if (!(e < n)) {
																r.next = 12;
																break;
															}
															if (t[e] !== this._threeJsMaterial) {
																r.next = 9;
																break;
															}
															return t.splice(e, 1), r.abrupt('break', 12);
														case 9:
															e++, (r.next = 5);
															break;
														case 12:
															this._threeJsMaterial.uniforms.colorTexture.value &&
																this._threeJsMaterial.uniforms.colorTexture.value.dispose(),
																this._threeJsMaterial.dispose(),
																(this._threeJsMaterial = null);
														case 15:
															this._threeJsMaterial = null;
														case 16:
														case 'end':
															return r.stop();
													}
											},
											_callee4,
											this
										);
									})
								);
								return function unload() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'activate',
							value: (function () {
								var t = wmts_component_asyncToGenerator(
									regeneratorRuntime.mark(function _callee5() {
										var t, e, n, r, i, o, a, s, l, c, u, _, p, h;
										return regeneratorRuntime.wrap(
											function _callee5$(d) {
												for (;;)
													switch ((d.prev = d.next)) {
														case 0:
															if (-1 !== this._level) {
																d.next = 2;
																break;
															}
															return d.abrupt('return');
														case 2:
															for (
																this._threeJsObject = Ut.createMeshObject(this._component, this._threeJsMaterial, [
																	{ name: 'position', dimensions: 3 },
																	{ name: 'normal', dimensions: 3 },
																	{ name: 'uv', dimensions: 2 }
																]),
																	this._component.getThreeJsObjects().push(this._threeJsObject),
																	Ut.useInDynEnvMap(this._threeJsObject, !0),
																	21,
																	21,
																	441,
																	t = new Float32Array(1323),
																	e = new Float32Array(1323),
																	n = new Float32Array(882),
																	r = new Uint16Array(2520),
																	i = this._component.__getLayer().boundingBox,
																	o = new st(),
																	a = new st(),
																	s = new yt(),
																	l = 0;
																l < 21;
																l++
															)
																for (
																	c = 1 - l / 20,
																		o.y = T.lerp(
																			this._tileBounds.origin.y,
																			this._tileBounds.origin.y + this._tileBounds.size.y,
																			c
																		),
																		a.y = T.clamp(o.y, i.origin.y, i.origin.y + i.size.y),
																		c += (a.y - o.y) / this._tileBounds.size.y,
																		u = 0;
																	u < 21;
																	u++
																)
																	(_ = u / 20),
																		(o.x = T.lerp(
																			this._tileBounds.origin.x,
																			this._tileBounds.origin.x + this._tileBounds.size.x,
																			_
																		)),
																		(a.x = T.clamp(o.x, i.origin.x, i.origin.x + i.size.x)),
																		(_ += (a.x - o.x) / this._tileBounds.size.x),
																		this._component
																			.__getTileMatrixSet()
																			.crsUnitsToXYZ(s, a, this._component.__getSpheroid()),
																		(t[3 * (p = 21 * l + u) + 0] = s.x),
																		(t[3 * p + 1] = s.y),
																		(t[3 * p + 2] = s.z),
																		s.normalize(s),
																		(e[3 * p + 0] = s.x),
																		(e[3 * p + 1] = s.y),
																		(e[3 * p + 2] = s.z),
																		(n[2 * p + 0] = _),
																		(n[2 * p + 1] = 1 - c),
																		(h = 21 * l + u),
																		u < 20 &&
																			l < 20 &&
																			((r[6 * h + 0] = 21 * (l + 0) + (u + 0)),
																			(r[6 * h + 1] = 21 * (l + 1) + (u + 0)),
																			(r[6 * h + 2] = 21 * (l + 1) + (u + 1)),
																			(r[6 * h + 3] = 21 * (l + 0) + (u + 0)),
																			(r[6 * h + 4] = 21 * (l + 1) + (u + 1)),
																			(r[6 * h + 5] = 21 * (l + 0) + (u + 1)));
															Ut.setVertices(this._threeJsObject.geometry, 'position', t),
																Ut.setVertices(this._threeJsObject.geometry, 'normal', e),
																Ut.setVertices(this._threeJsObject.geometry, 'uv', n),
																Ut.setIndices(this._threeJsObject.geometry, r);
														case 21:
														case 'end':
															return d.stop();
													}
											},
											_callee5,
											this
										);
									})
								);
								return function activate() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'deactivate',
							value: (function () {
								var t = wmts_component_asyncToGenerator(
									regeneratorRuntime.mark(function _callee6() {
										var t, e, n;
										return regeneratorRuntime.wrap(
											function _callee6$(r) {
												for (;;)
													switch ((r.prev = r.next)) {
														case 0:
															if (-1 !== this._level) {
																r.next = 2;
																break;
															}
															return r.abrupt('return');
														case 2:
															(t = this._component.getThreeJsObjects()), (e = 0), (n = t.length);
														case 4:
															if (!(e < n)) {
																r.next = 11;
																break;
															}
															if (t[e] !== this._threeJsObject) {
																r.next = 8;
																break;
															}
															return t.splice(e, 1), r.abrupt('break', 11);
														case 8:
															e++, (r.next = 4);
															break;
														case 11:
															Ut.destroyObject(this._threeJsObject), (this._threeJsObject = null);
														case 13:
														case 'end':
															return r.stop();
													}
											},
											_callee6,
											this
										);
									})
								);
								return function deactivate() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'update',
							value: function update() {
								for (var t = this.check(), e = 0, n = this.children.length; e < n; e++)
									t = this.children[e].update() || t;
								return t;
							}
						},
						{
							key: '_getNearestDistance',
							value: function _getNearestDistance() {
								for (
									var t = Number.POSITIVE_INFINITY,
										e = yt.pool.get(),
										n = 0,
										r = this._component.__getCameraPositions().length;
									n < r;
									n++
								) {
									var i = this._component.__getCameraPositions()[n];
									e.sub(this._center, i);
									var o = Math.max(0, e.magnitude() - this._radius);
									t > o && (t = o);
								}
								return yt.pool.release(e), t;
							}
						},
						{
							key: 'toString',
							value: function toString() {
								return this._level + '-' + this._row + '-' + this._col;
							}
						}
					]),
					WMTSTile
				);
			})(),
			jr = Mr;
		new tt(0.9791532214288992, 0.2031230389823101, 0, 0);
		Er.register({
			observable_universe: {
				groups: ['stars'],
				radius: 5e23,
				label: 'Observable Universe',
				fixed: { position: yt.Zero, orientation: tt.Identity },
				postCreateFunction: function postCreateFunction(t) {
					t.setCanOcclude(!1);
				}
			},
			milky_way: {
				groups: ['stars'],
				radius: 1e18,
				label: 'Milky Way',
				fixed: { position: yt.Zero, orientation: tt.Identity, parent: 'observable_universe' },
				postCreateFunction: function postCreateFunction(t) {
					t.setCanOcclude(!1);
					var e = t.get('fixed');
					if (!(e instanceof Ln)) throw new Error();
					var n = new yt(),
						r = (192.85948120833 * Math.PI) / 180,
						i = (27.12825119444 * Math.PI) / 180;
					(n.x = Math.cos(r) * Math.cos(i)), (n.y = Math.sin(r) * Math.cos(i)), (n.z = Math.sin(i));
					var o = new yt(),
						a = (266.40499625 * Math.PI) / 180,
						s = (-28.93617241667 * Math.PI) / 180;
					(o.x = Math.cos(a) * Math.cos(s)), (o.y = Math.sin(a) * Math.cos(s)), (o.z = Math.sin(s));
					var l = new tt();
					l.setFromAxes(o, void 0, n), e.setOrientation(l);
				}
			},
			sun: {
				groups: ['stars'],
				radius: 695500,
				label: 'Sun',
				spheroid: {
					equatorialRadius: 695500,
					polarRadius: 695500,
					features: ['colorMapEmmissive'],
					textures: { color: { url: 'sun/color_$SIZE_$FACE.png', sizes: [4, 512] } }
				},
				fixed: { position: yt.Zero, orientation: tt.Identity, parent: 'milky_way' },
				postCreateFunction: function postCreateFunction(t, e) {
					var n = t.addComponent('lightSource');
					n instanceof Fe && n.setAbsoluteMagnitude(4.83);
					var r = t.addComponent('atmosphere');
					r instanceof Se &&
						(r.setEmissivity(1), r.setScaleHeight(2e5), r.setDensity(8e-7), r.setColor(new z(1, 1, 64 / 255)));
					var i = t.addComponent('sprite');
					i instanceof We &&
						(i.setBillboard(!0),
						i.setTextureUrl('$STATIC_ASSETS_URL/sprites/sun_glow.png'),
						i.setSize(new st(100, 100)),
						i.setSizeUnits('pixels'),
						i.setTransparent(!0),
						i.setColorMultiplier(new z(1, 1, 0.5)),
						i.setRenderOrder(-2));
					var o = t.getScene().get('milky_way', 'fixed'),
						a = t.get('fixed');
					if (o instanceof Ln && a instanceof Ln) {
						var s = new yt(-246237071e9, 0, 0);
						s.rotate(o.getOrientation(), s), a.setPosition(s);
					}
					if (void 0 !== e && !0 === e.skybox) {
						var l = t.addComponent('skybox');
						l instanceof $e &&
							l.setTextureUrl('$STATIC_ASSETS_URL/textures/starmap_' + (e.skyboxResolution || 2048) + '.jpg');
					}
					if (void 0 === e || (!0 === e.skybox && !0 === e.starfield) || !1 !== e.starfield) {
						var c = t.addComponent('starfield');
						c instanceof nn && c.setUrl('$STATIC_ASSETS_URL/stars/galaxies.0.bin');
						for (var u = 0; u < 6; u++) {
							var _ = t.addComponent('starfield');
							_ instanceof nn && _.setUrl('$STATIC_ASSETS_URL/stars/stars.' + u + '.bin');
						}
					}
				}
			},
			mercury: {
				groups: ['planets'],
				radius: 2439.7,
				label: 'Mercury',
				trail: { length: 7600654, color: [0.6, 0.6, 0.6, 0.7] },
				spheroid: {
					equatorialRadius: 2439.7,
					polarRadius: 2439.7,
					textures: { color: { url: 'mercury/color_$SIZE_$FACE.png', sizes: [4, 512, 4096] } }
				},
				dynamo: [{ url: 'mercury/sun/orb', parent: 'sun' }, { url: 'mercury/ori' }]
			},
			venus: {
				groups: ['planets'],
				radius: 6051.8,
				label: 'Venus',
				trail: { length: 19408261, color: [0.9, 0.8, 0.45, 0.7] },
				spheroid: {
					equatorialRadius: 6051.8,
					polarRadius: 6051.8,
					textures: { color: { url: 'venus/color_$SIZE_$FACE.png', sizes: [4, 512] } }
				},
				dynamo: [{ url: 'venus/sun/orb', parent: 'sun' }, { url: 'venus/ori' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addComponent('atmosphere');
					e instanceof Se &&
						(e.setScaleHeight(15),
						e.setDensity(0.001),
						e.setColor(new z(213 / 255, 160 / 255, 94 / 255)),
						e.setSunBrightness(0.25));
				}
			},
			earth: {
				groups: ['planets'],
				radius: 6378.1,
				label: 'Earth',
				trail: { length: 31558149, color: [0, 0.6, 0.8, 0.7] },
				spheroid: {
					equatorialRadius: 6378.137,
					polarRadius: 6356.752,
					features: ['normalMap', 'specularMap', 'nightMap', 'decalMap', 'nightMapEmmissive', 'shadowEntities'],
					textures: {
						color: { url: 'earth/color_$SIZE_$FACE.png', sizes: [16, 512, 4096] },
						normal: { url: 'earth/normal_$SIZE_$FACE.png', sizes: [16, 512, 4096] },
						specular: { url: 'earth/specular_$SIZE_$FACE.png', sizes: [16, 512, 4096] },
						night: { url: 'earth/night_$SIZE_$FACE.png', sizes: [16, 512, 4096] },
						decal: { url: 'earth/cloud_$SIZE_$FACE.png', sizes: [16, 512, 4096] }
					},
					shadowEntities: ['moon']
				},
				dynamo: [{ url: 'earth/sun/orb', parent: 'sun' }, { url: 'earth/ori' }],
				postCreateFunction: function postCreateFunction(t, e) {
					if (e && !1 === e.clouds) {
						var n = t.get('spheroid');
						n instanceof qe && n.setTexture('decal', '');
					}
					var r = t.addComponent('atmosphere');
					r instanceof Se &&
						(r.setScaleHeight(8),
						r.setDensity(0.0015),
						r.setColor(new z(214.5 / 255, 267 / 255, 1.5)),
						r.setSunBrightness(2),
						r.setSunsetColor(new z(1, 0.65, 0)),
						r.setSunsetIntensity(1.2));
				}
			},
			mars: {
				groups: ['planets'],
				radius: 3396.2,
				label: 'Mars',
				trail: { length: 59360879, color: [0.89, 0.51, 0.35, 0.7] },
				spheroid: {
					equatorialRadius: 3396.19,
					polarRadius: 3376.2,
					features: ['shadowEntities'],
					textures: { color: { url: 'mars/color_$SIZE_$FACE.png', sizes: [4, 512, 4096] } },
					shadowEntities: ['phobos', 'deimos']
				},
				dynamo: [{ url: 'mars/sun/orb', parent: 'sun' }, { url: 'mars/ori' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addComponent('atmosphere');
					e instanceof Se &&
						(e.setScaleHeight(10.8),
						e.setDensity(0.001),
						e.setColor(new z(225 / 255, 178 / 255, 112 / 255)),
						e.setSunBrightness(0.8),
						e.setSunsetColor(new z(10 / 255, 75 / 255, 140 / 255)),
						e.setSunsetIntensity(1));
				}
			},
			jupiter: {
				groups: ['planets'],
				radius: 71492,
				label: 'Jupiter',
				trail: { length: 374279653, color: [0.95, 0.71, 0.64, 0.7] },
				spheroid: {
					equatorialRadius: 71492,
					polarRadius: 66854,
					features: ['shadowEntities'],
					textures: { color: { url: 'jupiter/color_$SIZE_$FACE.jpg', sizes: [16, 512, 4096] } },
					shadowEntities: ['io', 'europa', 'ganymede', 'callisto']
				},
				dynamo: [{ url: 'jupiter/sun/orb', parent: 'sun' }, { url: 'jupiter/ori' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addComponent('atmosphere');
					e instanceof Se &&
						(e.setScaleHeight(200),
						e.setDensity(5e-5),
						e.setColor(new z(234 / 255, 202 / 255, 170 / 255)),
						e.setSunBrightness(0.25));
					var n = t.addController('coverage');
					if (!(n instanceof Tn)) throw new Error();
					var r = [
							[-1136116758, 15],
							[-1037534358, 28],
							[-938951958, 22],
							[-867931156, 0],
							[-812721554, 12],
							[-744292752, 47],
							[-639143949, 62],
							[-533822346, 48],
							[-483883145, 27],
							[-391953544, 15],
							[102427264, 85],
							[315576066, 138],
							[615211269, 312],
							[660052869, 347]
						],
						i = 0,
						o = t.addController('rotate');
					o instanceof cr && o.setRotatingPosition(!1);
					var a = (r[r.length - 1][1] - r[r.length - 2][1]) / (r[r.length - 1][0] - r[r.length - 2][0]);
					n.addCoverage(J.Infinite, void 0, void 0, function (t) {
						if (!t.getOrientation().isNaN()) {
							if (!(t.get('rotate') instanceof cr)) throw new Error();
							var e = t.getScene().getEngine().getTime(),
								n = a,
								o = i;
							if (e < r[o][0] || (o < r.length - 1 && r[o + 1][0] <= e))
								if (e >= r[r.length - 1][0]) o = r.length - 1;
								else if (e < r[0][0]) (o = 0), (n = 0);
								else
									for (var s = r.length - 2; s >= 0; s--)
										r[s][0] <= e &&
											e < r[s + 1][0] &&
											((o = s), (n = (r[s + 1][1] - r[s][1]) / (r[s + 1][0] - r[s][0])));
							else o < r.length - 1 && (n = (r[o + 1][1] - r[o][1]) / (r[o + 1][0] - r[o][0]));
							i = o;
							var l = r[o][1] + (e - r[o][0]) * n,
								c = T.wrap(305 - (l + -60.38 - 313.47) + -3074e-9 * (e - 617098056), 0, 360),
								u = t.getComponentByType('spheroid');
							u instanceof qe && u.setLongitudeRotation(T.degToRad(c));
						}
					});
				}
			},
			saturn: {
				groups: ['planets'],
				radius: 60268,
				label: 'Saturn',
				trail: { length: 929703084, color: [0.72, 0.65, 0.52, 0.7] },
				spheroid: {
					equatorialRadius: 60268,
					polarRadius: 54364,
					features: ['shadowEntities', 'shadowRings'],
					textures: { color: { url: 'saturn/color_$SIZE_$FACE.png', sizes: [4, 512] } },
					shadowEntities: ['iapetus', 'dione', 'rhea', 'tethys', 'titan']
				},
				dynamo: [{ url: 'saturn/sun/orb', parent: 'sun' }, { url: 'saturn/ori' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addComponent('rings');
					e instanceof Je &&
						(e.setInnerRadius(74270.580913),
						e.setOuterRadius(140478.924731),
						e.setTopTextureUrl('$STATIC_ASSETS_URL/sprites/saturn_rings_top.png'),
						e.setBottomTextureUrl('$STATIC_ASSETS_URL/sprites/saturn_rings_bottom.png'));
					var n = t.addComponent('atmosphere');
					n instanceof Se &&
						(n.setScaleHeight(200), n.setDensity(5e-5), n.setColor(new z(234 / 255, 202 / 255, 151 / 255)));
				}
			},
			uranus: {
				groups: ['planets'],
				radius: 25559,
				label: 'Uranus',
				trail: { length: 2651200139, color: [0.67, 0.92, 1, 0.7] },
				spheroid: {
					equatorialRadius: 25559,
					polarRadius: 24973,
					features: ['shadowEntities'],
					textures: { color: { url: 'uranus/color_$SIZE_$FACE.png', sizes: [4, 256] } },
					shadowEntities: ['titania', 'oberon', 'umbriel', 'ariel', 'miranda']
				},
				dynamo: [{ url: 'uranus/sun/orb', parent: 'sun' }, { url: 'uranus/ori' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addComponent('atmosphere');
					e instanceof Se &&
						(e.setScaleHeight(200),
						e.setDensity(5e-5),
						e.setColor(new z(147 / 255, 183 / 255, 201 / 255)),
						e.setSunsetColor(new z(164 / 255, 168 / 255, 0.4)),
						e.setSunsetIntensity(1));
				}
			},
			neptune: {
				groups: ['planets'],
				radius: 24764,
				label: 'Neptune',
				trail: { length: 5200783038, color: [0.48, 0.69, 1, 0.7] },
				spheroid: {
					equatorialRadius: 24764,
					polarRadius: 24341,
					features: ['shadowEntities'],
					textures: { color: { url: 'neptune/color_$SIZE_$FACE.png', sizes: [4, 256] } },
					shadowEntities: ['triton', 'proteus', 'despina', 'galatea', 'larissa']
				},
				dynamo: [{ url: 'neptune/sun/orb', parent: 'sun' }, { url: 'neptune/ori' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addComponent('rings');
					e instanceof Je &&
						(e.setInnerRadius(40900),
						e.setOuterRadius(62964),
						e.setTopTextureUrl('$STATIC_ASSETS_URL/sprites/neptune_rings.png'),
						e.setBottomTextureUrl('$STATIC_ASSETS_URL/sprites/neptune_rings.png'));
					var n = t.addComponent('atmosphere');
					n instanceof Se && (n.setScaleHeight(200), n.setDensity(5e-5), n.setColor(new z(138 / 255, 160 / 255, 1)));
				}
			}
		}),
			Er.register({
				'1_ceres': {
					groups: ['dwarf planets'],
					radius: 473,
					label: 'Ceres',
					trail: { length: 36312714.5 },
					spheroid: {
						equatorialRadius: 482.6,
						polarRadius: 445.6,
						textures: { color: { url: '1_ceres/color_$SIZE_$FACE.png', sizes: [16, 512, 2048] } }
					},
					dynamo: [{ url: '1_ceres/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'101955_bennu': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.246,
					label: 'Bennu',
					trail: { length: 9464136.5 },
					model: {
						url: '$STATIC_ASSETS_URL/models/101955_bennu/Bennu.gltf',
						rotate: [{ x: 83 }, { z: -168 }],
						scale: [9957e-7, 9957e-7, 9957e-7]
					},
					dynamo: [{ url: '101955_bennu/sun/orb', parent: 'sun' }, { url: '101955_bennu/ori' }]
				},
				'11351_leucus': {
					groups: ['asteroids'],
					radius: 17.0775,
					label: 'Leucus',
					trail: { length: 384622403.174 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf', scale: 17.0775 },
					dynamo: [{ url: '11351_leucus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 445.732 }
				},
				'12923_zephyr': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 1.03,
					label: 'Zephyr',
					trail: { length: 86659200 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.03, 1.03, 1.03]
					},
					dynamo: [{ url: '12923_zephyr/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.891 }
				},
				'134340_pluto': {
					groups: ['dwarf planets'],
					radius: 1187,
					label: 'Pluto',
					trail: { length: 1956571200 },
					spheroid: {
						equatorialRadius: 1187,
						polarRadius: 1187,
						textures: { color: { url: '134340_pluto/color_$SIZE_$FACE.png', sizes: [4, 512, 4096] } }
					},
					dynamo: [{ url: '134340_pluto/sun/orb', parent: 'sun' }],
					align: {
						primary: { type: 'point', axis: yt.XAxis, target: 'charon' },
						secondary: { type: 'velocity', axis: yt.YAxis, target: 'charon' }
					},
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addComponent('trail');
						e.setColor(new z(1, 1, 1, 0.5)), e.setRelativeToEntity('134340_pluto_barycenter'), e.setStartTime(551857);
					}
				},
				'134340_pluto_barycenter': {
					groups: ['134340_pluto', 'barycenters'],
					occlusionRadius: 0.001,
					extentsRadius: 0.001,
					label: 'System Barycenter',
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '134340_pluto_barycenter/134340_pluto/orb', parent: '134340_pluto' }],
					postCreateFunction: function postCreateFunction(t) {
						t.setCanOcclude(!1);
					}
				},
				'136108_haumea': {
					groups: ['dwarf planets', 'TNOs'],
					radius: 816,
					label: 'Haumea',
					trail: { length: 1120759200 },
					model: { url: '$STATIC_ASSETS_URL/models/136108_haumea/haumea.gltf', scale: [1, 1, 1] },
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '136108_haumea/sun/orb', parent: 'sun' }]
				},
				'136199_eris': {
					groups: ['dwarf planets', 'TNOs'],
					radius: 1163,
					label: 'Eris',
					trail: { length: 2201364e3 },
					spheroid: {
						equatorialRadius: 1163,
						polarRadius: 1163,
						textures: { color: { url: '136199_eris/color_$SIZE_$FACE.png', sizes: [4, 512] } }
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '136199_eris/sun/orb', parent: 'sun' }]
				},
				'136472_makemake': {
					groups: ['dwarf planets', 'TNOs'],
					radius: 715,
					label: 'Makemake',
					trail: { length: 1219287600 },
					spheroid: {
						equatorialRadius: 717,
						polarRadius: 710,
						textures: { color: { url: '136472_makemake/color_$SIZE_$FACE.png', sizes: [4, 512] } }
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '136472_makemake/sun/orb', parent: 'sun' }]
				},
				'14827_hypnos': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.4535,
					label: 'Hypnos',
					trail: { length: 151113600 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.4535, 0.4535, 0.4535] },
					dynamo: [{ url: '14827_hypnos/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'15094_polymele': {
					groups: ['asteroids'],
					radius: 10.5375,
					label: 'Polymele',
					trail: { length: 371396335.107 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: 10.5375 },
					dynamo: [{ url: '15094_polymele/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 5.8607 }
				},
				'1566_icarus': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.805,
					label: 'Icarus',
					trail: { length: 35326368 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.805, 0.8, 0.585] },
					dynamo: [{ url: '1566_icarus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.2726 }
				},
				'16_psyche': {
					groups: ['asteroids'],
					radius: 125,
					label: '16 Psyche',
					trail: { length: 39379284 },
					model: {
						url: '$STATIC_ASSETS_URL/models/16_psyche/psycheAsteroid.gltf',
						scale: [100, 100, 100],
						rotate: [{ x: 90 }]
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '16_psyche/sun/orb', parent: 'sun' }]
				},
				'1620_geographos': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 2.5,
					label: 'Geographos',
					trail: { length: 43891200 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: [2.5, 1, 1.05] },
					dynamo: [{ url: '1620_geographos/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 5.224 }
				},
				'1862_apollo': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.75,
					label: 'Apollo',
					trail: { length: 56259360 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.75, 0.75, 0.75]
					},
					dynamo: [{ url: '1862_apollo/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.065 }
				},
				'1981_midas': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.975,
					label: 'Midas',
					trail: { length: 74649600 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.975, 0.975, 0.975] },
					dynamo: [{ url: '1981_midas/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 5.22 }
				},
				'1991_vg': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.00425,
					label: '1991 VG',
					trail: { length: 33100012 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.00425, 0.00425, 0.00425]
					},
					dynamo: [{ url: '1991_vg/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'1993_hd': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 0.005,
					label: '1993 HD',
					trail: { length: 100388764 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '1993_hd/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'1994_cc_a': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.325,
					label: '1994 CC',
					trail: { length: 66137990 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.325, 0.325, 0.325] },
					dynamo: [{ url: '1994_cc_a/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.3886 }
				},
				'1996_xb27': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.042,
					label: '1996 XB<sub>27</sub>',
					trail: { length: 40909104 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.042, 0.042, 0.042]
					},
					dynamo: [{ url: '1996_xb27/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 1.195 }
				},
				'1998_ky26': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.015,
					label: '1998 KY<sub>26</sub>',
					trail: { length: 43202073 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.015, 0.015, 0.015] },
					dynamo: [{ url: '1998_ky26/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 0.1784 }
				},
				'1998_ml14': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.5,
					label: '1998 ML<sub>14</sub>',
					trail: { length: 117917856 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.5, 0.5, 0.5] },
					dynamo: [{ url: '1998_ml14/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 14.28 }
				},
				'1998_qe2': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 1.375,
					label: '1998 QE<sub>2</sub>',
					trail: { length: 119104300 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1.375, 1.375, 1.375]
					},
					dynamo: [{ url: '1998_qe2/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 4.749 }
				},
				'1999_ao10': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.025,
					label: '1999 AO<sub>10</sub>',
					trail: { length: 27475200 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.025, 0.025, 0.025]
					},
					dynamo: [{ url: '1999_ao10/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'1999_cg9': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '1999 CG<sub>9</sub>',
					trail: { length: 34535808 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '1999_cg9/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'1999_vx25': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '1999 VX<sub>25</sub>',
					trail: { length: 26941680 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '1999_vx25/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2_pallas': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 291,
					label: 'Pallas',
					trail: { length: 145683878 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [291, 278, 250] },
					dynamo: [{ url: '2_pallas/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 7.8132 }
				},
				'2000_ae205': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2000 AE<sub>205</sub>',
					trail: { length: 39660827 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2000_ae205/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2000_lg6': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2000 LG<sub>6</sub>',
					trail: { length: 27724710 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2000_lg6/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2000_sg344': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.0185,
					label: '2000 SG<sub>344</sub>',
					trail: { length: 30497305 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.0185, 0.0185, 0.0185] },
					dynamo: [{ url: '2000_sg344/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2001_bb16': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2001 BB<sub>16</sub>',
					trail: { length: 24933552 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2001_bb16/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2001_fr85': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2001 FR<sub>85</sub>',
					trail: { length: 30752213 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2001_fr85/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2001_gp2': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2001 GP<sub>2</sub>',
					trail: { length: 33351128 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2001_gp2/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2001_qj142': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2001 QJ<sub>142</sub>',
					trail: { length: 34542533 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2001_qj142/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2001_sn263_a': {
					groups: ['asteroids', 'NEOs'],
					radius: 1.45,
					label: '(153591) 2001 SN<sub>263</sub>',
					trail: { length: 88379117 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.4, 1.35, 1.45]
					},
					dynamo: [{ url: '2001_sn263_a/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.423 }
				},
				'2003_sm84': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2003 SM<sub>84</sub>',
					trail: { length: 37674723 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2003_sm84/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2003_uv11': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.13,
					label: '(503941) 2003 UV<sub>11</sub>',
					trail: { length: 55302063 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.13, 0.13, 0.13] },
					dynamo: [{ url: '2003_uv11/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 18.25 }
				},
				'2003_yn107': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.01,
					label: '2003 YN<sub>107</sub>',
					trail: { length: 31024602 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.01, 0.01, 0.01]
					},
					dynamo: [{ url: '2003_yn107/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2005_er95': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2003 ER<sub>95</sub>',
					trail: { length: 42691438 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2005_er95/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2005_lc': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2005 LC',
					trail: { length: 38109231 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2005_lc/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2005_qp87': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2005 QP<sub>87</sub>',
					trail: { length: 43182130 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2005_qp87/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2005_yu55': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.18,
					label: '2005 YU<sub>55</sub>',
					trail: { length: 39279986 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.18, 0.18, 0.18]
					},
					dynamo: [{ url: '2005_yu55/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 18 }
				},
				'2006_bz147': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2006 BZ<sub>147</sub>',
					trail: { length: 32672193 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2006_bz147/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2006_jy26': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.00475,
					label: '2006 JY<sub>26</sub>',
					trail: { length: 32046056 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.00475, 0.00475, 0.00475]
					},
					dynamo: [{ url: '2006_jy26/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2006_qq56': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2006 QQ<sub>56</sub>',
					trail: { length: 30849279 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2006_qq56/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2006_rh120': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.00125,
					label: '2006 RH<sub>120</sub>',
					trail: { length: 31646355 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.00125, 0.00125, 0.00125] },
					dynamo: [{ url: '2006_rh120/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 0.04583 }
				},
				'2006_ub17': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2006 UB<sub>17</sub>',
					trail: { length: 38423813 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2006_ub17/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2007_tf15': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2007 TF<sub>15</sub>',
					trail: { length: 36848420 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2007_tf15/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2007_un12': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2007 UN<sub>12</sub>',
					trail: { length: 34141598 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2007_un12/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2007_vu6': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2007 VU<sub>6</sub>',
					trail: { length: 30439348 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2007_vu6/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_bt2': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 BT<sub>2</sub>',
					trail: { length: 40099605 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2008_bt2/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_cx118': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 CX<sub>118</sub>',
					trail: { length: 38642620 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2008_cx118/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_ea9': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 EA<sub>9</sub>',
					trail: { length: 34399094 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2008_ea9/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_el': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 EL',
					trail: { length: 36567037 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2008_el/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_hu4': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 HU<sub>4</sub>',
					trail: { length: 35000582 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2008_hu4/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_jl24': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 JL<sub>24</sub>',
					trail: { length: 33383926 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2008_jl24/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 0.05385 }
				},
				'2008_kt': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 KT',
					trail: { length: 32084467 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2008_kt/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_tc3': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.00205,
					label: '2008 TC<sub>3</sub>',
					trail: { length: 47219992 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.00205, 0.00205, 0.00205] },
					dynamo: [{ url: '2008_tc3/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 0.0269409 }
				},
				'2008_ts10': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2008 TS<sub>10</sub>',
					trail: { length: 44550003 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2008_ts10/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2008_ua202': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.025,
					label: '2008 UA<sub>202</sub>',
					trail: { length: 33141727 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.025, 0.025, 0.025]
					},
					dynamo: [{ url: '2008_ua202/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2009_bd': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.0055,
					label: '2009 BD',
					trail: { length: 32021453 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.0055, 0.0055, 0.0055] },
					dynamo: [{ url: '2009_bd/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2009_os5': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2009 OS<sub>5</sub>',
					trail: { length: 38627939 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2009_os5/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2009_rt1': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2009 RT<sub>1</sub>',
					trail: { length: 39197194 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2009_rt1/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2009_yf': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2009 YF',
					trail: { length: 28573741 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2009_yf/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2010_an61': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2010 AN<sub>61</sub>',
					trail: { length: 39265990 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2010_an61/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2010_dj': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2010 DJ',
					trail: { length: 41893712 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2010_dj/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2010_jw34': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2010 JW<sub>34</sub>',
					trail: { length: 30671447 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2010_jw34/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2010_tg19': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2010 TG<sub>19</sub>',
					trail: { length: 96734965 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.005, 0.005, 0.005] },
					dynamo: [{ url: '2010_tg19/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2010_tn167': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2010 TN<sub>167</sub>',
					trail: { length: 70146852 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2010_tn167/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2010_ub': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.005,
					label: '2010 UB',
					trail: { length: 93215413 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.005, 0.005, 0.005]
					},
					dynamo: [{ url: '2010_ub/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2063_bacchus': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.555,
					label: 'Bacchus',
					trail: { length: 35315957 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.555, 0.265, 0.25]
					},
					dynamo: [{ url: '2063_bacchus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 14.904 }
				},
				'21_lutetia': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 60.5,
					label: 'Lutetia',
					trail: { length: 119908344 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [60.5, 50.5, 37.5]
					},
					dynamo: [{ url: '21_lutetia/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 8.1655 }
				},
				'2101_adonis': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.2615,
					label: 'Adonis',
					trail: { length: 80974175 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.2615, 0.2615, 0.2615]
					},
					dynamo: [{ url: '2101_adonis/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'2102_tantalus': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 1.5,
					label: 'Tantalus',
					trail: { length: 46243117 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.8245, 0.8245, 0.8245]
					},
					dynamo: [{ url: '2102_tantalus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.384 }
				},
				'2135_aristaeus': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.5,
					label: 'Aristaeus',
					trail: { length: 63842351 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.5, 0.5, 0.5] },
					dynamo: [{ url: '2135_aristaeus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'216_kleopatra': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 138,
					label: 'Kleopatra',
					trail: { length: 147366495 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [138, 47, 39] },
					dynamo: [{ url: '216_kleopatra/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 5.385 }
				},
				'21900_orus': {
					groups: ['asteroids'],
					radius: 25.405,
					label: 'Orus',
					trail: { length: 366046968.426 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: 25.405 },
					dynamo: [{ url: '21900_orus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 13.45 }
				},
				'225088_2007_or10': {
					groups: ['dwarf planets', 'TNOs'],
					radius: 615,
					label: '2007 OR<sub>10</sub>',
					trail: { length: 17453038503 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [615, 615, 596.55]
					},
					dynamo: [{ url: '225088_2007_or10/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 22.4 }
				},
				'2340_hathor': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.105,
					label: 'Hathor',
					trail: { length: 24462116 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.105, 0.105, 0.105]
					},
					dynamo: [{ url: '2340_hathor/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.35 }
				},
				'243_ida': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 29.9,
					label: 'Ida',
					trail: { length: 152692978 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [18.6 * 1.3, 25.4 * 1.3, 77.74],
						rotate: [{ y: 90 }]
					},
					dynamo: [{ url: '243_ida/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 4.634 }
				},
				'25143_itokawa': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.165,
					label: 'Itokawa',
					trail: { length: 48085521 },
					model: { url: '$STATIC_ASSETS_URL/models/25143_itokawa/itokawa.gltf', rotate: [{ x: 90 }] },
					dynamo: [{ url: '25143_itokawa/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12.132 }
				},
				'253_mathilde': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 33,
					label: 'Mathilde',
					trail: { length: 136059532 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf', scale: [33, 24, 23] },
					dynamo: [{ url: '253_mathilde/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 417.7 }
				},
				'2867_steins': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 3.415,
					label: ' teins',
					trail: { length: 114690676 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [3.415, 2.85, 2.21]
					},
					dynamo: [{ url: '2867_steins/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 6.049 }
				},
				'3_juno': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 160,
					label: 'Juno',
					trail: { length: 137616821 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [160, 133.5, 100]
					},
					dynamo: [{ url: '3_juno/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 7.21 }
				},
				'3122_florence': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 2.2,
					label: 'Florence',
					trail: { length: 74244319 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [2.2, 2.2, 2.2]
					},
					dynamo: [{ url: '3122_florence/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.3581 }
				},
				'3200_phaethon': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 2.9,
					label: 'Phaethon',
					trail: { length: 45239890 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [2.9, 2.9, 2.9] },
					dynamo: [{ url: '3200_phaethon/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.604 }
				},
				'3362_khufu': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.35,
					label: 'Khufu',
					trail: { length: 31064230 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.35, 0.35, 0.35]
					},
					dynamo: [{ url: '3362_khufu/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'3548_eurybates': {
					groups: ['asteroids'],
					radius: 31.9425,
					label: 'Eurybates',
					trail: { length: 374226349.15 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf', scale: 31.9425 },
					dynamo: [{ url: '3548_eurybates/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 8.711 }
				},
				'367943_duende': {
					groups: ['asteroids', 'NEOs'],
					radius: 0.02,
					label: 'Duende',
					trail: { length: 27409492 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.01, 0.01, 0.02]
					},
					dynamo: [{ url: '367943_duende/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 9.485 }
				},
				'37655_illapa': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.75,
					label: 'Illapa',
					trail: { length: 56696394 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.75, 0.75, 0.75]
					},
					dynamo: [{ url: '37655_illapa/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.6556 }
				},
				'4_vesta': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 262.7,
					label: 'Vesta',
					trail: { length: 28636200 },
					model: { url: '$STATIC_ASSETS_URL/models/4_vesta/4_vesta.gltf', rotate: [{ x: 90 }] },
					dynamo: [{ url: '4_vesta/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'4015_wilson-harrington': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 2,
					label: 'Wilson-Harrington',
					trail: { length: 134340178 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf', scale: [2, 2, 2] },
					dynamo: [{ url: '4015_wilson-harrington/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.5736 }
				},
				'4179_toutatis': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 2.13,
					label: 'Toutatis',
					trail: { length: 127994167 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [1.35, 1.015, 2.13] },
					dynamo: [{ url: '4179_toutatis/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 176 }
				},
				'4183_cuno': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 1.8255,
					label: 'Cuno',
					trail: { length: 88105665 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1.8255, 1.8255, 1.89255]
					},
					dynamo: [{ url: '4183_cuno/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.5595 }
				},
				'433_eros': {
					groups: ['asteroids', 'NEOs'],
					radius: 8.42,
					label: 'Eros',
					trail: { length: 55564653 },
					model: { url: '$STATIC_ASSETS_URL/models/433_eros/433_eros.gltf' },
					dynamo: [{ url: '433_eros/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 5.27 }
				},
				'4450_pan': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.5,
					label: 'Pan',
					trail: { length: 54661485 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.5, 0.5, 0.5]
					},
					dynamo: [{ url: '4450_pan/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 56.48 }
				},
				'4486_mithra': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 1.175,
					label: 'Mithra',
					trail: { length: 102956005 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [1.175, 0.825, 0.72] },
					dynamo: [{ url: '4486_mithra/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 67.5 }
				},
				'4769_castalia': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.9,
					label: 'Castalia',
					trail: { length: 34594967 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.4, 0.4, 0.9]
					},
					dynamo: [{ url: '4769_castalia/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 4.095 }
				},
				'486958_arrokoth': {
					groups: ['TNOs'],
					radius: 15,
					label: 'Arrokoth',
					trail: { length: 1169359200 },
					model: {
						url: '$STATIC_ASSETS_URL/models/486958_arrokoth/mu69.gltf',
						scale: [1, 1, 1],
						rotate: [{ x: -110 }, { y: 180 }]
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '486958_arrokoth/sun/orb', parent: 'sun' }],
					spin: { axis: new yt(-6.121453676996425e-10, 0.9396926211599973, 0.34202014229786787), periodInHours: 13 },
					postCreateFunction: function postCreateFunction(t) {
						var e = t.get('spin');
						e instanceof fr && (e.setReferenceAngle(0), e.setReferenceTime(599590968));
					}
				},
				'5011_ptah': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.78,
					label: 'Ptah',
					trail: { length: 66011009 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.78, 0.78, 0.78]
					},
					dynamo: [{ url: '5011_ptah/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 12 }
				},
				'52246_donaldjohanson': {
					groups: ['asteroids'],
					radius: 1.9475,
					label: 'Donaldjohanson',
					trail: { length: 116208e3 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: 1.9475 },
					dynamo: [{ url: '52246_donaldjohanson/sun/orb', parent: 'sun' }],
					fixed: { orientation: tt.Identity }
				},
				'617_patroclus': {
					groups: ['asteroids'],
					radius: 70.181,
					label: 'Patroclus',
					trail: { length: 375567312.149 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: 70.181 },
					dynamo: [{ url: '617_patroclus/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 102.8 }
				},
				'6239_minos': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.237,
					label: 'Minos',
					trail: { length: 38987872 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [0.237, 0.237, 0.237] },
					dynamo: [{ url: '6239_minos/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 3.5558 }
				},
				'6489_golevka': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.265,
					label: 'Golevka',
					trail: { length: 124929936 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.265, 0.265, 0.265]
					},
					dynamo: [{ url: '6489_golevka/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 6.026 }
				},
				'65803_didymos': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.39,
					label: 'Didymos',
					trail: { length: void 0 },
					model: { url: '$STATIC_ASSETS_URL/models/65803_didymos/Didymos.gltf', rotate: [{ z: 180 }, { x: -90 }] },
					dynamo: [{ url: '65803_didymos/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.2593 }
				},
				'66391_moshup': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.766,
					label: 'Moshup',
					trail: { length: 16241014 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [0.766, 0.7475, 0.6735]
					},
					dynamo: [{ url: '66391_moshup/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 2.7645 }
				},
				'69230_hermes': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.425,
					label: 'Hermes',
					trail: { length: 67203045 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [0.425, 0.425, 0.425]
					},
					dynamo: [{ url: '69230_hermes/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 13.894 }
				},
				'90377_sedna': {
					groups: ['dwarf planets', 'TNOs'],
					radius: 497.5,
					label: 'Sedna',
					trail: { length: 331511477985 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [497.5, 497.5, 497.5]
					},
					dynamo: [{ url: '90377_sedna/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 10.273 }
				},
				'951_gaspra': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 9.1,
					label: 'Gaspra',
					trail: { length: 17262935 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [9.1, 5.25, 4.45]
					},
					dynamo: [{ url: '951_gaspra/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 7.042 }
				},
				'9969_braille': {
					groups: ['asteroids', 'asteroid belt'],
					radius: 1.05,
					label: 'Braille',
					trail: { length: 113087113 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1.05, 0.5, 0.5]
					},
					dynamo: [{ url: '9969_braille/sun/orb', parent: 'sun' }],
					spin: { axis: yt.ZAxis, periodInHours: 226.4 }
				},
				'99942_apophis': {
					groups: ['asteroids', 'NEOs', 'PHAs'],
					radius: 0.225,
					label: 'Apophis',
					trail: { length: 27958776 },
					model: { url: '$STATIC_ASSETS_URL/models/99942_apophis/apophis.gltf' },
					dynamo: [{ url: '99942_apophis/sun/orb', parent: 'sun' }],
					spin: { axis: new yt(0.20112425201023415, 0.46925803805904115, 0.8598522715968735), periodInHours: 30.4 }
				},
				charon: {
					groups: ['134340_pluto', 'moons'],
					radius: 603.5,
					label: 'Charon',
					trail: { length: 551857 / 4, relativeTo: '134340_pluto_barycenter' },
					spheroid: {
						equatorialRadius: 603.5,
						polarRadius: 603.5,
						textures: { color: { url: 'charon/color_$SIZE_$FACE.png', sizes: [4, 512, 2048] } }
					},
					dynamo: [{ url: 'charon/134340_pluto/orb', parent: '134340_pluto' }],
					align: {
						primary: { type: 'point', axis: yt.XAxis, target: '134340_pluto' },
						secondary: { type: 'velocity', axis: yt.YAxis, target: '134340_pluto' }
					}
				},
				dactyl: {
					groups: ['243_ida', 'moons'],
					radius: 0.7,
					label: 'Dactyl',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.6, 1.4, 1.2],
						rotate: [{ z: 90 }]
					},
					align: { primary: { type: 'point', axis: yt.XAxis, target: '243_ida' } },
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('orbitalElements');
						e.setParent('243_ida');
						var n = new $();
						(n.epoch = 0),
							(n.eccentricity = 0),
							(n.semiMajorAxis = 90),
							(n.meanAngularMotion = 8726646e-11),
							(n.meanAnomalyAtEpoch = 0),
							n.orbitOrientation.set(0.8728453580255966, 0.1876084386162498, -0.08948587100888229, 0.4415159494547423),
							e.addOrbitalElements(-1e100, n),
							e.addOrbitalElements(1e100, n);
					}
				},
				dimorphos: {
					groups: ['65803_didymos', 'moons'],
					radius: 0.085,
					label: 'Dimorphos',
					trail: { length: void 0 },
					model: { url: '$STATIC_ASSETS_URL/models/dimorphos/Dimorphos.gltf' },
					dynamo: [{ url: 'dimorphos/65803_didymos/orb', parent: '65803_didymos' }],
					spin: { axis: yt.ZAxisNeg, periodInHours: 11.8992 }
				},
				hiiaka: {
					groups: ['136108_haumea', 'moons'],
					radius: 160,
					label: "Hi'iaka",
					trail: { length: void 0 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [320, 320, 320] },
					align: { primary: { type: 'point', axis: yt.XAxis, target: '136108_haumea' } },
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('orbitalElements');
						e.setParent('136108_haumea');
						var n = new $();
						(n.epoch = 0),
							(n.eccentricity = 0.0513),
							(n.semiMajorAxis = 49880),
							(n.meanAngularMotion = 148049e-11),
							(n.meanAnomalyAtEpoch = 0),
							n.setOrbitOrientationFromElements(2.20532822965, 0, 0),
							e.addOrbitalElements(-1e100, n),
							e.addOrbitalElements(1e100, n);
					}
				},
				hydra: {
					groups: ['134340_pluto', 'moons'],
					radius: 25,
					label: 'Hydra',
					trail: { length: 825158.25 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [25, 25, 25],
						shadowEntities: ['134340_pluto']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hydra/134340_pluto_barycenter/orb', parent: '134340_pluto_barycenter' }]
				},
				kerberos: {
					groups: ['134340_pluto', 'moons'],
					radius: 8.25,
					label: 'Kerberos',
					trail: { length: 694819.25 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [8.25, 8.25, 8.25],
						shadowEntities: ['134340_pluto']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kerberos/134340_pluto_barycenter/orb', parent: '134340_pluto_barycenter' }]
				},
				namaka: {
					groups: ['136108_haumea', 'moons'],
					radius: 85,
					label: 'Nmaka',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [170, 170, 170]
					},
					align: { primary: { type: 'point', axis: yt.XAxis, target: '136108_haumea' } },
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('orbitalElements');
						e.setParent('136108_haumea');
						var n = new $();
						(n.epoch = 0),
							(n.eccentricity = 0.249),
							(n.semiMajorAxis = 25657),
							(n.meanAngularMotion = 39786e-10),
							(n.meanAnomalyAtEpoch = 0),
							n.setOrbitOrientationFromElements(1.97244894756, 0, 0),
							e.addOrbitalElements(-1e100, n),
							e.addOrbitalElements(1e100, n);
					}
				},
				nix: {
					groups: ['134340_pluto', 'moons'],
					radius: 24,
					label: 'Nix',
					trail: { length: 536860 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [24, 24, 24],
						shadowEntities: ['134340_pluto']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'nix/134340_pluto_barycenter/orb', parent: '134340_pluto_barycenter' }]
				},
				styx: {
					groups: ['134340_pluto', 'moons'],
					radius: 5.5,
					label: 'Styx',
					trail: { length: 435489.5 },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [5.5, 5.5, 5.5],
						shadowEntities: ['134340_pluto']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'styx/134340_pluto_barycenter/orb', parent: '134340_pluto_barycenter' }]
				}
			}),
			Er.register({
				'1p_halley': {
					groups: ['comets'],
					radius: 6,
					label: 'Halley (1P/Halley)',
					trail: { length: 2376918432 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: [6, 6, 6] },
					comet: {},
					dynamo: [{ url: '1p_halley/sun/orb', parent: 'sun' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('spin', void 0);
						e instanceof fr && (e.setAxis(yt.ZAxis, !1), e.setRate(3356402e-11));
					}
				},
				'103p_hartley': {
					groups: ['comets'],
					radius: 2,
					label: 'Hartley 2 (103P/Hartley)',
					trail: { length: 203862096 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [2, 2, 2] },
					comet: {},
					dynamo: [{ url: '103p_hartley/sun/orb', parent: 'sun' }, { url: '103p_hartley/ori' }]
				},
				'9p_tempel': {
					groups: ['comets'],
					radius: 5,
					label: 'Tempel 1 (9P/Tempel)',
					trail: { length: 176091408 },
					model: { url: '$STATIC_ASSETS_URL/models/9p_tempel/9p_tempel.gltf', rotate: [{ y: 90 }] },
					comet: {},
					dynamo: [{ url: '9p_tempel/sun/orb', parent: 'sun' }, { url: '9p_tempel/ori' }]
				},
				'81p_wild': {
					groups: ['comets'],
					radius: 2.5,
					label: 'Wild 2 (81P/Wild)',
					trail: {
						length: 1356976800,
						lengthCoverages: [
							[1356976800, null, -611927948.817],
							[189345600, -611927948.817, null]
						]
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [2.5, 2.5, 2.5]
					},
					comet: {},
					fixed: { orientation: tt.Identity },
					dynamo: [
						{ url: '81p_wild/sun/1/orb', parent: 'sun' },
						{ url: '81p_wild/jupiter/orb', parent: 'jupiter' },
						{ url: '81p_wild/sun/2/orb', parent: 'sun' }
					]
				},
				'67p_churyumov_gerasimenko': {
					groups: ['comets'],
					radius: 4.1,
					label: 'ChuryumovGerasimenko (67P/C-G)',
					trail: { length: 203230944 },
					model: {
						url: '$STATIC_ASSETS_URL/models/67p_churyumov_gerasimenko/67p_churyumov_gerasimenko.gltf',
						rotate: [{ x: 90 }],
						scale: 0.00124
					},
					comet: {},
					dynamo: [
						{ url: '67p_churyumov_gerasimenko/sun/orb', parent: 'sun' },
						{ url: '67p_churyumov_gerasimenko/ori' }
					],
					postCreateFunction: function postCreateFunction(t) {
						t.setOrientation(
							new tt(0.26732846830704055, 0.017948528101847026, 0.22012096235022358, 0.9379552773483394)
						);
						var e = t.get('dynamo');
						if (e instanceof Mn) {
							var n = t.addController('spin', void 0, e);
							n instanceof fr &&
								(n.setAxis(new yt(0.15191127889562422, 0.404099951782066, 0.9020123016422935), !1),
								n.setRate(0.00014477940709946253));
						}
					}
				},
				'19p_borrelly': {
					groups: ['comets'],
					radius: 2.4,
					label: 'Borrelly (19P/Borrelly)',
					trail: { length: 214591680 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [2.4, 2.4, 2.4] },
					comet: {},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: '19p_borrelly/sun/orb', parent: 'sun' }]
				},
				c_1995_o1: {
					groups: ['comets'],
					radius: 5,
					label: 'Hale-Bopp (C/1995 O1)',
					trail: { length: 8007741e4 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf', scale: [5, 5, 5] },
					comet: {},
					dynamo: [{ url: 'c_1995_o1/sun/orb', parent: 'sun' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('spin', void 0);
						e instanceof fr && (e.setAxis(yt.ZAxis, !1), e.setRate(0.00014832826));
					}
				},
				c_2010_x1: {
					groups: ['comets'],
					radius: 5,
					label: 'Elenin (C/2010 X1)',
					trail: { length: 631152e4 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf', scale: [5, 5, 5] },
					comet: {},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'c_2010_x1/sun/pos', parent: 'sun' }]
				},
				c_2012_s1: {
					groups: ['comets'],
					radius: 3,
					label: 'ISON (C/2012 S1)',
					trail: { length: 631152e4 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: [3, 3, 3] },
					comet: {},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'c_2012_s1/sun/pos', parent: 'sun' }]
				},
				c_2013_a1: {
					groups: ['comets'],
					radius: 5,
					label: 'Siding Spring (C/2013 A1)',
					trail: { length: 631152e4 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: [5, 5, 5] },
					comet: {},
					dynamo: [{ url: 'c_2013_a1/sun/pos', parent: 'sun' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('spin', void 0);
						e instanceof fr && (e.setAxis(yt.ZAxis, !1), e.setRate(0.00021816615));
					}
				},
				c_2019_y4: {
					groups: ['comets'],
					radius: 3,
					label: 'ATLAS (C/2019 Y4)',
					trail: { length: 631152e4 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: [3, 3, 3] },
					comet: {},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'c_2019_y4/sun/orb', parent: 'sun' }]
				},
				c_2020_f3: {
					groups: ['comets'],
					radius: 6,
					label: 'NEOWISE (C/2020 F3)',
					trail: { length: 2376918432 },
					model: { url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf', scale: [6, 6, 6] },
					comet: {},
					dynamo: [{ url: 'c_2020_f3/sun/orb', parent: 'sun' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('spin', void 0);
						e instanceof fr && (e.setAxis(yt.ZAxis, !1), e.setRate(0.00023025451));
					}
				}
			}),
			Er.register({
				moon: {
					groups: ['earth', 'moons'],
					radius: 1738.1,
					label: 'Moon',
					trail: { length: 1180295, color: [0, 0.6, 0.8, 0.7] },
					spheroid: {
						equatorialRadius: 1738.1,
						polarRadius: 1735.97,
						features: ['normalMap', 'shadowEntities'],
						textures: {
							color: { url: 'moon/color_$SIZE_$FACE.png', sizes: [16, 512, 4096] },
							normal: { url: 'moon/normal_$SIZE_$FACE.png', sizes: [16, 512, 2048] }
						},
						shadowEntities: ['earth']
					},
					dynamo: [{ url: 'moon/earth/orb', parent: 'earth' }, { url: 'moon/ori' }]
				}
			}),
			Er.register({
				adrastea: {
					groups: ['jupiter', 'moons', 'amalthea', 'inner', 'regular'],
					radius: 8.2,
					label: 'Adrastea',
					trail: { length: 12885, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [8.2, 8.2, 8.2],
						shadowEntities: ['jupiter']
					},
					dynamo: [{ url: 'adrastea/jupiter/orb', parent: 'jupiter' }, { url: 'adrastea/ori' }]
				},
				amalthea: {
					groups: ['jupiter', 'moons', 'amalthea', 'inner', 'regular'],
					radius: 83.5,
					label: 'Amalthea',
					trail: { length: 21521.5, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [83.5, 83.5, 83.5],
						shadowEntities: ['jupiter']
					},
					dynamo: [{ url: 'amalthea/jupiter/orb', parent: 'jupiter' }, { url: 'amalthea/ori' }]
				},
				callisto: {
					groups: ['jupiter', 'moons', 'main', 'galilean', 'regular'],
					radius: 2410.3,
					label: 'Callisto',
					trail: { length: 720965.5, color: [0.95, 0.71, 0.64, 0.7] },
					spheroid: {
						equatorialRadius: 2410.3,
						polarRadius: 2410.3,
						features: ['shadowEntities'],
						textures: { color: { url: 'callisto/color_$SIZE_$FACE.png', sizes: [4, 512] } },
						shadowEntities: ['jupiter', 'io', 'europa', 'ganymede']
					},
					dynamo: [{ url: 'callisto/jupiter/orb', parent: 'jupiter' }, { url: 'callisto/ori' }]
				},
				europa: {
					groups: ['jupiter', 'moons', 'main', 'galilean', 'regular'],
					radius: 1569,
					label: 'Europa',
					trail: { length: 153411, color: [0.95, 0.71, 0.64, 0.7] },
					spheroid: {
						equatorialRadius: 1569,
						polarRadius: 1569,
						features: ['shadowEntities'],
						textures: { color: { url: 'europa/color_$SIZE_$FACE.png', sizes: [4, 512, 1024] } },
						shadowEntities: ['jupiter', 'io', 'callisto', 'ganymede']
					},
					dynamo: [{ url: 'europa/jupiter/orb', parent: 'jupiter' }, { url: 'europa/ori' }]
				},
				ganymede: {
					groups: ['jupiter', 'moons', 'main', 'galilean', 'regular'],
					radius: 2634.1,
					label: 'Ganymede',
					trail: { length: 309076.5, color: [0.95, 0.71, 0.64, 0.7] },
					spheroid: {
						equatorialRadius: 2634.1,
						polarRadius: 2634.1,
						features: ['shadowEntities'],
						textures: { color: { url: 'ganymede/color_$SIZE_$FACE.png', sizes: [4, 512] } },
						shadowEntities: ['jupiter', 'io', 'europa', 'callisto']
					},
					dynamo: [{ url: 'ganymede/jupiter/orb', parent: 'jupiter' }, { url: 'ganymede/ori' }]
				},
				io: {
					groups: ['jupiter', 'moons', 'main', 'galilean', 'regular'],
					radius: 1821.3,
					label: 'Io',
					trail: { length: 76426.5, color: [0.95, 0.71, 0.64, 0.7] },
					spheroid: {
						equatorialRadius: 1821.3,
						polarRadius: 1821.3,
						features: ['shadowEntities'],
						textures: { color: { url: 'io/color_$SIZE_$FACE.png', sizes: [4, 512, 1024] } },
						shadowEntities: ['jupiter', 'europa', 'ganymede', 'callisto']
					},
					dynamo: [{ url: 'io/jupiter/orb', parent: 'jupiter' }, { url: 'io/ori' }]
				},
				metis: {
					groups: ['jupiter', 'moons', 'amalthea', 'inner', 'regular'],
					radius: 21.5,
					label: 'Metis',
					trail: { length: 12734.5, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [21.5, 21.5, 21.5],
						shadowEntities: ['jupiter']
					},
					dynamo: [{ url: 'metis/jupiter/orb', parent: 'jupiter' }, { url: 'metis/ori' }]
				},
				thebe: {
					groups: ['jupiter', 'moons', 'amalthea', 'inner', 'regular'],
					radius: 49,
					label: 'Thebe',
					trail: { length: 29138.5, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [49, 49, 49],
						shadowEntities: ['jupiter']
					},
					dynamo: [{ url: 'thebe/jupiter/orb', parent: 'jupiter' }, { url: 'thebe/ori' }]
				}
			}),
			Er.register({
				aitne: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1.5,
					label: 'Aitne',
					trail: { length: 29360448, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1.5, 1.5, 1.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'aitne/jupiter/orb', parent: 'jupiter' }]
				},
				ananke: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 14,
					label: 'Ananke',
					trail: { length: 76425, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [14, 14, 14],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'ananke/jupiter/orb', parent: 'jupiter' }]
				},
				aoede: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 2,
					label: 'Aoede',
					trail: { length: 153411.5, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'aoede/jupiter/orb', parent: 'jupiter' }]
				},
				arche: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1.5,
					label: 'Arche',
					trail: { length: 309078.5, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1.5, 1.5, 1.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'arche/jupiter/orb', parent: 'jupiter' }]
				},
				autonoe: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 2,
					label: 'Autonoe',
					trail: { length: 720964.5, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'autonoe/jupiter/orb', parent: 'jupiter' }]
				},
				callirrhoe: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 4.3,
					label: 'Callirrhoe',
					trail: { length: 31411152, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [4.3, 4.3, 4.3],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'callirrhoe/jupiter/orb', parent: 'jupiter' }]
				},
				carme: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 23,
					label: 'Carme',
					trail: { length: 33002640, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [23, 23, 23],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'carme/jupiter/orb', parent: 'jupiter' }]
				},
				carpo: {
					groups: ['jupiter', 'moons', 'irregular'],
					radius: 1.5,
					label: 'Carpo',
					trail: { length: 19812384, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1.5, 1.5, 1.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'carpo/jupiter/orb', parent: 'jupiter' }]
				},
				chaldene: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1.9,
					label: 'Chaldene',
					trail: { length: 30211056, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.9, 1.9, 1.9],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'chaldene/jupiter/orb', parent: 'jupiter' }]
				},
				cyllene: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 1,
					label: 'Cyllene',
					trail: { length: 31583520, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'cyllene/jupiter/orb', parent: 'jupiter' }]
				},
				elara: {
					groups: ['jupiter', 'moons', 'irregular', 'himalia'],
					radius: 43,
					label: 'Elara',
					trail: { length: 11129184, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [43, 43, 43],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'elara/jupiter/orb', parent: 'jupiter' }]
				},
				erinome: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1.6,
					label: 'Erinome',
					trail: { length: 30756672, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.6, 1.6, 1.6],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'erinome/jupiter/orb', parent: 'jupiter' }]
				},
				euanthe: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 1.5,
					label: 'Euanthe',
					trail: { length: 25837488, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1.5, 1.5, 1.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'euanthe/jupiter/orb', parent: 'jupiter' }]
				},
				eukelade: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 2,
					label: 'Eukelade',
					trail: { length: 31760640, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'eukelade/jupiter/orb', parent: 'jupiter' }]
				},
				euporie: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 1,
					label: 'Euporie',
					trail: { length: 23275296, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'euporie/jupiter/orb', parent: 'jupiter' }]
				},
				eurydome: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 1.5,
					label: 'Eurydome',
					trail: { length: 31249152, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1.5, 1.5, 1.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'eurydome/jupiter/orb', parent: 'jupiter' }]
				},
				harpalyke: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 2.2,
					label: 'Harpalyke',
					trail: { length: 26980128, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [2.2, 2.2, 2.2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'harpalyke/jupiter/orb', parent: 'jupiter' }]
				},
				hegemone: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 1.5,
					label: 'Hegemone',
					trail: { length: 32205600, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.5, 1.5, 1.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hegemone/jupiter/orb', parent: 'jupiter' }]
				},
				helike: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 2,
					label: 'Helike',
					trail: { length: 25980480, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'helike/jupiter/orb', parent: 'jupiter' }]
				},
				hermippe: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 2,
					label: 'Hermippe',
					trail: { length: 27207792, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hermippe/jupiter/orb', parent: 'jupiter' }]
				},
				herse: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1,
					label: 'Herse',
					trail: { length: 29062800, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'herse/jupiter/orb', parent: 'jupiter' }]
				},
				himalia: {
					groups: ['jupiter', 'moons', 'irregular', 'himalia'],
					radius: 85,
					label: 'Himalia',
					trail: { length: 10809936, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [85, 85, 85],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'himalia/jupiter/orb', parent: 'jupiter' }]
				},
				iocaste: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 2.6,
					label: 'Iocaste',
					trail: { length: 26327376, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [2.6, 2.6, 2.6],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'iocaste/jupiter/orb', parent: 'jupiter' }]
				},
				isonoe: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1.9,
					label: 'Isonoe',
					trail: { length: 32405616, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.9, 1.9, 1.9],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'isonoe/jupiter/orb', parent: 'jupiter' }]
				},
				kale: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1,
					label: 'Kale',
					trail: { length: 29605824, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kale/jupiter/orb', parent: 'jupiter' }]
				},
				kallichore: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1,
					label: 'Kallichore',
					trail: { length: 31009392, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kallichore/jupiter/orb', parent: 'jupiter' }]
				},
				kalyke: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 2.6,
					label: 'Kalyke',
					trail: { length: 31148064, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [2.6, 2.6, 2.6],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kalyke/jupiter/orb', parent: 'jupiter' }]
				},
				kore: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 1,
					label: 'Kore',
					trail: { length: 33524064, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kore/jupiter/orb', parent: 'jupiter' }]
				},
				leda: {
					groups: ['jupiter', 'moons', 'irregular', 'himalia'],
					radius: 10,
					label: 'Leda',
					trail: { length: 10403424, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [10, 10, 10],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'leda/jupiter/orb', parent: 'jupiter' }]
				},
				lysithea: {
					groups: ['jupiter', 'moons', 'irregular', 'himalia'],
					radius: 18,
					label: 'Lysithea',
					trail: { length: 11227248, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [18, 18, 18],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'lysithea/jupiter/orb', parent: 'jupiter' }]
				},
				megaclite: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 2.7,
					label: 'Megaclite',
					trail: { length: 34233408, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [2.7, 2.7, 2.7],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'megaclite/jupiter/orb', parent: 'jupiter' }]
				},
				mneme: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 1,
					label: 'Mneme',
					trail: { length: 27107136, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'mneme/jupiter/orb', parent: 'jupiter' }]
				},
				orthosie: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 1,
					label: 'Orthosie',
					trail: { length: 26033184, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'orthosie/jupiter/orb', parent: 'jupiter' }]
				},
				pasiphae: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 30,
					label: 'Pasiphae',
					trail: { length: 31959360, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [30, 30, 30],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'pasiphae/jupiter/orb', parent: 'jupiter' }]
				},
				pasithee: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 1,
					label: 'Pasithee',
					trail: { length: 31403376, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'pasithee/jupiter/orb', parent: 'jupiter' }]
				},
				praxidike: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 3.4,
					label: 'Praxidike',
					trail: { length: 26520480, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [3.4, 3.4, 3.4],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'praxidike/jupiter/orb', parent: 'jupiter' }]
				},
				sinope: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 19,
					label: 'Sinope',
					trail: { length: 31939056, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [19, 19, 19],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'sinope/jupiter/orb', parent: 'jupiter' }]
				},
				sponde: {
					groups: ['jupiter', 'moons', 'irregular', 'pasiphae'],
					radius: 1,
					label: 'Sponde',
					trail: { length: 33333120, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'sponde/jupiter/orb', parent: 'jupiter' }]
				},
				taygete: {
					groups: ['jupiter', 'moons', 'irregular', 'carme'],
					radius: 2.5,
					label: 'Taygete',
					trail: { length: 29664144, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [2.5, 2.5, 2.5],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'taygete/jupiter/orb', parent: 'jupiter' }]
				},
				thelxinoe: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 1,
					label: 'Thelxinoe',
					trail: { length: 25816752, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1, 1, 1],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'thelxinoe/jupiter/orb', parent: 'jupiter' }]
				},
				themisto: {
					groups: ['jupiter', 'moons', 'irregular'],
					radius: 4,
					label: 'Themisto',
					trail: { length: 5610384, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [4, 4, 4],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'themisto/jupiter/orb', parent: 'jupiter' }]
				},
				thyone: {
					groups: ['jupiter', 'moons', 'irregular', 'ananke'],
					radius: 2,
					label: 'Thyone',
					trail: { length: 27639360, color: [0.95, 0.71, 0.64, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['jupiter']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'thyone/jupiter/orb', parent: 'jupiter' }]
				}
			}),
			Er.register({
				phobos: {
					groups: ['mars', 'moons'],
					radius: 14,
					label: 'Phobos',
					trail: { length: 13777, color: [0.89, 0.51, 0.35, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/phobos/phobos.gltf',
						scale: [1, 1, 1],
						rotate: [{ z: 90 }, { y: 90 }]
					},
					dynamo: [{ url: 'phobos/mars/orb', parent: 'mars' }, { url: 'phobos/ori' }]
				},
				deimos: {
					groups: ['mars', 'moons'],
					radius: 8.70951,
					label: 'Deimos',
					trail: { length: 54561.5, color: [0.89, 0.51, 0.35, 0.7] },
					model: { url: '$STATIC_ASSETS_URL/models/deimos/deimos.gltf', scale: [1, 1, 1], rotate: [{ y: -180 }] },
					dynamo: [{ url: 'deimos/mars/orb', parent: 'mars' }, { url: 'deimos/ori' }]
				}
			}),
			Er.register({
				despina: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 90,
					label: 'Despina',
					trail: { length: 28909, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [90, 90, 90],
						shadowEntities: ['neptune']
					},
					dynamo: [{ url: 'despina/neptune/orb', parent: 'neptune' }, { url: 'despina/ori' }]
				},
				galatea: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 102,
					label: 'Galatea',
					trail: { length: 37039, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [102, 102, 102],
						shadowEntities: ['neptune']
					},
					dynamo: [{ url: 'galatea/neptune/orb', parent: 'neptune' }, { url: 'galatea/ori' }]
				},
				halimede: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 31,
					label: 'Halimede',
					trail: { length: 162352512, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [31, 31, 31],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'halimede/neptune/orb', parent: 'neptune' }]
				},
				hippocamp: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 17.4,
					label: 'Hippocamp',
					trail: { length: 80870, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [17.4, 17.4, 17.4],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hippocamp/neptune/orb', parent: 'neptune' }]
				},
				laomedeia: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 21,
					label: 'Laomedeia',
					trail: { length: 274002912, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [21, 21, 21],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'laomedeia/neptune/orb', parent: 'neptune' }]
				},
				larissa: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 108,
					label: 'Larissa',
					trail: { length: 47995, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [108, 108, 108],
						shadowEntities: ['neptune']
					},
					dynamo: [{ url: 'larissa/neptune/orb', parent: 'neptune' }, { url: 'larissa/ori' }]
				},
				naiad: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 48,
					label: 'Naiad',
					trail: { length: 25436, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [48, 48, 48],
						shadowEntities: ['neptune']
					},
					dynamo: [{ url: 'naiad/neptune/orb', parent: 'neptune' }, { url: 'naiad/ori' }]
				},
				nereid: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 170,
					label: 'Nereid',
					trail: { length: 15557884, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [170, 170, 170],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'nereid/neptune/orb', parent: 'neptune' }]
				},
				neso: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 30,
					label: 'Neso',
					trail: { length: 841599072, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [30, 30, 30],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'neso/neptune/orb', parent: 'neptune' }]
				},
				proteus: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 232.5,
					label: 'Proteus',
					trail: { length: 48470, color: [0.48, 0.69, 1, 0.7] },
					model: { url: '$STATIC_ASSETS_URL/models/proteus/proteus.gltf', scale: [1, 1, 1] },
					dynamo: [{ url: 'proteus/neptune/orb', parent: 'neptune' }, { url: 'proteus/ori' }]
				},
				psamathe: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 20,
					label: 'Psamathe',
					trail: { length: 784019520, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [20, 20, 20],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'psamathe/neptune/orb', parent: 'neptune' }]
				},
				sao: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 22,
					label: 'Sao',
					trail: { length: 251659008, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [22, 22, 22],
						shadowEntities: ['neptune']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'sao/neptune/orb', parent: 'neptune' }]
				},
				thalassa: {
					groups: ['neptune', 'moons', 'regular'],
					radius: 54,
					label: 'Thalassa',
					trail: { length: 26913, color: [0.48, 0.69, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [54, 54, 54],
						shadowEntities: ['neptune']
					},
					dynamo: [{ url: 'thalassa/neptune/orb', parent: 'neptune' }, { url: 'thalassa/ori' }]
				},
				triton: {
					groups: ['neptune', 'moons', 'irregular'],
					radius: 1353.4,
					label: 'Triton',
					trail: { length: 253880, color: [0.48, 0.69, 1, 0.7] },
					spheroid: {
						equatorialRadius: 1353.4,
						polarRadius: 1353.4,
						features: ['shadowEntities'],
						textures: { color: { url: 'triton/color_$SIZE_$FACE.jpg', sizes: [16, 512, 4096] } },
						shadowEntities: ['neptune']
					},
					dynamo: [{ url: 'triton/neptune/orb', parent: 'neptune' }, { url: 'triton/ori' }]
				}
			}),
			Er.register({
				dione: {
					groups: ['saturn', 'moons', 'inner', 'major'],
					radius: 561.7,
					label: 'Dione',
					trail: { length: 118234.5, color: [0.72, 0.65, 0.52, 0.7] },
					spheroid: {
						equatorialRadius: 561.7,
						polarRadius: 561.7,
						features: ['shadowEntities'],
						textures: { color: { url: 'dione/color_$SIZE_$FACE.png', sizes: [4, 512, 2048] } },
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'dione/saturn/orb', parent: 'saturn' }, { url: 'dione/ori' }]
				},
				enceladus: {
					groups: ['saturn', 'moons', 'inner', 'major'],
					radius: 252.1,
					label: 'Enceladus',
					trail: { length: 59193.5, color: [0.72, 0.65, 0.52, 0.7] },
					spheroid: {
						equatorialRadius: 252.1,
						polarRadius: 252.1,
						features: ['shadowEntities'],
						textures: { color: { url: 'enceladus/color_$SIZE_$FACE.png', sizes: [4, 512, 2048] } },
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'enceladus/saturn/orb', parent: 'saturn' }, { url: 'enceladus/ori' }]
				},
				hyperion: {
					groups: ['saturn', 'moons', 'outer', 'major'],
					radius: 135,
					label: 'Hyperion',
					trail: { length: 919149.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: { url: '$STATIC_ASSETS_URL/models/hyperion/hyperion.gltf', scale: [1, 1, 1] },
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hyperion/saturn/orb', parent: 'saturn' }]
				},
				iapetus: {
					groups: ['saturn', 'moons', 'outer', 'major'],
					radius: 735.6,
					label: 'Iapetus',
					trail: { length: 3426689, color: [0.72, 0.65, 0.52, 0.7] },
					spheroid: {
						equatorialRadius: 735.6,
						polarRadius: 735.6,
						features: ['shadowEntities'],
						textures: { color: { url: 'iapetus/color_$SIZE_$FACE.png', sizes: [4, 512, 2048] } },
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'iapetus/saturn/orb', parent: 'saturn' }, { url: 'iapetus/ori' }]
				},
				mimas: {
					groups: ['saturn', 'moons', 'inner', 'major'],
					radius: 198.3,
					label: 'Mimas',
					trail: { length: 40694.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: { url: '$STATIC_ASSETS_URL/models/mimas/mimas.gltf', scale: [1, 1, 1] },
					dynamo: [{ url: 'mimas/saturn/orb', parent: 'saturn' }, { url: 'mimas/ori' }]
				},
				rhea: {
					groups: ['saturn', 'moons', 'outer', 'major'],
					radius: 764.3,
					label: 'Rhea',
					trail: { length: 195187, color: [0.72, 0.65, 0.52, 0.7] },
					spheroid: {
						equatorialRadius: 764.3,
						polarRadius: 764.3,
						features: ['shadowEntities'],
						textures: { color: { url: 'rhea/color_$SIZE_$FACE.png', sizes: [4, 512, 2048] } },
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'rhea/saturn/orb', parent: 'saturn' }, { url: 'rhea/ori' }]
				},
				tethys: {
					groups: ['saturn', 'moons', 'inner', 'major'],
					radius: 538.4,
					label: 'Tethys',
					trail: { length: 81553, color: [0.72, 0.65, 0.52, 0.7] },
					spheroid: {
						equatorialRadius: 538.4,
						polarRadius: 527.5,
						features: ['shadowEntities'],
						textures: { color: { url: 'tethys/color_$SIZE_$FACE.png', sizes: [4, 512, 2048] } },
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'tethys/saturn/orb', parent: 'saturn' }, { url: 'tethys/ori' }]
				},
				titan: {
					groups: ['saturn', 'moons', 'outer', 'major'],
					radius: 2575,
					label: 'Titan',
					trail: { length: 688824, color: [0.72, 0.65, 0.52, 0.7] },
					spheroid: {
						equatorialRadius: 2575,
						polarRadius: 2575,
						features: ['shadowEntities'],
						textures: { color: { url: 'titan/color_$SIZE_$FACE.png', sizes: [4, 512, 1024] } },
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'titan/saturn/orb', parent: 'saturn' }, { url: 'titan/ori' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addComponent('atmosphere');
						e instanceof Se &&
							(e.setScaleHeight(75),
							e.setDensity(5e-4),
							e.setColor(new z(179 / 255, 145 / 255, 53 / 255)),
							e.setSunsetColor(new z(49 / 255, 103 / 255, 0.8)),
							e.setSunsetIntensity(1.2));
					}
				}
			}),
			Er.register({
				aegaeon: {
					groups: ['saturn', 'moons', 'minor', 'ring moonlet'],
					radius: 0.12,
					label: 'Aegaeon',
					trail: { length: 34911, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [0.12, 0.12, 0.12],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'aegaeon/saturn/orb', parent: 'saturn' }]
				},
				aegir: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Aegir',
					trail: { length: 47280672, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'aegir/saturn/orb', parent: 'saturn' }]
				},
				albiorix: {
					groups: ['saturn', 'moons', 'minor', 'gallic'],
					radius: 16,
					label: 'Albiorix',
					trail: { length: 33461856, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [16, 16, 16],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'albiorix/saturn/orb', parent: 'saturn' }]
				},
				anthe: {
					groups: ['saturn', 'moons', 'minor', 'alkyonides'],
					radius: 0.9,
					label: 'Anthe',
					trail: { length: 45398.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [0.9, 0.9, 0.9],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'anthe/saturn/orb', parent: 'saturn' }]
				},
				atlas: {
					groups: ['saturn', 'moons', 'minor', 'ring shepherd'],
					radius: 15.1,
					label: 'Atlas',
					trail: { length: 25993, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [15.1, 15.1, 15.1],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'atlas/saturn/orb', parent: 'saturn' }, { url: 'atlas/ori' }]
				},
				bebhionn: {
					groups: ['saturn', 'moons', 'minor', 'gallic'],
					radius: 3,
					label: 'Bebhionn',
					trail: { length: 36234864, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'bebhionn/saturn/orb', parent: 'saturn' }]
				},
				bergelmir: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Bergelmir',
					trail: { length: 42587856, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'bergelmir/saturn/orb', parent: 'saturn' }]
				},
				bestla: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3.5,
					label: 'Bestla',
					trail: { length: 47582640, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [3.5, 3.5, 3.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'bestla/saturn/orb', parent: 'saturn' }]
				},
				calypso: {
					groups: ['saturn', 'moons', 'minor', 'trojan'],
					radius: 10.7,
					label: 'Calypso',
					trail: { length: 81553, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [10.7, 10.7, 10.7],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'calypso/saturn/orb', parent: 'saturn' }, { url: 'calypso/ori' }]
				},
				daphnis: {
					groups: ['saturn', 'moons', 'minor', 'ring shepherd'],
					radius: 3.8,
					label: 'Daphnis',
					trail: { length: 25664, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3.8, 3.8, 3.8],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'daphnis/saturn/orb', parent: 'saturn' }]
				},
				epimetheus: {
					groups: ['saturn', 'moons', 'minor', 'co-orbital'],
					radius: 58.1,
					label: 'Epimetheus',
					trail: { length: 29995, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [58.1, 58.1, 58.1],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'epimetheus/saturn/orb', parent: 'saturn' }, { url: 'epimetheus/ori' }]
				},
				erriapus: {
					groups: ['saturn', 'moons', 'minor', 'gallic'],
					radius: 5,
					label: 'Erriapus',
					trail: { length: 36499248, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [5, 5, 5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'erriapus/saturn/orb', parent: 'saturn' }]
				},
				farbauti: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 2.5,
					label: 'Farbauti',
					trail: { length: 45566496, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [2.5, 2.5, 2.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'farbauti/saturn/orb', parent: 'saturn' }]
				},
				fenrir: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 2,
					label: 'Fenrir',
					trail: { length: 52381296, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [2, 2, 2],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'fenrir/saturn/orb', parent: 'saturn' }]
				},
				fornjot: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Fornjot',
					trail: { length: 61869312, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'fornjot/saturn/orb', parent: 'saturn' }]
				},
				greip: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Greip',
					trail: { length: 39163392, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'greip/saturn/orb', parent: 'saturn' }]
				},
				hati: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Hati',
					trail: { length: 44627760, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hati/saturn/orb', parent: 'saturn' }]
				},
				helene: {
					groups: ['saturn', 'moons', 'minor', 'trojan'],
					radius: 17.6,
					label: 'Helene',
					trail: { length: 118234.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [17.6, 17.6, 17.6],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'helene/saturn/orb', parent: 'saturn' }, { url: 'helene/ori' }]
				},
				hyrrokkin: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Hyrrokkin',
					trail: { length: 39497328, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'hyrrokkin/saturn/orb', parent: 'saturn' }]
				},
				ijiraq: {
					groups: ['saturn', 'moons', 'minor', 'inuit'],
					radius: 6,
					label: 'Ijiraq',
					trail: { length: 19516464, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [6, 6, 6],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'ijiraq/saturn/orb', parent: 'saturn' }]
				},
				janus: {
					groups: ['saturn', 'moons', 'minor', 'co-orbital'],
					radius: 89.5,
					label: 'Janus',
					trail: { length: 30009.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [89.5, 89.5, 89.5],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'janus/saturn/orb', parent: 'saturn' }, { url: 'janus/ori' }]
				},
				jarnsaxa: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Jarnsaxa',
					trail: { length: 40771296, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'jarnsaxa/saturn/orb', parent: 'saturn' }]
				},
				kari: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Kari',
					trail: { length: 53786592, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kari/saturn/orb', parent: 'saturn' }]
				},
				kiviuq: {
					groups: ['saturn', 'moons', 'minor', 'inuit'],
					radius: 8,
					label: 'Kiviuq',
					trail: { length: 19360512, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [8, 8, 8],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'kiviuq/saturn/orb', parent: 'saturn' }]
				},
				loge: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Loge',
					trail: { length: 56201040, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'loge/saturn/orb', parent: 'saturn' }]
				},
				methone: {
					groups: ['saturn', 'moons', 'minor', 'alkyonides'],
					radius: 1.6,
					label: 'Methone',
					trail: { length: 43613.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [1.6, 1.6, 1.6],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'methone/saturn/orb', parent: 'saturn' }]
				},
				mundilfari: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3.5,
					label: 'Mundilfari',
					trail: { length: 41329440, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [3.5, 3.5, 3.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'mundilfari/saturn/orb', parent: 'saturn' }]
				},
				narvi: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3.5,
					label: 'Narvi',
					trail: { length: 43565040, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3.5, 3.5, 3.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'narvi/saturn/orb', parent: 'saturn' }]
				},
				paaliaq: {
					groups: ['saturn', 'moons', 'minor', 'inuit'],
					radius: 11,
					label: 'Paaliaq',
					trail: { length: 29936736, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [11, 11, 11],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'paaliaq/saturn/orb', parent: 'saturn' }]
				},
				pallene: {
					groups: ['saturn', 'moons', 'minor', 'alkyonides'],
					radius: 2.5,
					label: 'Pallene',
					trail: { length: 49842, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [2.5, 2.5, 2.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'pallene/saturn/orb', parent: 'saturn' }]
				},
				pan: {
					groups: ['saturn', 'moons', 'minor', 'ring shepherd'],
					radius: 14.1,
					label: 'Pan',
					trail: { length: 24842, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [14.1, 14.1, 14.1],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'pan/saturn/orb', parent: 'saturn' }, { url: 'pan/ori' }]
				},
				pandora: {
					groups: ['saturn', 'moons', 'minor', 'ring shepherd'],
					radius: 40.7,
					label: 'Pandora',
					trail: { length: 27151, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [40.7, 40.7, 40.7],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'pandora/saturn/orb', parent: 'saturn' }, { url: 'pandora/ori' }]
				},
				phoebe: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 106.5,
					label: 'Phoebe',
					trail: { length: 23547888, color: [0.72, 0.65, 0.52, 0.7] },
					model: { url: '$STATIC_ASSETS_URL/models/phoebe/phoebe.gltf' },
					dynamo: [{ url: 'phoebe/saturn/orb', parent: 'saturn' }, { url: 'phoebe/ori' }]
				},
				polydeuces: {
					groups: ['saturn', 'moons', 'minor', 'trojan'],
					radius: 1.3,
					label: 'Polydeuces',
					trail: { length: 118234.5, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [1.3, 1.3, 1.3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'polydeuces/saturn/orb', parent: 'saturn' }]
				},
				prometheus: {
					groups: ['saturn', 'moons', 'minor', 'ring shepherd'],
					radius: 43.1,
					label: 'Prometheus',
					trail: { length: 26481, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [43.1, 43.1, 43.1],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'prometheus/saturn/orb', parent: 'saturn' }, { url: 'prometheus/ori' }]
				},
				siarnaq: {
					groups: ['saturn', 'moons', 'minor', 'inuit'],
					radius: 20,
					label: 'Siarnaq',
					trail: { length: 38226816, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [20, 20, 20],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'siarnaq/saturn/orb', parent: 'saturn' }]
				},
				skathi: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 4,
					label: 'Skathi',
					trail: { length: 31644864, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [4, 4, 4],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'skathi/saturn/orb', parent: 'saturn' }]
				},
				skoll: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Skoll',
					trail: { length: 37254384, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'skoll/saturn/orb', parent: 'saturn' }]
				},
				surtur: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3,
					label: 'Surtur',
					trail: { length: 53669952, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'surtur/saturn/orb', parent: 'saturn' }]
				},
				suttungr: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3.5,
					label: 'Suttungr',
					trail: { length: 44185824, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [3.5, 3.5, 3.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'suttungr/saturn/orb', parent: 'saturn' }]
				},
				tarqeq: {
					groups: ['saturn', 'moons', 'minor', 'inuit'],
					radius: 3,
					label: 'Tarqeq',
					trail: { length: 38657952, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3, 3, 3],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'tarqeq/saturn/orb', parent: 'saturn' }]
				},
				tarvos: {
					groups: ['saturn', 'moons', 'minor', 'gallic'],
					radius: 7.5,
					label: 'Tarvos',
					trail: { length: 40790736, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [7.5, 7.5, 7.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'tarvos/saturn/orb', parent: 'saturn' }]
				},
				telesto: {
					groups: ['saturn', 'moons', 'minor', 'trojan'],
					radius: 12.4,
					label: 'Telesto',
					trail: { length: 81553, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [12.4, 12.4, 12.4],
						shadowEntities: ['saturn']
					},
					dynamo: [{ url: 'telesto/saturn/orb', parent: 'saturn' }, { url: 'telesto/ori' }]
				},
				thrymr: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 3.5,
					label: 'Thrymr',
					trail: { length: 46573488, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [3.5, 3.5, 3.5],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'thrymr/saturn/orb', parent: 'saturn' }]
				},
				ymir: {
					groups: ['saturn', 'moons', 'minor', 'norse'],
					radius: 9,
					label: 'Ymir',
					trail: { length: 54179280, color: [0.72, 0.65, 0.52, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [9, 9, 9],
						shadowEntities: ['saturn']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'ymir/saturn/orb', parent: 'saturn' }]
				}
			}),
			Er.register({
				ariel: {
					groups: ['uranus', 'moons', 'major'],
					radius: 578.9,
					label: 'Ariel',
					trail: { length: 108864, color: [0.67, 0.92, 1, 0.7] },
					spheroid: {
						equatorialRadius: 578.9,
						polarRadius: 578.9,
						features: ['shadowEntities'],
						textures: { color: { url: 'ariel/color_$SIZE_$FACE.png', sizes: [4, 512] } },
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'ariel/uranus/orb', parent: 'uranus' }, { url: 'ariel/ori' }]
				},
				miranda: {
					groups: ['uranus', 'moons', 'major'],
					radius: 235.8,
					label: 'Miranda',
					trail: { length: 61062.5, color: [0.67, 0.92, 1, 0.7] },
					spheroid: {
						equatorialRadius: 235.8,
						polarRadius: 235.8,
						features: ['shadowEntities'],
						textures: { color: { url: 'miranda/color_$SIZE_$FACE.png', sizes: [4, 256] } },
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'miranda/uranus/orb', parent: 'uranus' }, { url: 'miranda/ori' }]
				},
				oberon: {
					groups: ['uranus', 'moons', 'major'],
					radius: 761.4,
					label: 'Oberon',
					trail: { length: 581611.5, color: [0.67, 0.92, 1, 0.7] },
					spheroid: {
						equatorialRadius: 761.4,
						polarRadius: 761.4,
						features: ['shadowEntities'],
						textures: { color: { url: 'oberon/color_$SIZE_$FACE.png', sizes: [4, 512] } },
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'oberon/uranus/orb', parent: 'uranus' }, { url: 'oberon/ori' }]
				},
				titania: {
					groups: ['uranus', 'moons', 'major'],
					radius: 788.4,
					label: 'Titania',
					trail: { length: 376109.5, color: [0.67, 0.92, 1, 0.7] },
					spheroid: {
						equatorialRadius: 788.4,
						polarRadius: 788.4,
						features: ['shadowEntities'],
						textures: { color: { url: 'titania/color_$SIZE_$FACE.png', sizes: [4, 512] } },
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'titania/uranus/orb', parent: 'uranus' }, { url: 'titania/ori' }]
				},
				umbriel: {
					groups: ['uranus', 'moons', 'major'],
					radius: 584.7,
					label: 'Umbriel',
					trail: { length: 179021, color: [0.67, 0.92, 1, 0.7] },
					spheroid: {
						equatorialRadius: 584.7,
						polarRadius: 584.7,
						features: ['shadowEntities'],
						textures: { color: { url: 'umbriel/color_$SIZE_$FACE.png', sizes: [4, 256] } },
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'umbriel/uranus/orb', parent: 'uranus' }, { url: 'umbriel/ori' }]
				}
			}),
			Er.register({
				belinda: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 45,
					label: 'Belinda',
					trail: { length: 26936.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [45, 45, 45],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'belinda/uranus/orb', parent: 'uranus' }, { url: 'belinda/ori' }]
				},
				bianca: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 25.7,
					label: 'Bianca',
					trail: { length: 18774, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [25.7, 25.7, 25.7],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'bianca/uranus/orb', parent: 'uranus' }, { url: 'bianca/ori' }]
				},
				caliban: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 36,
					label: 'Caliban',
					trail: { length: 50068800, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [36, 36, 36],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'caliban/uranus/orb', parent: 'uranus' }]
				},
				cordelia: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 20.1,
					label: 'Cordelia',
					trail: { length: 14473.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [20.1, 20.1, 20.1],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'cordelia/uranus/orb', parent: 'uranus' }, { url: 'cordelia/ori' }]
				},
				cressida: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 39.8,
					label: 'Cressida',
					trail: { length: 20026, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [39.8, 39.8, 39.8],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'cressida/uranus/orb', parent: 'uranus' }, { url: 'cressida/ori' }]
				},
				cupid: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 9,
					label: 'Cupid',
					trail: { length: 26697.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [9, 9, 9],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'cupid/uranus/orb', parent: 'uranus' }]
				},
				desdemona: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 32,
					label: 'Desdemona',
					trail: { length: 20461.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [32, 32, 32],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'desdemona/uranus/orb', parent: 'uranus' }, { url: 'desdemona/ori' }]
				},
				ferdinand: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 10,
					label: 'Ferdinand',
					trail: { length: 243941760, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [10, 10, 10],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'ferdinand/uranus/orb', parent: 'uranus' }]
				},
				francisco: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 11,
					label: 'Francisco',
					trail: { length: 23030784, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [11, 11, 11],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'francisco/uranus/orb', parent: 'uranus' }]
				},
				juliet: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 46.8,
					label: 'Juliet',
					trail: { length: 21300.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [46.8, 46.8, 46.8],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'juliet/uranus/orb', parent: 'uranus' }, { url: 'juliet/ori' }]
				},
				mab: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 12.5,
					label: 'Mab',
					trail: { length: 39873.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [12.5, 12.5, 12.5],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'mab/uranus/orb', parent: 'uranus' }]
				},
				margaret: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 10,
					label: 'Margaret',
					trail: { length: 146430720, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [10, 10, 10],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'margaret/uranus/orb', parent: 'uranus' }]
				},
				ophelia: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 22.4,
					label: 'Ophelia',
					trail: { length: 16260.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [22.4, 22.4, 22.4],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'ophelia/uranus/orb', parent: 'uranus' }, { url: 'ophelia/ori' }]
				},
				perdita: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 15,
					label: 'Perdita',
					trail: { length: 27561.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [15, 15, 15],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'perdita/uranus/orb', parent: 'uranus' }]
				},
				portia: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 67.6,
					label: 'Portia',
					trail: { length: 22170, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [67.6, 67.6, 67.6],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'portia/uranus/orb', parent: 'uranus' }, { url: 'portia/ori' }]
				},
				prospero: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 25,
					label: 'Prospero',
					trail: { length: 172177920, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [25, 25, 25],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'prospero/uranus/orb', parent: 'uranus' }]
				},
				puck: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 81,
					label: 'Puck',
					trail: { length: 32911, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [81, 81, 81],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'puck/uranus/orb', parent: 'uranus' }, { url: 'puck/ori' }]
				},
				rosalind: {
					groups: ['uranus', 'moons', 'inner'],
					radius: 36,
					label: 'Rosalind',
					trail: { length: 24125.5, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [36, 36, 36],
						shadowEntities: ['uranus']
					},
					dynamo: [{ url: 'rosalind/uranus/orb', parent: 'uranus' }, { url: 'rosalind/ori' }]
				},
				setebos: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 24,
					label: 'Setebos',
					trail: { length: 190278720, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [24, 24, 24],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'setebos/uranus/orb', parent: 'uranus' }]
				},
				stephano: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 16,
					label: 'Stephano',
					trail: { length: 58449600, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf',
						scale: [16, 16, 16],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'stephano/uranus/orb', parent: 'uranus' }]
				},
				sycorax: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 82,
					label: 'Sycorax',
					trail: { length: 110885760, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf',
						scale: [82, 82, 82],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'sycorax/uranus/orb', parent: 'uranus' }]
				},
				trinculo: {
					groups: ['uranus', 'moons', 'irregular'],
					radius: 9,
					label: 'Trinculo',
					trail: { length: 65499840, color: [0.67, 0.92, 1, 0.7] },
					model: {
						url: '$STATIC_ASSETS_URL/models/generic/asteroid_1/model.gltf',
						scale: [9, 9, 9],
						shadowEntities: ['uranus']
					},
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'trinculo/uranus/orb', parent: 'uranus' }]
				}
			}),
			Er.register({
				sc_3d_winds: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.002,
					extentsRadius: 0.0025,
					label: '3D-Winds',
					trail: { length: 5573 },
					dynamo: [{ url: 'sc_3d_winds', parent: 'earth' }]
				},
				sc_ace: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 8e-4,
					extentsRadius: 0.0023,
					label: 'ACE',
					trail: { length: 31715490 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_ace/ace.gltf', shadowEntities: ['earth', 'moon'] },
					align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.0033 },
					animdata: [{ url: 'sc_ace', type: 'pos', parent: 'earth' }]
				},
				sc_acrimsat: {
					groups: ['earth', 'spacecraft'],
					radius: 0.0015,
					label: 'ACRIMSAT',
					trail: { length: 5933.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_acrimsat/acrimsat.gltf', shadowEntities: ['earth', 'moon'] },
					align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.00238 },
					dynamo: [{ url: 'sc_acrimsat', parent: 'earth' }]
				},
				sc_aim: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 7e-4,
					extentsRadius: 0.0014,
					label: 'AIM',
					trail: { length: 5788.83 },
					dynamo: [{ url: 'sc_aim', parent: 'earth' }]
				},
				sc_aqua: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.004,
					extentsRadius: 0.007,
					label: 'Aqua',
					trail: { length: 5933.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_aqua/Aqua.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_aqua', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_aqua', parent: 'earth' }]
				},
				sc_ascends: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'ASCENDS',
					trail: { length: 5573 },
					dynamo: [{ url: 'sc_ascends', parent: 'earth' }]
				},
				sc_aura: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00345,
					extentsRadius: 0.0085,
					label: 'Aura',
					trail: { length: 5933.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_aura/Aura.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_aura', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_aura', parent: 'earth' }]
				},
				sc_c_nofs: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'C/NOFS',
					trail: { length: 5573 },
					dynamo: [{ url: 'sc_c_nofs', parent: 'earth' }]
				},
				sc_calipso: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00165,
					extentsRadius: 0.0043,
					label: 'CALIPSO',
					trail: { length: 5933 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_calipso', axis: yt.YAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_calipso/calipso.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_calipso', parent: 'earth' }]
				},
				sc_chandra: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0059,
					extentsRadius: 0.01,
					label: 'Chandra',
					trail: { length: 228505.5 },
					align: { primary: { type: 'point', target: 'sun', axis: new yt(-0.70710678118, -0.70710678118, 0) } },
					model: { url: '$STATIC_ASSETS_URL/models/sc_chandra/chandra.gltf', shadowEntities: ['earth', 'moon'] },
					animdata: [{ url: 'sc_chandra/earth/all', type: 'pos', parent: 'earth' }]
				},
				sc_clarreo: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'CLARREO',
					trail: { length: 5573 },
					dynamo: [{ url: 'sc_clarreo', parent: 'earth' }]
				},
				sc_cloudsat: {
					groups: ['earth', 'spacecraft'],
					radius: 0.0025,
					label: 'CloudSat',
					trail: { length: 5933.5 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_cloudsat', axis: yt.XAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cloudsat/CloudSat.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cloudsat', parent: 'earth' }]
				},
				sc_cluster_ii_fm5: {
					groups: ['earth', 'spacecraft'],
					radius: 0.00145,
					label: 'Rumba',
					trail: { length: 195541.5 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_cluster_ii_fm5', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cluster_ii_fm5', parent: 'earth' }]
				},
				sc_cluster_ii_fm6: {
					groups: ['earth', 'spacecraft'],
					radius: 0.00145,
					label: 'Salsa',
					trail: { length: 195351 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_cluster_ii_fm6', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cluster_ii_fm6', parent: 'earth' }]
				},
				sc_cluster_ii_fm7: {
					groups: ['earth', 'spacecraft'],
					radius: 0.00145,
					label: 'Samba',
					trail: { length: 195316 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_cluster_ii_fm7', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cluster_ii_fm7', parent: 'earth' }]
				},
				sc_cluster_ii_fm8: {
					groups: ['earth', 'spacecraft'],
					radius: 0.00145,
					label: 'Tango',
					trail: { length: 195388 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_cluster_ii_fm8', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cluster_ii_fm8', parent: 'earth' }]
				},
				sc_cygnss_1: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 1',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_1', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_1', parent: 'earth' }]
				},
				sc_cygnss_2: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 2',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_2', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_2', parent: 'earth' }]
				},
				sc_cygnss_3: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 3',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_3', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_3', parent: 'earth' }]
				},
				sc_cygnss_4: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 4',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_4', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_4', parent: 'earth' }]
				},
				sc_cygnss_5: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 5',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_5', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_5', parent: 'earth' }]
				},
				sc_cygnss_6: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 6',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_6', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_6', parent: 'earth' }]
				},
				sc_cygnss_7: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 7',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_7', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_7', parent: 'earth' }]
				},
				sc_cygnss_8: {
					groups: ['earth', 'spacecraft'],
					radius: 8e-4,
					label: 'CYGNSS 8',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_cygnss_8', axis: yt.YAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_cygnss_8', parent: 'earth' }]
				},
				sc_dscovr: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 9e-4,
					extentsRadius: 0.002,
					label: 'DSCOVR',
					trail: { length: 31536e3 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.XAxisNeg },
						secondary: { type: 'velocity', target: 'sc_dscovr', axis: yt.ZAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_dscovr/dscovr.gltf', shadowEntities: ['earth', 'moon'] },
					animdata: [{ url: 'sc_dscovr/earth/all', type: 'pos', parent: 'earth' }]
				},
				sc_eo_1: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.003,
					extentsRadius: 0.001,
					label: 'EO-1',
					trail: { length: 5933.33 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxis },
						secondary: { type: 'velocity', target: 'sc_eo_1', axis: yt.XAxisNeg }
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_eo_1/eo-1.gltf',
						rotate: [{ y: 45 }],
						shadowEntities: ['earth', 'moon']
					},
					dynamo: [{ url: 'sc_eo_1', parent: 'earth' }]
				},
				sc_explorer_1: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.001,
					extentsRadius: 0.001,
					label: 'Explorer-1',
					trail: { length: 6885.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_explorer_1/Explorer_1.gltf', shadowEntities: ['earth', 'moon'] },
					align: { primary: { type: 'velocity', target: 'sc_explorer_1', axis: yt.YAxis } },
					spin: { axis: yt.YAxisNeg, periodInHours: 22e-6 },
					animdata: [{ url: 'sc_explorer_1', type: 'pos', parent: 'earth' }]
				},
				sc_face: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'FACE',
					trail: { length: 5933.33 },
					dynamo: [{ url: 'sc_face', parent: 'earth' }]
				},
				sc_fgrst: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0014,
					extentsRadius: 0.004,
					label: 'FGRST',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_fgrst', parent: 'earth' }]
				},
				sc_gacm: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'GACM',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_gacm', parent: 'earth' }]
				},
				sc_galex: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.001,
					extentsRadius: 0.0014,
					label: 'GALEX',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_galex', parent: 'earth' }]
				},
				sc_geo_cape: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'GEO-CAPE',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_geo_cape', parent: 'earth' }]
				},
				sc_geotail: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0018,
					extentsRadius: 0.003,
					label: 'Geotail',
					trail: { length: 450372 },
					animdata: [{ url: 'sc_geotail/earth/all', type: 'pos', parent: 'earth' }]
				},
				sc_goes_12: {
					groups: ['earth', 'spacecraft'],
					radius: 0.003,
					label: 'GOES 12',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_goes_12', parent: 'earth' }]
				},
				sc_goes_13: {
					groups: ['earth', 'spacecraft'],
					radius: 0.003,
					label: 'GOES 13',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_goes_13', parent: 'earth' }]
				},
				sc_goes_14: {
					groups: ['earth', 'spacecraft'],
					radius: 0.003,
					label: 'GOES 14',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_goes_14', parent: 'earth' }]
				},
				sc_goes_15: {
					groups: ['earth', 'spacecraft'],
					radius: 0.003,
					label: 'GOES 15',
					trail: { length: 5733 },
					dynamo: [{ url: 'sc_goes_15', parent: 'earth' }]
				},
				sc_gpm: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.002,
					extentsRadius: 0.004,
					label: 'GPM',
					trail: { length: 5549.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_gpm/GPM.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_gpm', axis: yt.ZAxis }
					},
					dynamo: [{ url: 'sc_gpm', parent: 'earth' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('spin');
						e instanceof fr &&
							(e.setJoint('GPM_antenna'),
							e.setRate(T.degToRad(192)),
							e.setAxis(yt.YAxisNeg, !0),
							e.setClampedToRealTime(!0));
					}
				},
				sc_grace_1: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0015,
					extentsRadius: 0.0015,
					label: 'GRACE-1',
					trail: { length: 5575 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_grace/grace.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'sc_grace_2', axis: yt.YAxisNeg },
						secondary: { type: 'point', target: 'earth', axis: yt.ZAxis }
					},
					animdata: [{ url: 'sc_grace-1', type: 'pos', parent: 'earth' }]
				},
				sc_grace_2: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0015,
					extentsRadius: 0.0015,
					label: 'GRACE-2',
					trail: { length: 5575 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_grace/grace.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'sc_grace_1', axis: yt.YAxisNeg },
						secondary: { type: 'point', target: 'earth', axis: yt.ZAxis }
					},
					animdata: [{ url: 'sc_grace-2', type: 'pos', parent: 'earth' }]
				},
				sc_grace_fo1: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0015,
					extentsRadius: 0.0015,
					label: 'GRACE-FO1',
					trail: { length: 5575 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_grace_fo/graceFO.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'sc_grace_fo2', axis: yt.ZAxisNeg },
						secondary: { type: 'point', target: 'earth', axis: yt.YAxisNeg }
					},
					dynamo: [{ url: 'sc_grace_fo1', parent: 'earth' }]
				},
				sc_grace_fo2: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0015,
					extentsRadius: 0.0015,
					label: 'GRACE-FO2',
					trail: { length: 5575 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_grace_fo/graceFO.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'sc_grace_fo1', axis: yt.ZAxisNeg },
						secondary: { type: 'point', target: 'earth', axis: yt.YAxisNeg }
					},
					dynamo: [{ url: 'sc_grace_fo2', parent: 'earth' }]
				},
				sc_grifex: {
					groups: ['earth', 'spacecraft'],
					radius: 15e-5,
					label: 'GRIFEX',
					trail: { length: 5706.25 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_grifex', axis: yt.ZAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_grifex/grifex.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_grifex', parent: 'earth' }]
				},
				sc_hubble_space_telescope: {
					groups: ['earth', 'spacecraft', 'telescope'],
					occlusionRadius: 0.0066,
					extentsRadius: 0.066,
					label: 'Hubble',
					trail: { length: 5748.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_hubble/Hubble.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_hubble_space_telescope', axis: yt.YAxis }
					},
					dynamo: [{ url: 'sc_hubble_space_telescope/earth/orb', parent: 'earth' }]
				},
				sc_hyspiri: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'HyspIRI',
					trail: { length: 5733 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_hyspiri', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_hyspiri/HyspIRI.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_hyspiri', parent: 'earth' }]
				},
				sc_ibex: {
					groups: ['earth', 'spacecraft'],
					radius: 5e-4,
					label: 'IBEX',
					trail: { length: 797489.16 },
					align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } },
					spin: { axis: yt.YAxis, periodInHours: 0.00416 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_ibex/iBEX.gltf', shadowEntities: ['earth', 'moon'] },
					animdata: [{ url: 'sc_ibex', type: 'pos', parent: 'earth' }]
				},
				sc_icesat_2: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00198,
					extentsRadius: 0.004,
					label: 'ICESat-2',
					trail: { length: 5653.2 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_icesatii/ICESat2.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxis },
						secondary: { type: 'velocity', target: 'sc_icesat_2', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_icesat_2', parent: 'earth' }]
				},
				sc_image: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00113,
					extentsRadius: 0.01,
					label: 'IMAGE',
					trail: { length: 55541 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_image/image.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_image', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_image', parent: 'earth' }]
				},
				sc_integral: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0025,
					extentsRadius: 0.005,
					label: 'INTEGRAL',
					trail: { length: 229689 },
					dynamo: [{ url: 'sc_integral', parent: 'earth' }]
				},
				sc_ipex: {
					groups: ['earth', 'spacecraft'],
					radius: 1e-4,
					label: 'IPEX',
					trail: { length: 5862 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_ipex', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_ipex/IPEX.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_ipex', parent: 'earth' }]
				},
				sc_isas: {
					groups: ['earth', 'spacecraft'],
					radius: 0.001,
					label: 'ISAS',
					trail: { length: 92680.5 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_isas', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_isas/isas.gltf', shadowEntities: ['earth', 'moon'] },
					animdata: [{ url: 'sc_isas', type: 'pos', parent: 'earth' }]
				},
				sc_iss: {
					groups: ['earth', 'spacecraft'],
					radius: 0.055,
					label: 'ISS',
					trail: { length: 5573 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_iss/ISS_stationary.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_iss', axis: yt.ZAxis }
					},
					dynamo: [{ url: 'sc_iss', parent: 'earth' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = new yt(0, 0.5, 0.5 * Math.sqrt(3)),
							n = new yt(0, 0.5 * Math.sqrt(3), -0.5),
							r = new yt(0, 0.5, 0.5 * Math.sqrt(3)),
							i = t.addController('align');
						i instanceof ln &&
							(i.setJoint('20_P4_Truss'),
							i.setPrimaryAxis(yt.XAxis),
							i.setSecondaryAxis(e),
							i.setSecondaryAlignType('point'),
							i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('23_S4_Truss'),
								i.setPrimaryAxis(yt.XAxis),
								i.setSecondaryAxis(e),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('20_P4_Truss_01'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('20_P4_Truss_02'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('23_S4_Truss_01'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('23_S4_Truss_02'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('32_S6_Truss_01'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('32_S6_Truss_02'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('08_P6_Truss_01'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun')),
							(i = t.addController('align')) instanceof ln &&
								(i.setJoint('08_P6_Truss_02'),
								i.setPrimaryAxis(n),
								i.setSecondaryAxis(r),
								i.setSecondaryAlignType('point'),
								i.setSecondaryTargetEntity('sun'));
						var o = t.addController('spin');
						o.setJoint('RapidScat_dish'),
							o.setRate(T.degToRad(108)),
							o.setAxis(yt.ZAxis, !0),
							o.setClampedToRealTime(!0),
							o.setCoverage(new J(465418867.184, 524890952.183));
						var a = t.getComponentByType('model');
						a.setHiddenObject('45_RapidScat', !0),
							t.addController('coverage').addCoverage(
								new J(465418867.184, 575406069.184),
								function () {
									a.setHiddenObject('45_RapidScat', !1);
								},
								function () {
									a.setHiddenObject('45_RapidScat', !0);
								}
							);
					}
				},
				sc_iss_ecostress: {
					groups: ['instrument', 'sc_iss'],
					radius: 0.002,
					label: 'ECOSTRESS',
					fixed: { orientation: tt.Identity, position: new yt(0.0200195, -0.00202631, 0.0161099), parent: 'sc_iss' },
					postCreateFunction: function postCreateFunction(t) {
						t.addController('rotateByParentOrientation');
					}
				},
				sc_iss_oco_3: {
					groups: ['instrument', 'sc_iss'],
					radius: 8e-4,
					label: 'OCO-3',
					fixed: { orientation: tt.Identity, position: new yt(0.0156458, -0.00195982, 0.0200232), parent: 'sc_iss' },
					postCreateFunction: function postCreateFunction(t) {
						t.addController('rotateByParentOrientation');
					}
				},
				sc_iss_rapidscat: {
					groups: ['instrument', 'sc_iss'],
					radius: 0.002,
					label: 'RapidScat',
					fixed: { orientation: tt.Identity, position: new yt(-0.0100725, -0.00133401, 0.0162145), parent: 'sc_iss' },
					postCreateFunction: function postCreateFunction(t) {
						t.addController('rotateByParentOrientation');
					}
				},
				sc_jason_1: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0014,
					extentsRadius: 0.004,
					label: 'Jason-1',
					trail: { length: 6744.5 },
					animdata: [{ url: 'sc_jason_1', type: 'pos', parent: 'earth' }]
				},
				sc_jason_2: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0014,
					extentsRadius: 0.004,
					label: 'OSTM/Jason-2',
					trail: { length: 6744.25 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_jason_2', axis: yt.ZAxisNeg }
					},
					dynamo: [{ url: 'sc_jason_2', parent: 'earth' }]
				},
				sc_jason_3: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0014,
					extentsRadius: 0.004,
					label: 'Jason-3',
					trail: { length: 6721 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_jason_3', axis: yt.ZAxisNeg }
					},
					dynamo: [{ url: 'sc_jason_3', parent: 'earth' }]
				},
				sc_landsat_5: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'Landsat 5',
					trail: { length: 5933.33 },
					dynamo: [{ url: 'sc_landsat_5', parent: 'earth' }]
				},
				sc_landsat_7: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.004,
					extentsRadius: 0.004,
					label: 'Landsat 7',
					trail: { length: 5933.33 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxis },
						secondary: { type: 'velocity', target: 'sc_landsat_7', axis: yt.ZAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_landsat_7/LandSat7.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_landsat_7', parent: 'earth' }]
				},
				sc_landsat_8: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.004,
					extentsRadius: 0.004,
					label: 'Landsat 8',
					trail: { length: 5933.33 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxisNeg },
						secondary: { type: 'velocity', target: 'sc_landsat_8', axis: yt.YAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_landsat_8/LandSat8.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_landsat_8', parent: 'earth' }]
				},
				sc_landsat_9: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.004,
					extentsRadius: 0.004,
					label: 'Landsat 9',
					trail: { length: 5933.33 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxis },
						secondary: { type: 'velocity', target: 'sc_landsat_9', axis: yt.XAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_landsat_9/Landsat9.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_landsat_9', parent: 'earth' }]
				},
				sc_list: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'LIST',
					trail: { length: 5933.33 },
					dynamo: [{ url: 'sc_list', parent: 'earth' }]
				},
				sc_m_cubed: {
					groups: ['earth', 'spacecraft'],
					radius: 1e-4,
					label: 'M-Cubed',
					trail: { length: 5768.333333333333 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_m_cubed', axis: yt.XAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_m_cubed/mCubed.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_m_cubed', parent: 'earth' }]
				},
				sc_mcubed_2: {
					groups: ['earth', 'spacecraft'],
					radius: 1e-4,
					label: 'MCubed-2',
					trail: { length: 5861 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.XAxisNeg },
						secondary: { type: 'velocity', target: 'sc_mcubed_2', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_mcubed_2/M-Cubed2.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_mcubed_2', parent: 'earth' }]
				},
				sc_mms_1: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0017,
					extentsRadius: 0.013,
					label: 'MMS 1',
					trail: { length: 85994 },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.00556 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_mms_1', parent: 'earth' }]
				},
				sc_mms_2: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0017,
					extentsRadius: 0.013,
					label: 'MMS 2',
					trail: { length: 85962 },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.00556 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_mms_2', parent: 'earth' }]
				},
				sc_mms_3: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0017,
					extentsRadius: 0.013,
					label: 'MMS 3',
					trail: { length: 86347 },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.00556 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_mms_3', parent: 'earth' }]
				},
				sc_mms_4: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0017,
					extentsRadius: 0.013,
					label: 'MMS 4',
					trail: { length: 86024 },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.00556 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_mms_4', parent: 'earth' }]
				},
				sc_nisar: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.006,
					extentsRadius: 0.006,
					label: 'NISAR',
					trail: { length: 5573 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_nisar', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_nisar/Nisar.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_nisar', parent: 'earth' }]
				},
				sc_noaa_14: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'NOAA 14',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_noaa_14', parent: 'earth' }]
				},
				sc_noaa_15: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'NOAA 15',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_noaa_15', parent: 'earth' }]
				},
				sc_noaa_16: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'NOAA 16',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_noaa_16', parent: 'earth' }]
				},
				sc_noaa_17: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'NOAA 17',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_noaa_17', parent: 'earth' }]
				},
				sc_noaa_18: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'NOAA 18',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_noaa_18', parent: 'earth' }]
				},
				sc_noaa_19: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'NOAA 19',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_noaa_19', parent: 'earth' }]
				},
				sc_nustar: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.011,
					extentsRadius: 0.011,
					label: 'NuSTAR',
					trail: { length: 5798.66 },
					dynamo: [{ url: 'sc_nustar', parent: 'earth' }]
				},
				sc_oco_2: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0021,
					extentsRadius: 0.003,
					label: 'OCO-2',
					trail: { length: 5933.333333333333 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_oco_2/oco2.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxisNeg },
						secondary: { type: 'point', target: 'sun', axis: yt.YAxis }
					},
					dynamo: [{ url: 'sc_oco_2', parent: 'earth' }]
				},
				sc_path: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'PATH',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_path', parent: 'earth' }]
				},
				sc_polar: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0012,
					extentsRadius: 0.005,
					label: 'Polar',
					trail: { length: 66571 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_polar', axis: yt.ZAxis }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_polar/polar.gltf', shadowEntities: ['earth', 'moon'] },
					animdata: [{ url: 'sc_polar', type: 'pos', parent: 'earth' }]
				},
				sc_quikscat: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0016,
					extentsRadius: 0.0016,
					label: 'QuikSCAT',
					trail: { length: 6061.33 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_quikscat', axis: yt.XAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_quikscat/QuikSCAT.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_quikscat', parent: 'earth' }]
				},
				sc_race: {
					groups: ['earth', 'spacecraft'],
					radius: 15e-5,
					label: 'RACE',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_race', parent: 'earth' }]
				},
				sc_raincube: {
					groups: ['earth', 'spacecraft'],
					radius: 35e-5,
					label: 'RainCube',
					trail: { length: 5743 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_raincube/Raincube.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_raincube', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_raincube', parent: 'earth' }]
				},
				sc_rax_2: {
					groups: ['earth', 'spacecraft'],
					radius: 2e-4,
					label: 'RAX-2',
					trail: { length: 5743 },
					dynamo: [{ url: 'sc_rax_2', parent: 'earth' }]
				},
				sc_rbsp_a: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'Van Allen Probe A',
					trail: { length: 32214 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_rbsp/rbsp.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_rbsp_a', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_rbsp_a', parent: 'earth' }]
				},
				sc_rbsp_b: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'Van Allen Probe B',
					trail: { length: 32574 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_rbsp/rbsp.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_rbsp_b', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_rbsp_b', parent: 'earth' }]
				},
				sc_sac_d: {
					groups: ['earth', 'spacecraft'],
					radius: 0.003,
					label: 'Aquarius',
					trail: { length: 5884.25 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_sac_d/aquarius.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.XAxis },
						secondary: { type: 'velocity', target: 'sc_sac_d', axis: yt.YAxis }
					},
					dynamo: [{ url: 'sc_sac_d', parent: 'earth' }]
				},
				sc_sclp: {
					groups: ['earth', 'spacecraft'],
					radius: 0.004,
					label: 'SCLP',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_sclp', parent: 'earth' }]
				},
				sc_sdo: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0022,
					extentsRadius: 0.00315,
					label: 'SDO',
					trail: { length: 86137.66 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_sdo/sdo.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_sdo', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_sdo', parent: 'earth' }]
				},
				sc_sentinel_6: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0026,
					extentsRadius: 0.0026,
					label: 'Sentinel-6 Michael Freilich',
					trail: { length: 5933.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_sentinel_6/Sentinel6.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_sentinel_6', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_sentinel_6', parent: 'earth' }]
				},
				sc_smap: {
					groups: ['earth', 'spacecraft'],
					radius: 0.003,
					label: 'SMAP',
					trail: { length: 5906.8 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_smap/SMAP.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_smap', axis: yt.XAxis }
					},
					dynamo: [{ url: 'sc_smap', parent: 'earth' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('spin');
						e instanceof fr &&
							(e.setJoint('arm_etc'), e.setRate(T.degToRad(87.6)), e.setAxis(yt.YAxis, !0), e.setClampedToRealTime(!0));
					}
				},
				sc_soho: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00215,
					extentsRadius: 0.00425,
					label: 'SOHO',
					trail: { length: 31536e3 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_soho/soho.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_soho', axis: yt.XAxis }
					},
					animdata: [{ url: 'sc_soho', type: 'pos', parent: 'earth' }]
				},
				sc_sorce: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.001,
					extentsRadius: 0.0022,
					label: 'SORCE',
					trail: { length: 5812.5 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_sorce', axis: yt.XAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_sorce/sorce.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_sorce', parent: 'earth' }]
				},
				sc_suomi_npp: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0022,
					extentsRadius: 0.003,
					label: 'Suomi NPP',
					trail: { length: 5798.66 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_npp/NPP.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.XAxisNeg },
						secondary: { type: 'velocity', target: 'sc_suomi_npp', axis: yt.YAxis }
					},
					dynamo: [{ url: 'sc_suomi_npp', parent: 'earth' }]
				},
				sc_swift: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0028,
					extentsRadius: 0.0028,
					label: 'Swift',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_swift', parent: 'earth' }]
				},
				sc_swot: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.005,
					extentsRadius: 0.006,
					label: 'SWOT',
					trail: { length: 5933 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_swot', axis: yt.XAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_swot/SWOT.gltf', shadowEntities: ['earth', 'moon'] },
					dynamo: [{ url: 'sc_swot', parent: 'earth' }]
				},
				sc_tdrs_3: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 3',
					trail: { length: 86137.33 },
					dynamo: [{ url: 'sc_tdrs_3', parent: 'earth' }]
				},
				sc_tdrs_5: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 5',
					trail: { length: 86137.66 },
					dynamo: [{ url: 'sc_tdrs_5', parent: 'earth' }]
				},
				sc_tdrs_6: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 6',
					trail: { length: 86137.66 },
					dynamo: [{ url: 'sc_tdrs_6', parent: 'earth' }]
				},
				sc_tdrs_7: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 7',
					trail: { length: 86151 },
					dynamo: [{ url: 'sc_tdrs_7', parent: 'earth' }]
				},
				sc_tdrs_8: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 8',
					trail: { length: 86151.2 },
					dynamo: [{ url: 'sc_tdrs_8', parent: 'earth' }]
				},
				sc_tdrs_9: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 9',
					trail: { length: 86151 },
					dynamo: [{ url: 'sc_tdrs_9', parent: 'earth' }]
				},
				sc_tdrs_10: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 10',
					trail: { length: 86151.2 },
					dynamo: [{ url: 'sc_tdrs_10', parent: 'earth' }]
				},
				sc_tdrs_11: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.0085,
					label: 'TDRS 11',
					trail: { length: 86151 },
					dynamo: [{ url: 'sc_tdrs_11', parent: 'earth' }]
				},
				sc_terra: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0034,
					extentsRadius: 0.005,
					label: 'Terra',
					trail: { length: 5933.33 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_terra/Terra.gltf', shadowEntities: ['earth', 'moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_terra', axis: yt.XAxisNeg }
					},
					dynamo: [{ url: 'sc_terra', parent: 'earth' }]
				},
				sc_tess: {
					groups: ['earth', 'spacecraft', 'telescope'],
					occlusionRadius: 0.002,
					extentsRadius: 0.002,
					label: 'TESS',
					trail: { length: 591840 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_tess/TESS.gltf', shadowEntities: ['earth', 'moon'] },
					fixed: { orientation: tt.Identity },
					dynamo: [{ url: 'sc_tess/earth/orb', parent: 'earth' }]
				},
				sc_themis_a: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 4e-4,
					extentsRadius: 0.0017,
					label: 'THEMIS A',
					trail: { length: 98428 },
					dynamo: [{ url: 'sc_themis_a', parent: 'earth' }]
				},
				sc_themis_d: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 4e-4,
					extentsRadius: 0.0017,
					label: 'THEMIS D',
					trail: { length: 114807 },
					dynamo: [{ url: 'sc_themis_d', parent: 'earth' }]
				},
				sc_themis_e: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 4e-4,
					extentsRadius: 0.0017,
					label: 'THEMIS E',
					trail: { length: 105907.5 },
					dynamo: [{ url: 'sc_themis_e', parent: 'earth' }]
				},
				sc_timed: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0015,
					extentsRadius: 0.005,
					label: 'TIMED',
					trail: { length: 5933 },
					dynamo: [{ url: 'sc_timed', parent: 'earth' }]
				},
				sc_trmm: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00255,
					extentsRadius: 0.0073,
					label: 'TRMM',
					trail: { length: 5545.6 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_trmm', axis: yt.XAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_trmm/TRMM.gltf', shadowEntities: ['earth', 'moon'] },
					tle: {
						tleName: 'TRMM',
						url: '$DYNAMIC_ASSETS_URL/tle/local_tles.txt',
						parent: 'earth',
						coverage: [-66052736.817, 482328067.186]
					}
				},
				sc_uars: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00535,
					extentsRadius: 0.00535,
					label: 'UARS',
					trail: { length: 5490 },
					animdata: [{ url: 'sc_uars', type: 'pos', parent: 'earth' }]
				},
				sc_wind: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.0012,
					extentsRadius: 0.0075,
					label: 'WIND',
					trail: { length: 16485927 },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'velocity', target: 'sc_wind', axis: yt.XAxisNeg }
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_wind/wind.gltf', shadowEntities: ['earth', 'moon'] },
					animdata: [{ url: 'sc_wind', type: 'pos', parent: 'earth' }]
				},
				sc_wise: {
					groups: ['earth', 'spacecraft'],
					occlusionRadius: 0.00142,
					extentsRadius: 0.00142,
					label: 'WISE',
					trail: { length: 5715.4 },
					dynamo: [{ url: 'sc_wise', parent: 'earth' }]
				}
			}),
			Er.register({
				sc_apollo_15: {
					groups: ['moon', 'spacecraft'],
					radius: 0.004,
					label: 'Apollo 15',
					trail: { length: 6855 },
					animdata: [{ url: 'sc_apollo_15', type: 'pos', parent: 'moon' }]
				},
				sc_clementine: {
					groups: ['moon', 'spacecraft'],
					radius: 0.002,
					label: 'Clementine',
					trail: { length: 5408.5 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_clementine/clementine.gltf', shadowEntities: ['moon'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
						secondary: { type: 'point', target: 'sun', axis: yt.ZAxisNeg }
					},
					animdata: [{ url: 'sc_clementine/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_grail_a: {
					groups: ['moon', 'spacecraft'],
					radius: 0.001,
					label: 'Ebb',
					trail: { length: 41115.75 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_grail/grail_b.gltf', shadowEntities: ['moon'] },
					align: {
						primary: { type: 'velocity', target: 'sc_grail_a', axis: yt.XAxisNeg },
						secondary: { type: 'point', target: 'moon', axis: yt.ZAxis }
					},
					animdata: [{ url: 'sc_grail_a/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_grail_b: {
					groups: ['moon', 'spacecraft'],
					radius: 0.001,
					label: 'Flow',
					trail: { length: 41239.8 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_grail/grail_b.gltf', shadowEntities: ['moon'] },
					align: {
						primary: { type: 'velocity', target: 'sc_grail_b', axis: yt.XAxisNeg },
						secondary: { type: 'point', target: 'moon', axis: yt.ZAxis }
					},
					animdata: [{ url: 'sc_grail_b/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_ladee: {
					groups: ['moon', 'spacecraft'],
					radius: 0.0012,
					label: 'LADEE',
					trail: { length: 7889.57 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_ladee/ladee.gltf', shadowEntities: ['moon'] },
					align: {
						primary: { type: 'velocity', target: 'sc_ladee', axis: yt.XAxisNeg },
						secondary: { type: 'point', target: 'moon', axis: yt.ZAxis }
					},
					animdata: [{ url: 'sc_ladee/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_lcross: {
					groups: ['moon', 'spacecraft'],
					occlusionRadius: 0.0013,
					extentsRadius: 0.00165,
					label: 'LCROSS',
					trail: { length: 3598022 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_lcross/lcross.gltf', shadowEntities: ['moon'] },
					align: {
						primary: { type: 'velocity', target: 'sc_lcross', axis: yt.XAxisNeg },
						secondary: { type: 'point', target: 'moon', axis: yt.ZAxis }
					},
					animdata: [{ url: 'sc_lcross/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_lunar_prospector: {
					groups: ['moon', 'spacecraft'],
					occlusionRadius: 653e-6,
					extentsRadius: 0.0013653,
					label: 'Lunar Prospector',
					trail: { length: 7260 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_lunar_prospector/lunar_prospector.gltf',
						shadowEntities: ['moon']
					},
					align: { primary: { type: 'align', target: 'moon', axis: yt.YAxisNeg, targetAxis: yt.ZAxis } },
					spin: { axis: yt.YAxisNeg, periodInHours: 0.008333 },
					animdata: [{ url: 'sc_lunar_prospector/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_lunar_reconnaissance_orbiter: {
					groups: ['moon', 'spacecraft'],
					radius: 0.00272,
					label: 'Lunar Reconnaissance Orbiter',
					trail: {
						length: 7106.66,
						lengthCoverages: [
							[1e6, null, 299040641],
							[7106.66, 299040641, null]
						]
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_lunar_reconnaissance_orbiter/LRO.gltf',
						rotate: [{ z: -90 }],
						shadowEntities: ['moon']
					},
					align: {
						primary: { type: 'velocity', target: 'sc_lunar_reconnaissance_orbiter', axis: yt.XAxisNeg },
						secondary: { type: 'point', target: 'moon', axis: yt.ZAxis }
					},
					dynamo: [
						{ url: 'sc_lunar_reconnaissance_orbiter/earth/orb', parent: 'earth' },
						{ url: 'sc_lunar_reconnaissance_orbiter/moon/orb', parent: 'moon' },
						{ url: 'sc_lunar_reconnaissance_orbiter/ori' }
					]
				},
				sc_smart_1: {
					groups: ['moon', 'spacecraft'],
					occlusionRadius: 0.0015,
					extentsRadius: 0.00653,
					label: 'SMART-1',
					trail: { length: 273091 },
					animdata: [{ url: 'sc_smart_1/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_themis_b: {
					groups: ['moon', 'spacecraft'],
					occlusionRadius: 4e-4,
					extentsRadius: 0.0017,
					label: 'ARTEMIS P1',
					trail: { length: 94838 },
					animdata: [{ url: 'sc_themis_b/moon/all', type: 'pos', parent: 'moon' }]
				},
				sc_themis_c: {
					groups: ['moon', 'spacecraft'],
					occlusionRadius: 4e-4,
					extentsRadius: 0.0017,
					label: 'ARTEMIS P2',
					trail: { length: 204186 },
					animdata: [{ url: 'sc_themis_c/moon/all', type: 'pos', parent: 'moon' }]
				}
			}),
			Er.register({
				sc_mars_science_laboratory: {
					groups: ['mars', 'spacecraft', 'landers'],
					radius: 0.001515,
					label: 'MSL',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 397477501],
							[6720, 397477501, 397502026],
							[0, 397502026, null]
						]
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_mars_science_laboratory/msl_cruisestage.gltf' },
					align: {
						primary: { type: 'point', target: 'mars', axis: yt.ZAxisNeg },
						secondary: { type: 'align', target: 'mars', axis: yt.YAxis, targetAxis: yt.ZAxis }
					},
					dynamo: [
						{ url: 'sc_mars_science_laboratory/earth/orb', parent: 'earth' },
						{ url: 'sc_mars_science_laboratory/sun/orb', parent: 'sun' },
						{ url: 'sc_mars_science_laboratory/mars/pos', parent: 'mars' },
						{ url: 'sc_mars_science_laboratory/surface/pos', parent: 'sc_mars_science_laboratory_landing_site' }
					],
					coverages: [
						{
							coverage: [397502026, null],
							enter: function enter(t) {
								t.get('align').setEnabled(!1);
								var e = t.addController('fixed');
								e instanceof Ln && e.setOrientation(tt.Identity);
								var n = t.addController('rotate', 'landingRotation');
								if (n instanceof cr) {
									var r = new tt();
									r.setFromAxes(yt.YAxis, yt.XAxisNeg, void 0),
										n.setRotation(r),
										n.setRotatingOrientation(!1),
										t.addController('rotateByParentOrientation', 'landingFixToParent');
								}
							},
							exit: function exit(t) {
								t.removeController('landingFixToParent'),
									t.removeController('landingRotation'),
									t.get('align').setEnabled(!0);
							}
						}
					]
				},
				sc_mars_science_laboratory_landing_site: {
					groups: ['mars', 'spacecraft', 'sites'],
					radius: 0.001,
					label: 'MSL Landing Site',
					fixed: {
						llaOnSpheroid: new Et((-4.643851 * Math.PI) / 180, (137.4417 * Math.PI) / 180, -4.926878),
						parent: 'mars'
					}
				},
				sc_mars_exploration_rover_1: {
					groups: ['mars', 'spacecraft', 'landers'],
					radius: 0.00115,
					label: 'Opportunity',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 128262836],
							[6720, 128262836, 128278191],
							[0, 128278191, null]
						]
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/mer_static.gltf', rotate: [{ x: 90 }] },
					align: {
						primary: { type: 'point', target: 'mars', axis: yt.ZAxisNeg },
						secondary: { type: 'align', target: 'mars', axis: yt.YAxis, targetAxis: yt.ZAxis }
					},
					dynamo: [
						{ url: 'sc_mars_exploration_rover_1/earth/orb', parent: 'earth' },
						{ url: 'sc_mars_exploration_rover_1/sun/orb', parent: 'sun' },
						{ url: 'sc_mars_exploration_rover_1/mars/pos', parent: 'mars' },
						{ url: 'sc_mars_exploration_rover_1/surface/pos', parent: 'sc_mars_exploration_rover_1_landing_site' }
					],
					coverages: [
						{
							coverage: [128278487, null],
							enter: function enter(t) {
								t.get('align').setEnabled(!1);
								var e = t.addController('fixed');
								e instanceof Ln && e.setOrientation(tt.Identity);
								var n = t.addController('rotate', 'landingRotation');
								if (n instanceof cr) {
									var r = new tt();
									r.setFromAxes(yt.YAxis, yt.XAxisNeg, void 0),
										n.setRotation(r),
										n.setRotatingOrientation(!1),
										t.addController('rotateByParentOrientation', 'landingFixToParent');
								}
							},
							exit: function exit(t) {
								t.removeController('landingFixToParent'),
									t.removeController('landingRotation'),
									t.get('align').setEnabled(!0);
							}
						}
					]
				},
				sc_mars_exploration_rover_1_landing_site: {
					groups: ['mars', 'spacecraft', 'sites'],
					radius: 0.001,
					label: 'Opportunity Landing Site',
					fixed: {
						llaOnSpheroid: new Et((-1.971417 * Math.PI) / 180, (354.47417 * Math.PI) / 180, -2.01849),
						parent: 'mars'
					}
				},
				sc_mars_exploration_rover_2: {
					groups: ['mars', 'spacecraft', 'landers'],
					radius: 0.00115,
					label: 'Spirit',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 579182469.185],
							[6720, 579182469.185, 596552080],
							[1e7, 596552080, null]
						]
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/mer_static.gltf', rotate: [{ x: 90 }] },
					align: {
						primary: { type: 'point', target: 'mars', axis: yt.ZAxisNeg },
						secondary: { type: 'align', target: 'mars', axis: yt.YAxis, targetAxis: yt.ZAxis }
					},
					dynamo: [
						{ url: 'sc_mars_exploration_rover_2/earth/orb', parent: 'earth' },
						{ url: 'sc_mars_exploration_rover_2/sun/orb', parent: 'sun' },
						{ url: 'sc_mars_exploration_rover_2/mars/pos', parent: 'mars' },
						{ url: 'sc_mars_exploration_rover_2/surface/pos', parent: 'sc_mars_exploration_rover_2_landing_site' }
					],
					coverages: [
						{
							coverage: [128278487, null],
							enter: function enter(t) {
								var e = t.addController('rotate', 'landingRotation');
								if (e instanceof cr) {
									var n = new tt();
									n.setFromAxes(yt.YAxis, yt.XAxisNeg, void 0), e.setRotation(n), e.setRotatingOrientation(!1);
								}
								var r = t.addController('rotateByParentOrientation', 'landingFixToParent');
								r instanceof ur && r.setRotatingOrientation(!1), t.get('trail').setEnabled(!1);
							},
							exit: function exit(t) {
								t.removeController('landingFixToParent'),
									t.removeController('landingRotation'),
									t.get('trail').setEnabled(!0);
							}
						}
					]
				},
				sc_mars_exploration_rover_2_landing_site: {
					groups: ['mars', 'spacecraft', 'sites'],
					radius: 0.001,
					label: 'Spirit Landing Site',
					fixed: {
						llaOnSpheroid: new Et((-14.737596 * Math.PI) / 180, (175.47848 * Math.PI) / 180, -2.614384),
						parent: 'mars'
					}
				},
				sc_insight: {
					groups: ['mars', 'spacecraft', 'landers'],
					radius: 0.00306,
					label: 'InSight',
					trail: {
						length: 8034255.54,
						lengthCoverages: [
							[8034255.54, null, 596376069.183],
							[14400, 596376069.183, 596529871.284],
							[3600, 596529871.284, 596533602],
							[0, 596533602, null]
						]
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_insight/model.gltf', rotate: [{ y: 90 }] },
					align: {
						primary: { type: 'point', target: 'mars', axis: yt.ZAxisNeg },
						secondary: { type: 'align', target: 'mars', axis: yt.YAxis, targetAxis: yt.ZAxis }
					},
					dynamo: [
						{ url: 'sc_insight/earth/pos', parent: 'earth' },
						{ url: 'sc_insight/sun/orb', parent: 'sun' },
						{ url: 'sc_insight/mars/orb', parent: 'mars' },
						{ url: 'sc_insight/ori' },
						{ url: 'sc_insight_edl/mars/pos', parent: 'mars' },
						{ url: 'sc_insight_edl/ori' }
					],
					coverages: [
						{
							coverage: [596529871.284, 596533602],
							enter: function enter(t) {
								var e = t.get('trail');
								e instanceof on && e.setRelativeToEntityOrientation(!0);
							},
							exit: function exit(t) {
								var e = t.get('trail');
								e instanceof on && e.setRelativeToEntityOrientation(!1);
							}
						},
						{
							coverage: [596533602, null],
							enter: function enter(t) {
								var e = t.getControllerByType('align'),
									n = t.addController('fixed', 'fixedLanding', e);
								if (n instanceof Ln) {
									n.setParent('mars');
									var r = new yt(-2432.935716315694, 2349.9743692542434, 267.1293812071009);
									n.setPosition(r);
								}
								var i = t.addController('rotateByParentOrientation', 'fixedLandingRotation', e);
								i instanceof ur && i.setRotatingOrientation(!1);
							},
							exit: function exit(t) {
								t.removeController('fixedLandingRotation'), t.removeController('fixedLanding');
							}
						}
					]
				},
				sc_marco_a: {
					groups: ['mars', 'spacecraft'],
					radius: 44375e-8,
					label: 'MarCO A',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 579182469.185],
							[6720, 579182469.185, 596552080],
							[1e7, 596552080, null]
						]
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_marco/model.gltf' },
					dynamo: [
						{ url: 'sc_marco_a/earth/orb', parent: 'earth' },
						{ url: 'sc_marco_a/sun/1/orb', parent: 'sun' },
						{ url: 'sc_marco_a/mars/orb', parent: 'mars' },
						{ url: 'sc_marco_a/sun/2/orb', parent: 'sun' }
					],
					align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } }
				},
				sc_marco_b: {
					groups: ['mars', 'spacecraft'],
					radius: 44375e-8,
					label: 'MarCO B',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 579182469.185],
							[6720, 579182469.185, 596552080],
							[1e7, 596552080, null]
						]
					},
					model: { url: '$STATIC_ASSETS_URL/models/sc_marco/model.gltf' },
					dynamo: [
						{ url: 'sc_marco_b/earth/orb', parent: 'earth' },
						{ url: 'sc_marco_b/sun/1/orb', parent: 'sun' },
						{ url: 'sc_marco_b/mars/orb', parent: 'mars' },
						{ url: 'sc_marco_b/sun/2/orb', parent: 'sun' }
					],
					align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } }
				},
				sc_mars_odyssey: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0013,
					label: 'Mars Odyssey',
					trail: {
						length: 6727,
						lengthCoverages: [
							[1e7, null, 57128464],
							[6727, 57128464, null]
						]
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_mars_odyssey/mars_odyssey.gltf',
						environmentMap: { cubemap: '$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg' },
						shadowEntities: ['mars', 'deimos', 'phobos']
					},
					align: {
						primary: { type: 'point', target: 'mars', axis: new yt(-0.95630475596, 0.29237170472, 0) },
						secondary: { type: 'velocity', target: 'sc_mars_odyssey', axis: new yt(0.29237170472, 0.95630475596, 0) }
					},
					dynamo: [
						{ url: 'sc_mars_odyssey/earth/orb', parent: 'earth' },
						{ url: 'sc_mars_odyssey/sun/orb', parent: 'sun' },
						{ url: 'sc_mars_odyssey/mars/orb', parent: 'mars' },
						{ url: 'sc_mars_odyssey/ori' }
					]
				},
				sc_mars_reconnaissance_orbiter: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0068,
					label: 'Mars Reconnaissance Orbiter',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 195285665],
							[6720, 195285665, null]
						]
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_mars_reconnaissance_orbiter/MRO.gltf',
						environmentMap: { cubemap: '$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg' },
						shadowEntities: ['mars', 'deimos', 'phobos']
					},
					align: {
						primary: { type: 'point', target: 'mars', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_mars_reconnaissance_orbiter', axis: yt.XAxis }
					},
					dynamo: [
						{ url: 'sc_mars_reconnaissance_orbiter/earth/orb', parent: 'earth' },
						{ url: 'sc_mars_reconnaissance_orbiter/sun/orb', parent: 'sun' },
						{ url: 'sc_mars_reconnaissance_orbiter/mars/orb', parent: 'mars' },
						{ url: 'sc_mars_reconnaissance_orbiter/ori' }
					]
				},
				sc_maven: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0057,
					label: 'MAVEN',
					trail: { length: 16139 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_maven/Maven.gltf',
						rotate: [{ x: 90 }, { z: 90 }],
						environmentMap: { cubemap: '$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg' },
						shadowEntities: ['mars', 'deimos', 'phobos']
					},
					align: { primary: { type: 'point', target: 'sun', axis: yt.ZAxis } },
					dynamo: [
						{ url: 'sc_maven/earth/orb', parent: 'earth' },
						{ url: 'sc_maven/sun/orb', parent: 'sun' },
						{ url: 'sc_maven/mars/orb', parent: 'mars' },
						{ url: 'sc_maven/ori' }
					]
				},
				sc_mars_express: {
					groups: ['mars', 'spacecraft'],
					radius: 0.006,
					label: 'Mars Express',
					trail: {
						length: 25e3,
						lengthCoverages: [
							[1e7, null, 126749131],
							[12720, 126749131, null]
						]
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_mars_express/mars_express.gltf',
						rotate: [{ x: 90 }, { z: -180 }],
						environmentMap: { cubemap: '$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg' },
						shadowEntities: ['mars', 'deimos', 'phobos']
					},
					align: { primary: { type: 'point', target: 'mars', axis: yt.XAxisNeg } },
					dynamo: [
						{ url: 'sc_mars_express/earth/orb', parent: 'earth' },
						{ url: 'sc_mars_express/sun/orb', parent: 'sun' },
						{ url: 'sc_mars_express/mars/orb', parent: 'mars' },
						{ url: 'sc_mars_express/ori' }
					]
				},
				sc_perseverance_landing_site: {
					groups: ['mars', 'spacecraft', 'landers'],
					radius: 0.001,
					label: 'Perseverance Landing Site',
					fixed: {
						llaOnSpheroid: new Et(
							(18.470270180371674 * Math.PI) / 180,
							(77.4326757785127 * Math.PI) / 180,
							-2.2130185476344195,
							!1
						),
						parent: 'mars'
					}
				},
				sc_perseverance: {
					groups: ['mars', 'spacecraft', 'landers'],
					radius: 0.0015,
					label: 'Mars 2020',
					trail: { length: 1e7 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_perseverance/cruise/MSLcruiseStage.gltf' },
					align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } },
					spin: { axis: yt.YAxis, periodInHours: -0.00833333333 },
					dynamo: [
						{ url: 'sc_perseverance/earth/orb', parent: 'earth' },
						{ url: 'sc_perseverance/sun/orb', parent: 'sun' },
						{ url: 'sc_perseverance/mars/pos', parent: 'mars' }
					],
					coverages: [
						{
							coverage: [666952341, null],
							enter: function enter(t) {
								var e = t.get('trail');
								e instanceof on && (e.setStartTime(1e3), e.setRelativeToEntityOrientation(!0), e.resetPoints());
								var n = t.get('align');
								n instanceof ln &&
									(n.setPrimaryAlignType('velocity'),
									n.setPrimaryAxis(yt.YAxisNeg),
									n.setPrimaryTargetEntity(t.getName())),
									t.get('spin').setEnabled(!1);
							},
							exit: function exit(t) {
								var e = t.get('trail');
								e instanceof on && (e.setStartTime(1e7), e.setRelativeToEntityOrientation(!1), e.resetPoints());
								var n = t.get('align');
								n instanceof ln &&
									(n.setPrimaryAlignType('point'), n.setPrimaryAxis(yt.YAxis), n.setPrimaryTargetEntity('sun')),
									t.get('spin').setEnabled(!0);
							}
						},
						{
							coverage: [666953078, null],
							enter: function enter(t) {
								var e = t.getControllerByType('align'),
									n = t.addController('fixed', 'fixedLanding', e);
								if (n instanceof Ln) {
									n.setParent('mars');
									var r = new yt(700.6720498758596, 3140.3161023698767, 1073.6913476720615);
									n.setPosition(r);
								}
								var i = t.addController('rotateByParentOrientation', 'fixedLandingRotation', e);
								i instanceof ur && i.setRotatingOrientation(!1);
							},
							exit: function exit(t) {
								t.removeController('fixedLandingRotation'), t.removeController('fixedLanding');
							}
						}
					]
				},
				sc_phoenix: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0027,
					label: 'Phoenix',
					trail: { length: 45411186 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_phoenix/phoenix_cruise.gltf' },
					align: { primary: { type: 'point', target: 'sun', axis: yt.ZAxisNeg } },
					animdata: [{ url: 'sc_phoenix', type: 'pos', parent: 'sun' }]
				},
				sc_trace_gas_orbiter: {
					groups: ['mars', 'spacecraft'],
					radius: 0.00875915,
					label: 'Trace Gas Orbiter',
					trail: {
						length: 6720,
						lengthCoverages: [
							[1e7, null, 530160041],
							[6720, 530160041, null]
						]
					},
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_trace_gas_orbiter/TGO.gltf',
						rotate: [{ x: -90 }, { y: -90 }],
						environmentMap: { cubemap: '$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg' },
						shadowEntities: ['mars', 'deimos', 'phobos']
					},
					align: {
						primary: { type: 'point', target: 'mars', axis: yt.YAxisNeg },
						secondary: { type: 'point', target: 'sun', axis: yt.XAxisNeg }
					},
					dynamo: [
						{ url: 'sc_trace_gas_orbiter/earth/orb', parent: 'earth' },
						{ url: 'sc_trace_gas_orbiter/sun/orb', parent: 'sun' },
						{ url: 'sc_trace_gas_orbiter/mars/orb', parent: 'mars' },
						{ url: 'sc_trace_gas_orbiter/ori' }
					],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('align');
						e instanceof ln &&
							(e.setJoint('right_array_1'),
							e.setPrimaryAxis(yt.XAxis),
							e.setSecondaryAxis(yt.YAxis),
							e.setSecondaryAlignType('point'),
							e.setSecondaryTargetEntity('sun')),
							(e = t.addController('align')) instanceof ln &&
								(e.setJoint('left_array_1'),
								e.setPrimaryAxis(yt.XAxis),
								e.setSecondaryAxis(yt.YAxis),
								e.setSecondaryAlignType('point'),
								e.setSecondaryTargetEntity('sun'));
					}
				},
				sc_mars_orbiter_mission: {
					groups: ['mars', 'spacecraft'],
					radius: 0.00275,
					label: 'Mars Orbiter Mission',
					trail: { length: 234146 },
					animdata: [{ url: 'sc_mars_orbiter_mission/mars', type: 'pos', parent: 'mars' }]
				},
				sc_viking_1_orbiter: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0047,
					label: 'Viking 1 Orbiter',
					trail: { length: 88649 },
					animdata: [{ url: 'sc_viking_1_orbiter', type: 'pos', parent: 'mars' }]
				},
				sc_viking_2_orbiter: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0047,
					label: 'Viking 2 Orbiter',
					trail: { length: 98694 },
					animdata: [{ url: 'sc_viking_2_orbiter', type: 'pos', parent: 'mars' }]
				},
				sc_mars_global_surveyor: {
					groups: ['mars', 'spacecraft'],
					radius: 0.003,
					label: 'Mars Global Surveyor',
					trail: { length: 7068.67 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_mars_global_surveyor/mars_global_surveyor.gltf',
						shadowEntities: ['mars']
					},
					align: { primary: { type: 'point', target: 'mars', axis: yt.XAxisNeg } },
					animdata: [{ url: 'sc_mars_global_surveyor_mission', type: 'pos', parent: 'mars' }]
				},
				sc_mars_climate_orbiter: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0011,
					label: 'Mars Climate Orbiter',
					trail: { length: 73762215 },
					animdata: [{ url: 'sc_mars_climate_orbiter', type: 'pos', parent: 'sun' }]
				},
				sc_mars_pathfinder: {
					groups: ['mars', 'spacecraft'],
					radius: 33e-5,
					label: 'Mars Pathfinder',
					trail: { length: 51497488 },
					animdata: [{ url: 'sc_mars_pathfinder', type: 'pos', parent: 'sun' }]
				},
				sc_mars_polar_lander: {
					groups: ['mars', 'spacecraft'],
					radius: 0.0018,
					label: 'Mars Polar Lander',
					trail: { length: 41109006 },
					animdata: [{ url: 'sc_mars_polar_lander', type: 'pos', parent: 'sun' }]
				}
			}),
			Er.register({
				sc_messenger: {
					groups: ['mercury', 'spacecraft'],
					occlusionRadius: 0.00133,
					extentsRadius: 0.00184,
					label: 'MESSENGER',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_messenger/Messenger.gltf',
						rotate: [{ z: -90 }, { y: 90 }],
						shadowEntities: ['mercury']
					},
					align: {
						primary: { type: 'point', target: 'mercury', axis: yt.YAxis },
						secondary: { type: 'velocity', target: 'sc_messenger', axis: yt.ZAxis }
					},
					dynamo: [
						{ url: 'sc_messenger/earth/launch/orb', parent: 'earth' },
						{ url: 'sc_messenger/sun/1/orb', parent: 'sun' },
						{ url: 'sc_messenger/earth/flyby/orb', parent: 'earth' },
						{ url: 'sc_messenger/sun/2/orb', parent: 'sun' },
						{ url: 'sc_messenger/venus/flyby1/orb', parent: 'venus' },
						{ url: 'sc_messenger/sun/3/orb', parent: 'sun' },
						{ url: 'sc_messenger/venus/flyby2/orb', parent: 'venus' },
						{ url: 'sc_messenger/sun/4/orb', parent: 'sun' },
						{ url: 'sc_messenger/mercury/flyby1/orb', parent: 'mercury' },
						{ url: 'sc_messenger/sun/5/orb', parent: 'sun' },
						{ url: 'sc_messenger/mercury/flyby2/orb', parent: 'mercury' },
						{ url: 'sc_messenger/sun/6/orb', parent: 'sun' },
						{ url: 'sc_messenger/mercury/flyby3/orb', parent: 'mercury' },
						{ url: 'sc_messenger/sun/7/orb', parent: 'sun' },
						{ url: 'sc_messenger/mercury/orb', parent: 'mercury' },
						{ url: 'sc_messenger/ori' }
					]
				},
				sc_messenger_impact_site: {
					groups: ['mercury', 'sc_messenger', 'sites'],
					radius: 0.001,
					label: 'MESSENGER Impact Site',
					fixed: {
						llaOnSpheroid: new Et(0.9501527254431932, -2.615904550043192, -0.910251923861324),
						parent: 'mercury',
						coverage: [483694028.351, Number.POSITIVE_INFINITY]
					}
				}
			}),
			Er.register({
				sc_juno: {
					groups: ['jupiter', 'spacecraft'],
					occlusionRadius: 0.001732,
					extentsRadius: 0.01,
					label: 'Juno',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_juno/Juno.gltf',
						rotate: [{ x: 90 }],
						shadowEntities: ['jupiter', 'europa', 'ganymede', 'callisto', 'io']
					},
					dynamo: [
						{ url: 'sc_juno/earth/launch/orb', parent: 'earth' },
						{ url: 'sc_juno/sun/preflyby/orb', parent: 'sun' },
						{ url: 'sc_juno/earth/flyby/orb', parent: 'earth' },
						{ url: 'sc_juno/sun/postflyby/orb', parent: 'sun' },
						{ url: 'sc_juno/jupiter/orb', parent: 'jupiter' },
						{ url: 'sc_juno/ganymede/orb', parent: 'ganymede' },
						{ url: 'sc_juno/europa/orb', parent: 'europa' },
						{ url: 'sc_juno/io/1/orb', parent: 'io' },
						{ url: 'sc_juno/io/2/orb', parent: 'io' },
						{ url: 'sc_juno/ori' }
					],
					coverages: [
						{
							coverage: [393471366, 529749008],
							update: function update(t) {
								var e = t.getComponentByType('model').getThreeJsObjectByName('engine_cover');
								if (null !== e) {
									var n = t.getScene().getEngine().getTime(),
										r = P.getIndex(n, zr, function (t, e) {
											return t[1] < e;
										}),
										i = zr[r][0],
										o = zr[r][1],
										a = T.clamp01(((o - i) / 2 - Math.abs(n - (o + i) / 2)) / 600);
									e.rotation.x = T.lerp(Math.PI, Math.PI / 8, a);
								}
							},
							exit: function exit(t) {
								var e = t.getComponentByType('model').getThreeJsObjectByName('engine_cover');
								null !== e && (e.rotation.x = Math.PI);
							}
						},
						{
							coverage: [399637867.183, 520959604.184],
							update: function update(t) {
								var e = t.getComponentByType('particleSpray'),
									n = t.getScene().getEngine().getTime(),
									r = P.getIndex(n, Nr, function (t, e) {
										return t[1] < e;
									}),
									i = Nr[r][0],
									o = Nr[r][1],
									a = i <= n && n < o;
								e.setEnabled(a);
							},
							exit: function exit(t) {
								t.getComponentByType('particleSpray').setEnabled(!1);
							}
						}
					],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addComponent('particleSpray');
						e.setNumberOfParticles(100),
							e.setSizeOfParticles(2e-4),
							e.setSpeedOfParticles(-0.01),
							e.setColorOfParticles(new z(1, 0.75, 0, 0.25)),
							e.setSpread(5),
							e.setParticleSpacingRandom(!1),
							e.setLength(0.0015),
							e.setOriginOffset(new yt(0, 0, -0.0031)),
							e.setDirection(yt.ZAxis),
							e.setEnabled(!1);
					}
				},
				sc_cassini: {
					groups: ['saturn', 'spacecraft'],
					occlusionRadius: 0.0034,
					extentsRadius: 0.0055,
					label: 'Cassini',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_cassini/Cassini.gltf',
						rotate: [{ x: -90 }, { z: 180 }],
						shadowEntities: ['saturn', 'titan', 'enceladus', 'mimas', 'tethys']
					},
					dynamo: [
						{ url: 'sc_cassini/earth/launch/orb', parent: 'earth' },
						{ url: 'sc_cassini/sun/1/orb', parent: 'sun' },
						{ url: 'sc_cassini/venus/flyby1/orb', parent: 'venus' },
						{ url: 'sc_cassini/sun/2/orb', parent: 'sun' },
						{ url: 'sc_cassini/venus/flyby2/orb', parent: 'venus' },
						{ url: 'sc_cassini/sun/3/orb', parent: 'sun' },
						{ url: 'sc_cassini/earth/flyby/orb', parent: 'earth' },
						{ url: 'sc_cassini/sun/4/orb', parent: 'sun' },
						{ url: 'sc_cassini/saturn/orb', parent: 'saturn' },
						{ url: 'sc_cassini/ori' }
					],
					coverages: [
						{
							coverage: [157212064.184, null],
							enter: function enter(t) {
								var e = t.get('model');
								e instanceof De && e.setHiddenObject('huygens_probe', !0);
							},
							exit: function exit(t) {
								var e = t.get('model');
								e instanceof De && e.setHiddenObject('huygens_probe', !1);
							}
						}
					]
				},
				sc_galileo: {
					groups: ['jupiter', 'spacecraft'],
					occlusionRadius: 0.003,
					extentsRadius: 0.0055,
					label: 'Galileo',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_galileo/galileo.gltf',
						shadowEntities: ['jupiter', 'earth', 'venus'],
						rotate: [{ x: 90 }, { z: -90 }]
					},
					align: { primary: { type: 'point', target: 'earth', axis: yt.ZAxisNeg } },
					dynamo: [
						{ url: 'sc_galileo/earth/launch/orb', parent: 'earth' },
						{ url: 'sc_galileo/sun/orb', parent: 'sun' },
						{ url: 'sc_galileo/venus/flyby/orb', parent: 'venus' },
						{ url: 'sc_galileo/earth/flyby1/orb', parent: 'earth' },
						{ url: 'sc_galileo/earth/flyby2/orb', parent: 'earth' },
						{ url: 'sc_galileo/jupiter/orb', parent: 'jupiter' },
						{ url: 'sc_galileo/quat' }
					],
					coverages: [
						{
							coverage: [-321964226.7396, -315939524.06224],
							enter: function enter(t) {
								t.getControllerByType('align').setEnabled(!0);
							},
							exit: function exit(t) {
								t.getControllerByType('align').setEnabled(!1);
							}
						},
						{
							coverage: [64329403.324381, 117442702],
							enter: function enter(t) {
								t.getControllerByType('align').setEnabled(!0);
							},
							exit: function exit(t) {
								t.getControllerByType('align').setEnabled(!1);
							}
						}
					],
					postCreateFunction: function postCreateFunction(t) {
						t.getControllerByType('align').setEnabled(!1);
						var e = t.addController('spin');
						e instanceof fr && (e.setJoint('spinning_section'), e.setRate((6 * Math.PI) / 60), e.setAxis(yt.YAxis, !0));
					}
				},
				sc_galileo_probe: {
					groups: ['jupiter', 'spacecraft'],
					radius: 72e-5,
					label: 'Galileo Probe',
					trail: { length: void 0 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_galileo_probe/galileo_probe.gltf', rotate: [{ x: 90 }] },
					fixed: {
						position: yt.Zero,
						orientation: tt.Identity,
						coverage: [-321964226.73959994, -141114537.48322043],
						parent: 'sc_galileo'
					},
					dynamo: [
						{ url: 'sc_galileo_probe/galileo/orb', parent: 'sc_galileo' },
						{ url: 'sc_galileo_probe/jupiter/orb', parent: 'jupiter' }
					],
					coverages: [
						{
							coverage: [Number.NEGATIVE_INFINITY, -141114537.48322043],
							enter: function enter(t) {
								t.getComponentByType('div').setEnabled(!1);
							},
							exit: function exit(t) {
								t.getComponentByType('div').setEnabled(!0);
							}
						}
					],
					postCreateFunction: function postCreateFunction(t) {
						t.addController('rotateByParentOrientation').setCoverage(new J(-321964226.73959994, -141114537.48322043));
						var e = t.addController('fixed');
						e.setOrientation(
							new tt(0.33550712071888145, -0.40625487875565447, -0.5520583791243452, -0.6462379526712706)
						),
							e.setCoverage(new J(-141114537.48322043, Number.POSITIVE_INFINITY));
					}
				},
				sc_huygens: {
					groups: ['saturn', 'spacecraft', 'titan'],
					occlusionRadius: 0.0013,
					extentsRadius: 0.0013,
					label: 'Huygens',
					trail: { length: void 0 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_huygens/Huygens.gltf',
						rotate: [{ x: -90 }, { z: 180 }],
						shadowEntities: ['saturn', 'titan', 'enceladus', 'mimas', 'tethys']
					},
					fixed: {
						orientation: new tt(0.8295521744501194, 0.09912464029342342, -0.04158756948048668, -0.5479853735424731)
					},
					dynamo: [
						{ url: 'sc_huygens/saturn/orb', parent: 'saturn' },
						{ url: 'sc_huygens/titan/orb', parent: 'titan' }
					],
					coverages: [
						{
							coverage: [158965616.707, Number.POSITIVE_INFINITY],
							enter: function enter(t) {
								var e = t.get('trail');
								e instanceof on && e.setRelativeToEntityOrientation(!0);
							},
							exit: function exit(t) {
								var e = t.get('trail');
								e instanceof on && e.setRelativeToEntityOrientation(!1);
							}
						}
					],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('keyframe');
						e.setParent('titan'),
							e instanceof Jn &&
								(e.addPositionKeyframe(158965616.707, {
									position: new yt(-74.84608000701567, -3832.0774028380238, -305.9513410781612),
									relativeToEntityPosition: t.getScene().getEntity('titan')
								}),
								e.addPositionKeyframe(158965667.7750001, {
									position: new yt(-168.19015737501377, -3541.733393771429, -291.12326824195395),
									relativeToEntityPosition: t.getScene().getEntity('titan')
								}),
								e.addPositionKeyframe(158965894.184, {
									position: new yt(-376.8992769951708, -2686.9622048526126, -273.33138256355716),
									relativeToEntityPosition: t.getScene().getEntity('titan')
								}));
						var n = t.addController('keyframe');
						n.setParent('titan'),
							n instanceof Jn &&
								(n.addPositionKeyframe(158965894.184, {
									position: new yt(-376.8992769951708, -2686.9622048526126, -273.33138256355716),
									relativeToEntityPosition: t.getScene().getEntity('titan')
								}),
								n.addPositionKeyframe(158974766.184, {
									position: new yt(-251.2479743710496, -2548.813556954952, -266.5500089234507),
									relativeToEntityPosition: t.getScene().getEntity('titan')
								}));
					}
				},
				sc_pioneer_10: {
					groups: ['sun', 'jupiter', 'spacecraft'],
					radius: 0.002118055,
					label: 'Pioneer 10',
					trail: { length: 31536e4 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_pioneer/pioneer.gltf', rotate: [{ x: 90 }] },
					align: { primary: { type: 'point', target: 'earth', axis: yt.YAxis } },
					dynamo: [
						{ url: 'sc_pioneer_10/earth/orb', parent: 'earth' },
						{ url: 'sc_pioneer_10/sun/1/orb', parent: 'sun' },
						{ url: 'sc_pioneer_10/jupiter/orb', parent: 'jupiter' },
						{ url: 'sc_pioneer_10/sun/2/orb', parent: 'sun' }
					]
				},
				sc_pioneer_11: {
					groups: ['sun', 'jupiter', 'saturn', 'spacecraft'],
					radius: 0.002118055,
					label: 'Pioneer 11',
					trail: { length: 31536e4 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_pioneer/pioneer.gltf', rotate: [{ x: 90 }] },
					align: { primary: { type: 'point', target: 'earth', axis: yt.YAxis } },
					dynamo: [
						{ url: 'sc_pioneer_11/earth/orb', parent: 'earth' },
						{ url: 'sc_pioneer_11/sun/1/orb', parent: 'sun' },
						{ url: 'sc_pioneer_11/jupiter/orb', parent: 'jupiter' },
						{ url: 'sc_pioneer_11/sun/2/orb', parent: 'sun' },
						{ url: 'sc_pioneer_11/saturn/orb', parent: 'saturn' },
						{ url: 'sc_pioneer_11/sun/3/orb', parent: 'sun' }
					]
				},
				sc_voyager_1: {
					groups: ['jupiter', 'saturn', 'sun', 'spacecraft'],
					occlusionRadius: 0.00183,
					extentsRadius: 0.0043,
					label: 'Voyager 1',
					trail: { length: 23652e4 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_voyager/Voyager.gltf', rotate: [{ x: -90 }] },
					align: { primary: { type: 'point', target: 'earth', axis: yt.ZAxisNeg } },
					dynamo: [
						{ url: 'sc_voyager_1/earth/orb', parent: 'earth' },
						{ url: 'sc_voyager_1/sun/1/orb', parent: 'sun' },
						{ url: 'sc_voyager_1/jupiter/orb', parent: 'jupiter' },
						{ url: 'sc_voyager_1/sun/2/orb', parent: 'sun' },
						{ url: 'sc_voyager_1/saturn/orb', parent: 'saturn' },
						{ url: 'sc_voyager_1/sun/3/orb', parent: 'sun' },
						{ url: 'sc_voyager_1/ori' }
					]
				},
				sc_voyager_2: {
					groups: ['jupiter', 'saturn', 'uranus', 'neptune', 'sun', 'spacecraft'],
					occlusionRadius: 0.00183,
					extentsRadius: 0.0043,
					label: 'Voyager 2',
					trail: { length: 23652e4 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_voyager/Voyager.gltf', rotate: [{ x: -90 }] },
					align: { primary: { type: 'point', target: 'earth', axis: yt.ZAxisNeg } },
					dynamo: [
						{ url: 'sc_voyager_2/earth/orb', parent: 'earth' },
						{ url: 'sc_voyager_2/sun/1/orb', parent: 'sun' },
						{ url: 'sc_voyager_2/jupiter/orb', parent: 'jupiter' },
						{ url: 'sc_voyager_2/sun/2/orb', parent: 'sun' },
						{ url: 'sc_voyager_2/saturn/orb', parent: 'saturn' },
						{ url: 'sc_voyager_2/sun/3/orb', parent: 'sun' },
						{ url: 'sc_voyager_2/uranus/orb', parent: 'uranus' },
						{ url: 'sc_voyager_2/sun/4/orb', parent: 'sun' },
						{ url: 'sc_voyager_2/neptune/orb', parent: 'neptune' },
						{ url: 'sc_voyager_2/sun/5/orb', parent: 'sun' },
						{ url: 'sc_voyager_2/ori' }
					]
				}
			});
		var zr = [
				[393471366, 393501486],
				[399019747, 399883447],
				[400569547, 400988887],
				[420541747, 420794647],
				[454490527, 454650187],
				[487136707, 487309687],
				[519804068, 521041748],
				[528958868, 529749008]
			],
			Nr = [
				[399637867.183, 399639659.183],
				[400933867.182, 400935660.182],
				[420714067.185, 420714072.185],
				[454572067.185, 454572072.185],
				[487231267.185, 487231272.185],
				[520957868.184, 520959604.184]
			];
		Er.register({
			sc_dawn: {
				groups: ['4_vesta', '1_ceres', 'spacecraft'],
				occlusionRadius: 885e-6,
				extentsRadius: 0.00985,
				label: 'Dawn',
				trail: { length: 659889.75 },
				model: { url: '$STATIC_ASSETS_URL/models/sc_dawn/model.gltf', rotate: [{ z: -90 }] },
				dynamo: [
					{ url: 'sc_dawn/earth/orb', parent: 'earth' },
					{ url: 'sc_dawn/sun/1/orb', parent: 'sun' },
					{ url: 'sc_dawn/mars/orb', parent: 'mars' },
					{ url: 'sc_dawn/sun/2/orb', parent: 'sun' },
					{ url: 'sc_dawn/vesta/orb', parent: '4_vesta' },
					{ url: 'sc_dawn/sun/3/orb', parent: 'sun' },
					{ url: 'sc_dawn/ceres/orb', parent: '1_ceres' },
					{ url: 'sc_dawn/ori' }
				]
			},
			sc_deep_impact: {
				groups: ['9p_tempel', '103p_hartley', 'spacecraft'],
				occlusionRadius: 0.00165,
				extentsRadius: 0.00165,
				label: 'Deep Impact',
				trail: {
					length: 47421459,
					lengthCoverages: [
						[362406, 173560752, 173923158],
						[1733353, 251798121, 253531474],
						[2421504, 282984399, 285405903],
						[1150783, 330384030, 331534813],
						[351232, 342017751, 342368983]
					]
				},
				model: { url: '$STATIC_ASSETS_URL/models/sc_deep_impact/deep_impact_wo_impactor.gltf', rotate: [{ y: -90 }] },
				fixed: { orientation: tt.Identity },
				dynamo: [
					{ url: 'sc_deep_impact/earth/launch/orb', parent: 'earth' },
					{ url: 'sc_deep_impact/sun/orb', parent: 'sun' },
					{ url: 'sc_deep_impact/9p_tempel/pos', parent: '9p_tempel' },
					{ url: 'sc_deep_impact/earth/flyby1/orb', parent: 'earth' },
					{ url: 'sc_deep_impact/earth/flyby2/orb', parent: 'earth' },
					{ url: 'sc_deep_impact/earth/flyby3/orb', parent: 'earth' },
					{ url: 'sc_deep_impact/103p_hartley/pos', parent: '103p_hartley' },
					{ url: 'sc_deep_impact/quat' }
				]
			},
			sc_deep_impact_impactor: {
				groups: ['9p_tempel', 'sc_deep_impact', 'spacecraft'],
				occlusionRadius: 0.001,
				extentsRadius: 0.001,
				label: 'Deep Impact Impactor',
				trail: { length: 27830 },
				model: {
					url: '$STATIC_ASSETS_URL/models/sc_deep_impact_impactor/deep_impact_impactor.gltf',
					rotate: [{ y: -90 }]
				},
				fixed: {
					position: new yt(-713e-6, -55e-6, 0),
					orientation: tt.Identity,
					fixedToParent: !0,
					parent: 'sc_deep_impact',
					coverage: [158829812.068274, 173642464.18400002]
				},
				dynamo: [{ url: 'sc_deep_impact_impactor/quat' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addController('keyframe');
					e.setParent('9p_tempel'),
						e.addPositionKeyframe(173642464.18400002, {
							position: new yt(-713e-6, -55e-6, 0),
							relativeToEntityPosition: t.getScene().getEntity('sc_deep_impact'),
							relativeToEntityOrientation: t.getScene().getEntity('sc_deep_impact')
						}),
						e.addPositionKeyframe(173656621.40411958, {
							position: new yt(-123095.24746842826, -48294.70341251187, 61743.99881253781),
							relativeToEntityPosition: t.getScene().getEntity('sc_deep_impact'),
							relativeToEntityPositionTime: 173642464.18400002
						}),
						e.addPositionKeyframe(173727938.18158135, {
							position: new yt(1.580046751199936, 3.178179950746365, -0.628457454223176),
							relativeToEntityPosition: t.getScene().getEntity('9p_tempel')
						}),
						t
							.addController('fixed', '', t.getControllerByType('dynamo'))
							.setOrientation(new tt(0.9060465048532422, 0.3173702681972099, 0.2649483984949708, 0.09032269948692226));
				}
			},
			sc_deep_impact_impactor_impact_site: {
				groups: ['9p_tempel', 'sc_deep_impact', 'sc_deep_impact_impactor', 'sites'],
				radius: 0.001,
				label: 'Deep Impact Impactor Impact Site',
				fixed: {
					position: new yt(3.1153282512332603, -1.2860729555237982, -1.277920399403075),
					orientation: tt.Identity,
					fixedToParent: !0,
					parent: '9p_tempel',
					coverage: [173727938.18158135, Number.POSITIVE_INFINITY]
				}
			},
			sc_deep_space_1: {
				groups: ['9969_braille', 'spacecraft'],
				occlusionRadius: 0.00125,
				extentsRadius: 0.0045,
				label: 'Deep Space 1',
				trail: {
					length: 40845609,
					lengthCoverages: [
						[27100, -13523799, -13496699],
						[18188, 54458637, 54476825]
					]
				},
				model: { url: '$STATIC_ASSETS_URL/models/sc_deep_space_1/deep_space_1.gltf', rotate: [{ x: 90 }, { z: 90 }] },
				dynamo: [
					{ url: 'sc_deep_space_1/earth/orb', parent: 'earth' },
					{ url: 'sc_deep_space_1/sun/orb', parent: 'sun' },
					{ url: 'sc_deep_space_1/9969_braille/pos', parent: '9969_braille' },
					{ url: 'sc_deep_space_1/19p_borrelly/pos', parent: '19p_borrelly' },
					{ url: 'sc_deep_space_1/quat' }
				],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addController('align', '', t.getControllerByType('dynamo', 3));
					e.setPrimaryAlignType('point'),
						e.setPrimaryAxis(yt.XAxis),
						e.setPrimaryTargetEntity('earth'),
						e.setSecondaryAlignType('point'),
						e.setSecondaryAxis(yt.ZAxisNeg),
						e.setSecondaryTargetEntity('sun');
				}
			},
			sc_near: {
				groups: ['433_eros', 'spacecraft'],
				occlusionRadius: 0.002,
				extentsRadius: 0.0034,
				label: 'NEAR',
				trail: { length: 63919069 },
				model: { url: '$STATIC_ASSETS_URL/models/sc_near/near.gltf' },
				align: { primary: { type: 'point', target: 'sun', axis: yt.YAxis } },
				animdata: [{ url: 'sc_near', type: 'pos', parent: 'sun' }]
			},
			sc_lucy: {
				groups: [
					'52246_donaldjohanson',
					'3548_eurybates',
					'15094_polymele',
					'11351_leucus',
					'21900_orus',
					'617_patroclus',
					'menoetius',
					'spacecraft'
				],
				occlusionRadius: 0.002,
				extentsRadius: 0.007125,
				label: 'Lucy',
				trail: {
					length: 63919069,
					lengthCoverages: [
						[570948, 718960993, 719531941],
						[397250, 787134972, 787532222],
						[331719, 798252820, 798584539],
						[1989961, 870652086, 872642047],
						[2666457, 872642047, 875308504],
						[3595785, 891166024, 894761809],
						[2805224, 909384911, 912190135],
						[518376, 977590306, 978108682],
						[1722780, 1046169596, 1047892376]
					]
				},
				model: { url: '$STATIC_ASSETS_URL/models/sc_lucy/lucy.gltf', rotate: [{ x: 90 }, { z: 90 }] },
				fixed: { orientation: tt.Identity },
				dynamo: [
					{ url: 'sc_lucy/earth/launch/orb', parent: 'earth' },
					{ url: 'sc_lucy/sun/orb', parent: 'sun' },
					{ url: 'sc_lucy/earth/flyby1/orb', parent: 'earth' },
					{ url: 'sc_lucy/earth/flyby2/orb', parent: 'earth' },
					{ url: 'sc_lucy/52246_donaldjohanson/pos', parent: '52246_donaldjohanson' },
					{ url: 'sc_lucy/3548_eurybates/pos', parent: '3548_eurybates' },
					{ url: 'sc_lucy/15094_polymele/pos', parent: '15094_polymele' },
					{ url: 'sc_lucy/11351_leucus/pos', parent: '11351_leucus' },
					{ url: 'sc_lucy/21900_orus/pos', parent: '21900_orus' },
					{ url: 'sc_lucy/earth/flyby3/orb', parent: 'earth' },
					{ url: 'sc_lucy/617_patroclus/pos', parent: '617_patroclus' },
					{ url: 'sc_lucy/quat' }
				],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addController('align', '', t.getControllerByType('dynamo'));
					e.setPrimaryAlignType('point'),
						e.setPrimaryAxis(yt.XAxis),
						e.setPrimaryTargetEntity('earth'),
						e.setSecondaryAlignType('align'),
						e.setSecondaryAxis(yt.YAxis),
						e.setSecondaryTargetAxis(yt.ZAxis),
						e.setSecondaryTargetEntity('sun');
				}
			},
			sc_new_horizons: {
				groups: ['134340_pluto', '486958_2014_mu69', 'spacecraft'],
				radius: 0.00135,
				label: 'New Horizons',
				trail: { length: 94608e3 },
				model: { url: '$STATIC_ASSETS_URL/models/sc_new_horizons/new_horizons.gltf', rotate: [{ y: 90 }] },
				align: { primary: { type: 'point', target: 'earth', axis: yt.YAxis } },
				dynamo: [
					{ url: 'sc_new_horizons/earth/orb', parent: 'earth' },
					{ url: 'sc_new_horizons/sun/1/orb', parent: 'sun' },
					{ url: 'sc_new_horizons/jupiter/orb', parent: 'jupiter' },
					{ url: 'sc_new_horizons/sun/2/orb', parent: 'sun' },
					{ url: 'sc_new_horizons/pluto/orb', parent: '134340_pluto' },
					{ url: 'sc_new_horizons/sun/3/pos', parent: 'sun' },
					{ url: 'sc_new_horizons/mu69/pos', parent: '486958_arrokoth' },
					{ url: 'sc_new_horizons/sun/4/pos', parent: 'sun' },
					{ url: 'sc_new_horizons/ori/1' },
					{ url: 'sc_new_horizons/ori/2' }
				]
			},
			sc_rosetta: {
				groups: ['67p_churyumov_gerasimenko', 'spacecraft'],
				occlusionRadius: 0.0014,
				extentsRadius: 0.016,
				label: 'Rosetta',
				trail: { length: void 0 },
				model: { url: '$STATIC_ASSETS_URL/models/sc_rosetta/rosettaPhilae.gltf', rotate: [{ x: 180 }, { z: 90 }] },
				fixed: { orientation: tt.Identity },
				dynamo: [
					{ url: 'sc_rosetta/earth/launch/orb', parent: 'earth' },
					{ url: 'sc_rosetta/sun/1/orb', parent: 'sun' },
					{ url: 'sc_rosetta/earth/flyby1/orb', parent: 'earth' },
					{ url: 'sc_rosetta/sun/2/orb', parent: 'sun' },
					{ url: 'sc_rosetta/mars/flyby/orb', parent: 'mars' },
					{ url: 'sc_rosetta/sun/3/orb', parent: 'sun' },
					{ url: 'sc_rosetta/earth/flyby2/orb', parent: 'earth' },
					{ url: 'sc_rosetta/sun/4/orb', parent: 'sun' },
					{ url: 'sc_rosetta/earth/flyby3/orb', parent: 'earth' },
					{ url: 'sc_rosetta/sun/5/orb', parent: 'sun' },
					{ url: 'sc_rosetta/67p_churyumov_gerasimenko/pos', parent: '67p_churyumov_gerasimenko' },
					{ url: 'sc_rosetta/ori' }
				],
				coverages: [
					{
						coverage: [469053367.183, null],
						enter: function enter(t) {
							var e = t.get('model');
							e instanceof De && e.setHiddenObject('Philae', !0);
						},
						exit: function exit(t) {
							var e = t.get('model');
							e instanceof De && e.setHiddenObject('Philae', !1);
						}
					}
				],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addController('align');
					e.setJoint('panels_01'),
						e.setSecondaryAlignType('point'),
						e.setSecondaryAxis(yt.ZAxis),
						e.setSecondaryTargetEntity('sun');
					var n = t.addController('align');
					n.setJoint('panels_02'),
						n.setSecondaryAlignType('point'),
						n.setSecondaryAxis(yt.ZAxis),
						n.setSecondaryTargetEntity('sun');
				}
			},
			sc_rosetta_impact_site: {
				groups: ['67p_churyumov_gerasimenko', 'sc_rosetta', 'sites'],
				radius: 0.001,
				label: 'Rosetta Impact Site',
				fixed: {
					position: new yt(1.7309310500292525, 0.3509303067271947, 1.1641920075039298),
					orientation: tt.Identity,
					fixedToParent: !0,
					parent: '67p_churyumov_gerasimenko',
					coverage: [528503957.968, Number.POSITIVE_INFINITY]
				}
			},
			sc_osiris_rex: {
				groups: ['101955_bennu', 'spacecraft'],
				occlusionRadius: 0.0016,
				extentsRadius: 0.0031,
				label: 'OSIRIS-REx',
				trail: {
					length: 25685.625,
					lengthCoverages: [
						[1e7, null, 599748661],
						[672e3, 599748661, 668095733],
						[1e7, 668095733, null]
					]
				},
				model: {
					url: '$STATIC_ASSETS_URL/models/sc_osiris_rex/OsirisRex.gltf',
					rotate: [{ x: 90 }],
					shadowEntities: ['bennu']
				},
				align: { primary: { type: 'point', target: 'sun', axis: yt.ZAxisNeg } },
				dynamo: [
					{ url: 'sc_osiris_rex/earth/launch/orb', parent: 'earth' },
					{ url: 'sc_osiris_rex/sun/1/orb', parent: 'sun' },
					{ url: 'sc_osiris_rex/earth/flyby/orb', parent: 'earth' },
					{ url: 'sc_osiris_rex/sun/2/orb', parent: 'sun' },
					{ url: 'sc_osiris_rex/bennu/pos', parent: '101955_bennu' },
					{ url: 'sc_osiris_rex/sun/3/orb', parent: 'sun' },
					{ url: 'sc_osiris_rex/earth/landing/orb', parent: 'earth' },
					{ url: 'sc_osiris_rex/ori' }
				]
			},
			sc_philae: {
				groups: ['67p_churyumov_gerasimenko', 'spacecraft', 'landers'],
				radius: 6e-4,
				label: 'Philae',
				trail: { length: void 0 },
				model: { url: '$STATIC_ASSETS_URL/models/sc_philae/philae.gltf', rotate: [{ x: 180 }, { z: 90 }] },
				fixed: {
					orientation: new tt(0.05763938670269045, 0.04093459828351704, 0.6750586755218195, 0.7343690110337115)
				},
				dynamo: [{ url: 'sc_philae/67p_churyumov_gerasimenko/pos', parent: '67p_churyumov_gerasimenko' }],
				postCreateFunction: function postCreateFunction(t) {
					var e = new yt(0.0021658104318583687, 0.0011575046500869896, 0.00011875498849156656),
						n = new yt(0.00147, 0, 0),
						r = t.addController('translate');
					r.setTranslation(e), r.setCoverage(new J(469053367.183, 469078512.324)), t.get('model').setTranslation(n);
				}
			},
			sc_philae_landing_site: {
				groups: ['67p_churyumov_gerasimenko', 'sc_philae', 'sites'],
				radius: 0.001,
				label: 'Philae Landing Site',
				fixed: {
					position: new yt(2.4452763955965984, -0.12110982508097201, -0.36032099522959377),
					orientation: tt.Identity,
					fixedToParent: !0,
					parent: '67p_churyumov_gerasimenko',
					coverage: [469078512.324, Number.POSITIVE_INFINITY]
				}
			},
			sc_psyche: {
				groups: ['16_psyche', 'spacecraft'],
				occlusionRadius: 0.0031,
				extentsRadius: 0.025,
				label: 'Psyche',
				trail: { length: void 0 },
				model: { url: '$STATIC_ASSETS_URL/models/sc_psyche/psyche.gltf', rotate: [{ y: -90 }, { x: 90 }] },
				align: { primary: { type: 'point', target: 'earth', axis: yt.XAxisNeg } },
				dynamo: [
					{ url: 'sc_psyche/earth/orb', parent: 'earth' },
					{ url: 'sc_psyche/sun/orb', parent: 'sun' },
					{ url: 'sc_psyche/mars/orb', parent: 'mars' },
					{ url: 'sc_psyche/16_psyche/orb', parent: '16_psyche' }
				],
				postCreateFunction: function postCreateFunction(t) {
					var e = t.addController('align');
					e.setJoint('ArrayGimbleLeft'),
						e.setSecondaryAlignType('point'),
						e.setSecondaryAxis(yt.YAxis),
						e.setSecondaryTargetEntity('sun');
					var n = t.addController('align');
					n.setJoint('ArrayGimbleRight'),
						n.setSecondaryAlignType('point'),
						n.setSecondaryAxis(yt.YAxis),
						n.setSecondaryTargetEntity('sun');
				}
			},
			sc_stardust: {
				groups: ['81p_wild', '9p_tempel', 'spacecraft'],
				occlusionRadius: 65e-5,
				extentsRadius: 0.002,
				label: 'Stardust',
				trail: { length: 62659492 },
				model: {
					url: '$STATIC_ASSETS_URL/models/sc_stardust/stardust_w_capsule_open.gltf',
					shadowEntities: ['venus', 'mercury']
				},
				align: {
					primary: { type: 'point', target: 'sun', axis: yt.ZAxis },
					secondary: { type: 'velocity', target: 'sc_stardust', axis: yt.YAxisNeg }
				},
				animdata: [{ url: 'sc_stardust', type: 'pos', parent: 'sun' }]
			},
			sc_stardust_src: {
				groups: ['earth', 'spacecraft'],
				occlusionRadius: 0.0024,
				extentsRadius: 0.0024,
				label: 'Stardust SRC',
				trail: { length: 14547 },
				align: {
					primary: { type: 'point', target: 'earth', axis: yt.YAxisNeg },
					secondary: { type: 'velocity', target: 'sc_stardust_src', axis: yt.XAxisNeg }
				},
				model: {
					url: '$STATIC_ASSETS_URL/models/sc_stardust_src/stardust_capsule.gltf',
					shadowEntities: ['earth', 'moon']
				},
				animdata: [{ url: 'sc_stardust_src', type: 'pos', parent: 'earth' }]
			}
		}),
			Er.register({
				sc_kepler_space_telescope: {
					groups: ['sun', 'spacecraft', 'telescope'],
					occlusionRadius: 0.00235,
					extentsRadius: 0.00235,
					label: 'Kepler',
					trail: { length: 16095024 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_kepler/Kepler.gltf' },
					align: {
						primary: {
							type: 'align',
							target: 'sun',
							targetAxis: new yt(0.25176480336, -0.66735243742, 0.7009092643),
							axis: yt.YAxis
						},
						secondary: { type: 'point', target: 'sun', axis: yt.XAxisNeg }
					},
					dynamo: [
						{ url: 'sc_kepler/earth/orb', parent: 'earth' },
						{ url: 'sc_kepler/sun/orb', parent: 'sun' }
					]
				},
				sc_mariner_2: {
					groups: ['sun', 'spacecraft'],
					occlusionRadius: 0.002,
					extentsRadius: 0.0025,
					label: 'Mariner 2',
					trail: { length: 29411352 },
					animdata: [{ url: 'sc_mariner_2', type: 'pos', parent: 'sun' }]
				},
				sc_parker_solar_probe: {
					groups: ['sun', 'spacecraft'],
					radius: 0.0015,
					label: 'Parker Solar Probe',
					trail: { length: 3235657.75 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_parker_solar_probe/PSP.gltf' },
					align: { primary: { type: 'point', target: 'sun', axis: yt.ZAxisNeg } },
					dynamo: [
						{ url: 'sc_parker_solar_probe/earth/orb', parent: 'earth' },
						{ url: 'sc_parker_solar_probe/sun/orb', parent: 'sun' }
					]
				},
				sc_spitzer: {
					groups: ['sun', 'spacecraft'],
					occlusionRadius: 0.0085,
					extentsRadius: 0.00217,
					label: 'Spitzer',
					trail: { length: 32167331 / 8 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_spitzer/SPITZER.gltf',
						rotate: [{ z: -90 }, { x: -90 }],
						shadowEntities: ['venus', 'mercury']
					},
					fixed: {
						orientation: new tt(0.5258297992951877, 0.8139480432783324, -0.1400557906856776, -0.20341086625833524),
						parent: 'sun',
						coverage: [633777341.191, Number.POSITIVE_INFINITY]
					},
					dynamo: [
						{ url: 'sc_spitzer/earth/orb', parent: 'earth' },
						{ url: 'sc_spitzer/sun/orb', parent: 'sun' },
						{ url: 'sc_spitzer/quat' }
					]
				},
				sc_stereo_ahead: {
					groups: ['sun', 'spacecraft'],
					occlusionRadius: 0.003,
					extentsRadius: 0.003,
					label: 'STEREO Ahead',
					trail: { length: 29809031 / 8 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_stereo_ahead/stereo_a.gltf',
						rotate: [{ x: 90 }],
						shadowEntities: ['venus', 'mercury']
					},
					align: {
						primary: { type: 'point', target: 'sun', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_stereo_ahead', axis: yt.YAxisNeg }
					},
					dynamo: [
						{ url: 'sc_stereo_ahead/earth/orb', parent: 'earth' },
						{ url: 'sc_stereo_ahead/sun/orb', parent: 'sun' }
					]
				},
				sc_stereo_behind: {
					groups: ['sun', 'spacecraft'],
					occlusionRadius: 0.003,
					extentsRadius: 0.003,
					label: 'STEREO Behind',
					trail: { length: 33473699 / 8 },
					model: {
						url: '$STATIC_ASSETS_URL/models/sc_stereo_behind/stereo_b.gltf',
						rotate: [{ x: 90 }],
						shadowEntities: ['venus', 'mercury']
					},
					align: {
						primary: { type: 'point', target: 'sun', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_stereo_behind', axis: yt.YAxisNeg }
					},
					dynamo: [
						{ url: 'sc_stereo_behind/earth/orb', parent: 'earth' },
						{ url: 'sc_stereo_behind/sun/orb', parent: 'sun' }
					]
				},
				sc_ulysses: {
					groups: ['sun', 'spacecraft'],
					occlusionRadius: 0.002,
					extentsRadius: 0.002,
					label: 'Ulysses',
					trail: { length: 140294739 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_ulysses/ulysses.gltf', shadowEntities: ['venus', 'mercury'] },
					align: {
						primary: { type: 'point', target: 'sun', axis: yt.ZAxis },
						secondary: { type: 'velocity', target: 'sc_ulysses', axis: yt.YAxisNeg }
					},
					animdata: [{ url: 'sc_ulysses', type: 'pos', parent: 'sun' }]
				},
				sc_wmap: {
					groups: ['sun', 'spacecraft'],
					occlusionRadius: 0.0026,
					extentsRadius: 0.0026,
					label: 'WMAP',
					trail: { length: 31536e3 },
					animdata: [{ url: 'sc_wmap', type: 'pos', parent: 'sun' }]
				}
			}),
			Er.register({
				sc_magellan: {
					groups: ['venus', 'spacecraft'],
					occlusionRadius: 0.0032,
					extentsRadius: 0.0032,
					label: 'Magellan',
					trail: { length: void 0 },
					model: { url: '$STATIC_ASSETS_URL/models/sc_magellan/magellan.gltf', shadowEntities: ['venus'] },
					align: {
						primary: { type: 'point', target: 'earth', axis: yt.YAxis },
						secondary: {
							type: 'align',
							axis: new yt(-Math.sqrt(0.5), Math.sqrt(0.5), 0),
							target: 'venus',
							targetAxis: yt.ZAxisNeg
						}
					},
					dynamo: [{ url: 'sc_magellan/venus/orb', parent: 'venus' }],
					postCreateFunction: function postCreateFunction(t) {
						var e = t.addController('orbitalElements');
						if (e instanceof ar) {
							e.setParent('sun');
							var n = new $();
							(n.epoch = -336394683.816),
								(n.eccentricity = 0.1791852824104108),
								(n.semiMajorAxis = 128280596.63956015),
								(n.meanAngularMotion = 2.5073465306679634e-7),
								(n.meanAnomalyAtEpoch = 2.9229288382327625),
								n.orbitOrientation.set(
									0.8728453580255966,
									0.1876084386162498,
									-0.08948587100888229,
									0.4415159494547423
								),
								e.addOrbitalElements(-336388283.36, n),
								e.addOrbitalElements(-296448521.457, n);
						}
						var r = t.addController('orbitalElements');
						if (r instanceof ar) {
							r.setParent('venus');
							var i = new $();
							(i.epoch = -296448521.457),
								(i.eccentricity = 1.272922970547487),
								(i.semiMajorAxis = 23358.593430196037),
								(i.meanAngularMotion = 0.00015965302516479147),
								(i.meanAnomalyAtEpoch = -6.138103356108873),
								i.orbitOrientation.set(
									-0.49933963770188916,
									0.11817755769547109,
									0.7262027627540558,
									-0.45751889408554064
								),
								r.addOrbitalElements(-296448521.457, i),
								r.addOrbitalElements(-296410230.351, i);
							var o = new $();
							(o.epoch = -295884037.7511),
								(o.eccentricity = 0.39186818222106645),
								(o.semiMajorAxis = 10434.012201911135),
								(o.meanAngularMotion = 0.000534773863104956),
								(o.meanAnomalyAtEpoch = -1.5165416917234864),
								o.orbitOrientation.set(
									-0.4665778554219434,
									0.18802595119032475,
									0.7217932088991018,
									-0.47535871728198204
								),
								r.addOrbitalElements(-296410230.351, o),
								r.addOrbitalElements(-295884037.7511, o);
						}
					}
				},
				sc_venus_express: {
					groups: ['venus', 'spacecraft'],
					occlusionRadius: 9e-4,
					extentsRadius: 0.004,
					label: 'Venus Express',
					trail: { length: 779592.165087551 },
					animdata: [{ url: 'sc_venus_express/venus/all', type: 'pos', parent: 'venus' }]
				}
			}),
			Er.register({
				rose_bowl: {
					groups: ['comparison'],
					label: 'Rose Bowl',
					radius: 0.15,
					model: {
						url: '$STATIC_ASSETS_URL/models/comparison/rose_bowl/rose_bowl.gltf',
						rotate: [{ x: 90 }, { z: -90 }]
					},
					fixed: { position: yt.Zero, orientation: tt.Identity, parent: 'milky_way' }
				},
				school_bus: {
					groups: ['comparison'],
					label: 'School bus',
					radius: 0.0065,
					model: {
						url: '$STATIC_ASSETS_URL/models/comparison/school_bus/school_bus.gltf',
						rotate: [{ x: 90 }, { z: -90 }]
					},
					fixed: { position: yt.Zero, orientation: tt.Identity, parent: 'milky_way' }
				},
				scientist: {
					groups: ['comparison'],
					label: 'Scientist',
					radius: 835e-6,
					model: { url: '$STATIC_ASSETS_URL/models/comparison/scientist/scientist.gltf', rotate: [{ x: 90 }] },
					fixed: { position: yt.Zero, orientation: tt.Identity, parent: 'milky_way' }
				}
			});
		n(484), n(485), n(486), n(487);
		var Fr = n(13),
			Dr = n.n(Fr);
		function time_manager_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function time_manager_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						time_manager_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						time_manager_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function time_manager_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Ur = (function () {
			function TimeManager(t) {
				var e = this;
				!(function time_manager_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, TimeManager),
					(this._pioneer = t),
					(this._utcTimezone = 'Etc/UTC'),
					(this._localTimezone = Dr.a.tz.guess()),
					(this._previousTimeRate = this._pioneer.getTimeRate()),
					(this._dateFormats = {
						utc: {
							full: 'YYYY-MM-D HH[:]mm[:]ss',
							datetime: 'YYYY-MM-D HH[:]mm',
							date: 'YYYY MMMM D',
							time: 'HH[:]mm[:]ss',
							url: 'YYYY-MM-DDTHH:mm:ss.SSSZ'
						},
						local: {
							full: 'M/D/YY hh[:]mm[:]ss',
							datetime: 'M/D/YY hh[:]mm',
							date: 'MMMM D, YYYY',
							time: 'hh[:]mm[:]ss',
							meridiem: 'a'
						}
					}),
					(this._displayUTC = !0),
					(this._timezone = this._utcTimezone),
					(this._components = { setDisplayUTC: [], setTime: [], update: [] }),
					(this._time = Dr()().tz(this._timezone)),
					this.setTime(this._time),
					this.setTimeRate(1),
					this._pioneer.addCallback(function () {
						e._time = Dr.a.tz(1e3 * A.etToUnix(e._pioneer.getTime()), e._timezone);
						for (var t = e._components.update.length - 1; t >= 0; t--) {
							var n = e._components.update[t];
							null !== yi.get(n) && yi.get(n).update(e._time);
						}
					}, !0);
			}
			return (
				(function time_manager_createClass(t, e, n) {
					return e && time_manager_defineProperties(t.prototype, e), n && time_manager_defineProperties(t, n), t;
				})(TimeManager, [
					{
						key: 'getNowTime',
						value: function getNowTime() {
							return Dr()().tz(this._timezone);
						}
					},
					{
						key: 'now',
						value: (function () {
							var t = time_manager_asyncToGenerator(
								regeneratorRuntime.mark(function _callee() {
									return regeneratorRuntime.wrap(
										function _callee$(t) {
											for (;;)
												switch ((t.prev = t.next)) {
													case 0:
														return (
															(this._time = Dr()().tz(this._timezone)),
															(t.t0 = yi.router),
															(t.next = 4),
															yi.router.addQueryToPath({ time: this.getTimeUrl() })
														);
													case 4:
														return (t.t1 = t.sent), (t.next = 7), t.t0.navigate.call(t.t0, t.t1);
													case 7:
														return t.abrupt('return', this._time);
													case 8:
													case 'end':
														return t.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function now() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'getTime',
						value: function getTime() {
							return this._time;
						}
					},
					{
						key: 'setTime',
						value: (function () {
							var t = time_manager_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2(t) {
									var e, n;
									return regeneratorRuntime.wrap(
										function _callee2$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														if (
															((t = Dr.a.tz(t, this._timezone)),
															this._pioneer.setTime(A.unixToEt(t.valueOf() / 1e3)),
															this._components.setTime)
														)
															for (
																this._time = Dr.a.tz(1e3 * A.etToUnix(this._pioneer.getTime()), this._timezone),
																	e = this._components.setTime.length - 1;
																e >= 0;
																e--
															)
																(n = this._components.setTime[e]),
																	null !== yi.get(n) && yi.get(n).setDisplayToTime(this._time);
													case 3:
													case 'end':
														return r.stop();
												}
										},
										_callee2,
										this
									);
								})
							);
							return function setTime(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'parseTime',
						value: function parseTime(t) {
							return Dr.a.tz(t, this._timezone);
						}
					},
					{
						key: 'getTimezone',
						value: function getTimezone() {
							return this._timezone;
						}
					},
					{
						key: 'getUTCTimezone',
						value: function getUTCTimezone() {
							return this._utcTimezone;
						}
					},
					{
						key: 'getLocalTimezone',
						value: function getLocalTimezone() {
							return this._localTimezone;
						}
					},
					{
						key: 'getDisplayUTC',
						value: function getDisplayUTC() {
							return this._displayUTC;
						}
					},
					{
						key: 'setDisplayUTC',
						value: function setDisplayUTC(t) {
							(this._displayUTC = t), (this._timezone = this._displayUTC ? this._utcTimezone : this._localTimezone);
							for (var e = this._components.setDisplayUTC.length - 1; e >= 0; e--) {
								var n = this._components.setDisplayUTC[e];
								null !== yi.get(n) && yi.get(n).setUTC(t);
							}
						}
					},
					{
						key: 'getDateFormat',
						value: function getDateFormat(t, e) {
							return e || (e = this.getDisplayUTC() ? 'utc' : 'local'), this._dateFormats[e][t];
						}
					},
					{
						key: 'getTimeUrl',
						value: function getTimeUrl(t) {
							return t || (t = this._time), (t = Dr.a.tz(t, this._utcTimezone)).format(this._dateFormats.utc.url);
						}
					},
					{
						key: 'getTimeRate',
						value: function getTimeRate() {
							return this._pioneer.getTimeRate();
						}
					},
					{
						key: 'setTimeRate',
						value: function setTimeRate(t) {
							this._pioneer.setTimeRate(t);
						}
					},
					{
						key: 'getTimeRates',
						value: function getTimeRates() {
							return this._timerates;
						}
					},
					{
						key: 'play',
						value: function play() {
							var t = 0 === this._previousTimeRate ? 1 : this._previousTimeRate;
							this.setTimeRate(t);
							var e = new CustomEvent('playPause', { detail: { rate: t } });
							window.dispatchEvent(e);
						}
					},
					{
						key: 'pause',
						value: function pause() {
							(this._previousTimeRate = this.getTimeRate()), this.setTimeRate(0);
							var t = new CustomEvent('playPause', { detail: { rate: 0 } });
							window.dispatchEvent(t);
						}
					},
					{
						key: 'getMidTime',
						value: function getMidTime(t, e) {
							var n = (t.unix() + e.unix()) / 2;
							return Dr()(n, 'X');
						}
					},
					{
						key: 'setManagedComponents',
						value: function setManagedComponents(t) {
							this._components = t;
						}
					}
				]),
				TimeManager
			);
		})();
		function components_base_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var Vr = (function () {
			function BaseComponent(t) {
				!(function components_base_component_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, BaseComponent),
					(this._div = t),
					(this._parent = this._div.parentElement),
					(this._enabled = !0),
					(this.isEnabled = this.isEnabled.bind(this)),
					(this.setEnabled = this.setEnabled.bind(this));
			}
			return (
				(function components_base_component_createClass(t, e, n) {
					return (
						e && components_base_component_defineProperties(t.prototype, e),
						n && components_base_component_defineProperties(t, n),
						t
					);
				})(BaseComponent, [
					{
						key: 'isEnabled',
						value: function isEnabled() {
							return this._enabled;
						}
					},
					{
						key: 'setEnabled',
						value: function setEnabled(t) {
							var e = this._enabled;
							(this._enabled = t), this._enabled && !e ? this.__enable() : !this._enabled && e && this.__disable();
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							this._parent.appendChild(this._div);
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							this._div = this._parent.removeChild(this._div);
						}
					}
				]),
				BaseComponent
			);
		})();
		n(492);
		function search_bar_typeof(t) {
			return (search_bar_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function search_bar_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function search_bar_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						search_bar_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						search_bar_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function search_bar_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function search_bar_possibleConstructorReturn(t, e) {
			return !e || ('object' !== search_bar_typeof(e) && 'function' != typeof e)
				? (function search_bar_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function search_bar_getPrototypeOf(t) {
			return (search_bar_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function search_bar_setPrototypeOf(t, e) {
			return (search_bar_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Br = (function (t) {
				function SearchBar(t, e) {
					var n;
					return (
						(function search_bar_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, SearchBar),
						((n = search_bar_possibleConstructorReturn(
							this,
							search_bar_getPrototypeOf(SearchBar).call(this, t)
						))._pioneer = e),
						(n._input = null),
						(n._results = null),
						n._constructHTML(),
						(n._invert = !0),
						(n._maxResults = 10),
						(n._isVisible = !0),
						(n._selectionKey = 0),
						(n._selection = null),
						(n._displayMobileInput = !1),
						window.addEventListener(
							'resize',
							function (t) {
								n._setVisibility();
							},
							!1
						),
						n._setVisibility(),
						yi.isMobile() && n.hideInput(),
						n
					);
				}
				return (
					(function search_bar_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && search_bar_setPrototypeOf(t, e);
					})(SearchBar, Vr),
					(function search_bar_createClass(t, e, n) {
						return e && search_bar_defineProperties(t.prototype, e), n && search_bar_defineProperties(t, n), t;
					})(SearchBar, [
						{
							key: '_setVisibility',
							value: function _setVisibility() {
								yi.isMobile()
									? (this.showToggle(), this._displayMobileInput || '' !== this._input.value.trim() || this.hideInput())
									: (this._isVisible || this.showInput(), this.hideToggle());
							}
						},
						{
							key: '_constructHTML',
							value: function _constructHTML() {
								var t = this;
								(this._container = document.createElement('div')),
									(this._container.className = 'search-container empty'),
									(this._resultsBg = document.createElement('div')),
									(this._resultsBg.className = 'bg'),
									(this._resultsBg.style.display = 'none'),
									this._container.appendChild(this._resultsBg),
									(this._results = document.createElement('ul')),
									(this._results.id = 'search-results'),
									(this._results.className = 'empty'),
									this._container.appendChild(this._results),
									(this._form = document.createElement('form')),
									(this._form.action = ''),
									(this._form.method = 'post'),
									(this._form.autocomplete = 'off'),
									(this._form.autocorrect = 'off'),
									(this._form.autocapitalize = 'off'),
									(this._form.spellcheck = !1),
									this._form.addEventListener(
										'submit',
										(function () {
											var e = search_bar_asyncToGenerator(
												regeneratorRuntime.mark(function _callee(e) {
													var n;
													return regeneratorRuntime.wrap(function _callee$(r) {
														for (;;)
															switch ((r.prev = r.next)) {
																case 0:
																	if ((e.preventDefault(), !yi.isMobile())) {
																		r.next = 5;
																		break;
																	}
																	t._input.blur(), (r.next = 10);
																	break;
																case 5:
																	if (null === t._selection) {
																		r.next = 10;
																		break;
																	}
																	if (
																		void 0 === (n = t._selection.getElementsByClassName('search-result')) ||
																		void 0 === n[0]
																	) {
																		r.next = 10;
																		break;
																	}
																	return (r.next = 10), t._goToEntity(n[0].value);
																case 10:
																	return r.abrupt('return', !1);
																case 11:
																case 'end':
																	return r.stop();
															}
													}, _callee);
												})
											);
											return function (t) {
												return e.apply(this, arguments);
											};
										})()
									),
									this._container.appendChild(this._form),
									(this._input = document.createElement('input')),
									(this._input.type = 'text'),
									(this._input.name = 'hidden'),
									(this._input.id = 'search-input'),
									(this._input.placeholder = 'Search'),
									(this._input.autocomplete = 'off'),
									(this._input.autocorrect = 'off'),
									(this._input.autocapitalize = 'off'),
									(this._input.spellcheck = !1),
									this._input.addEventListener('keydown', function (t) {
										t.stopPropagation(), ('ArrowUp' !== t.code && 'ArrowDown' !== t.code) || t.preventDefault();
									}),
									this._input.addEventListener('focus', function () {
										yi.isMobile() && yi.isFullscreen() && yi.toggleFullscreen();
									}),
									this._input.addEventListener(
										'keyup',
										function (e) {
											var n = t._input.value.trim();
											if (n.length > 0)
												try {
													t._updateResults(yi.search(n));
												} catch (e) {
													(t._results.innerHTML = ''), console.log('Error', e);
												}
											else t._results.innerHTML = '';
											'ArrowUp' === e.code
												? (t._nextSelection(), e.preventDefault())
												: 'ArrowDown' === e.code
												? (t._previousSelection(), e.preventDefault())
												: t._updateSelection(),
												e.stopPropagation();
										},
										!1
									),
									document.addEventListener('click', function (e) {
										'search-input' === e.target.id ||
											e.target.classList.contains('search-toggle') ||
											e.target.classList.contains('search-result') ||
											t._clear();
									}),
									document.addEventListener('touchend', function (e) {
										'search-input' === e.target.id ||
											e.target.classList.contains('search-toggle') ||
											e.target.classList.contains('search-result') ||
											t._clear();
									}),
									document.addEventListener('keyup', function (e) {
										'KeyF' === e.code && (yi.isMobile() && t.showInput(), t._input.focus());
									}),
									this._form.appendChild(this._input),
									(this._toggle = document.createElement('button')),
									(this._toggle.type = 'button'),
									(this._toggle.className = 'search-toggle secondary'),
									(this._toggle.value = 'toggle'),
									(this._toggle.innerHTML = ''),
									this._toggle.addEventListener('click', function (e) {
										(t._isVisible = !t._isVisible),
											t._isVisible
												? ((t._displayMobileInput = !0), t.showInput(), t._input.focus())
												: ((t._displayMobileInput = !1), t.hideInput());
									}),
									this._container.appendChild(this._toggle),
									this._div.appendChild(this._container);
							}
						},
						{
							key: '_goToEntity',
							value: (function () {
								var t = search_bar_asyncToGenerator(
									regeneratorRuntime.mark(function _callee2(t) {
										var e, n;
										return regeneratorRuntime.wrap(
											function _callee2$(r) {
												for (;;)
													switch ((r.prev = r.next)) {
														case 0:
															return (
																(e = '/' + t),
																(n = { time: yi.get('time').getTimeUrl() }),
																(r.next = 4),
																yi.router.navigate(e, n)
															);
														case 4:
															this._clear();
														case 5:
														case 'end':
															return r.stop();
													}
											},
											_callee2,
											this
										);
									})
								);
								return function _goToEntity(e) {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '_clear',
							value: function _clear() {
								(this._results.innerHTML = ''),
									this._results.classList.add('empty'),
									this._container.classList.add('empty'),
									(this._resultsBg.style.display = 'none'),
									(this._input.value = ''),
									this._input.blur(),
									(this._selectionKey = 0),
									(this._selection = null),
									yi.isMobile() && this.hideInput();
							}
						},
						{
							key: '_updateResults',
							value: function _updateResults(t) {
								this._results.innerHTML = '';
								var e = this._invert ? Math.min(t.length, this._maxResults) - 1 : 0,
									n = this._invert ? 0 : Math.min(t.length, this._maxResults),
									r = t.length;
								if (this._invert) for (var i = e; i >= n; i--) this._checkResult(t, i) ? this._updateResult(t, i) : r--;
								else for (var o = e; o < n; o++) this._checkResult(t, o) ? this._updateResult(t, o) : r--;
								0 === r
									? (this._results.classList.add('empty'),
									  this._container.classList.add('empty'),
									  (this._resultsBg.style.display = 'none'),
									  (this._selectionKey = 0),
									  (this._selection = null))
									: (this._results.classList.remove('empty'),
									  this._container.classList.remove('empty'),
									  (this._resultsBg.style.display = 'block'),
									  this._invert
											? this._results.firstChild.classList.add('last')
											: this._results.lastChild.classList.add('last'));
							}
						},
						{
							key: '_checkResult',
							value: function _checkResult(t, e) {
								var n = yi.scene.get(t[e].ref),
									r = n.getPositionCoverage(),
									i = this._pioneer.getTime();
								return null !== n && !n.getPosition().isNaN() && r.min <= i && i <= r.max;
							}
						},
						{
							key: '_updateResult',
							value: function _updateResult(t, e) {
								var n = this,
									r = document.createElement('li'),
									i = yi.get('content').getEntityList(),
									o = document.createElement('button');
								(o.type = 'button'),
									(o.className = 'search-result'),
									(o.value = i[t[e].ref].id),
									(o.innerHTML = i[t[e].ref].name),
									o.addEventListener(
										'click',
										(function () {
											var t = search_bar_asyncToGenerator(
												regeneratorRuntime.mark(function _callee3(t) {
													return regeneratorRuntime.wrap(function _callee3$(t) {
														for (;;)
															switch ((t.prev = t.next)) {
																case 0:
																	return (t.next = 2), n._goToEntity(o.value);
																case 2:
																case 'end':
																	return t.stop();
															}
													}, _callee3);
												})
											);
											return function (e) {
												return t.apply(this, arguments);
											};
										})()
									),
									r.addEventListener('mouseenter', function (t) {
										n._setSelection(t.target);
									}),
									r.appendChild(o),
									this._results.appendChild(r);
							}
						},
						{
							key: '_updateSelection',
							value: function _updateSelection() {
								if (!(this._results.childElementCount <= 0)) {
									null !== this._selection && this._selection.classList.remove('selection');
									var t = this._results.lastChild,
										e = this._selectionKey;
									this._invert && (e = this._results.childElementCount - 1 - this._selectionKey), e < 0 && (e = 0);
									for (var n = this._results.childElementCount - 1; n >= 0 && n !== e; n--) t = t.previousSibling;
									(this._selection = t), this._selection.classList.add('selection');
								}
							}
						},
						{
							key: '_setSelection',
							value: function _setSelection(t) {
								null !== this._selection && this._selection.classList.remove('selection');
								for (
									var e = t.getElementsByClassName('search-result')[0].value,
										n = this._results.lastChild,
										r = this._results.childElementCount - 1;
									r >= 0;
									r--
								) {
									var i = n.getElementsByClassName('search-result');
									if (void 0 !== i && void 0 !== i[0] && i[0].value === e) {
										(this._selectionKey = r),
											this._invert && (this._selectionKey = this._results.childElementCount - 1 - r);
										break;
									}
									n = n.previousSibling;
								}
								(this._selection = t), this._selection.classList.add('selection');
							}
						},
						{
							key: '_nextSelection',
							value: function _nextSelection() {
								var t = this._results.childElementCount;
								(this._selectionKey = (this._selectionKey + 1) % t), this._updateSelection();
							}
						},
						{
							key: '_previousSelection',
							value: function _previousSelection() {
								var t = this._results.childElementCount;
								(this._selectionKey = (t + this._selectionKey - 1) % t), this._updateSelection();
							}
						},
						{
							key: 'showToggle',
							value: function showToggle() {
								this._toggle.style.display = 'block';
							}
						},
						{
							key: 'hideToggle',
							value: function hideToggle() {
								this._toggle.style.display = 'none';
							}
						},
						{
							key: 'showInput',
							value: function showInput() {
								(this._input.style.display = 'block'),
									(this._results.style.display = 'block'),
									(this._isVisible = !0),
									this._toggle.classList.add('active');
							}
						},
						{
							key: 'hideInput',
							value: function hideInput() {
								(this._input.style.display = 'none'),
									(this._results.style.display = 'none'),
									(this._resultsBg.style.display = 'none'),
									(this._isVisible = !1),
									this._toggle.classList.remove('active');
							}
						},
						{
							key: '__disable',
							value: function __disable() {
								(this._div.style.display = 'none'), this.hideInput(), this.hideToggle();
							}
						},
						{
							key: '__enable',
							value: function __enable() {
								(this._div.style.display = 'block'), this.showInput(), this._setVisibility();
							}
						}
					]),
					SearchBar
				);
			})(),
			Gr = n(53),
			Jr = n.n(Gr);
		function search_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var $r = (function () {
				function Search(t) {
					!(function search_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Search),
						(this._empty = []),
						(this._idx = null),
						(this._entityList = t),
						this._loadSearchIndex();
				}
				return (
					(function search_createClass(t, e, n) {
						return e && search_defineProperties(t.prototype, e), n && search_defineProperties(t, n), t;
					})(Search, [
						{
							key: '_loadSearchIndex',
							value: function _loadSearchIndex() {
								var t = new Jr.a.Builder();
								for (var e in (t.field('keywords', { boost: 1 }),
								t.field('name', { boost: 100 }),
								t.ref('id'),
								t.k1(1.3),
								t.b(0),
								this._entityList))
									t.add(this._entityList[e], { boost: this._entityList[e].weight });
								this._idx = t.build();
							}
						},
						{
							key: 'search',
							value: function search(t) {
								return null === this._idx || '' === t || t.length < 2
									? this._empty
									: this._idx.query(function (e) {
											e.term(Jr.a.tokenizer(t), {
												presence: Jr.a.Query.presence.REQUIRED,
												wildcard: Jr.a.Query.wildcard.TRAILING | Jr.a.Query.wildcard.LEADING,
												fields: ['name', 'keywords']
											});
									  });
							}
						}
					]),
					Search
				);
			})(),
			Hr = n(278),
			qr = n.n(Hr);
		n(493), n(494);
		function details_panel_typeof(t) {
			return (details_panel_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function details_panel_toConsumableArray(t) {
			return (
				(function details_panel_arrayWithoutHoles(t) {
					if (Array.isArray(t)) {
						for (var e = 0, n = new Array(t.length); e < t.length; e++) n[e] = t[e];
						return n;
					}
				})(t) ||
				(function details_panel_iterableToArray(t) {
					if (Symbol.iterator in Object(t) || '[object Arguments]' === Object.prototype.toString.call(t))
						return Array.from(t);
				})(t) ||
				(function details_panel_nonIterableSpread() {
					throw new TypeError('Invalid attempt to spread non-iterable instance');
				})()
			);
		}
		function details_panel_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function details_panel_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						details_panel_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						details_panel_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function details_panel_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function details_panel_possibleConstructorReturn(t, e) {
			return !e || ('object' !== details_panel_typeof(e) && 'function' != typeof e)
				? (function details_panel_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function details_panel_getPrototypeOf(t) {
			return (details_panel_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function details_panel_setPrototypeOf(t, e) {
			return (details_panel_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Zr = (function (t) {
			function DetailsPanel(t, e, n) {
				var r;
				return (
					(function details_panel_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, DetailsPanel),
					((r = details_panel_possibleConstructorReturn(
						this,
						details_panel_getPrototypeOf(DetailsPanel).call(this, t)
					))._pioneer = e),
					(r._id = null),
					(r._entityDesc = null),
					(r._entityInfo = null),
					(r._scene = n),
					r._constructHTML(),
					window.addEventListener(
						'selectionupdate',
						(function () {
							var t = details_panel_asyncToGenerator(
								regeneratorRuntime.mark(function _callee(t) {
									var e;
									return regeneratorRuntime.wrap(function _callee$(n) {
										for (;;)
											switch ((n.prev = n.next)) {
												case 0:
													if (r.isEnabled()) {
														n.next = 4;
														break;
													}
													return (r._id = null), r._stopTracking(), n.abrupt('return');
												case 4:
													(e = t.detail.new),
														(n.t0 = e),
														(n.next =
															'solar_system' === n.t0
																? 8
																: 'inner_solar_system' === n.t0
																? 8
																: 'outer_solar_system' === n.t0
																? 8
																: 12);
													break;
												case 8:
													return (r._id = null), r.hide(), r._stopTracking(), n.abrupt('break', 19);
												case 12:
													if (e === r._id) {
														n.next = 16;
														break;
													}
													return (r._id = e), (n.next = 16), r.setObject(e);
												case 16:
													return (
														yi.isMobile() && (r.showToggle(), r._isMini || r.toggleMiniMode()),
														r.show(),
														n.abrupt('break', 19)
													);
												case 19:
												case 'end':
													return n.stop();
											}
									}, _callee);
								})
							);
							return function (e) {
								return t.apply(this, arguments);
							};
						})(),
						!1
					),
					window.addEventListener(
						'unselect',
						function (t) {
							(r._id = null), r.hide(), r._stopTracking();
						},
						!1
					),
					window.addEventListener(
						'resize',
						function (t) {
							yi.get('compareManager').isComparing() || r._updateVisibility();
						},
						!1
					),
					(r._isVisible = !0),
					(r._isMini = !1),
					(r._lastClassName = null),
					(r._scrollbar = null),
					(r._isMetric = !1),
					(r._miToKm = 1.60934),
					(r._interval = null),
					(r._outData = { distance: 0, speed: 0, parent: '' }),
					r
				);
			}
			return (
				(function details_panel_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && details_panel_setPrototypeOf(t, e);
				})(DetailsPanel, Vr),
				(function details_panel_createClass(t, e, n) {
					return e && details_panel_defineProperties(t.prototype, e), n && details_panel_defineProperties(t, n), t;
				})(DetailsPanel, [
					{
						key: '_constructHTML',
						value: function _constructHTML() {
							var t = this;
							(this._container = document.createElement('div')),
								(this._container.className = 'container content'),
								(this._div.className = 'scrollable'),
								(this._div.innerHTML = ''),
								this._div.appendChild(this._container),
								(this._div.style.display = 'none'),
								this._div.addEventListener(
									'animationend',
									function () {
										'0' === window.getComputedStyle(t._div).opacity
											? (t._div.style.display = 'none')
											: (t._div.style.display = 'block');
									},
									!0
								),
								(this._title = document.createElement('h1')),
								(this._title.innerHTML = 'Empty'),
								this._title.addEventListener('click', function (e) {
									yi.isMobile() && t._isMini && t.toggleMiniMode();
								}),
								this._container.appendChild(this._title),
								(this._category = document.createElement('p')),
								(this._category.className = 'category'),
								this._container.appendChild(this._category),
								(this._categoryName = document.createElement('span')),
								(this._categoryName.innerHTML = 'Empty'),
								this._category.appendChild(this._categoryName),
								(this._image = document.createElement('img')),
								(this._image.className = 'objectimage no-select'),
								(this._image.src = ''),
								this._container.appendChild(this._image),
								(this._description = document.createElement('p')),
								(this._description.className = 'description'),
								(this._description.innerHTML = 'Empty'),
								this._container.appendChild(this._description),
								(this._videoContainer = document.createElement('a')),
								(this._videoContainer.className = 'video-container no-select'),
								(this._videoContainer.href = ''),
								this._container.appendChild(this._videoContainer),
								(this._video = document.createElement('video')),
								(this._video.className = 'video no-select'),
								(this._video.preload = 'auto'),
								(this._video.autoplay = !0),
								(this._video.playsInline = !0),
								(this._video.defaultMuted = !0),
								(this._video.muted = !0),
								(this._video.loop = !0),
								this._video.addEventListener('stalled', function () {
									t._videoContainer.replaceChild(t._videoFallback, t._video);
								}),
								this._videoContainer.appendChild(this._video),
								(this._videoSource = document.createElement('source')),
								(this._videoSource.src = ''),
								(this._videoSource.type = 'video/mp4'),
								this._video.appendChild(this._videoSource),
								(this._videoFallback = document.createElement('img')),
								(this._videoFallback.src = ''),
								(this._videoFallback.title = 'Your browser does not support the <video> tag'),
								this._video.appendChild(this._videoFallback),
								(this._moduleLink = document.createElement('a')),
								(this._moduleLink.className = 'module-link no-select'),
								(this._moduleLink.href = ''),
								(this._moduleLink.target = '_blank'),
								(this._moduleLink.innerHTML = ''),
								this._container.appendChild(this._moduleLink),
								(this._link = document.createElement('a')),
								(this._link.className = 'read-more no-select'),
								(this._link.href = ''),
								(this._link.target = '_blank'),
								(this._link.innerHTML = 'Read more'),
								this._container.appendChild(this._link),
								(this._quickfacts = document.createElement('div')),
								(this._quickfacts.className = 'quickfacts'),
								this._container.appendChild(this._quickfacts),
								(this._quickfactMap = {});
							for (
								var e = [
										['topLeft', 'topRight'],
										['bottomLeft', 'bottomRight']
									],
									n = 0;
								n < 2;
								n++
							) {
								for (var r = 0; r < 2; r++) {
									var i = e[n][r];
									this._quickfactMap[i] = {};
									var o = document.createElement('div');
									(o.className = 'data-block'), this._quickfacts.appendChild(o), (this._quickfactMap[i].dataBlock = o);
									var a = document.createElement('div');
									(a.className = 'data'), o.appendChild(a), (this._quickfactMap[i].data = a);
									var s = document.createElement('div');
									(s.className = 'info'), o.appendChild(s), (this._quickfactMap[i].info = s);
								}
								for (var l = 0; l < 2; l++) {
									var c = e[n][l],
										u = document.createElement('div');
									(u.className = 'label-block'),
										this._quickfacts.appendChild(u),
										(this._quickfactMap[c].labelBlock = u);
								}
							}
							(this._tracking = document.createElement('div')),
								(this._tracking.className = 'tracking quickfacts hidden'),
								this._container.appendChild(this._tracking);
							var _ = document.createElement('div');
							(_.className = 'system-switch'),
								(this._milesButton = document.createElement('button')),
								(this._milesButton.className = 'no-select active'),
								(this._milesButton.innerHTML = 'miles'),
								this._milesButton.addEventListener('click', this._displayMiles.bind(this)),
								_.appendChild(this._milesButton),
								(this._kmButton = document.createElement('button')),
								(this._kmButton.className = 'no-select'),
								(this._kmButton.innerHTML = 'km'),
								this._kmButton.addEventListener('click', this._displayKm.bind(this)),
								_.appendChild(this._kmButton),
								(this._trackingMap = {});
							for (var p = 0; p < 2; p++) {
								for (var h = 0; h < 2; h++)
									if (1 !== p || 1 !== h) {
										var d = e[p][h];
										this._trackingMap[d] = {};
										var f = document.createElement('div');
										(f.className = 'data-block'), this._tracking.appendChild(f), (this._trackingMap[d].dataBlock = f);
										var m = document.createElement('div');
										(m.className = 'data'), f.appendChild(m), (this._trackingMap[d].data = m);
										var g = document.createElement('div');
										(g.className = 'info'), f.appendChild(g), (this._trackingMap[d].info = g);
									} else this._tracking.appendChild(_);
								for (var y = 0; y < 2; y++)
									if (1 !== p || 1 !== y) {
										var v = e[p][y],
											b = document.createElement('div');
										(b.className = 'label-block'), this._tracking.appendChild(b), (this._trackingMap[v].labelBlock = b);
									}
							}
							(this._legend = document.createElement('p')),
								(this._legend.className = 'legend'),
								(this._legend.innerHTML = 'AU: Astronomical Unit, the distance between the Earth and the Sun.'),
								this._container.appendChild(this._legend),
								(this._footer = document.createElement('div')),
								(this._footer.className = 'footer'),
								this._container.appendChild(this._footer),
								(this._compare = document.createElement('button')),
								(this._compare.type = 'button'),
								(this._compare.className = 'compare no-select'),
								(this._compare.innerHTML = 'Compare Size'),
								(this._compare.value = 'compare'),
								this._compare.addEventListener(
									'click',
									(function () {
										var e = details_panel_asyncToGenerator(
											regeneratorRuntime.mark(function _callee2(e) {
												var n, r, i;
												return regeneratorRuntime.wrap(function _callee2$(e) {
													for (;;)
														switch ((e.prev = e.next)) {
															case 0:
																return (
																	(n = yi.get('content').getReplacement(t._id)),
																	(r = '/' + n + '/compare'),
																	(i = { time: yi.get('time').getTimeUrl() }),
																	(e.next = 5),
																	yi.router.navigate(r, i)
																);
															case 5:
															case 'end':
																return e.stop();
														}
												}, _callee2);
											})
										);
										return function (t) {
											return e.apply(this, arguments);
										};
									})()
								),
								this._footer.appendChild(this._compare),
								(this._toggle = document.createElement('button')),
								(this._toggle.type = 'button'),
								(this._toggle.className = 'details-toggle'),
								(this._toggle.value = 'toggle'),
								(this._toggle.innerHTML = ''),
								this._toggle.addEventListener('click', function (e) {
									t.toggleMiniMode();
								}),
								this._container.appendChild(this._toggle),
								(this._close = document.createElement('button')),
								(this._close.type = 'button'),
								(this._close.className = 'details-close'),
								(this._close.value = 'close'),
								(this._close.innerHTML = ''),
								this._close.addEventListener('click', function (t) {
									yi._selector.unselect();
								}),
								this._container.appendChild(this._close);
						}
					},
					{
						key: '_updateVisibility',
						value: function _updateVisibility() {
							yi.isMobile()
								? (this.showToggle(),
								  this._isMini
										? (this._div.classList.add('mini'), this._div.classList.remove('expand'))
										: (this._div.classList.remove('mini'), this._div.classList.add('expand')))
								: (this._isVisible || null === this._id || this.show(),
								  this.hideToggle(),
								  this._div.classList.remove('mini'),
								  this._div.classList.remove('expand'));
						}
					},
					{
						key: '_updateDescription',
						value: (function () {
							var t = details_panel_asyncToGenerator(
								regeneratorRuntime.mark(function _callee3() {
									var t, e, n, r, i, o, a, s, l, c, u, _, p, h, d;
									return regeneratorRuntime.wrap(
										function _callee3$(f) {
											for (;;)
												switch ((f.prev = f.next)) {
													case 0:
														if (((t = this._id), (e = this._getClassName(this._id)), null !== this._lastClassName))
															for (n = this._lastClassName.split(' '), r = 0; r < n.length; r++)
																this._div.classList.remove(n[r]);
														for (i = e.split(' '), o = 0; o < i.length; o++) this._div.classList.add(i[o]);
														if (
															((this._lastClassName = e),
															(this._title.innerHTML = this._entityDesc.name),
															(a = this._entityInfo.category),
															(this._category.className =
																'category ' + this._entityInfo.category.toLowerCase().replace(/ /g, '-')),
															'Moon' !== a)
														) {
															f.next = 20;
															break;
														}
														return (
															(s = this._scene.get(this._id).getParent().getName()),
															(s = yi.get('content').getReplacement(s)),
															(f.next = 14),
															fetch('descriptions/' + s + '.json').then(function (t) {
																return t.json();
															})
														);
													case 14:
														if (((l = f.sent), this._id === t)) {
															f.next = 17;
															break;
														}
														return f.abrupt('return');
													case 17:
														(a = 'Moon of ' + l.name), (f.next = 21);
														break;
													case 20:
														void 0 !== this._entityInfo.subcategory &&
															((a = this._entityInfo.subcategory),
															'Spacecraft' === this._entityInfo.category &&
																((a = this._entityInfo.subcategory + ' ' + this._entityInfo.category),
																(this._category.className +=
																	' ' + this._entityInfo.subcategory.toLowerCase().replace(/ /g, '-'))));
													case 21:
														if (
															((this._categoryName.innerHTML = a),
															void 0 !== this._entityDesc.image
																? ((this._image.src = this._entityDesc.image),
																  (this._image.alt = this._id),
																  this._image.classList.remove('hidden'))
																: this._image.classList.add('hidden'),
															(this._description.innerHTML = this._entityDesc.shortDescription),
															void 0 !== (c = this._entityDesc.quickfacts))
														) {
															f.next = 29;
															break;
														}
														this._quickfacts.classList.add('hidden'), (f.next = 52);
														break;
													case 29:
														this._quickfacts.classList.remove('hidden'),
															(u = ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']),
															(_ = 0);
													case 32:
														if (!(_ < u.length)) {
															f.next = 51;
															break;
														}
														if (((p = u[_]), void 0 !== (h = c[p]))) {
															f.next = 41;
															break;
														}
														return (
															(this._quickfactMap[p].dataBlock.style.display = 'none'),
															(this._quickfactMap[p].labelBlock.style.display = 'none'),
															f.abrupt('continue', 48)
														);
													case 41:
														(this._quickfactMap[p].dataBlock.style.display = 'grid'),
															(this._quickfactMap[p].labelBlock.style.display = 'block');
													case 43:
														(this._quickfactMap[p].data.innerHTML = h.data),
															(this._quickfactMap[p].data.className = 'data color'),
															void 0 !== h.class &&
																((e += h.class),
																(d = this._quickfactMap[p].data.classList).add.apply(
																	d,
																	details_panel_toConsumableArray(h.class.split(' '))
																)),
															void 0 !== h.info
																? ((this._quickfactMap[p].info.innerHTML = h.info),
																  (this._quickfactMap[p].info.style.display = 'block'))
																: (this._quickfactMap[p].info.style.display = 'none'),
															(this._quickfactMap[p].labelBlock.innerHTML = h.label);
													case 48:
														_++, (f.next = 32);
														break;
													case 51:
														null === this._scrollbar
															? (this._scrollbar = new qr.a(this._container, {
																	className: 'os-theme-dark',
																	resize: 'none',
																	sizeAutoCapable: !0,
																	clipAlways: !0,
																	normalizeRTL: !1,
																	paddingAbsolute: !1,
																	autoUpdate: !0,
																	overflowBehavior: { x: 'hidden', y: 'scroll' },
																	scrollbars: { clickScrolling: !0 }
															  }))
															: this._scrollbar.scroll(0);
													case 52:
														if (void 0 !== this._entityDesc.trackings) {
															f.next = 56;
															break;
														}
														this._stopTracking(), (f.next = 60);
														break;
													case 56:
														return (f.next = 58), this._startTracking(t);
													case 58:
														if (t === this._id) {
															f.next = 60;
															break;
														}
														return f.abrupt('return');
													case 60:
														this._entityDesc.video
															? ((this._videoSource.src = this._entityDesc.video.url),
															  this._video.load(),
															  this._entityDesc.video.link &&
																	(this._videoContainer.href = this._entityDesc.video.link),
															  this._entityDesc.video.fallback &&
																	(this._videoFallback.src = this._entityDesc.video.fallback),
															  this._videoContainer.classList.remove('hidden'))
															: this._videoContainer.classList.add('hidden'),
															(this._link.href = this._entityDesc.link),
															'Spacecraft' === this._entityInfo.category
																? this._legend.classList.add('hidden')
																: this._legend.classList.remove('hidden'),
															yi.get('content').hasLanded(this._id)
																? ((this._compare.style.display = 'none'), this._footer.classList.add('hidden'))
																: ((this._compare.style.display = 'inline-block'),
																  this._footer.classList.remove('hidden'));
													case 64:
													case 'end':
														return f.stop();
												}
										},
										_callee3,
										this
									);
								})
							);
							return function _updateDescription() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_getClassName',
						value: function _getClassName(t) {
							var e = this._pioneer.get('main', t);
							if (null === e) return '';
							var n = e.getParent();
							return (
								null !== n &&
									'sun' !== t &&
									'sun' !== n.getName() &&
									((t = n.getName()), (t = yi.get('content').getReplacement(t))),
								yi.get('content').getClassName(t)
							);
						}
					},
					{
						key: 'setObject',
						value: (function () {
							var t = details_panel_asyncToGenerator(
								regeneratorRuntime.mark(function _callee4(t) {
									return regeneratorRuntime.wrap(
										function _callee4$(e) {
											for (;;)
												switch ((e.prev = e.next)) {
													case 0:
														return (e.next = 2), yi.get('content').getEntityDesc(t);
													case 2:
														if (((this._entityDesc = e.sent), this._id === t)) {
															e.next = 5;
															break;
														}
														return e.abrupt('return');
													case 5:
														return (
															(this._entityInfo = yi.get('content').getEntityInfo(t)),
															(e.next = 8),
															this._updateDescription()
														);
													case 8:
													case 'end':
														return e.stop();
												}
										},
										_callee4,
										this
									);
								})
							);
							return function setObject(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'hide',
						value: function hide() {
							(this._isVisible = !1), this._div.classList.add('hidden'), this._div.classList.remove('active');
						}
					},
					{
						key: 'show',
						value: function show() {
							(this._isVisible = !0),
								this._div.classList.remove('hidden'),
								this._div.classList.add('active'),
								(this._div.style.display = 'block'),
								(this._container.scrollTop = 0);
						}
					},
					{
						key: 'toggleMiniMode',
						value: function toggleMiniMode() {
							(this._isMini = !this._isMini),
								this._isMini
									? (this._div.classList.add('mini'), this._div.classList.remove('expand'))
									: (this._div.classList.remove('mini'), this._div.classList.add('expand'));
						}
					},
					{
						key: 'showToggle',
						value: function showToggle() {
							this._toggle.style.display = 'block';
						}
					},
					{
						key: 'hideToggle',
						value: function hideToggle() {
							this._toggle.style.display = 'none';
						}
					},
					{
						key: '_displayMiles',
						value: function _displayMiles() {
							this._kmButton.classList.remove('active'),
								this._milesButton.classList.add('active'),
								(this._isMetric = !1);
						}
					},
					{
						key: '_displayKm',
						value: function _displayKm() {
							this._milesButton.classList.remove('active'),
								this._kmButton.classList.add('active'),
								(this._isMetric = !0);
						}
					},
					{
						key: '_formatDistance',
						value: function _formatDistance(t) {
							var e = '<span>',
								n = '',
								r = 'km';
							(t = Number.parseFloat(t)), this._isMetric || ((t /= this._miToKm), (r = 'mi'));
							for (
								var i = [
										{ label: 'trillion', value: 1e12 },
										{ label: 'billion', value: 1e9 },
										{ label: 'million', value: 1e6 },
										{ label: 'thousand', value: 1e3 }
									],
									o = 0;
								o < i.length;
								o++
							) {
								var a = i[o];
								if (t / a.value > 1) {
									(n = a.label), (t /= a.value);
									break;
								}
							}
							return (
								(t = Math.abs(t.toFixed(2))),
								(e += this._numberWithCommas(t) + '<span class="unit">' + n + ' ' + r + '</span>'),
								(e += '</span>')
							);
						}
					},
					{
						key: '_formatSpeed',
						value: function _formatSpeed(t) {
							var e = '<span>';
							return (
								this._isMetric
									? ((t = Number.parseFloat(3600 * t)),
									  (t = Math.abs(Math.floor(t))),
									  (e += this._numberWithCommas(t) + '<span class="unit">km/h</span>'))
									: ((t = Number.parseFloat((3600 * t) / this._miToKm)),
									  (t = Math.abs(Math.floor(t))),
									  (e += this._numberWithCommas(t) + '<span class="unit">mph</span>')),
								(e += '</span>')
							);
						}
					},
					{
						key: '_numberWithCommas',
						value: function _numberWithCommas(t) {
							return Number(t).toLocaleString();
						}
					},
					{
						key: '_startTracking',
						value: (function () {
							var t = details_panel_asyncToGenerator(
								regeneratorRuntime.mark(function _callee5(t) {
									var e,
										n,
										r,
										i,
										o,
										a,
										s,
										l,
										c,
										u = this;
									return regeneratorRuntime.wrap(
										function _callee5$(_) {
											for (;;)
												switch ((_.prev = _.next)) {
													case 0:
														(e = this._entityDesc.trackings), (n = ['topLeft', 'topRight', 'bottomLeft']), (r = 0);
													case 3:
														if (!(r < n.length)) {
															_.next = 12;
															break;
														}
														if (((i = n[r]), void 0 === (o = e[i]) || void 0 === o.target)) {
															_.next = 9;
															break;
														}
														return (_.next = 9), yi.get('scene').isReady(o.target);
													case 9:
														r++, (_.next = 3);
														break;
													case 12:
														if (this._id === t) {
															_.next = 14;
															break;
														}
														return _.abrupt('return');
													case 14:
														a = 0;
													case 15:
														if (!(a < n.length)) {
															_.next = 33;
															break;
														}
														if (((s = n[a]), void 0 !== (l = e[s]))) {
															_.next = 24;
															break;
														}
														return (
															(this._trackingMap[s].dataBlock.style.display = 'none'),
															(this._trackingMap[s].labelBlock.style.display = 'none'),
															_.abrupt('continue', 30)
														);
													case 24:
														(this._trackingMap[s].dataBlock.style.display = 'grid'),
															(this._trackingMap[s].labelBlock.style.display = 'block');
													case 26:
														(this._trackingMap[s].data.className = 'data color'),
															void 0 !== l.class &&
																(c = this._trackingMap[s].data.classList).add.apply(
																	c,
																	details_panel_toConsumableArray(l.class.split(' '))
																),
															(this._trackingMap[s].info.style.display = 'none'),
															(this._trackingMap[s].labelBlock.innerHTML = l.label);
													case 30:
														a++, (_.next = 15);
														break;
													case 33:
														this._tracking.classList.remove('hidden'),
															null !== this._interval && clearInterval(this._interval),
															(this._interval = setInterval(function () {
																if ((!u._isMini || !yi.isMobile()) && u._isVisible) {
																	if (
																		!yi._pioneer.get('main', u._id).isInPositionCoverage() ||
																		yi.get('content').hasLanded(u._id)
																	)
																		return void u._tracking.classList.add('hidden');
																	if (u._id !== t) return;
																	u._tracking.classList.remove('hidden');
																	for (var r = 0; r < n.length; r++) {
																		var i = n[r],
																			o = e[i];
																		if (void 0 !== o && void 0 !== o.type)
																			switch (o.type) {
																				case 'distance':
																					void 0 !== o.target &&
																						(yi
																							.get('scene')
																							.getDistance(u._id, o.target, u._outData, { subtractRadius: !0 }),
																						(o.data = u._formatDistance(u._outData.distance)),
																						(u._trackingMap[i].data.innerHTML = o.data));
																					break;
																				case 'speed':
																					yi.get('scene').getSpeed(u._id, yi.get('time').getTime(), u._outData),
																						(o.label = 'Speed (relative to ' + u._outData.parent + ')'),
																						(o.data = u._formatSpeed(u._outData.speed)),
																						(u._trackingMap[i].labelBlock.innerHTML = o.label),
																						(u._trackingMap[i].data.innerHTML = o.data);
																			}
																	}
																}
															}, 500));
													case 36:
													case 'end':
														return _.stop();
												}
										},
										_callee5,
										this
									);
								})
							);
							return function _startTracking(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_stopTracking',
						value: function _stopTracking() {
							this._tracking && this._tracking.classList.add('hidden'),
								null !== this._interval && (clearInterval(this._interval), (this._interval = null));
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							(this._div.style.display = 'none'), this._stopTracking(), this.hide();
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							null !== this._id &&
								((this._div.style.display = 'block'),
								this.show(),
								this._updateVisibility(),
								this._entityDesc && void 0 !== this._entityDesc.trackings && this._startTracking(this._id));
						}
					}
				]),
				DetailsPanel
			);
		})();
		n(495);
		function navigation_bar_typeof(t) {
			return (navigation_bar_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function navigation_bar_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function navigation_bar_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						navigation_bar_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						navigation_bar_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function navigation_bar_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function navigation_bar_possibleConstructorReturn(t, e) {
			return !e || ('object' !== navigation_bar_typeof(e) && 'function' != typeof e)
				? (function navigation_bar_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function navigation_bar_getPrototypeOf(t) {
			return (navigation_bar_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function navigation_bar_setPrototypeOf(t, e) {
			return (navigation_bar_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Yr = (function (t) {
				function NavigationBar(t, e) {
					var n;
					return (
						(function navigation_bar_classCallCheck(t, e) {
							if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
						})(this, NavigationBar),
						((n = navigation_bar_possibleConstructorReturn(
							this,
							navigation_bar_getPrototypeOf(NavigationBar).call(this, t)
						))._pioneer = e),
						(n._id = null),
						(n._leftButton = null),
						(n._rightButton = null),
						(n._customTargets = {
							inner_solar_system: { system: 'outer_solar_system', object: 'outer_solar_system' },
							outer_solar_system: { system: 'inner_solar_system', object: 'inner_solar_system' },
							sun: { system: 'inner_solar_system', object: 'sun' }
						}),
						n._constructHTML(),
						(n._displaySystem = !1),
						n.setObject('outer_solar_system', n._displaySystem),
						window.addEventListener(
							'selectionupdate',
							function (t) {
								var e = t.detail.new;
								n._id !== e && ((n._displaySystem = !1), n.setObject(e, n._displaySystem));
							},
							!1
						),
						window.addEventListener(
							'cameraupdate',
							function (t) {
								var e = t.detail.target,
									r = t.detail.range;
								(n._displaySystem = 'near' === r), n.setObject(e, n._displaySystem);
							},
							!1
						),
						window.addEventListener(
							'unselect',
							function (t) {
								(n._id = null), (n._displaySystem = !1), n.setObject('outer_solar_system', n._displaySystem);
							},
							!1
						),
						n
					);
				}
				return (
					(function navigation_bar_inherits(t, e) {
						if ('function' != typeof e && null !== e)
							throw new TypeError('Super expression must either be null or a function');
						(t.prototype = Object.create(e && e.prototype, {
							constructor: { value: t, writable: !0, configurable: !0 }
						})),
							e && navigation_bar_setPrototypeOf(t, e);
					})(NavigationBar, Vr),
					(function navigation_bar_createClass(t, e, n) {
						return e && navigation_bar_defineProperties(t.prototype, e), n && navigation_bar_defineProperties(t, n), t;
					})(NavigationBar, [
						{
							key: '_constructHTML',
							value: function _constructHTML() {
								var t = this,
									e = document.createElement('div');
								(e.className = 'container'),
									this._div.appendChild(e),
									(this._leftButton = document.createElement('button')),
									(this._leftButton.type = 'button'),
									(this._leftButton.value = 'solar_system'),
									(this._leftButton.className = 'outer-solar-system no-select left secondary'),
									this._leftButton.addEventListener(
										'click',
										navigation_bar_asyncToGenerator(
											regeneratorRuntime.mark(function _callee() {
												var t;
												return regeneratorRuntime.wrap(function _callee$(e) {
													for (;;)
														switch ((e.prev = e.next)) {
															case 0:
																if ('/home' !== yi.router.lastPathResolved()) {
																	e.next = 5;
																	break;
																}
																yi.selector.unselect(),
																	yi.camera.goToObject('outer_solar_system', 'default').then(function () {}),
																	(e.next = 9);
																break;
															case 5:
																return (
																	'/home',
																	(t = { time: yi.get('time').getTimeUrl() }),
																	(e.next = 9),
																	yi.router.navigate('/home', t)
																);
															case 9:
															case 'end':
																return e.stop();
														}
												}, _callee);
											})
										)
									),
									e.appendChild(this._leftButton),
									(this._leftButtonText = document.createElement('span')),
									(this._leftButtonText.innerHTML = 'Solar System'),
									this._leftButton.appendChild(this._leftButtonText),
									(this._rightButton = document.createElement('button')),
									(this._rightButton.type = 'button'),
									(this._rightButton.value = 'inner_solar_system'),
									(this._rightButton.className = 'inner-solar-system no-select right secondary'),
									this._rightButton.addEventListener(
										'click',
										navigation_bar_asyncToGenerator(
											regeneratorRuntime.mark(function _callee2() {
												var e, n, r;
												return regeneratorRuntime.wrap(function _callee2$(i) {
													for (;;)
														switch ((i.prev = i.next)) {
															case 0:
																return (
																	(e = 'near'),
																	t._displaySystem && (e = 'far'),
																	(n = '/' + t._id),
																	(r = { range: e, time: yi.get('time').getTimeUrl() }),
																	'inner_solar_system' === t._id
																		? (r = { time: yi.get('time').getTimeUrl() })
																		: 'outer_solar_system' === t._id &&
																		  ((n = '/home'), (r = { time: yi.get('time').getTimeUrl() })),
																	(i.next = 7),
																	yi.router.navigate(n, r)
																);
															case 7:
															case 'end':
																return i.stop();
														}
												}, _callee2);
											})
										)
									),
									e.appendChild(this._rightButton),
									(this._rightButtonText = document.createElement('span')),
									(this._rightButtonText.innerHTML = 'Inner Solar System'),
									this._rightButton.appendChild(this._rightButtonText);
							}
						},
						{
							key: '_getAdjective',
							value: function _getAdjective(t) {
								var e = this._pioneer.get('main', t),
									n = yi.get('content').getEntityInfo(t);
								if (null === e) return n.adjective;
								var r = e.getParent();
								return null === r
									? n.adjective
									: 'sun' === r.getName()
									? n.adjective
									: yi.get('content').getEntityInfo(r.getName()).adjective;
							}
						},
						{
							key: '_getButtonText',
							value: function _getButtonText(t, e) {
								var n = '',
									r = yi.get('content').getEntityInfo(t);
								if (e)
									switch (r.category) {
										case 'Spacecraft':
										case 'Asteroid':
										case 'Comet':
											n = r.category + ' Location';
											break;
										default:
											n = this._getAdjective(t) + ' System';
									}
								else
									switch (r.category) {
										case 'Spacecraft':
											n = 'Spacecraft View';
											break;
										default:
											n = r.name;
									}
								return n;
							}
						},
						{
							key: '_getClassName',
							value: function _getClassName(t, e) {
								var n = 'object';
								return e && (n = 'system'), yi.get('content').getClassName(t) + ' right no-select secondary ' + n;
							}
						},
						{
							key: '_updateButtons',
							value: (function () {
								var t = navigation_bar_asyncToGenerator(
									regeneratorRuntime.mark(function _callee3(t, e) {
										return regeneratorRuntime.wrap(
											function _callee3$(n) {
												for (;;)
													switch ((n.prev = n.next)) {
														case 0:
															(this._rightButtonText.innerHTML = this._getButtonText(t, e)),
																(this._rightButton.className = this._getClassName(t, e));
														case 2:
														case 'end':
															return n.stop();
													}
											},
											_callee3,
											this
										);
									})
								);
								return function _updateButtons(e, n) {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '_getTarget',
							value: function _getTarget(t, e) {
								if (t in this._customTargets) return e ? this._customTargets[t].system : this._customTargets[t].object;
								if (!e) return t;
								var n = this._pioneer.get('main', t).getParent();
								return null !== n && 'sun' === n.getName() ? t : null !== n ? n.getName() : void 0;
							}
						},
						{
							key: 'setObject',
							value: (function () {
								var t = navigation_bar_asyncToGenerator(
									regeneratorRuntime.mark(function _callee4(t, e) {
										return regeneratorRuntime.wrap(
											function _callee4$(n) {
												for (;;)
													switch ((n.prev = n.next)) {
														case 0:
															(this._id = this._getTarget(t, e)), this._updateButtons(this._id, e);
														case 2:
														case 'end':
															return n.stop();
													}
											},
											_callee4,
											this
										);
									})
								);
								return function setObject(e, n) {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '__disable',
							value: function __disable() {
								this._div.style.display = 'none';
							}
						},
						{
							key: '__enable',
							value: function __enable() {
								this._div.style.display = 'block';
							}
						}
					]),
					NavigationBar
				);
			})(),
			Xr = n(54),
			Kr = n.n(Xr);
		n(496);
		function controls_bar_typeof(t) {
			return (controls_bar_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function controls_bar_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function controls_bar_possibleConstructorReturn(t, e) {
			return !e || ('object' !== controls_bar_typeof(e) && 'function' != typeof e)
				? (function controls_bar_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function controls_bar_getPrototypeOf(t) {
			return (controls_bar_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function controls_bar_setPrototypeOf(t, e) {
			return (controls_bar_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Wr = (function (t) {
			function Controls(t, e) {
				var n;
				return (
					(function controls_bar_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Controls),
					((n = controls_bar_possibleConstructorReturn(
						this,
						controls_bar_getPrototypeOf(Controls).call(this, t)
					))._pioneer = e),
					(n._light = null),
					(n._isLightOn = !1),
					(n._forcedLightOn = !1),
					(n._isFullScreen = !1),
					(n._fullscreenResolution = { width: 0, height: 0 }),
					n._constructHTML(),
					window.addEventListener(
						'cameraupdate',
						function (t) {
							var e = t.detail.target,
								r = t.detail.range;
							'Spacecraft' === yi.get('content').getEntityInfo(e).category && 'near' === r
								? n._isLightOn || (n.toggleLight(), (n._forcedLightOn = !0))
								: n._forcedLightOn && n._isLightOn
								? (n.toggleLight(), (n._forcedLightOn = !1))
								: (n._forcedLightOn = !1);
							var i = yi.get('scene').hasHD(e);
							(n._hd.disabled = !i), i ? n._hd.classList.remove('hidden') : n._hd.classList.add('hidden');
						},
						!1
					),
					window.addEventListener(
						'comparisonenter',
						function (t) {
							n._isLightOn || (n.toggleLight(), (n._forcedLightOn = !0)), n._hd.classList.add('hidden');
						},
						!1
					),
					window.addEventListener(
						'comparisonexit',
						function (t) {
							n._isLightOn && n._forcedLightOn ? (n.toggleLight(), (n._forcedLightOn = !1)) : (n._forcedLightOn = !1),
								n._hd.classList.remove('hidden');
						},
						!1
					),
					window.addEventListener('loading', function () {
						n.setLoading(!0);
					}),
					window.addEventListener('allloaded', function () {
						n.setLoading(!1);
					}),
					n
				);
			}
			return (
				(function controls_bar_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && controls_bar_setPrototypeOf(t, e);
				})(Controls, Vr),
				(function controls_bar_createClass(t, e, n) {
					return e && controls_bar_defineProperties(t.prototype, e), n && controls_bar_defineProperties(t, n), t;
				})(Controls, [
					{
						key: '_constructHTML',
						value: function _constructHTML() {
							var t = this,
								e = document.createElement('div');
							(e.className = 'controls-container'),
								this._div.appendChild(e),
								(this._toggleUnit = document.createElement('button')),
								(this._toggleUnit.type = 'button'),
								(this._toggleUnit.className = 'toggle-unit no-select secondary'),
								(this._toggleUnit.value = 'toggle'),
								(this._toggleUnit.style.display = 'none'),
								yi.isMetric() ? this._toggleUnit.classList.add('metric') : this._toggleUnit.classList.remove('metric'),
								this._toggleUnit.addEventListener('click', function (e) {
									yi.toggleUnitSystem(),
										yi.isMetric() ? t._toggleUnit.classList.add('metric') : t._toggleUnit.classList.remove('metric');
								}),
								e.appendChild(this._toggleUnit),
								window.addEventListener('comparisonenter', function () {
									t._toggleUnit.style.display = 'inline-block';
								}),
								window.addEventListener('comparisonexit', function () {
									t._toggleUnit.style.display = 'none';
								}),
								(this._hd = document.createElement('button')),
								(this._hd.type = 'button'),
								(this._hd.className = 'hd-toggle secondary'),
								(this._hd.value = 'hd'),
								(this._hd.innerHTML = ''),
								this._hd.addEventListener('click', function (e) {
									t.toggleHD();
								}),
								e.appendChild(this._hd),
								(this._light = document.createElement('button')),
								(this._light.type = 'button'),
								(this._light.className = 'light-toggle secondary'),
								(this._light.value = 'light'),
								(this._light.innerHTML = ''),
								this._light.addEventListener('click', function (e) {
									t.toggleLight();
								}),
								e.appendChild(this._light),
								(this._loadIcon = document.createElement('div')),
								(this._loadIcon.className = 'load-icon'),
								this._loadIcon.classList.add('hidden');
							for (var n = ['bg', 'front', 'left', 'top', 'right', 'bottom'], r = 0; r < n.length; r++) {
								var i = document.createElement('div');
								(i.className = n[r] + ' face'), this._loadIcon.appendChild(i);
							}
							var o = document.createElement('div');
							(o.innerHTML = 'Loading'),
								(o.className = 'text'),
								this._loadIcon.appendChild(o),
								e.appendChild(this._loadIcon),
								Kr.a.enabled
									? ((this._fullscreen = document.createElement('button')),
									  (this._fullscreen.innerHTML = ''),
									  (this._fullscreen.type = 'button'),
									  (this._fullscreen.className = 'toggle-fullscreen secondary'),
									  (this._fullscreen.value = 'toggle'),
									  this._fullscreen.addEventListener('click', function (e) {
											t.toggleFullscreen();
									  }),
									  e.appendChild(this._fullscreen),
									  Kr.a.on('change', function () {
											(t._isFullScreen = Kr.a.isFullscreen),
												t._isFullScreen
													? (t._fullscreen.classList.add('active'), yi.showNASALogo())
													: (t._fullscreen.classList.remove('active'), yi.hideNASALogo());
									  }),
									  this._fullscreen.classList.add('last'))
									: this._light.classList.add('last'),
								document.addEventListener('keyup', function (e) {
									t._isFullScreen ||
										'F11' !== e.code ||
										((t._fullscreenResolution.width = window.innerWidth),
										(t._fullscreenResolution.height = window.innerHeight),
										(t._isFullScreen = !0),
										t._fullscreen.classList.add('active'));
								}),
								window.addEventListener('resize', function () {
									t._isFullScreen &&
										t._fullscreenResolution.height > window.innerHeight &&
										t._fullscreenResolution.width > window.innerWidth &&
										((t._isFullScreen = !1), t._fullscreen.classList.remove('active'));
								});
						}
					},
					{
						key: 'toggleLight',
						value: function toggleLight() {
							(this._isLightOn = !this._isLightOn),
								yi.camera.toggleCameraLight(this._isLightOn),
								yi.get('compareManager').toggleCameraLight(this._isLightOn),
								this._isLightOn ? this._light.classList.add('on') : this._light.classList.remove('on');
						}
					},
					{
						key: 'toggleHD',
						value: function toggleHD() {
							yi.get('scene').toggleHD(),
								yi.get('scene').isHD() ? this._hd.classList.add('active') : this._hd.classList.remove('active');
						}
					},
					{
						key: 'toggleFullscreen',
						value: function toggleFullscreen() {
							Kr.a.enabled && Kr.a.toggle();
						}
					},
					{
						key: 'isFullscreen',
						value: function isFullscreen() {
							return this._isFullScreen;
						}
					},
					{
						key: 'setLoading',
						value: function setLoading(t) {
							t ? this._loadIcon.classList.remove('hidden') : this._loadIcon.classList.add('hidden');
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							this._div.style.display = 'none';
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							this._div.style.display = 'block';
						}
					}
				]),
				Controls
			);
		})();
		n(497);
		function clock_typeof(t) {
			return (clock_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function clock_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function clock_getPrototypeOf(t) {
			return (clock_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function clock_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function clock_setPrototypeOf(t, e) {
			return (clock_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var Qr = (function (t) {
			function Clock(t, e) {
				var n;
				return (
					(function clock_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Clock),
					((n = (function clock_possibleConstructorReturn(t, e) {
						return !e || ('object' !== clock_typeof(e) && 'function' != typeof e) ? clock_assertThisInitialized(t) : e;
					})(this, clock_getPrototypeOf(Clock).call(this, t)))._pioneer = e),
					(n._timeElement = null),
					(n._timezone = 'America/Los_Angeles'),
					(n._timeFormat = yi.get('time').getDateFormat('time')),
					(n._dateFormat = yi.get('time').getDateFormat('date')),
					(n._isUTC = yi.get('time').getDisplayUTC()),
					(n._handleClick = n._handleClick.bind(clock_assertThisInitialized(n))),
					(n._clickCount = 0),
					(n._timeLimit = 1e3),
					(n._timer = 0),
					(n._clickIntervals = []),
					n._constructHTML(),
					n
				);
			}
			return (
				(function clock_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && clock_setPrototypeOf(t, e);
				})(Clock, Vr),
				(function clock_createClass(t, e, n) {
					return e && clock_defineProperties(t.prototype, e), n && clock_defineProperties(t, n), t;
				})(Clock, [
					{
						key: '_constructHTML',
						value: function _constructHTML() {
							var t = document.createElement('div');
							(t.className = 'clock-container'),
								t.addEventListener('click', this._handleClick, !1),
								this._div.appendChild(t),
								(this._dateComponents = document.createElement('div')),
								(this._dateComponents.className = 'date-components'),
								t.appendChild(this._dateComponents),
								(this._dateElement = document.createElement('p')),
								(this._dateElement.className = 'date'),
								this._dateComponents.appendChild(this._dateElement),
								(this._timeComponents = document.createElement('div')),
								(this._timeComponents.className = 'time-components'),
								t.appendChild(this._timeComponents),
								(this._timeElement = document.createElement('p')),
								(this._timeElement.className = 'time'),
								this._timeComponents.appendChild(this._timeElement),
								(this._meridiem = document.createElement('span')),
								(this._meridiem.className = 'meridiem'),
								this._timeComponents.appendChild(this._meridiem),
								(this._am = document.createElement('div')),
								(this._am.innerHTML = 'AM'),
								this._meridiem.appendChild(this._am),
								(this._pm = document.createElement('div')),
								(this._pm.innerHTML = 'PM'),
								this._am.classList.add('off'),
								this._meridiem.appendChild(this._pm),
								(this._timezone = Dr.a.tz.guess());
						}
					},
					{
						key: '_handleClick',
						value: function _handleClick() {
							this._clickCount++;
							var t = new Date();
							1 === this._clickCount && (this._timer = new Date()),
								(this._clickIntervals[this._clickCount - 1] = t.valueOf() - this._timer.valueOf()),
								this._clickCount > 1 &&
									this._clickIntervals[this._clickCount - 1] - this._clickIntervals[this._clickCount - 2] >
										this._timeLimit &&
									((this._clickCount = 0), (this._clickIntervals = [])),
								this._clickCount >= 6 &&
									!yi._timeRateSlider.isEnabled() &&
									(yi._timeRateSlider.setEnabled(!0), (this._clickCount = 0), (this._clickIntervals = [])),
								this._clickCount >= 3 &&
									yi._timeRateSlider.isEnabled() &&
									(yi._timeRateSlider.setEnabled(!1), (this._clickCount = 0), (this._clickIntervals = []));
						}
					},
					{
						key: 'setUTC',
						value: function setUTC(t) {
							(this._isUTC = t),
								this._isUTC ? (this._meridiem.style.display = 'none') : (this._meridiem.style.display = 'inline-block'),
								(this._timeFormat = yi.get('time').getDateFormat('time')),
								(this._dateFormat = yi.get('time').getDateFormat('date'));
						}
					},
					{
						key: 'update',
						value: function update(t) {
							this.isEnabled &&
								(this._updateTimeDisplay(t),
								this._isUTC ||
									('pm' === t.format('a')
										? (this._am.classList.add('off'), this._pm.classList.remove('off'))
										: (this._am.classList.remove('off'), this._pm.classList.add('off'))));
						}
					},
					{
						key: '_updateTimeDisplay',
						value: function _updateTimeDisplay(t) {
							var e = t.format(this._timeFormat),
								n = t.format(this._dateFormat);
							(this._timeElement.innerHTML = e),
								(this._dateElement.innerHTML = n),
								'pm' === t.format('a')
									? (this._am.classList.add('off'), this._pm.classList.remove('off'))
									: (this._am.classList.remove('off'), this._pm.classList.add('off'));
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							this._div.style.display = 'none';
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							this._div.style.display = 'block';
						}
					}
				]),
				Clock
			);
		})();
		function object_selector_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function object_selector_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var ti = (function () {
			function ObjectSelector(t) {
				!(function object_selector_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, ObjectSelector),
					(this._id = null),
					(this._scene = t);
			}
			return (
				(function object_selector_createClass(t, e, n) {
					return e && object_selector_defineProperties(t.prototype, e), n && object_selector_defineProperties(t, n), t;
				})(ObjectSelector, [
					{
						key: 'selectEntity',
						value: (function () {
							var t = (function object_selector_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											object_selector_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											object_selector_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee(t) {
									var e, n;
									return regeneratorRuntime.wrap(
										function _callee$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														(e = this._id),
															t !== e &&
																((n = new CustomEvent('selectionupdate', { detail: { new: t, old: this._id } })),
																window.dispatchEvent(n),
																(this._id = t),
																this._switchSelectionClass(this._id, e));
													case 2:
													case 'end':
														return r.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function selectEntity(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_switchSelectionClass',
						value: function _switchSelectionClass(t, e) {
							if (null !== e) {
								var n = this._scene.get(e);
								if (null !== n) {
									var r = n.getComponentByType('div').getDiv();
									r && r.classList.remove('selection');
								}
							}
							if (null !== t) {
								var i = this._scene.get(t);
								if (null !== i) {
									var o = i.getComponentByType('div').getDiv();
									o && o.classList.add('selection');
								}
							}
						}
					},
					{
						key: 'getCurrentId',
						value: function getCurrentId() {
							return this._id;
						}
					},
					{
						key: 'unselect',
						value: function unselect() {
							var t = this._id;
							if (null !== t) {
								var e = new CustomEvent('unselect', { old: this._id });
								window.dispatchEvent(e);
							}
							(this._id = null), this._switchSelectionClass(this._id, t);
						}
					}
				]),
				ObjectSelector
			);
		})();
		function camera_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function camera_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						camera_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						camera_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function camera_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var ei = (function () {
			function Camera(t, e) {
				!(function camera_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Camera),
					(this._scene = t),
					(this._cameraEntity = t.get('camera')),
					(this._selector = e),
					(this._id = null),
					(this._range = ''),
					(this._previousId = null),
					(this._cameraLight = this._cameraEntity.get('lightSource')),
					null === this._cameraLight &&
						((this._cameraLight = this._cameraEntity.addComponent('lightSource')), this._cameraLight.setEnabled(!1)),
					(this._customOrbits = { earth: 'moon', sun: 'earth', '134340_pluto_barycenter': '134340_pluto' }),
					(this._customSystemDistances = {
						mercury: 425648,
						venus: 862136,
						earth: 1040264,
						mars: 8e4,
						jupiter: 7157638,
						saturn: 4869142,
						uranus: 1886367,
						neptune: 2407045,
						'134340_pluto': 122231,
						'136199_eris': 180309,
						'1_ceres': 87225,
						'136108_haumea': 126609,
						'136472_makemake': 118584
					}),
					(this._isTransitioning = !1),
					(this._defaultMaxDistance = 2e18),
					(this._milkywaySprite = null),
					(this.update = this.update.bind(this));
			}
			return (
				(function camera_createClass(t, e, n) {
					return e && camera_defineProperties(t.prototype, e), n && camera_defineProperties(t, n), t;
				})(Camera, [
					{
						key: 'getCurrentId',
						value: function getCurrentId() {
							return this._id;
						}
					},
					{
						key: 'getRange',
						value: function getRange() {
							return this._range;
						}
					},
					{
						key: 'toggleCameraLight',
						value: function toggleCameraLight(t) {
							null !== this._cameraLight && this._cameraLight.setEnabled(t);
						}
					},
					{
						key: 'intro',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee() {
									var t;
									return regeneratorRuntime.wrap(
										function _callee$(e) {
											for (;;)
												switch ((e.prev = e.next)) {
													case 0:
														return (
															(t = new CustomEvent('cameraupdate', {
																detail: { target: 'outer_solar_system', range: 'far' }
															})),
															window.dispatchEvent(t),
															this._renderMessage('outer_solar_system', 'Solar', 'Welcome to the', 'System'),
															(this._id = 'sun'),
															(this._range = 'default'),
															(e.next = 7),
															this._goToSystem('sun', { distance: 1e10, angle: 55, duration: 0 })
														);
													case 7:
														return (e.next = 9), this._goToSystem('sun', { distance: 1e10, angle: 25, duration: 1.5 });
													case 9:
													case 'end':
														return e.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function intro() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'goToObject',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2(t, e) {
									var n, r, i;
									return regeneratorRuntime.wrap(
										function _callee2$(o) {
											for (;;)
												switch ((o.prev = o.next)) {
													case 0:
														if (!this._isTransitioning || this._id !== t || this._range !== e) {
															o.next = 2;
															break;
														}
														return o.abrupt('return');
													case 2:
														if (
															((this._previousId = this._id),
															(this._id = t),
															(this._range = e),
															(n = new CustomEvent('cameraupdate', { detail: { target: t, range: e } })),
															window.dispatchEvent(n),
															(r = yi.get('content').getEntityInfo(t)),
															'near' !== e)
														) {
															o.next = 39;
															break;
														}
														(o.t0 = r.category), (o.next = 'System' === o.t0 ? 12 : 'Spacecraft' === o.t0 ? 22 : 33);
														break;
													case 12:
														if ('inner_solar_system' !== t) {
															o.next = 18;
															break;
														}
														return (
															this._renderMessage(t, r.adjective, 'Traveling to', 'System'),
															(o.next = 16),
															this._goToSystem('sun', { distance: 7e8, angle: 25 }).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'system' }
																});
																window.dispatchEvent(n);
															})
														);
													case 16:
														o.next = 21;
														break;
													case 18:
														return (
															this._renderMessage(t, r.adjective, 'Traveling to', 'System'),
															(o.next = 21),
															this._goToSystem('sun', { distance: 1e10, angle: 25 }).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'system' }
																});
																window.dispatchEvent(n);
															})
														);
													case 21:
														return o.abrupt('break', 37);
													case 22:
														if (!yi.get('content').hasLanded(t)) {
															o.next = 29;
															break;
														}
														return (
															this._renderMessage(t, r.name, 'Aligning view with'),
															(o.next = 27),
															this._alignSpacecraftPlanet(t).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'align' }
																});
																window.dispatchEvent(n);
															})
														);
													case 27:
														o.next = 32;
														break;
													case 29:
														return (
															this._renderMessage(t, r.name, 'Traveling to'),
															(o.next = 32),
															this._goToSpacecraft(t).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'spacecraft' }
																});
																window.dispatchEvent(n);
															})
														);
													case 32:
														return o.abrupt('break', 37);
													case 33:
														return (
															this._renderMessage(t, r.name, 'Traveling to'),
															(o.next = 36),
															this._goToPlanet(t).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'planet' }
																});
																window.dispatchEvent(n);
															})
														);
													case 36:
														return o.abrupt('break', 37);
													case 37:
														o.next = 62;
														break;
													case 39:
														(o.t1 = r.category),
															(o.next =
																'Moon' === o.t1
																	? 42
																	: 'Spacecraft' === o.t1
																	? 42
																	: 'Asteroid' === o.t1
																	? 42
																	: 'Comet' === o.t1
																	? 42
																	: 'System' === o.t1
																	? 46
																	: 56);
														break;
													case 42:
														return (
															this._renderMessage(t, r.name, 'Showing location of'),
															(o.next = 45),
															this._showLocation(t).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'location' }
																});
																window.dispatchEvent(n);
															})
														);
													case 45:
														return o.abrupt('break', 62);
													case 46:
														if ('inner_solar_system' !== t) {
															o.next = 52;
															break;
														}
														return (
															this._renderMessage(t, r.adjective, 'Traveling to', 'System'),
															(o.next = 50),
															this._goToSystem('sun', { distance: 7e8, angle: 25 }).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'system' }
																});
																window.dispatchEvent(n);
															})
														);
													case 50:
														o.next = 55;
														break;
													case 52:
														return (
															this._renderMessage(t, r.adjective, 'Traveling to', 'System'),
															(o.next = 55),
															this._goToSystem('sun', { distance: 1e10, angle: 25 }).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'system' }
																});
																window.dispatchEvent(n);
															})
														);
													case 55:
														return o.abrupt('break', 62);
													case 56:
														return (
															this._renderMessage(t, r.adjective, 'Traveling to', 'System'),
															(i = 0),
															t in this._customSystemDistances && (i = this._customSystemDistances[t]),
															(o.next = 61),
															this._goToSystem(t, { minDistance: i }).then(function () {
																var n = new CustomEvent('cameratransitiondone', {
																	detail: { target: t, range: e, mode: 'system' }
																});
																window.dispatchEvent(n);
															})
														);
													case 61:
														return o.abrupt('break', 62);
													case 62:
													case 'end':
														return o.stop();
												}
										},
										_callee2,
										this
									);
								})
							);
							return function goToObject(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'compareObjects',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee3(t, e, n) {
									var r, i, o, a, s, l, c, u, _, p, h, d, f, m, g;
									return regeneratorRuntime.wrap(
										function _callee3$(y) {
											for (;;)
												switch ((y.prev = y.next)) {
													case 0:
														(r = n.cameraLeft),
															(i = void 0 === r ? void 0 : r),
															(o = n.cameraRight),
															(a = void 0 === o ? void 0 : o),
															(s = n.cameraLeftPosition),
															(l = void 0 === s ? void 0 : s),
															(c = n.cameraRightPosition),
															(u = void 0 === c ? void 0 : c),
															(_ = n.cameraUp),
															(p = void 0 === _ ? void 0 : _),
															(h = n.scene),
															(d = void 0 === h ? void 0 : h),
															(f = n.duration),
															(m = void 0 === f ? 0.75 : f),
															(g = new CustomEvent('cameracompare', { detail: { left: t, right: e } })),
															window.dispatchEvent(g),
															this._goToEntity(t, {
																camera: i,
																destination: l,
																destinationUp: p,
																scene: d,
																select: !1,
																duration: m,
																zoom: !1,
																cinematic: !0
															}),
															this._goToEntity(e, {
																camera: a,
																destination: u,
																destinationUp: p,
																scene: d,
																select: !1,
																duration: m,
																zoom: !1,
																cinematic: !0
															});
													case 5:
													case 'end':
														return y.stop();
												}
										},
										_callee3,
										this
									);
								})
							);
							return function compareObjects(e, n, r) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_renderMessage',
						value: function _renderMessage(t, e, n, r) {
							var i = '',
								o = this._scene.get(t),
								a = {
									className:
										null !== o && null !== o.getParent() && 'sun' !== t && 'sun' !== o.getParent().getName()
											? yi.get('content').getClassName(o.getParent().getName())
											: yi.get('content').getClassName(t)
								};
							void 0 !== n && (i += n),
								(i += '<em class="color">' + e),
								void 0 !== r && (i += ' ' + r),
								(i += '</em>'),
								yi.sendNotification(i, a);
						}
					},
					{
						key: '_showLocation',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee4(t) {
									var e,
										n,
										r,
										i,
										o,
										a,
										s,
										l,
										c,
										u,
										_,
										p,
										h = this;
									return regeneratorRuntime.wrap(
										function _callee4$(d) {
											for (;;)
												switch ((d.prev = d.next)) {
													case 0:
														return (
															(e = this._scene.get(t)),
															(n = this._scene.get('sun')),
															(r = []).push(n),
															r.push(e),
															(i = new yt(0, 0, 1)),
															(o = new yt(1, 0, 0)),
															(a = new yt()),
															this._getNormalToEcliptic(a, 'sun'),
															a.isNaN() && a.copy(new yt(0, 0, 1)),
															(s = new tt()).setFromAxes(o, i, void 0),
															(l = Cr.getDistanceToFitEntities(this._cameraEntity, s, e, r)),
															(l *= 1.5),
															(c = new yt()),
															e.getPositionRelativeToEntity(c, yt.Zero, n),
															(l = Math.max(c.magnitude(), l)),
															(u = e.getOcclusionRadius()),
															(_ = 1.2 * u),
															(p = new yt()).copy(i),
															p.mult(p, 5 * u),
															d.abrupt(
																'return',
																this._goToEntity(t, { destination: p, destinationUp: a, duration: 1.5 }).then(
																	function () {
																		return (
																			i.mult(i, l),
																			h._goToEntity(t, {
																				destination: i,
																				cinematic: !1,
																				minRadius: _,
																				destinationUp: a
																			})
																		);
																	}
																)
															)
														);
													case 23:
													case 'end':
														return d.stop();
												}
										},
										_callee4,
										this
									);
								})
							);
							return function _showLocation(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_goToPlanet',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee5(t) {
									var e,
										n,
										r,
										i,
										o,
										a,
										s,
										l,
										c,
										u,
										_ = this;
									return regeneratorRuntime.wrap(
										function _callee5$(p) {
											for (;;)
												switch ((p.prev = p.next)) {
													case 0:
														return (
															(e = this._scene.get(t)),
															(n = this._scene.get('sun')),
															(r = new yt()),
															e.getPositionRelativeToEntity(r, yt.Zero, n),
															0 === r.magnitude() && (r = new yt(0, 1, 0)),
															(i = new yt()),
															e.getOrientation().getAxis(i, 2),
															r.neg(r),
															r.normalize(r),
															(o = e.getOcclusionRadius()),
															null !== e.getComponentByType('spheroid') &&
																(o = e.getComponentByType('spheroid').getSpheroid()._equatorialRadius),
															(a = 1.2 * o),
															(s = new tt()).setFromAxes(void 0, r, i),
															(l = [e]),
															yi.get('content').isBarycenter(t) &&
																((c = yi.get('content').removeBarycenter(t)), l.push(this._scene.get(c))),
															(u = Cr.getDistanceToFitEntities(this._cameraEntity, s, e, l)),
															(u *= 1.3),
															r.mult(r, u),
															p.abrupt(
																'return',
																this._goToEntity(t, { distance: u }).then(function () {
																	return _._goToEntity(t, {
																		destination: r,
																		cinematic: !0,
																		minRadius: a,
																		destinationUp: i,
																		duration: 1.5
																	});
																})
															)
														);
													case 21:
													case 'end':
														return p.stop();
												}
										},
										_callee5,
										this
									);
								})
							);
							return function _goToPlanet(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_goToSpacecraft',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee6(t) {
									var e,
										n,
										r,
										i,
										o,
										a,
										s,
										l,
										c,
										u = this;
									return regeneratorRuntime.wrap(
										function _callee6$(_) {
											for (;;)
												switch ((_.prev = _.next)) {
													case 0:
														return (
															(e = this._scene.get(t)),
															(n = e.getOcclusionRadius()),
															(r = 1.2 * n),
															(i = new yt()).normalize(e.getPosition()),
															(o = new yt()),
															'sun' === e.getParent().getName()
																? (this._getNormalToEcliptic(o, 'sun'), o.isNaN() && o.copy(new yt(0, 0, 1)))
																: e.getParent().getOrientation().getAxis(o, 2),
															(a = yi.get('content').getEntityInfo(t)),
															(s = 0),
															void 0 !== a.customDistance
																? (s = a.customDistance)
																: ((l = new tt()).setFromAxes(void 0, i, o),
																  (c = Cr.getDistanceToFitEntities(this._cameraEntity, l, e, [e])),
																  (s = 1.3 * c)),
															i.mult(i, s),
															_.abrupt(
																'return',
																this._goToEntity(t, { distance: s }).then(function () {
																	return u._goToEntity(t, {
																		destination: i,
																		cinematic: !0,
																		minRadius: r,
																		destinationUp: o,
																		duration: 1.5
																	});
																})
															)
														);
													case 12:
													case 'end':
														return _.stop();
												}
										},
										_callee6,
										this
									);
								})
							);
							return function _goToSpacecraft(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_alignSpacecraftPlanet',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee7(t) {
									var e,
										n,
										r,
										i,
										o,
										a = this;
									return regeneratorRuntime.wrap(
										function _callee7$(s) {
											for (;;)
												switch ((s.prev = s.next)) {
													case 0:
														for (
															e = this._scene.get(t), 50, n = e.getParent();
															null !== n && null === n.getComponentByType('spheroid');

														)
															n = n.getParent();
														return (
															(r = n.getOcclusionRadius()),
															null !== n.getComponentByType('spheroid') &&
																(r = n.getComponentByType('spheroid').getSpheroid()._equatorialRadius),
															(i = new yt()),
															e.getPositionRelativeToEntity(i, yt.Zero, n),
															i.normalize(i),
															i.mult(i, 5 * r),
															(o = new yt()),
															n.getOrientation().getAxis(o, 2),
															s.abrupt(
																'return',
																this._goToEntity(n.getName(), {}).then(function () {
																	return a._goToEntity(t, {
																		destination: i,
																		cinematic: !1,
																		minRadius: 50,
																		destinationUp: o,
																		duration: 1.5
																	});
																})
															)
														);
													case 14:
													case 'end':
														return s.stop();
												}
										},
										_callee7,
										this
									);
								})
							);
							return function _alignSpacecraftPlanet(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_getNormalToEcliptic',
						value: function _getNormalToEcliptic(t, e) {
							e in this._customOrbits && (e = this._customOrbits[e]);
							var n = new tt();
							yi.pioneer.get('main', e, 'dynamo').getOrbitOrientation(n, yi.pioneer.getTime()), n.getAxis(t, 2);
						}
					},
					{
						key: 'update',
						value: function update() {
							this._setGalaxySpriteAlpha();
						}
					},
					{
						key: '_setGalaxySpriteAlpha',
						value: function _setGalaxySpriteAlpha() {
							null === this._milkywaySprite && (this._milkywaySprite = this._scene.get('milky_way', 'sprite'));
							var t = yt.pool.get();
							this._cameraEntity.getPositionRelativeToEntity(t, yt.Zero, this._milkywaySprite.getEntity());
							var e = t.magnitude() / this._milkywaySprite.getEntity().getExtentsRadius() - 1,
								n = this._cameraEntity.getPosition().magnitude(),
								r = T.clamp01(n / 8e17),
								i = yt.pool.get(),
								o = yt.pool.get();
							this._cameraEntity.getOrientation().getAxis(i, 1),
								this._scene.get('milky_way').getOrientation().getAxis(o, 2);
							var a = 1;
							if (!i.isNaN() && !o.isNaN()) {
								var s = Math.abs(i.dot(o)),
									l = yi.isMobile() ? 5 : 3;
								(a = Math.pow(s, l)), (e = T.clamp01(e)), (a = T.lerp(a, r, e, !0));
							}
							var c = Math.min(r, a);
							this._milkywaySprite.setColorMultiplier(new z(1, 1, 1, c)),
								yt.pool.release(t),
								yt.pool.release(i),
								yt.pool.release(o);
						}
					},
					{
						key: '_goToSystem',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee8(t, e) {
									var n,
										r,
										i,
										o,
										a,
										s,
										l,
										c,
										u,
										_,
										p,
										h,
										d,
										f,
										m,
										g,
										y,
										v,
										b,
										x,
										S,
										w,
										C,
										P,
										E,
										k = this;
									return regeneratorRuntime.wrap(
										function _callee8$(O) {
											for (;;)
												switch ((O.prev = O.next)) {
													case 0:
														(n = e.distance),
															(r = void 0 === n ? void 0 : n),
															(i = e.angle),
															(o = void 0 === i ? 25 : i),
															(a = e.minDistance),
															(s = void 0 === a ? 0 : a),
															(l = e.duration),
															(c = void 0 === l ? 1 : l),
															(u = this._scene.get(t)),
															(_ = []),
															(p = 0);
													case 4:
														if (!(p < u._children.length)) {
															O.next = 17;
															break;
														}
														if (
															((h = u._children[p]),
															(d = yi.get('content').getEntityInfo(h.getName())),
															null === h.getComponentByType('camera'))
														) {
															O.next = 9;
															break;
														}
														return O.abrupt('continue', 14);
													case 9:
														if ('Spacecraft' !== d.category) {
															O.next = 11;
															break;
														}
														return O.abrupt('continue', 14);
													case 11:
														if (!h.getPosition().isNaN()) {
															O.next = 13;
															break;
														}
														return O.abrupt('continue', 14);
													case 13:
														_.push(h);
													case 14:
														p++, (O.next = 4);
														break;
													case 17:
														return (
															_.push(u),
															(f = new yt()),
															(m = new yt()),
															this._cameraEntity.getPositionRelativeToEntity(m, yt.Zero, u),
															m.isNaN() ? (f.copy(new yt(0, -1, 0)), f.mult(f, 1e10)) : f.copy(m),
															(g = new yt()),
															(y = new yt()),
															t in this._customOrbits
																? (this._getNormalToEcliptic(y, t), y.isNaN() && y.copy(new yt(0, 0, 1)))
																: u.getOrientation().getAxis(y, 2),
															g.cross(f, y),
															g.normalize(g),
															f.setNormalTo(y, f),
															f.normalize(f),
															(v = new tt()).setFromAxisAngle(g, T.degToRad(o)),
															f.rotate(v, f),
															(b = u.getOcclusionRadius()),
															null !== u.getComponentByType('spheroid')
																? (b = u.getComponentByType('spheroid').getSpheroid()._equatorialRadius)
																: yi.get('content').isBarycenter(t) &&
																  ((x = yi.get('content').removeBarycenter(t)),
																  (S = this._scene.get(x)),
																  null !== S.getComponentByType('spheroid') &&
																		(b = S.getComponentByType('spheroid').getSpheroid()._equatorialRadius)),
															(w = 1.2 * b),
															void 0 === (C = r) &&
																((P = new tt()).setFromAxes(g, f, void 0),
																(C = Cr.getDistanceToFitEntities(this._cameraEntity, P, u, _)),
																(C *= 1.3)),
															(C = Math.max(s, C)),
															(E = new yt()),
															this._cameraEntity.getPositionRelativeToEntity(m, yt.Zero, u),
															m.isNaN()
																? (E.copy(new yt(0, -1, 0)), E.setNormalTo(y, E), E.mult(E, 1e10), E.rotate(v, E))
																: E.copy(m),
															O.abrupt(
																'return',
																this._goToEntity(t, { destination: E, destinationUp: y, duration: c }).then(
																	function () {
																		return (
																			f.mult(f, C),
																			k._goToEntity(t, {
																				destination: f,
																				cinematic: !1,
																				minRadius: w,
																				destinationUp: y,
																				duration: c
																			})
																		);
																	}
																)
															)
														);
													case 43:
													case 'end':
														return O.stop();
												}
										},
										_callee8,
										this
									);
								})
							);
							return function _goToSystem(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_goToEntity',
						value: (function () {
							var t = camera_asyncToGenerator(
								regeneratorRuntime.mark(function _callee10(t, e) {
									var n,
										r,
										i,
										o,
										a,
										s,
										l,
										c,
										u,
										_,
										p,
										h,
										d,
										f,
										m,
										g,
										y,
										v,
										b,
										x,
										S,
										w,
										C,
										P,
										E,
										k,
										O = this;
									return regeneratorRuntime.wrap(
										function _callee10$(A) {
											for (;;)
												switch ((A.prev = A.next)) {
													case 0:
														if (
															((n = e.camera),
															(r = void 0 === n ? void 0 : n),
															(i = e.scene),
															(o = void 0 === i ? void 0 : i),
															(a = e.destination),
															(s = void 0 === a ? void 0 : a),
															(l = e.distance),
															(c = void 0 === l ? void 0 : l),
															(u = e.cinematic),
															(_ = void 0 !== u && u),
															(p = e.minRadius),
															(h = void 0 === p ? 0.001 : p),
															(d = e.maxRadius),
															(f = void 0 === d ? this._defaultMaxDistance : d),
															(m = e.duration),
															(g = void 0 === m ? 0.75 : m),
															(y = e.destinationUp),
															(v = void 0 === y ? void 0 : y),
															(b = e.zoom),
															(x = void 0 === b || b),
															(S = e.select),
															(w = void 0 === S || S),
															void 0 === r && (r = this._cameraEntity),
															void 0 === o && (o = this._scene),
															(this._isTransitioning = !0),
															void 0 === s)
														) {
															A.next = 14;
															break;
														}
														if (
															((C = new yt()).sub(r.getPosition(), s), null === (P = this._cameraEntity.getParent()))
														) {
															A.next = 14;
															break;
														}
														if (
															((E = P.getName()),
															isNaN(C.magnitude()) ||
																((k = T.clamp01(C.magnitude() / r.getPosition().magnitude())),
																(g = Math.max(g / 5, g * k))),
															isNaN(C.magnitude()) || !(C.magnitude() <= 0.001) || t !== E)
														) {
															A.next = 14;
															break;
														}
														return (this._isTransitioning = !1), A.abrupt('return');
													case 14:
														return A.abrupt(
															'return',
															Cr.goToEntity(r, o.get(t), {
																destination: s,
																distance: c,
																up: !1,
																duration: g,
																destinationUp: v,
																zoom: x
															}).then(
																function () {
																	yi.get('scene').addLoading(t, 'camera');
																	for (var e = [], n = ['model', 'wmts', 'spheroid'], i = 0; i < n.length; i++) {
																		var a = o.get(t, n[i]);
																		null !== a &&
																			a.isEnabled() &&
																			(e.push(a.getLoadedPromise()),
																			'wmts' === n[i] && e.push(a.getTilesLoadedPromise()));
																	}
																	(Promise.all(e).then(function () {
																		var e = new CustomEvent('loaded', { detail: { id: t, type: 'camera' } });
																		window.dispatchEvent(e);
																	}),
																	w) &&
																		r.addController('select').setCallback(
																			(function () {
																				var t = camera_asyncToGenerator(
																					regeneratorRuntime.mark(function _callee9(t) {
																						var e, n;
																						return regeneratorRuntime.wrap(function _callee9$(r) {
																							for (;;)
																								switch ((r.prev = r.next)) {
																									case 0:
																										if (null === t || yi.labelClicked) {
																											r.next = 11;
																											break;
																										}
																										if (O._selector.getCurrentId() !== t.getName()) {
																											r.next = 8;
																											break;
																										}
																										return (
																											(e = '/' + t.getName()),
																											(n = { time: yi.get('time').getTimeUrl() }),
																											(r.next = 6),
																											yi.router.navigate(e, n)
																										);
																									case 6:
																										r.next = 9;
																										break;
																									case 8:
																										O._selector.selectEntity(t.getName());
																									case 9:
																										r.next = 12;
																										break;
																									case 11:
																										null !== t || yi.labelClicked || O._selector.unselect();
																									case 12:
																									case 'end':
																										return r.stop();
																								}
																						}, _callee9);
																					})
																				);
																				return function (e) {
																					return t.apply(this, arguments);
																				};
																			})()
																		);
																	if ((x && r.get('zoom').setDistanceClamp(new J(h, f)), _)) {
																		var s = r.getControllerByType('align'),
																			l = r.addController('spin', void 0, s);
																		l instanceof fr &&
																			(l.setAxis(yt.ZAxis, !0),
																			l.setRate(0.025),
																			l.setUsingRealTime(!0),
																			l.setRotatingPosition(!0));
																		var c = r.addController('tap');
																		c instanceof mr &&
																			c.setTapCallback(function () {
																				r.removeController(l), r.removeController(c);
																			});
																	}
																	O._isTransitioning = !1;
																},
																function (t) {
																	t && (console.log(t), (O._isTransitioning = !1));
																}
															)
														);
													case 15:
													case 'end':
														return A.stop();
												}
										},
										_callee10,
										this
									);
								})
							);
							return function _goToEntity(e, n) {
								return t.apply(this, arguments);
							};
						})()
					}
				]),
				Camera
			);
		})();
		function content_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function content_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						content_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						content_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function content_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var ni = (function () {
			function Content(t) {
				!(function content_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Content),
					(this._pioneer = t),
					(this._customClass = {
						'134340_pluto': 'pluto',
						outer_solar_system: 'outer-solar-system',
						inner_solar_system: 'inner-solar-system',
						school_bus: 'comparison',
						rose_bowl: 'comparison',
						scientist: 'comparison'
					}),
					(this._customEntityDesc = {
						inner_solar_system: { name: 'Inner Solar System' },
						outer_solar_system: { name: 'Outer Solar System' },
						milky_way: { name: 'Milky Way' },
						observable_universe: { name: 'Observable Universe' },
						scientist: { name: 'Scientist' },
						school_bus: { name: 'School bus' },
						rose_bowl: { name: 'Rose Bowl Stadium' }
					}),
					(this._customEntityInfo = {
						inner_solar_system: {
							name: 'Inner Solar System',
							id: 'inner_solar_system',
							adjective: 'Inner Solar',
							category: 'System',
							keywords: ['solar system'],
							weight: 0
						},
						outer_solar_system: {
							name: 'Outer Solar System',
							id: 'outer_solar_system',
							adjective: 'Outer Solar',
							category: 'System',
							keywords: ['solar system'],
							weight: 0
						},
						milky_way: {
							name: 'Milky Way',
							id: 'milky_way',
							adjective: 'Outer Solar',
							category: 'Galaxy',
							keywords: ['milky way'],
							weight: 0
						},
						observable_universe: {
							name: 'Observable Universe',
							id: 'observable_universe',
							adjective: 'Outer Solar',
							category: 'Universe',
							keywords: ['observable universe'],
							weight: 0
						},
						scientist: { name: 'Scientist', category: 'Comparison Object' },
						school_bus: { name: 'School bus', category: 'Comparison Object' },
						rose_bowl: { name: 'Rose Bowl Stadium', category: 'Comparison Object' }
					}),
					(this._replacements = {
						'134340_pluto_barycenter': '134340_pluto',
						sc_mars_science_laboratory_landing_site: 'sc_mars_science_laboratory',
						sc_perseverance_landing_site: 'sc_perseverance'
					}),
					(this._entityList = null);
			}
			return (
				(function content_createClass(t, e, n) {
					return e && content_defineProperties(t.prototype, e), n && content_defineProperties(t, n), t;
				})(Content, [
					{
						key: 'init',
						value: (function () {
							var t = content_asyncToGenerator(
								regeneratorRuntime.mark(function _callee() {
									return regeneratorRuntime.wrap(
										function _callee$(t) {
											for (;;)
												switch ((t.prev = t.next)) {
													case 0:
														return (t.next = 2), this._downloadEntities();
													case 2:
														this._entityList = t.sent;
													case 3:
													case 'end':
														return t.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function init() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_downloadEntities',
						value: (function () {
							var t = content_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2() {
									return regeneratorRuntime.wrap(function _callee2$(t) {
										for (;;)
											switch ((t.prev = t.next)) {
												case 0:
													return t.abrupt(
														'return',
														fetch('./entity_info.json').then(function (t) {
															return t.json();
														})
													);
												case 1:
												case 'end':
													return t.stop();
											}
									}, _callee2);
								})
							);
							return function _downloadEntities() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'getEntityList',
						value: function getEntityList() {
							return this._entityList;
						}
					},
					{
						key: 'getReplacement',
						value: function getReplacement(t) {
							return t in this._replacements && (t = this._replacements[t]), t;
						}
					},
					{
						key: 'isBarycenter',
						value: function isBarycenter(t) {
							return !!t.includes('_barycenter');
						}
					},
					{
						key: 'removeBarycenter',
						value: function removeBarycenter(t) {
							return this.isBarycenter(t) ? t.replace('_barycenter', '') : t;
						}
					},
					{
						key: 'getEntityInfo',
						value: function getEntityInfo(t) {
							return (t = this.getReplacement(t)) in this._customEntityInfo
								? this._customEntityInfo[t]
								: this._entityList[t];
						}
					},
					{
						key: 'getCustomEntitiesDesc',
						value: function getCustomEntitiesDesc() {
							return this._customEntityDesc;
						}
					},
					{
						key: 'getCustomEntityDesc',
						value: function getCustomEntityDesc(t) {
							return (t = this.getReplacement(t)) in this._customEntityDesc ? this._customEntityDesc[t] : null;
						}
					},
					{
						key: 'getEntityDesc',
						value: (function () {
							var t = content_asyncToGenerator(
								regeneratorRuntime.mark(function _callee3(t) {
									var e;
									return regeneratorRuntime.wrap(
										function _callee3$(n) {
											for (;;)
												switch ((n.prev = n.next)) {
													case 0:
														if (((t = this.getReplacement(t)), (e = {}), !(t in this.getCustomEntitiesDesc()))) {
															n.next = 6;
															break;
														}
														(e = this.getCustomEntityDesc(t)), (n.next = 9);
														break;
													case 6:
														return (
															(n.next = 8),
															fetch('descriptions/' + t + '.json').then(
																function (t) {
																	return 404 === t.status ? {} : t.json();
																},
																function (t) {
																	t && console.log(t);
																}
															)
														);
													case 8:
														e = n.sent;
													case 9:
														return n.abrupt('return', e);
													case 10:
													case 'end':
														return n.stop();
												}
										},
										_callee3,
										this
									);
								})
							);
							return function getEntityDesc(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'getClassName',
						value: function getClassName(t) {
							t = this.getReplacement(t);
							var e = this.getEntityInfo(t);
							if (void 0 === e.category) return t;
							var n = e.category.toLowerCase().replace(/ /g, '-');
							switch (e.category) {
								case 'Dwarf Planet':
								case 'Asteroid':
								case 'Comet':
									n += ' _' + t;
									break;
								case 'Moon':
									var r = this._pioneer.get('main', t);
									if (null !== r)
										for (var i = r.getParent(); null !== i; )
											null !== i.getParent() &&
												'sun' === i.getParent().getName() &&
												(n += ' parent-' + i.getName() + ' ' + t),
												(i = i.getParent());
									break;
								default:
									n += ' ' + t;
							}
							return t in this._customClass && (n += ' ' + this._customClass[t]), n;
						}
					},
					{
						key: 'hasKeyword',
						value: function hasKeyword(t, e) {
							if (((t = this.getReplacement(t)), void 0 !== this.getEntityInfo(t)))
								return this.getEntityInfo(t).keywords.includes(e);
						}
					},
					{
						key: 'hasLanded',
						value: function hasLanded(t) {
							if (t.endsWith('landing_site')) return !0;
							if (
								((t = this.getReplacement(t)),
								void 0 !== this._entityList[t] && void 0 !== this._entityList[t].landingDate)
							) {
								var e = Dr.a.tz(this._entityList[t].landingDate, 'Etc/UTC');
								return !!Dr.a.tz(1e3 * A.etToUnix(this._pioneer.getTime()), 'Etc/UTC').isSameOrAfter(e);
							}
							return !1;
						}
					}
				]),
				Content
			);
		})();
		n(498);
		function label_manager_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var ri = (function () {
			function LabelManager(t, e, n) {
				!(function label_manager_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, LabelManager),
					(this._algorithm = this.Quadtree),
					(this._pioneer = e),
					(this._scene = n),
					(this._labels = {}),
					(this._entities = t),
					this._createLabelArray(),
					(this._weights = {}),
					(this._weightsLength = 0),
					(this._quadTree = new Quadtree({ x: 0, y: 0, width: window.innerWidth, height: window.innerHeight }, 2, 8)),
					(this._collidingLabels = []),
					(this._frameCount = 0),
					(this._frameStep = 1),
					(this._frameCycle = 3 * this._frameStep),
					(this._activeClass = 'active'),
					(this._hiddenClass = 'hidden'),
					(this._overlapThreshold = 0.25),
					(this._centerBoundingRect = { name: 'center', x: 0, y: 0, width: 50, height: 50 }),
					(this.update = this.update.bind(this));
			}
			return (
				(function label_manager_createClass(t, e, n) {
					return e && label_manager_defineProperties(t.prototype, e), n && label_manager_defineProperties(t, n), t;
				})(LabelManager, [
					{
						key: 'setAlgorithm',
						value: function setAlgorithm(t) {
							this._algorithm = t;
						}
					},
					{
						key: 'setEntities',
						value: function setEntities(t) {
							(this._entities = t), this._createLabelArray();
						}
					},
					{
						key: 'setWeights',
						value: function setWeights(t) {
							(this._weights = t), (this._weightsLength = Object.keys(this._weights).length);
						}
					},
					{
						key: 'getWeight',
						value: function getWeight(t) {
							return this._weightsLength <= 0 ? 0 : void 0 !== this._weights[t] ? this._weights[t].weight : 0;
						}
					},
					{
						key: 'getZ',
						value: function getZ(t) {
							return this._labels[t].z;
						}
					},
					{
						key: 'update',
						value: function update() {
							0 === this._frameCount
								? ((this._collidingLabels = []), this._buildQuadtree())
								: this._frameCount === this._frameCycle / 3
								? this._checkWithQuadtree()
								: this._frameCount === (2 * this._frameCycle) / 3 && this._fixCollisions(),
								this._frameCount++,
								(this._frameCount = this._frameCount % this._frameCycle);
						}
					},
					{
						key: '_createLabelArray',
						value: function _createLabelArray() {
							this._labels = {};
							for (var t = this._entities.size - 1; t >= 0; t--) {
								var e = this._entities.get(t);
								e.getComponentByType('div') &&
									(this._labels[e.getName()] = {
										name: e.getName(),
										x: 0,
										y: 0,
										width: 0,
										height: 0,
										check: !1,
										collisions: [],
										isHidden: !1
									});
							}
						}
					},
					{
						key: '_buildQuadtree',
						value: function _buildQuadtree() {
							this._quadTree.clear();
							for (var t = this._entities.size - 1; t >= 0; t--) {
								var e = this._entities.get(t);
								if (e.getComponentByType('div')) {
									var n = e.getComponentByType('div').getDiv(),
										r = n.getBoundingClientRect();
									if ('none' === n.style.display || 'hidden' === n.style.visibility) {
										this._labels[e.getName()].check = !1;
										continue;
									}
									if (this._isOutOfWindow(r)) {
										this._labels[e.getName()].check = !1;
										continue;
									}
									(this._labels[e.getName()].x = r.x),
										(this._labels[e.getName()].y = r.y),
										(this._labels[e.getName()].width = r.width),
										(this._labels[e.getName()].height = r.height),
										(this._labels[e.getName()].check = !0),
										(this._labels[e.getName()].collisions = []),
										(this._labels[e.getName()].isHidden = !1);
									var i = this._pioneer.get('main', 'camera', 'camera');
									(this._labels[e.getName()].z = e.getCameraSpacePosition(i).magnitude()),
										this._quadTree.insert(this._labels[e.getName()]);
								}
							}
						}
					},
					{
						key: '_checkWithQuadtree',
						value: function _checkWithQuadtree() {
							for (var t = 0, e = Object.keys(this._labels); t < e.length; t++) {
								var n = e[t],
									r = this._labels[n];
								if (r.check)
									for (var i = this._quadTree.retrieve(r), o = 0; o < i.length; o++) {
										var a = i[o];
										a.check &&
											this._checkCollision(a, r) &&
											r.name !== a.name &&
											this._overlap(a, r) >= this._overlapThreshold &&
											this._addCollision(a.name, r.name);
									}
							}
						}
					},
					{
						key: 'getItemAtCenter',
						value: function getItemAtCenter() {
							(this._centerBoundingRect.x = window.innerWidth / 2 - this._centerBoundingRect.width / 2),
								(this._centerBoundingRect.y = window.innerHeight / 2 - this._centerBoundingRect.height / 2);
							for (var t = this._quadTree.retrieve(this._centerBoundingRect), e = 0; e < t.length; e++) {
								var n = t[e];
								if (
									((n.y += n.height / 2),
									(n.width = this._centerBoundingRect.width),
									(n.height = this._centerBoundingRect.height),
									this._checkCollision(n, this._centerBoundingRect))
								)
									return n;
							}
							return null;
						}
					},
					{
						key: '_addCollision',
						value: function _addCollision(t, e) {
							this._collidingLabels.indexOf(t) < 0 && this._collidingLabels.push(t),
								this._collidingLabels.indexOf(e) < 0 && this._collidingLabels.push(e),
								this._labels[t].collisions.push(e);
						}
					},
					{
						key: '_fixCollisions',
						value: function _fixCollisions() {
							var t = this;
							this._collidingLabels.sort(function (e, n) {
								return t.getWeight(n) - t.getWeight(e) != 0 ? t.getWeight(n) - t.getWeight(e) : t.getZ(e) - t.getZ(n);
							});
							var e = yi.selector.getCurrentId();
							if (e in this._labels) {
								var n = this._entities.get(e);
								if (n.getComponentByType('div'))
									'none' !== n.getComponentByType('div').getDiv().style.display && this._collidingLabels.unshift(e);
							}
							for (var r = 0; r < this._collidingLabels.length; r++) {
								var i = this._collidingLabels[r];
								if (!this._labels[i].isHidden) {
									this._showLabel(i);
									for (var o = 0; o < this._labels[i].collisions.length; o++) {
										var a = this._labels[i].collisions[o];
										this._hideLabel(a);
									}
								}
							}
							this._restoreLabels();
						}
					},
					{
						key: '_restoreLabels',
						value: function _restoreLabels() {
							for (var t = 0, e = Object.keys(this._labels); t < e.length; t++) {
								var n = e[t],
									r = this._labels[n];
								r.isHidden || this._showLabel(r.name), 0 === r.collisions.length && this._showLabel(r.name);
							}
							var i = yi.selector.getCurrentId();
							i in this._labels && this._showLabel(i);
						}
					},
					{
						key: '_showLabel',
						value: function _showLabel(t) {
							var e = this._pioneer.get('main', t).getComponentByType('div').getDiv();
							e.classList.add(this._activeClass),
								e.classList.remove(this._hiddenClass),
								(this._labels[t].isHidden = !1);
						}
					},
					{
						key: '_hideLabel',
						value: function _hideLabel(t) {
							var e = this._pioneer.get('main', t).getComponentByType('div').getDiv();
							e.classList.add(this._hiddenClass),
								e.classList.remove(this._activeClass),
								(this._labels[t].isHidden = !0);
						}
					},
					{
						key: '_checkCollision',
						value: function _checkCollision(t, e) {
							return t.x < e.x + e.width && t.x + t.width > e.x && t.y < e.y + e.height && t.y + t.height > e.y;
						}
					},
					{
						key: '_overlap',
						value: function _overlap(t, e) {
							var n =
								(Math.min(t.x + t.width, e.x + e.width) - Math.max(t.x, e.x)) *
								(Math.min(t.y + t.height, e.y + e.height) - Math.max(t.y, e.y));
							return n / (t.width * t.height + e.width * e.height - n);
						}
					},
					{
						key: '_isOutOfWindow',
						value: function _isOutOfWindow(t) {
							return t.x > window.innerWidth || t.x + t.width < 0 || t.y > window.innerHeight || t.y + t.height < 0;
						}
					}
				]),
				LabelManager
			);
		})();
		(ri.Quadtree = 1), (ri.BruteForce = 0);
		var ii = ri;
		n(499);
		function message_bar_typeof(t) {
			return (message_bar_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function message_bar_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function message_bar_possibleConstructorReturn(t, e) {
			return !e || ('object' !== message_bar_typeof(e) && 'function' != typeof e)
				? (function message_bar_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function message_bar_getPrototypeOf(t) {
			return (message_bar_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function message_bar_setPrototypeOf(t, e) {
			return (message_bar_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var oi = (function (t) {
			function MessageBar(t) {
				var e;
				return (
					(function message_bar_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, MessageBar),
					((e = message_bar_possibleConstructorReturn(
						this,
						message_bar_getPrototypeOf(MessageBar).call(this, t)
					))._isNotificationOn = !1),
					(e._notifTimeout = null),
					(e._notificationText = null),
					e._constructHTML(),
					e
				);
			}
			return (
				(function message_bar_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && message_bar_setPrototypeOf(t, e);
				})(MessageBar, Vr),
				(function message_bar_createClass(t, e, n) {
					return e && message_bar_defineProperties(t.prototype, e), n && message_bar_defineProperties(t, n), t;
				})(MessageBar, [
					{
						key: '_constructHTML',
						value: function _constructHTML() {
							var t = document.createElement('div');
							(t.className = 'container'),
								(this._div.innerHTML = ''),
								(this._div.style.display = 'none'),
								this._div.appendChild(t),
								(this._notificationText = document.createElement('p')),
								(this._notificationText.innerHTML = ''),
								t.appendChild(this._notificationText);
						}
					},
					{
						key: 'showNotification',
						value: function showNotification(t, e) {
							var n = this,
								r = e.timeout,
								i = void 0 === r ? 2e3 : r,
								o = e.className,
								a = void 0 === o ? '' : o;
							this._isNotificationOn && clearTimeout(this._notifTimeout),
								(this._notificationText.innerHTML = '<span>' + t + '</span>'),
								(this._notificationText.className = a),
								(this._isNotificationOn = !0),
								this._div.classList.add('active'),
								this._div.classList.remove('hidden'),
								(this._notifTimeout = setTimeout(function () {
									n.fadeNotification();
								}, i)),
								(this._div.style.display = 'block');
						}
					},
					{
						key: 'fadeNotification',
						value: function fadeNotification() {
							this._div.classList.add('hidden'), this._div.classList.remove('active');
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							this._div.style.display = 'none';
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							this._div.style.display = 'block';
						}
					}
				]),
				MessageBar
			);
		})();
		n(500);
		function options_typeof(t) {
			return (options_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function options_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function options_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function options_possibleConstructorReturn(t, e) {
			return !e || ('object' !== options_typeof(e) && 'function' != typeof e)
				? (function options_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function options_getPrototypeOf(t) {
			return (options_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function options_setPrototypeOf(t, e) {
			return (options_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ai = (function (t) {
			function Options(t) {
				var e;
				return (
					(function options_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, Options),
					((e = options_possibleConstructorReturn(this, options_getPrototypeOf(Options).call(this, t)))._infoTemplate =
						''),
					(e._isInfoPanelVisible = !1),
					(e._showCloseButton = !1),
					e._constructHTML(),
					e
				);
			}
			return (
				(function options_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && options_setPrototypeOf(t, e);
				})(Options, Vr),
				(function options_createClass(t, e, n) {
					return e && options_defineProperties(t.prototype, e), n && options_defineProperties(t, n), t;
				})(Options, [
					{
						key: '_constructHTML',
						value: function _constructHTML() {
							var t = this,
								e = document.createElement('div');
							(e.className = 'container'),
								this._div.appendChild(e),
								(this._infoPanel = document.createElement('div')),
								(this._infoPanel.innerHTML = ''),
								(this._infoPanel.style.display = 'none'),
								(this._infoPanel.className = 'panel scrollable'),
								(this._infoPanel.id = 'info-panel'),
								this._infoPanel.addEventListener(
									'animationend',
									function () {
										'0' === window.getComputedStyle(t._infoPanel).opacity
											? (t._infoPanel.style.display = 'none')
											: (t._infoPanel.style.display = 'block');
									},
									!0
								),
								e.appendChild(this._infoPanel),
								(this._infoContent = document.createElement('div')),
								(this._infoContent.className = 'content'),
								this._infoPanel.appendChild(this._infoContent),
								(this._closeInfo = document.createElement('button')),
								(this._closeInfo.innerHTML = ''),
								(this._closeInfo.type = 'button'),
								(this._closeInfo.className = 'close-info'),
								(this._closeInfo.value = 'close'),
								this._closeInfo.addEventListener('click', function (e) {
									t.toggleInfoPanel();
								}),
								(this._toogleInfo = document.createElement('button')),
								(this._toogleInfo.innerHTML = ''),
								(this._toogleInfo.type = 'button'),
								(this._toogleInfo.className = 'toggle-info'),
								(this._toogleInfo.value = 'toggle'),
								this._toogleInfo.addEventListener('click', function (e) {
									t.toggleInfoPanel();
								}),
								e.appendChild(this._toogleInfo),
								this.inIframe() &&
									((this._closeApp = document.createElement('button')),
									(this._closeApp.innerHTML = ''),
									(this._closeApp.type = 'button'),
									(this._closeApp.className = 'close-app'),
									(this._closeApp.value = 'close'),
									(this._closeApp.style.display = 'none'),
									this._closeApp.addEventListener('click', function (e) {
										t.closeApp();
									}),
									e.appendChild(this._closeApp));
						}
					},
					{
						key: '_getInfoText',
						value: (function () {
							var t = (function options_asyncToGenerator(t) {
								return function () {
									var e = this,
										n = arguments;
									return new Promise(function (r, i) {
										var o = t.apply(e, n);
										function _next(t) {
											options_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
										}
										function _throw(t) {
											options_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
										}
										_next(void 0);
									});
								};
							})(
								regeneratorRuntime.mark(function _callee() {
									var t = this;
									return regeneratorRuntime.wrap(function _callee$(e) {
										for (;;)
											switch ((e.prev = e.next)) {
												case 0:
													return (
														(e.next = 2),
														fetch('info.html')
															.then(function (t) {
																return t.text();
															})
															.then(function (e) {
																(t._infoContent.innerHTML = e), t._infoContent.appendChild(t._closeInfo);
															})
													);
												case 2:
												case 'end':
													return e.stop();
											}
									}, _callee);
								})
							);
							return function _getInfoText() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'toggleInfoPanel',
						value: function toggleInfoPanel() {
							(this._infoPanel.style.display = 'block'),
								'' === this._infoTemplate && this._getInfoText(),
								(this._isInfoPanelVisible = !this._isInfoPanelVisible),
								this._isInfoPanelVisible
									? (this._infoPanel.classList.add('active'),
									  this._infoPanel.classList.remove('hidden'),
									  (this._div.style.zIndex = 500))
									: (this._infoPanel.classList.add('hidden'),
									  this._infoPanel.classList.remove('active'),
									  (this._div.style.zIndex = 10));
						}
					},
					{
						key: 'closeApp',
						value: function closeApp() {
							window.parent.postMessage('close_overlay', '*');
						}
					},
					{
						key: 'inIframe',
						value: function inIframe() {
							try {
								return window.self !== window.top;
							} catch (t) {
								return !0;
							}
						}
					},
					{
						key: 'displayCloseButton',
						value: function displayCloseButton(t) {
							(this._showCloseButton = t),
								this._closeApp &&
									(this._showCloseButton
										? (this._closeApp.style.display = 'inline-block')
										: (this._closeApp.style.display = 'none'));
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							this._div.style.display = 'none';
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							this._div.style.display = 'block';
						}
					}
				]),
				Options
			);
		})();
		function comparison_manager_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function comparison_manager_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var si = (function () {
				function ComparisonManager(t, e) {
					!(function comparison_manager_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, ComparisonManager),
						(this._pioneer = e),
						(this._entities = t._entities),
						(this._mainScene = t),
						(this._comparisonScene = null),
						(this._comparisonObjects = new Set(['scientist', 'school_bus', 'rose_bowl'])),
						(this._leftEntity = null),
						(this._rightEntity = null),
						(this._leftPosition = new yt(0, 1e10, 0)),
						(this._rightPosition = new yt(0, -1e10, 0)),
						(this._componentsToBeCopied = ['rings', 'atmosphere', 'model', 'spheroid', 'div']),
						(this._isComparisonOn = !1),
						(this._customRotations = {
							rose_bowl: { x: 45 },
							sc_juno: { x: 45 },
							saturn: { x: 25 },
							sc_lucy: { z: -90, y: -25 }
						}),
						(this._replacements = { sun: 'sun_compare' });
				}
				return (
					(function comparison_manager_createClass(t, e, n) {
						return (
							e && comparison_manager_defineProperties(t.prototype, e),
							n && comparison_manager_defineProperties(t, n),
							t
						);
					})(ComparisonManager, [
						{
							key: '_init',
							value: function _init() {
								var t = this;
								(this._leftViewport = this._pioneer.addViewport('left-viewport')),
									(this._leftViewport.getDiv().style.position = 'absolute'),
									this._leftViewport.setEnabled(!1),
									(this._rightViewport = this._pioneer.addViewport('right-viewport')),
									(this._rightViewport.getDiv().style.position = 'absolute'),
									this._rightViewport.setEnabled(!1),
									this._resizeViewports(),
									(this._comparisonScene = this._pioneer.addScene('comparison')),
									this._comparisonScene.setAmbientLightColor(new z(0.005, 0.005, 0.005)),
									(this._leftCameraEntity = this._comparisonScene.addEntity('leftCamera')),
									(this._leftCamera = this._leftCameraEntity.addComponent('camera')),
									(this._leftLight = this._leftCameraEntity.addComponent('lightSource')),
									this._leftLight.setEnabled(!1),
									(this._rightCameraEntity = this._comparisonScene.addEntity('rightCamera')),
									(this._rightCamera = this._rightCameraEntity.addComponent('camera')),
									(this._rightLight = this._rightCameraEntity.addComponent('lightSource')),
									this._rightLight.setEnabled(!1),
									this._leftViewport.setCamera(this._leftCamera),
									this._rightViewport.setCamera(this._rightCamera),
									Er.create('observable_universe', this._comparisonScene),
									Er.create('milky_way', this._comparisonScene),
									Er.create('sun', this._comparisonScene),
									(this._sun = this._comparisonScene.get('sun')),
									this._sun.getComponentByType('div').setEnabled(!1),
									this._sun.getComponentByType('atmosphere').setEnabled(!1),
									this._sun.getComponentByType('sprite').setEnabled(!1),
									this._sun.getComponentByType('spheroid').setEnabled(!1),
									(this._sunLight = this._sun.get('lightSource')),
									this._comparisonObjects.forEach(function (e) {
										var n = Er.create(e, t._comparisonScene);
										n.setParent(t._sun), n.setEnabled(!1);
										var r = n.get('div').getDiv(),
											i = n.getName();
										r.className += ' no-select ' + i;
										var o = document.createElement('span');
										o.className = 'icon';
										var a = document.createElement('span');
										(a.innerHTML = r.innerHTML), (r.innerHTML = ''), r.appendChild(o), r.appendChild(a);
									}),
									window.addEventListener('resize', function (e) {
										t._resizeViewports();
									});
							}
						},
						{
							key: '_createCopy',
							value: function _createCopy(t, e) {
								if (
									!(
										(null !== this._leftEntity && this._leftEntity.getName() === t && 'left' === e) ||
										(null !== this._rightEntity && this._rightEntity.getName() === t && 'right' === e)
									)
								) {
									'left' === e && null !== this._leftEntity && this._leftEntity.getName() !== t
										? (this._comparisonObjects.has(this._leftEntity.getName())
												? this._leftEntity.setEnabled(!1)
												: this._comparisonScene.removeEntity(this._leftEntity),
										  this._rightCameraEntity.setParent(this._sun))
										: 'right' === e &&
										  null !== this._rightEntity &&
										  this._rightEntity.getName() !== t &&
										  (this._comparisonObjects.has(this._rightEntity.getName())
												? this._rightEntity.setEnabled(!1)
												: this._comparisonScene.removeEntity(this._rightEntity),
										  this._rightCameraEntity.setParent(this._sun));
									var n = null;
									if (this._comparisonObjects.has(t))
										(n = this._comparisonScene.get(t)),
											'left' === e
												? n.get('div').setActiveCamera(this._leftCamera)
												: n.get('div').setActiveCamera(this._rightCamera),
											n.setEnabled(!0);
									else {
										var r = this._mainScene.get(t);
										(n =
											t in this._replacements
												? this._comparisonScene.addEntity(this._replacements[t])
												: this._comparisonScene.addEntity(t)).setParent(this._sun),
											n.setExtentsRadius(r.getExtentsRadius()),
											n.setOcclusionRadius(r.getOcclusionRadius());
										for (var i = 0; i < r.getNumComponents(); i++)
											if (this._componentsToBeCopied.includes(r.getComponent(i)._type))
												switch (r.getComponent(i)._type) {
													case 'spheroid':
														this._copySpheroid(n, r.getComponent(i));
														break;
													case 'rings':
														this._copyRings(n, r.getComponent(i));
														break;
													case 'div':
														this._copyDiv(n, r.getComponent(i), e);
														break;
													case 'model':
														this._copyModel(n, r.getComponent(i));
														break;
													case 'atmosphere':
														this._copyAtmosphere(n, r.getComponent(i));
												}
									}
									'left' === e ? (this._leftEntity = n) : (this._rightEntity = n);
								}
							}
						},
						{
							key: '_copySpheroid',
							value: function _copySpheroid(t, e) {
								var n = t.addComponent('spheroid');
								n.setRadii(e.getEquatorialRadius(), e.getPolarRadius());
								for (var r = e.getTextureNames(), i = 0; i < r.length; i++) {
									var o = r[i],
										a = e.getTextureSizes(o),
										s = e.getTextureUrl(o);
									n.setTexture(o, s, a);
								}
								n.setMapping(e.getMapping());
								var l = e._features.entries(),
									c = !0,
									u = !1,
									_ = void 0;
								try {
									for (var p, h = l[Symbol.iterator](); !(c = (p = h.next()).done); c = !0) {
										var d = p.value;
										n.setFeature(d[0], !0);
									}
								} catch (t) {
									(u = !0), (_ = t);
								} finally {
									try {
										c || null == h.return || h.return();
									} finally {
										if (u) throw _;
									}
								}
							}
						},
						{
							key: '_copyRings',
							value: function _copyRings(t, e) {
								var n = t.addComponent('rings');
								n.setInnerRadius(e.getInnerRadius()),
									n.setOuterRadius(e.getOuterRadius()),
									n.setTopTextureUrl(e.getTopTextureUrl()),
									n.setBottomTextureUrl(e.getBottomTextureUrl());
							}
						},
						{
							key: '_copyModel',
							value: function _copyModel(t, e) {
								var n = t.addComponent('model');
								n.setScale(e.getScale()),
									n.setRotation(e.getRotation()),
									'' !== e._environmentCubemapUrl
										? n.setEnvironmentCubemapUrl(e._environmentCubemapUrl)
										: '' !== e._environmentCylindricalUrl &&
										  n.setEnvironmentCylindricalUrl(e._environmentCylindricalUrl),
									n.setUrl(e.getUrl());
							}
						},
						{
							key: '_copyAtmosphere',
							value: function _copyAtmosphere(t, e) {
								var n = t.addComponent('atmosphere');
								n.setDensity(e.getDensity()),
									n.setScaleHeight(e.getScaleHeight()),
									n.setEmissivity(e.getEmissivity()),
									n.setColor(e.getColor()),
									n.setSunBrightness(e.getSunBrightness()),
									n.setSunsetColor(e.getSunsetColor()),
									n.setSunsetIntensity(e.getSunsetIntensity()),
									n.setRadii(e.getEquatorialRadius(), e.getPolarRadius());
							}
						},
						{
							key: '_copyDiv',
							value: function _copyDiv(t, e, n) {
								var r = t.addComponent('div');
								'left' === n ? r.setActiveCamera(this._leftCamera) : r.setActiveCamera(this._rightCamera),
									r.setAlignment(e.getAlignment()),
									(r.getDiv().innerHTML = e.getDiv().innerHTML);
								var i = t.getName();
								for (var o in this._replacements)
									if (i === this._replacements[o]) {
										i = o;
										break;
									}
								var a = yi.get('content').getClassName(i);
								r.getDiv().className = 'pioneer-label-div no-select ' + a;
							}
						},
						{
							key: '_positionEntity',
							value: function _positionEntity(t, e) {
								null === t.get('fixed') && t.addController('fixed'), t.get('fixed').setOrientation(tt.Identity);
								var n = this._leftPosition;
								'right' === e && (n = this._rightPosition);
								var r = new yt(),
									i = new tt(),
									o = t.getName();
								if (void 0 !== this._customRotations[o])
									for (var a in (i.set(1, 0, 0, 0), this._customRotations[o])) {
										var s = void 0,
											l = this._customRotations[o][a];
										if (('right' === e && (l *= -1), 'x' === a)) s = new yt(1, 0, 0);
										else if ('y' === a) s = new yt(0, 1, 0);
										else {
											if ('z' !== a) throw new Error('Invalid model rotate axis.');
											s = new yt(0, 0, 1);
										}
										l = T.degToRad(l);
										var c = new tt();
										c.setFromAxisAngle(s, l), i.mult(i, c);
									}
								else t.get('fixed').getOrientation().getAxis(r, 2), i.setFromAxisAngle(r, T.degToRad(180));
								t.get('fixed').setParent('sun'), t.get('fixed').setOrientation(i), t.get('fixed').setPosition(n);
							}
						},
						{
							key: '_toggleViewports',
							value: function _toggleViewports() {
								(this._isComparisonOn = !this._isComparisonOn),
									this._pioneer.getViewport(0).setEnabled(!this._isComparisonOn),
									this._leftViewport.setEnabled(this._isComparisonOn),
									this._rightViewport.setEnabled(this._isComparisonOn);
							}
						},
						{
							key: '_resizeViewports',
							value: function _resizeViewports() {
								yi.isMobile() && !yi.isLandscape()
									? ((this._leftViewport.getDiv().style.width = '100%'),
									  (this._leftViewport.getDiv().style.height = 'calc(50% - 25px)'),
									  (this._leftViewport.getDiv().style.left = '0%'),
									  (this._leftViewport.getDiv().style.top = '0%'),
									  (this._rightViewport.getDiv().style.width = '100%'),
									  (this._rightViewport.getDiv().style.height = 'calc(50% - 25px)'),
									  (this._rightViewport.getDiv().style.left = '0%'),
									  (this._rightViewport.getDiv().style.top = 'calc(50% - 25px)'))
									: ((this._leftViewport.getDiv().style.width = '50%'),
									  (this._leftViewport.getDiv().style.height = '100%'),
									  (this._leftViewport.getDiv().style.left = '0%'),
									  (this._leftViewport.getDiv().style.top = '0%'),
									  (this._rightViewport.getDiv().style.width = '50%'),
									  (this._rightViewport.getDiv().style.height = '100%'),
									  (this._rightViewport.getDiv().style.left = '50%'),
									  (this._rightViewport.getDiv().style.top = '0%'));
							}
						},
						{
							key: 'compare',
							value: (function () {
								var t = (function comparison_manager_asyncToGenerator(t) {
									return function () {
										var e = this,
											n = arguments;
										return new Promise(function (r, i) {
											var o = t.apply(e, n);
											function _next(t) {
												comparison_manager_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
											}
											function _throw(t) {
												comparison_manager_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
											}
											_next(void 0);
										});
									};
								})(
									regeneratorRuntime.mark(function _callee(t, e) {
										var n, r, i, o, a, s, l, c, u;
										return regeneratorRuntime.wrap(
											function _callee$(_) {
												for (;;)
													switch ((_.prev = _.next)) {
														case 0:
															if (
																((t = yi.get('content').getReplacement(t)),
																(e = yi.get('content').getReplacement(e)),
																(null !== this._mainScene.get(t) || this._comparisonObjects.has(t)) &&
																	(null !== this._mainScene.get(e) || this._comparisonObjects.has(e)))
															) {
																_.next = 4;
																break;
															}
															return _.abrupt('return');
														case 4:
															return (
																this._createCopy(t, 'left'),
																this._positionEntity(this._leftEntity, 'left'),
																this._createCopy(e, 'right'),
																this._positionEntity(this._rightEntity, 'right'),
																this._leftEntity.setEnabled(!0),
																this._rightEntity.setEnabled(!0),
																this._isComparisonOn ||
																	(this._toggleViewports(),
																	(n = new CustomEvent('comparisonenter', { detail: {} })),
																	window.dispatchEvent(n)),
																(_.next = 13),
																this._pioneer.waitUntilNextFrame()
															);
														case 13:
															(r = new tt()).setFromAxes(new yt(0, -1, 0), void 0, new yt(0, 0, 1)),
																(i = Cr.getDistanceToFitEntities(this._leftCameraEntity, r, this._leftEntity, [
																	this._leftEntity
																])),
																r.setFromAxes(new yt(0, 1, 0), void 0, new yt(0, 0, 1)),
																(o = Cr.getDistanceToFitEntities(this._rightCameraEntity, r, this._rightEntity, [
																	this._rightEntity
																])),
																(a = Math.max(o, i)),
																(a *= 1.3),
																(s = new yt(0, -1, 0)).mult(s, a),
																(l = new yt(0, 1, 0)).mult(l, a),
																(c = new yt(0, 0, 1)),
																(u = {
																	cameraLeft: this._leftCameraEntity,
																	cameraRight: this._rightCameraEntity,
																	cameraLeftPosition: s,
																	cameraRightPosition: l,
																	cameraUp: c,
																	scene: this._comparisonScene
																}),
																t in this._replacements && (t = this._replacements[t]),
																e in this._replacements && (e = this._replacements[e]),
																yi.camera.compareObjects(t, e, u);
														case 29:
														case 'end':
															return _.stop();
													}
											},
											_callee,
											this
										);
									})
								);
								return function compare(e, n) {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'isACopy',
							value: function isACopy(t) {
								return !!t.getName().includes('_copy');
							}
						},
						{
							key: 'toggleCameraLight',
							value: function toggleCameraLight(t) {
								this._leftLight.setEnabled(t), this._rightLight.setEnabled(t), this._sunLight.setEnabled(!t);
							}
						},
						{
							key: 'clear',
							value: function clear() {
								var t = this;
								this._comparisonObjects.forEach(function (e) {
									t._comparisonScene.get(e).setEnabled(!1);
								}),
									null !== this._leftEntity && this._leftEntity.setEnabled(!1),
									null !== this._rightEntity && this._rightEntity.setEnabled(!1);
							}
						},
						{
							key: 'exit',
							value: function exit() {
								this.clear(),
									this._comparisonObjects.has(this._leftEntity.getName()) ||
										(this._comparisonScene.removeEntity(this._leftEntity),
										this._leftCameraEntity.setParent(this._sun),
										(this._leftEntity = null)),
									this._comparisonObjects.has(this._rightEntity.getName()) ||
										(this._comparisonScene.removeEntity(this._rightEntity),
										this._rightCameraEntity.setParent(this._sun),
										(this._rightEntity = null)),
									this._isComparisonOn && this._toggleViewports();
								var t = new CustomEvent('comparisonexit', { detail: {} });
								window.dispatchEvent(t);
							}
						},
						{
							key: 'isComparing',
							value: function isComparing() {
								return this._isComparisonOn;
							}
						},
						{
							key: 'getScene',
							value: function getScene() {
								return this._comparisonScene;
							}
						}
					]),
					ComparisonManager
				);
			})(),
			li = n(279);
		function scene_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function scene_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						scene_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						scene_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function src_scene_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var ci = (function () {
			function Scene(t, e) {
				var n = this;
				!(function src_scene_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Scene),
					(this._pioneer = t),
					(this._scene = e),
					(this._wmtsList = li),
					(this._hdList = {}),
					(this._isHD = !1),
					(this._loadingItems = []),
					this._addWMTS(),
					window.addEventListener('loaded', function (t) {
						n.removeLoading(t.detail.id, t.detail.type);
					});
			}
			return (
				(function src_scene_createClass(t, e, n) {
					return e && src_scene_defineProperties(t.prototype, e), n && src_scene_defineProperties(t, n), t;
				})(Scene, [
					{
						key: 'isReady',
						value: (function () {
							var t = scene_asyncToGenerator(
								regeneratorRuntime.mark(function _callee(t, e) {
									var n,
										r = this;
									return regeneratorRuntime.wrap(
										function _callee$(i) {
											for (;;)
												switch ((i.prev = i.next)) {
													case 0:
														return (
															(e = void 0 === e ? this._pioneer.getTime() : A.unixToEt(e.unix())),
															(n = new Promise(function (n, i) {
																var o = setInterval(function () {
																	var a = r._scene.get(t);
																	if (null !== a) {
																		var s = yt.pool.get(),
																			l = tt.pool.get(),
																			c = tt.pool.get();
																		a.getPositionAtTime(s, e),
																			null === a || s.isNaN() || (clearInterval(o), n()),
																			tt.pool.release(l),
																			tt.pool.release(c),
																			yt.pool.release(s);
																	} else i(new Error('Object not found.'));
																}, 30);
															})),
															i.abrupt('return', n)
														);
													case 3:
													case 'end':
														return i.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function isReady(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'isListReady',
						value: (function () {
							var t = scene_asyncToGenerator(
								regeneratorRuntime.mark(function _callee2(t, e) {
									var n, r, i;
									return regeneratorRuntime.wrap(
										function _callee2$(o) {
											for (;;)
												switch ((o.prev = o.next)) {
													case 0:
														for (n = [], void 0 === e && (e = [void 0]), r = 0; r < t.length; r++)
															for (i = 0; i < e.length; i++) n.push(this.isReady(t[r], e[i]));
														return o.abrupt('return', Promise.all(n));
													case 4:
													case 'end':
														return o.stop();
												}
										},
										_callee2,
										this
									);
								})
							);
							return function isListReady(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'setAtmosphere',
						value: function setAtmosphere(t) {
							this._scene.get('mars').get('atmosphere').setEnabled(t);
						}
					},
					{
						key: 'getDistance',
						value: function getDistance(t, e, n) {
							var r = (arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}).subtractRadius,
								i = void 0 !== r && r,
								o = yt.pool.get(),
								a = this._scene.get(t),
								s = this._scene.get(e);
							a.getPositionRelativeToEntity(o, yt.Zero, s);
							var l = o.magnitude();
							i && (l -= a.getExtentsRadius() + s.getExtentsRadius());
							(n.distance = l), yt.pool.release(o);
						}
					},
					{
						key: 'getSpeed',
						value: function getSpeed(t, e, n) {
							var r = yt.pool.get(),
								i = yt.pool.get(),
								o = this._scene.get(t),
								a = A.unixToEt(e.valueOf() / 1e3);
							o.getPositionAtTime(i, a),
								o.getVelocityAtTime(r, a),
								(n.parent = o.getParent(a).getName()),
								(n.speed = r.magnitude()),
								yt.pool.release(r),
								yt.pool.release(i);
						}
					},
					{
						key: 'tileIsReady',
						value: (function () {
							var t = scene_asyncToGenerator(
								regeneratorRuntime.mark(function _callee3(t) {
									var e, n;
									return regeneratorRuntime.wrap(function _callee3$(r) {
										for (;;)
											switch ((r.prev = r.next)) {
												case 0:
													return (
														(e = null),
														(n = new Promise(function (n, r) {
															var i = setInterval(function () {
																(t.isEnabled() && t.getEntity().isEnabled()) || r(new Error('disabled')),
																	null === e &&
																		null !== t._tilesLoadedPromise &&
																		(e = t.getTilesLoadedPromise().then(function () {
																			clearInterval(i), n(!0);
																		}));
															}, 30);
														})),
														r.abrupt('return', n)
													);
												case 3:
												case 'end':
													return r.stop();
											}
									}, _callee3);
								})
							);
							return function tileIsReady(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'toggleHD',
						value: (function () {
							var t = scene_asyncToGenerator(
								regeneratorRuntime.mark(function _callee4() {
									var t, e, n, r, i, o, a;
									return regeneratorRuntime.wrap(
										function _callee4$(s) {
											for (;;)
												switch ((s.prev = s.next)) {
													case 0:
														(this._isHD = !this._isHD),
															this._isHD || this._pioneer.getConfig().setValue('maxTextureSize', 512),
															(s.t0 = regeneratorRuntime.keys(this._hdList));
													case 3:
														if ((s.t1 = s.t0()).done) {
															s.next = 25;
															break;
														}
														if (
															((t = s.t1.value),
															(e = yi.camera.getCurrentId()),
															(n = this._scene.get(e).getParent().getName()),
															(r = this._hdList[t]),
															(i = this._scene.get(t)),
															(o = i.getComponentByType('spheroid')),
															(a = i.getComponent(r)),
															yi.isMobile() && a.setMaxLevel(5),
															a.setEnabled(this._isHD),
															!this._isHD)
														) {
															s.next = 21;
															break;
														}
														if (e !== t && n !== t) {
															s.next = 21;
															break;
														}
														if ((this.addLoading(t, 'wmts'), this._wmtsList[a.getName()].loaded)) {
															s.next = 20;
															break;
														}
														return (s.next = 19), this.tileIsReady(a);
													case 19:
														this._wmtsList[a.getName()].loaded = !0;
													case 20:
														this.removeLoading(t, 'wmts');
													case 21:
														o.setEnabled(!this._isHD),
															this._isHD && this._pioneer.getConfig().setValue('maxTextureSize', 4096),
															(s.next = 3);
														break;
													case 25:
													case 'end':
														return s.stop();
												}
										},
										_callee4,
										this
									);
								})
							);
							return function toggleHD() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'isHD',
						value: function isHD() {
							return this._isHD;
						}
					},
					{
						key: 'hasHD',
						value: function hasHD(t) {
							var e = this._scene.get(t);
							if (null === e) return !1;
							if (this._hdList.hasOwnProperty(t)) return !0;
							if (null !== e.getParent() && this._hdList.hasOwnProperty(e.getParent().getName())) return !0;
							if (null !== e.get('spheroid'))
								for (var n = e.get('spheroid').getTextureSizes('color'), r = 0; r < n.length; r++)
									if (n[r] > 512) return !0;
							if (null !== e.getParent() && null !== e.getParent().get('spheroid'))
								for (var i = e.getParent().get('spheroid').getTextureSizes('color'), o = 0; o < i.length; o++)
									if (i[o] > 512) return !0;
							return !1;
						}
					},
					{
						key: 'addLoading',
						value: function addLoading(t, e) {
							var n = t + '_' + e;
							if ((this._loadingItems.indexOf(n) < 0 && this._loadingItems.push(n), this._loadingItems.length > 0)) {
								var r = new CustomEvent('loading');
								window.dispatchEvent(r);
							}
						}
					},
					{
						key: 'removeLoading',
						value: function removeLoading(t, e) {
							var n = t + '_' + e,
								r = this._loadingItems.indexOf(n);
							if ((r >= 0 && this._loadingItems.splice(r, 1), 0 === this._loadingItems.length)) {
								var i = new CustomEvent('allloaded');
								window.dispatchEvent(i);
							}
						}
					},
					{
						key: '_addWMTS',
						value: function _addWMTS() {
							for (var t in this._wmtsList) {
								var e = this._wmtsList[t];
								e.hd && (this._hdList[e.entity] = e.name);
								var n = this._scene.get(e.entity),
									r = n.getComponentByType('spheroid'),
									i = n.addComponent('wmts', e.name);
								i.setEnabled(!1),
									i.setRadii(r.getEquatorialRadius(), r.getPolarRadius()),
									i.setEndPoint(e.endPoint),
									i.setLayer(e.layer),
									e.tile && i.setTileMatrixSet(e.tile);
								var o = new Date();
								'yesterday' === e.time
									? (o.setDate(o.getDate() - 1),
									  i.setDimensionValue(
											'Time',
											o.getFullYear() +
												'-' +
												(o.getMonth() + 1 + '').padStart(2, '0') +
												'-' +
												(o.getDate() + '').padStart(2, '0')
									  ))
									: 'now' === e.time &&
									  i.setDimensionValue(
											'Time',
											o.getFullYear() +
												'-' +
												(o.getMonth() + 1 + '').padStart(2, '0') +
												'-' +
												(o.getDate() + '').padStart(2, '0')
									  ),
									e.level ? i.setMaxLevel(e.level) : i.setMaxLevel(1 / 0);
							}
						}
					}
				]),
				Scene
			);
		})();
		n(501);
		function compare_menu_typeof(t) {
			return (compare_menu_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function compare_menu_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function compare_menu_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						compare_menu_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						compare_menu_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function compare_menu_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function compare_menu_possibleConstructorReturn(t, e) {
			return !e || ('object' !== compare_menu_typeof(e) && 'function' != typeof e)
				? (function compare_menu_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function compare_menu_getPrototypeOf(t) {
			return (compare_menu_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function compare_menu_setPrototypeOf(t, e) {
			return (compare_menu_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var ui = (function (t) {
			function CompareMenu(t, e) {
				var n;
				return (
					(function compare_menu_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, CompareMenu),
					((n = compare_menu_possibleConstructorReturn(
						this,
						compare_menu_getPrototypeOf(CompareMenu).call(this, t)
					))._isVisible = !1),
					(n._init = !1),
					(n._scene = e),
					(n._initialObjectId = ''),
					(n._comparisonCategory = ''),
					(n._leftObjectId = ''),
					(n._rightObjectId = ''),
					(n._planetList = [
						'sun',
						'mercury',
						'venus',
						'earth',
						'moon',
						'mars',
						'4_vesta',
						'jupiter',
						'saturn',
						'uranus',
						'neptune',
						'134340_pluto'
					]),
					(n._moonList = [
						'mercury',
						'moon',
						'phobos',
						'1_ceres',
						'io',
						'europa',
						'ganymede',
						'callisto',
						'enceladus',
						'titan',
						'134340_pluto',
						'charon'
					]),
					(n._asteroidCometList = [
						'101955_bennu',
						'16_psyche',
						'433_eros',
						'4_vesta',
						'1p_halley',
						'67p_churyumov_gerasimenko',
						'81p_wild',
						'9p_tempel',
						'c_1995_o1'
					]),
					(n._dwarfPlanetList = [
						'earth',
						'moon',
						'1_ceres',
						'io',
						'europa',
						'titan',
						'134340_pluto',
						'136472_makemake',
						'136108_haumea',
						'136199_eris'
					]),
					(n._spacecraftList = [
						'scientist',
						'school_bus',
						'rose_bowl',
						'sc_parker_solar_probe',
						'sc_osiris_rex',
						'sc_juno',
						'sc_new_horizons',
						'sc_pioneer_10',
						'sc_voyager_1'
					]),
					(n._categories = {
						planet: {
							types: ['Terrestrial Planet', 'Gas Giant', 'Ice Giant', 'Star'],
							list: n._planetList,
							default: 'earth',
							fallback: 'mars'
						},
						moon: { types: ['Moon'], list: n._moonList, default: 'moon', fallback: 'europa' },
						asteroid: {
							types: ['Asteroid', 'Comet'],
							list: n._asteroidCometList,
							default: '4_vesta',
							fallback: '101955_bennu'
						},
						dwarf: { types: ['Dwarf Planet'], list: n._dwarfPlanetList, default: '134340_pluto', fallback: '1_ceres' },
						spacecraft: {
							types: ['Spacecraft'],
							list: n._spacecraftList,
							default: 'sc_juno',
							fallback: 'sc_new_horizons'
						}
					}),
					n.setEnabled(!1),
					n
				);
			}
			return (
				(function compare_menu_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && compare_menu_setPrototypeOf(t, e);
				})(CompareMenu, Vr),
				(function compare_menu_createClass(t, e, n) {
					return e && compare_menu_defineProperties(t.prototype, e), n && compare_menu_defineProperties(t, n), t;
				})(CompareMenu, [
					{
						key: 'init',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee() {
									var t,
										e = this;
									return regeneratorRuntime.wrap(
										function _callee$(n) {
											for (;;)
												switch ((n.prev = n.next)) {
													case 0:
														return (
															((t = document.createElement('div')).className = 'container'),
															this._div.appendChild(t),
															(this._comparePanel = document.createElement('div')),
															(this._comparePanel.innerHTML = ''),
															(this._comparePanel.style.display = 'none'),
															(this._comparePanel.className = 'compare-panel'),
															this._comparePanel.addEventListener(
																'animationend',
																function () {
																	'0' === window.getComputedStyle(e._comparePanel).opacity
																		? (e._comparePanel.style.display = 'none')
																		: (e._comparePanel.style.display = 'block');
																},
																!0
															),
															t.appendChild(this._comparePanel),
															(n.next = 11),
															this._loadTemplate(this._comparePanel)
														);
													case 11:
													case 'end':
														return n.stop();
												}
										},
										_callee,
										this
									);
								})
							);
							return function init() {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_loadTemplate',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee4(t) {
									var e,
										n,
										r,
										i,
										o,
										a = this;
									return regeneratorRuntime.wrap(
										function _callee4$(s) {
											for (;;)
												switch ((s.prev = s.next)) {
													case 0:
														return (
															(s.next = 2),
															fetch('compare_panels.html')
																.then(function (t) {
																	return t.text();
																})
																.then(function (e) {
																	t.innerHTML = e;
																})
														);
													case 2:
														(this._closeContainer = document.getElementById('close-compare-container')),
															(this._closeContainer.style.display = 'none'),
															(this._closeCompare = document.createElement('button')),
															(this._closeCompare.innerHTML = 'Close Comparison Mode'),
															(this._closeCompare.type = 'button'),
															(this._closeCompare.className = 'close-compare no-select'),
															(this._closeCompare.value = 'close'),
															this._closeCompare.addEventListener('click', function (t) {
																yi.router.navigateBack();
															}),
															this._closeContainer.appendChild(this._closeCompare),
															(this._previousCompareButton = document.getElementsByClassName('left-arrow')[0]),
															(this._nextCompareButton = document.getElementsByClassName('right-arrow')[0]),
															this._previousCompareButton.addEventListener(
																'click',
																(function () {
																	var t = compare_menu_asyncToGenerator(
																		regeneratorRuntime.mark(function _callee2(t) {
																			return regeneratorRuntime.wrap(function _callee2$(t) {
																				for (;;)
																					switch ((t.prev = t.next)) {
																						case 0:
																							return (t.next = 2), a._previous(a._initialObjectId, a._rightObjectId);
																						case 2:
																						case 'end':
																							return t.stop();
																					}
																			}, _callee2);
																		})
																	);
																	return function (e) {
																		return t.apply(this, arguments);
																	};
																})()
															),
															this._nextCompareButton.addEventListener(
																'click',
																(function () {
																	var t = compare_menu_asyncToGenerator(
																		regeneratorRuntime.mark(function _callee3(t) {
																			return regeneratorRuntime.wrap(function _callee3$(t) {
																				for (;;)
																					switch ((t.prev = t.next)) {
																						case 0:
																							return (t.next = 2), a._next(a._initialObjectId, a._rightObjectId);
																						case 2:
																						case 'end':
																							return t.stop();
																					}
																			}, _callee3);
																		})
																	);
																	return function (e) {
																		return t.apply(this, arguments);
																	};
																})()
															),
															(e = t.getElementsByClassName('title')),
															(n = t.getElementsByClassName('type')),
															(r = t.getElementsByClassName('radius')),
															(i = t.getElementsByClassName('unit')),
															(o = t.getElementsByClassName('label')),
															(this._comparisonText = {
																left: { name: e[0], type: n[0], radius: r[0], unit: i[0], label: o[0] },
																right: { name: e[1], type: n[1], radius: r[1], unit: i[1], label: o[1] }
															}),
															(this._leftContainer = t.querySelector('#left-container')),
															(this._rightContainer = t.querySelector('#right-container')),
															window.addEventListener(
																'unitSystemToggle',
																function (t) {
																	a._updateText('left'), a._updateText('right');
																},
																!1
															);
													case 24:
													case 'end':
														return s.stop();
												}
										},
										_callee4,
										this
									);
								})
							);
							return function _loadTemplate(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_getClassName',
						value: function _getClassName(t) {
							var e = '',
								n = yi.scene.get(t);
							if (null === n) e = yi.get('content').getClassName(t);
							else {
								var r = n.getParent();
								null !== r &&
									'sun' !== r.getName() &&
									'milky_way' !== r.getName() &&
									((t = r.getName()), (t = yi.get('content').getReplacement(t))),
									(e = yi.get('content').getClassName(t));
							}
							return e;
						}
					},
					{
						key: 'hide',
						value: function hide() {
							(this._isVisible = !1), (this._closeContainer.style.display = 'none');
							for (
								var t = 0,
									e = [
										document.getElementById('left-viewport'),
										document.getElementById('right-viewport'),
										this._comparePanel
									];
								t < e.length;
								t++
							) {
								var n = e[t];
								(n.style.display = 'block'), n.classList.add('hidden'), n.classList.remove('active');
							}
						}
					},
					{
						key: 'show',
						value: function show() {
							(this._isVisible = !0), (this._closeContainer.style.display = 'block');
							for (
								var t = 0,
									e = [
										document.getElementById('left-viewport'),
										document.getElementById('right-viewport'),
										this._comparePanel
									];
								t < e.length;
								t++
							) {
								var n = e[t];
								(n.style.display = 'block'), n.classList.add('active'), n.classList.remove('hidden');
							}
						}
					},
					{
						key: 'isVisible',
						value: function isVisible() {
							return this._isVisible;
						}
					},
					{
						key: '__disable',
						value: function __disable() {
							this._isVisible && this.hide(),
								(this._init = !1),
								(this._initialObjectId = ''),
								(this._comparisonCategory = ''),
								(this._leftObjectId = ''),
								(this._rightObjectId = '');
						}
					},
					{
						key: '__enable',
						value: function __enable() {
							this.show();
						}
					},
					{
						key: 'update',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee5(t, e) {
									var n;
									return regeneratorRuntime.wrap(
										function _callee5$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														if (
															((t = yi.get('content').getReplacement(t)),
															(e = yi.get('content').getReplacement(e)),
															this._init ||
																((this._init = !0),
																(this._initialObjectId = t),
																(n = yi.get('content').getEntityInfo(this._initialObjectId)),
																(this._comparisonCategory = n.category)),
															t === this._leftObjectId)
														) {
															r.next = 7;
															break;
														}
														return (this._leftObjectId = t), (r.next = 7), this._updateText('left');
													case 7:
														if (e === this._rightObjectId) {
															r.next = 11;
															break;
														}
														return (this._rightObjectId = e), (r.next = 11), this._updateText('right');
													case 11:
													case 'end':
														return r.stop();
												}
										},
										_callee5,
										this
									);
								})
							);
							return function update(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_updateText',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee6(t) {
									var e, n, r, i, o, a, s, l;
									return regeneratorRuntime.wrap(
										function _callee6$(c) {
											for (;;)
												switch ((c.prev = c.next)) {
													case 0:
														return (
															(e = ''),
															'right' === t
																? ((e = this._rightObjectId), (this._rightContainer.className = this._getClassName(e)))
																: ((e = this._leftObjectId), (this._leftContainer.className = this._getClassName(e))),
															(c.next = 4),
															this.entityCompareLookup(e)
														);
													case 4:
														(n = c.sent),
															(r = this._comparisonText[t]),
															(i = ['Spacecraft', 'Comparison Object']),
															(o = yi.get('content').getEntityInfo(e)) && i.indexOf(o.category) >= 0
																? ((n.radius *= 2), (r.label.innerHTML = 'Length'))
																: (r.label.innerHTML = 'Radius'),
															(r.name.innerHTML = n.name),
															(r.type.innerHTML = n.category),
															(r.type.className = 'type ' + n.icon),
															(r.radius.innerHTML = n.radius < 1 ? (1e3 * n.radius).toFixed(1) : n.radius.toFixed(1)),
															(r.unit.innerHTML = n.radius < 1 ? 'M' : 'KM'),
															yi.isMetric() ||
																((a = yi.conversionTable),
																(s = n.radius * a.kmToMi) < 1
																	? ((l = s * a.miToFt),
																	  (r.radius.innerHTML = l.toFixed(1)),
																	  (r.unit.innerHTML = 'Feet'))
																	: ((r.radius.innerHTML = s.toFixed(1)), (r.unit.innerHTML = 'Miles')));
													case 15:
													case 'end':
														return c.stop();
												}
										},
										_callee6,
										this
									);
								})
							);
							return function _updateText(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'entityCompareLookup',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee7(t) {
									var e, n, r, i, o, a;
									return regeneratorRuntime.wrap(
										function _callee7$(s) {
											for (;;)
												switch ((s.prev = s.next)) {
													case 0:
														return (
															(e = yi.get('content').getEntityInfo(t)),
															(n = this._scene.get(t)),
															(s.next = 4),
															yi.get('content').getEntityDesc(t)
														);
													case 4:
														return (
															(r = s.sent),
															(void 0 !== (i = r.shortName) && '' !== i) || (i = e.name),
															(o = e.category),
															(a = e.category.toLowerCase().replace(/ /g, '-')),
															void 0 !== e.subcategory &&
																((o = e.subcategory),
																'Spacecraft' === e.category &&
																	((o += ' ' + e.category),
																	(a += ' ' + e.subcategory.toLowerCase().replace(/ /g, '-')))),
															s.abrupt('return', {
																name: i,
																category: o,
																icon: a,
																radius: 'Spacecraft' === e.category ? n.getExtentsRadius() : n.getOcclusionRadius()
															})
														);
													case 11:
													case 'end':
														return s.stop();
												}
										},
										_callee7,
										this
									);
								})
							);
							return function entityCompareLookup(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_previous',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee8(t, e) {
									var n, r, i, o;
									return regeneratorRuntime.wrap(
										function _callee8$(a) {
											for (;;)
												switch ((a.prev = a.next)) {
													case 0:
														(n = this._comparisonCategory),
															(r = ''),
															(a.t0 = regeneratorRuntime.keys(this._categories));
													case 3:
														if ((a.t1 = a.t0()).done) {
															a.next = 11;
															break;
														}
														if (((i = a.t1.value), !(o = this._categories[i]).types.includes(n))) {
															a.next = 9;
															break;
														}
														return (r = this.scrollListWithExclusion(o.list, e, -1, t)), a.abrupt('break', 11);
													case 9:
														a.next = 3;
														break;
													case 11:
														if ('' !== r) {
															a.next = 14;
															break;
														}
														return console.log('[Comparison] Cannot find next object before ' + e), a.abrupt('return');
													case 14:
														return (a.next = 16), yi.get('compareManager').compare(t, r);
													case 16:
														this.update(t, r);
													case 17:
													case 'end':
														return a.stop();
												}
										},
										_callee8,
										this
									);
								})
							);
							return function _previous(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: '_next',
						value: (function () {
							var t = compare_menu_asyncToGenerator(
								regeneratorRuntime.mark(function _callee9(t, e) {
									var n, r, i, o;
									return regeneratorRuntime.wrap(
										function _callee9$(a) {
											for (;;)
												switch ((a.prev = a.next)) {
													case 0:
														(n = this._comparisonCategory),
															(r = ''),
															(a.t0 = regeneratorRuntime.keys(this._categories));
													case 3:
														if ((a.t1 = a.t0()).done) {
															a.next = 11;
															break;
														}
														if (((i = a.t1.value), !(o = this._categories[i]).types.includes(n))) {
															a.next = 9;
															break;
														}
														return (r = this.scrollListWithExclusion(o.list, e, 1, t)), a.abrupt('break', 11);
													case 9:
														a.next = 3;
														break;
													case 11:
														if ('' !== r) {
															a.next = 14;
															break;
														}
														return console.log('[Comparison] Cannot find next object after ' + e), a.abrupt('return');
													case 14:
														return (a.next = 16), yi.get('compareManager').compare(t, r);
													case 16:
														this.update(t, r);
													case 17:
													case 'end':
														return a.stop();
												}
										},
										_callee9,
										this
									);
								})
							);
							return function _next(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'scrollListWithExclusion',
						value: function scrollListWithExclusion(t, e, n, r) {
							var i = t.indexOf(e);
							return t[(i = (i + t.length + n) % t.length)] === r && (i = (i + t.length + n) % t.length), t[i];
						}
					},
					{
						key: 'getDefaultComparison',
						value: function getDefaultComparison(t) {
							var e = yi.get('content').getEntityInfo(t).category,
								n = 'earth';
							for (var r in this._categories) {
								var i = this._categories[r];
								if (i.types.includes(e)) {
									n = i.default === t ? i.fallback : i.default;
									break;
								}
							}
							return n;
						}
					}
				]),
				CompareMenu
			);
		})();
		function ui_component_typeof(t) {
			return (ui_component_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function ui_component_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function ui_component_getPrototypeOf(t) {
			return (ui_component_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function ui_component_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function ui_component_setPrototypeOf(t, e) {
			return (ui_component_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var _i = (function (t) {
			function UIComponent(t) {
				var e;
				if (
					((function ui_component_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, UIComponent),
					(e = (function ui_component_possibleConstructorReturn(t, e) {
						return !e || ('object' !== ui_component_typeof(e) && 'function' != typeof e)
							? ui_component_assertThisInitialized(t)
							: e;
					})(this, ui_component_getPrototypeOf(UIComponent).call(this, t))),
					null == t)
				)
					throw new Error('No element was specified in which to create the ' + e.constructor.name);
				e._elem = t;
				for (var n = Object.getPrototypeOf(ui_component_assertThisInitialized(e)); n.constructor !== UIComponent; ) {
					if ((e._elem.classList.add(n.constructor.name), n.constructor.hasOwnProperty('style'))) {
						var r = document.querySelector('head style#' + n.constructor.name);
						null === r &&
							(((r = document.createElement('style')).id = n.constructor.name),
							(r.useCount = 0),
							(r.innerHTML = n.constructor.style),
							document.head.appendChild(r)),
							(r.useCount += 1);
					}
					n = Object.getPrototypeOf(n);
				}
				return (e._elem.innerHTML = e.constructor.html || ''), e;
			}
			return (
				(function ui_component_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && ui_component_setPrototypeOf(t, e);
				})(UIComponent, Vr),
				(function ui_component_createClass(t, e, n) {
					return e && ui_component_defineProperties(t.prototype, e), n && ui_component_defineProperties(t, n), t;
				})(UIComponent, [
					{
						key: 'destroy',
						value: function destroy() {
							this._elem.innerHTML = '';
							for (var t = Object.getPrototypeOf(this); t.constructor !== UIComponent; ) {
								var e = document.querySelector('head style#' + t.constructor.name);
								e && ((e.useCount -= 1), 0 === e.useCount && document.head.removeChild(e)),
									this._elem.classList.remove(t.constructor.name),
									(t = Object.getPrototypeOf(t));
							}
						}
					},
					{
						key: 'elem',
						get: function get() {
							return this._elem;
						}
					}
				]),
				UIComponent
			);
		})();
		function base_slider_typeof(t) {
			return (base_slider_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function base_slider_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		function base_slider_assertThisInitialized(t) {
			if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
			return t;
		}
		function base_slider_get(t, e, n) {
			return (base_slider_get =
				'undefined' != typeof Reflect && Reflect.get
					? Reflect.get
					: function _get(t, e, n) {
							var r = (function base_slider_superPropBase(t, e) {
								for (; !Object.prototype.hasOwnProperty.call(t, e) && null !== (t = base_slider_getPrototypeOf(t)); );
								return t;
							})(t, e);
							if (r) {
								var i = Object.getOwnPropertyDescriptor(r, e);
								return i.get ? i.get.call(n) : i.value;
							}
					  })(t, e, n || t);
		}
		function base_slider_getPrototypeOf(t) {
			return (base_slider_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function base_slider_setPrototypeOf(t, e) {
			return (base_slider_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		var pi = (function (t) {
			function BaseSlider(t) {
				var e;
				!(function base_slider_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, BaseSlider),
					((e = (function base_slider_possibleConstructorReturn(t, e) {
						return !e || ('object' !== base_slider_typeof(e) && 'function' != typeof e)
							? base_slider_assertThisInitialized(t)
							: e;
					})(this, base_slider_getPrototypeOf(BaseSlider).call(this, t)))._handleGrabbedCallback = null),
					(e._valueChangedCallback = null),
					(e._handleReleasedCallback = null),
					(e._resetValue = void 0),
					(e._value = 0),
					(e._sliding = !1),
					(e._boundMouseMoveEventListener = e._mouseMoveEventListener.bind(base_slider_assertThisInitialized(e))),
					(e._boundMouseUpEventListener = e._mouseUpEventListener.bind(base_slider_assertThisInitialized(e)));
				var n = e.elem.querySelector('#bar');
				return (
					n.addEventListener('mousedown', function (t) {
						null !== e._handleGrabbedCallback && e._handleGrabbedCallback(),
							(e._sliding = !0),
							e._mouseMoveEventListener(t),
							t.preventDefault();
					}),
					n.addEventListener('touchstart', function (t) {
						(e._sliding = !0), null !== e._handleGrabbedCallback && e._handleGrabbedCallback(), t.preventDefault();
					}),
					n.addEventListener('touchmove', function (t) {
						e._mouseMoveEventListener(t.touches[0]);
					}),
					n.addEventListener('touchend', e._boundMouseUpEventListener),
					document.addEventListener('mouseup', e._boundMouseUpEventListener),
					document.addEventListener('mousemove', e._boundMouseMoveEventListener),
					e
				);
			}
			return (
				(function base_slider_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && base_slider_setPrototypeOf(t, e);
				})(BaseSlider, _i),
				(function base_slider_createClass(t, e, n) {
					return e && base_slider_defineProperties(t.prototype, e), n && base_slider_defineProperties(t, n), t;
				})(BaseSlider, [
					{
						key: 'destroy',
						value: function destroy() {
							document.removeEventListener('mousemove', this._boundMouseMoveEventListener),
								document.removeEventListener('mouseup', this._boundMouseUpEventListener),
								base_slider_get(base_slider_getPrototypeOf(BaseSlider.prototype), 'destroy', this).call(this);
						}
					},
					{
						key: '_mouseUpEventListener',
						value: function _mouseUpEventListener(t) {
							this._sliding &&
								((this._sliding = !1),
								void 0 !== this._resetValue && (this.value = this._resetValue),
								null !== this._handleReleasedCallback && this._handleReleasedCallback());
						}
					},
					{
						key: '_mouseMoveEventListener',
						value: function _mouseMoveEventListener(t) {
							if (this._sliding) {
								var e = this.elem.querySelector('#bar').getBoundingClientRect(),
									n = this.elem.querySelector('#handle').getBoundingClientRect(),
									r = (t.clientX - e.left - n.width / 2) / (e.width - n.width);
								this.value = r;
							}
						}
					},
					{
						key: 'handleGrabbedCallback',
						set: function set(t) {
							this._handleGrabbedCallback = t;
						}
					},
					{
						key: 'valueChangedCallback',
						set: function set(t) {
							this._valueChangedCallback = t;
						}
					},
					{
						key: 'handleReleasedCallback',
						set: function set(t) {
							this._handleReleasedCallback = t;
						}
					},
					{
						key: 'value',
						get: function get() {
							return this._value;
						},
						set: function set(t) {
							var e = Math.max(0, Math.min(1, t));
							if (this._value !== e) {
								var n = this.elem.querySelector('#bar').getBoundingClientRect(),
									r = this.elem.querySelector('#handle').getBoundingClientRect();
								(this.elem.querySelector('#handle').style.left = ((e * (n.width - r.width)) / n.width) * 100 + '%'),
									(this._value = e),
									null !== this._valueChangedCallback && this._valueChangedCallback(e);
							}
						}
					},
					{
						key: 'resetValue',
						get: function get() {
							return this._resetValue;
						},
						set: function set(t) {
							(this._resetValue = t), void 0 !== this._resetValue && (this.value = this._resetValue);
						}
					}
				]),
				BaseSlider
			);
		})();
		function time_rate_slider_typeof(t) {
			return (time_rate_slider_typeof =
				'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
					? function _typeof(t) {
							return typeof t;
					  }
					: function _typeof(t) {
							return t && 'function' == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype
								? 'symbol'
								: typeof t;
					  })(t);
		}
		function time_rate_slider_possibleConstructorReturn(t, e) {
			return !e || ('object' !== time_rate_slider_typeof(e) && 'function' != typeof e)
				? (function time_rate_slider_assertThisInitialized(t) {
						if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
						return t;
				  })(t)
				: e;
		}
		function time_rate_slider_getPrototypeOf(t) {
			return (time_rate_slider_getPrototypeOf = Object.setPrototypeOf
				? Object.getPrototypeOf
				: function _getPrototypeOf(t) {
						return t.__proto__ || Object.getPrototypeOf(t);
				  })(t);
		}
		function time_rate_slider_setPrototypeOf(t, e) {
			return (time_rate_slider_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		(pi.style =
			'\n\t.BaseSlider {\n\t\tposition: relative;\n\t\toverflow: auto;\n\t\tpointer-events: auto;\n\t}\n\t.BaseSlider #bar {\n\t\twidth: calc(100% - 1em);\n\t\theight: 100%;\n\t}\n\t.BaseSlider #handle {\n\t\tposition: absolute;\n\t\tmargin: auto;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\twidth: 1em;\n\t\theight: 1em;\n\t\tpointer-events: none;\n\t}\n\t'),
			(pi.html =
				'\n\t<svg id="bar"><line x1="0" y1="50%" x2="100%" y2="50%" stroke="var(--fg)" stroke-width="1.5"/>\x3c!--<line x1="0" y1="0" x2="0" y2="100%" stroke="var(--fg)" stroke-width="1.5"/><line x1="100%" y1="0" x2="100%" y2="100%" stroke="var(--fg)" stroke-width="1.5"/>--\x3e</svg>\n\t<div id="handle"></div>\n\t');
		var hi = (function (t) {
			function TimeRateSlider(t, e) {
				var n;
				return (
					(function time_rate_slider_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, TimeRateSlider),
					((n = time_rate_slider_possibleConstructorReturn(
						this,
						time_rate_slider_getPrototypeOf(TimeRateSlider).call(this, t)
					))._pioneer = e),
					(n._prevTimeRate = n._pioneer.getTimeRate()),
					(n.resetValue = 0.5),
					(n.handleGrabbedCallback = function () {
						n._prevTimeRate = n._pioneer.getTimeRate();
					}),
					(n.valueChangedCallback = function (t) {
						for (var e = 0, r = 2 * Math.abs(t - 0.5), i = 1; i < TimeRateSlider._rates.length; i++)
							if (r <= i / (TimeRateSlider._rates.length - 1)) {
								e =
									TimeRateSlider._rates[i - 1] +
									(r / (i / (TimeRateSlider._rates.length - 1))) *
										(TimeRateSlider._rates[i] - TimeRateSlider._rates[i - 1]);
								break;
							}
						t < 0.5 && (e *= -1), n._pioneer.setTimeRate(e);
					}),
					(n.handleReleasedCallback = function () {
						n._pioneer.setTimeRate(n._prevTimeRate);
					}),
					n
				);
			}
			return (
				(function time_rate_slider_inherits(t, e) {
					if ('function' != typeof e && null !== e)
						throw new TypeError('Super expression must either be null or a function');
					(t.prototype = Object.create(e && e.prototype, {
						constructor: { value: t, writable: !0, configurable: !0 }
					})),
						e && time_rate_slider_setPrototypeOf(t, e);
				})(TimeRateSlider, pi),
				TimeRateSlider
			);
		})();
		hi._rates = [0, 10, 60, 600, 3600, 21600, 86400, 604800, 2419200, 7889616, 31558464];
		var di = n(280),
			fi = n.n(di);
		function router_slicedToArray(t, e) {
			return (
				(function router_arrayWithHoles(t) {
					if (Array.isArray(t)) return t;
				})(t) ||
				(function router_iterableToArrayLimit(t, e) {
					var n = [],
						r = !0,
						i = !1,
						o = void 0;
					try {
						for (
							var a, s = t[Symbol.iterator]();
							!(r = (a = s.next()).done) && (n.push(a.value), !e || n.length !== e);
							r = !0
						);
					} catch (t) {
						(i = !0), (o = t);
					} finally {
						try {
							r || null == s.return || s.return();
						} finally {
							if (i) throw o;
						}
					}
					return n;
				})(t, e) ||
				(function router_nonIterableRest() {
					throw new TypeError('Invalid attempt to destructure non-iterable instance');
				})()
			);
		}
		function router_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function router_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						router_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						router_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function router_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var mi = (function () {
			function Router() {
				!(function router_classCallCheck(t, e) {
					if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
				})(this, Router),
					(this._router = new fi.a(null, !0)),
					(this._lastRoute = null),
					(this._currentRoute = {}),
					(this.navigate = this.navigate.bind(this)),
					(this._componentsMap = {
						always: ['messageBar', 'controls', 'options'],
						default: ['clock', 'searchBar', 'navigationBar', 'detailsPanel'],
						compare: ['compareMenu']
					}),
					(this._introLaunched = !1),
					(this._firstLoad = !0),
					(this._componentsToActivate = []),
					this._init();
			}
			return (
				(function router_createClass(t, e, n) {
					return e && router_defineProperties(t.prototype, e), n && router_defineProperties(t, n), t;
				})(Router, [
					{
						key: '_init',
						value: function _init() {
							var t = this;
							this._router.hooks({
								before: (function () {
									var e = router_asyncToGenerator(
										regeneratorRuntime.mark(function _callee(e) {
											var n, r, i, o, a, s;
											return regeneratorRuntime.wrap(function _callee$(l) {
												for (;;)
													switch ((l.prev = l.next)) {
														case 0:
															if (
																((n = window.location.hash),
																(r = /\/([a-zA-Z0-9_-]*)/g),
																(i = n.match(r)),
																(t._componentsToActivate = []),
																null !== i &&
																	void 0 !== i[1] &&
																	((o = i[1].replace('/', '')),
																	void 0 !== t._componentsMap[o] &&
																		(t._componentsToActivate = t._componentsToActivate.concat(t._componentsMap[o]))),
																null !== i &&
																	void 0 !== i[0] &&
																	((a = i[0].replace('/', '')),
																	void 0 !== t._componentsMap[a] &&
																		(t._componentsToActivate = t._componentsToActivate.concat(t._componentsMap[a]))),
																0 === t._componentsToActivate.length &&
																	(t._componentsToActivate = t._componentsMap.default),
																(t._componentsToActivate = t._componentsToActivate.concat(t._componentsMap.always)),
																t.resetStatus(Object.keys(yi.getComponents())),
																(t._lastRoute = Object.assign({}, t._currentRoute)),
																(t._currentRoute = t._router.lastRouteResolved()),
																null === t._currentRoute)
															) {
																l.next = 18;
																break;
															}
															return (
																(t._currentRoute.url = t._currentRoute.url.replace(/(\/)+/, '/')),
																(l.next = 15),
																t._parseQuery(t.lastRouteResolved().query)
															);
														case 15:
															(s = l.sent).close && null !== yi.get('options')
																? yi.get('options').displayCloseButton(!0)
																: null !== yi.get('options') && yi.get('options').displayCloseButton(!1),
																s.close && yi.showNASALogo();
														case 18:
															e();
														case 19:
														case 'end':
															return l.stop();
													}
											}, _callee);
										})
									);
									return function before(t) {
										return e.apply(this, arguments);
									};
								})(),
								after: function after() {
									t._router.updatePageLinks(), t._router.history || (t._router.history = []);
									var e = t._router.lastRouteResolved();
									t._router.history.unshift(e);
								}
							}),
								this._router
									.on(
										'/',
										(function () {
											var e = router_asyncToGenerator(
												regeneratorRuntime.mark(function _callee2(e) {
													var n;
													return regeneratorRuntime.wrap(function _callee2$(r) {
														for (;;)
															switch ((r.prev = r.next)) {
																case 0:
																	e && (e = '?' + e),
																		(n = window.location.pathname),
																		history.replaceState(e, '', n + '#/home' + e),
																		t._router.resolve();
																case 4:
																case 'end':
																	return r.stop();
															}
													}, _callee2);
												})
											);
											return function (t) {
												return e.apply(this, arguments);
											};
										})()
									)
									.on(
										'/inner_solar_system',
										(function () {
											var e = router_asyncToGenerator(
												regeneratorRuntime.mark(function _callee3(e, n) {
													return regeneratorRuntime.wrap(function _callee3$(e) {
														for (;;)
															switch ((e.prev = e.next)) {
																case 0:
																	if (!n) {
																		e.next = 4;
																		break;
																	}
																	return (e.next = 3), t._processQuery(n);
																case 3:
																	n = e.sent;
																case 4:
																	return (e.next = 6), yi.pioneer.waitUntilNextFrame();
																case 6:
																	'inner_solar_system',
																		yi.selector.selectEntity('inner_solar_system'),
																		yi.camera.goToObject('inner_solar_system', 'default').then(function () {}),
																		(t._firstLoad = !1);
																case 10:
																case 'end':
																	return e.stop();
															}
													}, _callee3);
												})
											);
											return function (t, n) {
												return e.apply(this, arguments);
											};
										})(),
										{
											before: (function () {
												var e = router_asyncToGenerator(
													regeneratorRuntime.mark(function _callee4(e) {
														var n, r;
														return regeneratorRuntime.wrap(function _callee4$(i) {
															for (;;)
																switch ((i.prev = i.next)) {
																	case 0:
																		return (i.next = 2), t._parseQuery(t.lastRouteResolved().query);
																	case 2:
																		(n = i.sent),
																			(r = yi.get('time').getNowTime()),
																			n.time && (r = t.parseTime(n.time)),
																			yi
																				.get('scene')
																				.isReady('sun', r)
																				.then(function () {
																					e();
																				});
																	case 6:
																	case 'end':
																		return i.stop();
																}
														}, _callee4);
													})
												);
												return function before(t) {
													return e.apply(this, arguments);
												};
											})()
										}
									)
									.on(
										'/home',
										(function () {
											var e = router_asyncToGenerator(
												regeneratorRuntime.mark(function _callee5(e, n) {
													return regeneratorRuntime.wrap(function _callee5$(e) {
														for (;;)
															switch ((e.prev = e.next)) {
																case 0:
																	if (!n) {
																		e.next = 4;
																		break;
																	}
																	return (e.next = 3), t._processQuery(n);
																case 3:
																	n = e.sent;
																case 4:
																	return (e.next = 6), yi.pioneer.waitUntilNextFrame();
																case 6:
																	'outer_solar_system',
																		yi.selector.selectEntity('outer_solar_system'),
																		!t._introLaunched && t._firstLoad
																			? yi.camera.intro().then(function () {
																					t._introLaunched = !0;
																			  })
																			: yi.camera.goToObject('outer_solar_system', 'default').then(function () {}),
																		(t._firstLoad = !1);
																case 10:
																case 'end':
																	return e.stop();
															}
													}, _callee5);
												})
											);
											return function (t, n) {
												return e.apply(this, arguments);
											};
										})(),
										{
											before: (function () {
												var e = router_asyncToGenerator(
													regeneratorRuntime.mark(function _callee6(e, n) {
														var r, i;
														return regeneratorRuntime.wrap(function _callee6$(n) {
															for (;;)
																switch ((n.prev = n.next)) {
																	case 0:
																		return (n.next = 2), t._parseQuery(t.lastRouteResolved().query);
																	case 2:
																		(r = n.sent),
																			(i = yi.get('time').getNowTime()),
																			r.time && (i = t.parseTime(r.time)),
																			yi
																				.get('scene')
																				.isReady('sun', i)
																				.then(function () {
																					e();
																				});
																	case 6:
																	case 'end':
																		return n.stop();
																}
														}, _callee6);
													})
												);
												return function before(t, n) {
													return e.apply(this, arguments);
												};
											})(),
											after: function after() {},
											leave: function leave() {}
										}
									)
									.on(
										'/:id/compare',
										(function () {
											var e = router_asyncToGenerator(
												regeneratorRuntime.mark(function _callee7(e, n) {
													var r;
													return regeneratorRuntime.wrap(function _callee7$(i) {
														for (;;)
															switch ((i.prev = i.next)) {
																case 0:
																	if (!n) {
																		i.next = 4;
																		break;
																	}
																	return (i.next = 3), t._processQuery(n);
																case 3:
																	n = i.sent;
																case 4:
																	return (i.next = 6), yi.pioneer.waitUntilNextFrame();
																case 6:
																	return (
																		yi.pioneer.getConfig().setValue('maxTextureSize', 512),
																		yi.selector.selectEntity(e.id),
																		(r = yi.get('compareMenu').getDefaultComparison(e.id)),
																		(i.next = 11),
																		yi.get('compareManager').compare(e.id, r)
																	);
																case 11:
																	yi.get('compareMenu').update(e.id, r), (t._firstLoad = !1);
																case 13:
																case 'end':
																	return i.stop();
															}
													}, _callee7);
												})
											);
											return function (t, n) {
												return e.apply(this, arguments);
											};
										})(),
										{
											before: (function () {
												var e = router_asyncToGenerator(
													regeneratorRuntime.mark(function _callee9(e, n) {
														var r, i;
														return regeneratorRuntime.wrap(function _callee9$(o) {
															for (;;)
																switch ((o.prev = o.next)) {
																	case 0:
																		return (o.next = 2), t._parseQuery(t.lastRouteResolved().query);
																	case 2:
																		(r = o.sent),
																			(i = yi.get('time').getNowTime()),
																			r.time && (i = t.parseTime(r.time)),
																			yi
																				.get('scene')
																				.isReady(n.id, i)
																				.then(function () {
																					e();
																				})
																				.catch(
																					(function () {
																						var e = router_asyncToGenerator(
																							regeneratorRuntime.mark(function _callee8(e) {
																								return regeneratorRuntime.wrap(function _callee8$(n) {
																									for (;;)
																										switch ((n.prev = n.next)) {
																											case 0:
																												if (!e) {
																													n.next = 4;
																													break;
																												}
																												return '/home', (n.next = 4), t.navigate('/home');
																											case 4:
																											case 'end':
																												return n.stop();
																										}
																								}, _callee8);
																							})
																						);
																						return function (t) {
																							return e.apply(this, arguments);
																						};
																					})()
																				);
																	case 6:
																	case 'end':
																		return o.stop();
																}
														}, _callee9);
													})
												);
												return function before(t, n) {
													return e.apply(this, arguments);
												};
											})(),
											after: function after() {},
											leave: function leave() {
												yi.get('compareManager').exit(),
													yi.get('scene').isHD() && yi.pioneer.getConfig().setValue('maxTextureSize', 4096);
											}
										}
									)
									.on(
										'/:id',
										(function () {
											var e = router_asyncToGenerator(
												regeneratorRuntime.mark(function _callee10(e, n) {
													var r;
													return regeneratorRuntime.wrap(function _callee10$(i) {
														for (;;)
															switch ((i.prev = i.next)) {
																case 0:
																	if (!n) {
																		i.next = 4;
																		break;
																	}
																	return (i.next = 3), t._processQuery(n);
																case 3:
																	n = i.sent;
																case 4:
																	return (i.next = 6), yi.pioneer.waitUntilNextFrame();
																case 6:
																	yi.selector.selectEntity(e.id),
																		(r = 'near'),
																		n && n.range && 'far' === n.range && (r = n.range),
																		yi.camera.goToObject(e.id, r).then(function () {}),
																		(t._firstLoad = !1);
																case 11:
																case 'end':
																	return i.stop();
															}
													}, _callee10);
												})
											);
											return function (t, n) {
												return e.apply(this, arguments);
											};
										})(),
										{
											before: (function () {
												var e = router_asyncToGenerator(
													regeneratorRuntime.mark(function _callee11(e, n) {
														var r, i, o, a;
														return regeneratorRuntime.wrap(
															function _callee11$(s) {
																for (;;)
																	switch ((s.prev = s.next)) {
																		case 0:
																			return (s.next = 2), t._parseQuery(t.lastRouteResolved().query);
																		case 2:
																			return (
																				(r = s.sent),
																				(i = yi.get('time').getNowTime()),
																				r.time && (i = t.parseTime(r.time)),
																				(s.prev = 5),
																				(s.next = 8),
																				yi.get('scene').isListReady([n.id], [i])
																			);
																		case 8:
																			if (null !== (o = yi.scene.get(n.id))) {
																				s.next = 13;
																				break;
																			}
																			return '/home', (s.next = 13), t.navigate('/home');
																		case 13:
																			if (null === (a = o.getParent())) {
																				s.next = 17;
																				break;
																			}
																			return (s.next = 17), yi.get('scene').isListReady([a.getName()], [i]);
																		case 17:
																			e(), (s.next = 26);
																			break;
																		case 20:
																			if (((s.prev = 20), (s.t0 = s.catch(5)), !s.t0)) {
																				s.next = 26;
																				break;
																			}
																			return '/home', (s.next = 26), t.navigate('/home');
																		case 26:
																		case 'end':
																			return s.stop();
																	}
															},
															_callee11,
															null,
															[[5, 20]]
														);
													})
												);
												return function before(t, n) {
													return e.apply(this, arguments);
												};
											})(),
											after: function after() {},
											leave: function leave() {}
										}
									)
									.notFound(
										(function () {
											var e = router_asyncToGenerator(
												regeneratorRuntime.mark(function _callee12(e, n) {
													var r;
													return regeneratorRuntime.wrap(function _callee12$(n) {
														for (;;)
															switch ((n.prev = n.next)) {
																case 0:
																	return (r = '/home'), e && (r += '?' + e), (n.next = 4), t.navigate(r);
																case 4:
																case 'end':
																	return n.stop();
															}
													}, _callee12);
												})
											);
											return function (t, n) {
												return e.apply(this, arguments);
											};
										})()
									)
									.resolve();
						}
					},
					{
						key: 'resetStatus',
						value: function resetStatus(t) {
							for (var e = t.length - 1; e >= 0; e--)
								yi.get(t[e]).setEnabled(this._componentsToActivate.includes(t[e]));
						}
					},
					{
						key: '_urlChanged',
						value: function _urlChanged(t, e) {
							return this.getOnlyURL(t) !== this.getOnlyURL(e);
						}
					},
					{
						key: 'extractGETParameters',
						value: function extractGETParameters(t) {
							return t
								.split(/\?(.*)?$/)
								.slice(1)
								.join('');
						}
					},
					{
						key: 'getOnlyURL',
						value: function getOnlyURL(t) {
							var e,
								n = function cleanGETParam(t) {
									return t.split(/\?(.*)?$/)[0];
								};
							return (e = t.split('#')).length > 1 ? n(e[1]) : n(e[0]);
						}
					},
					{
						key: '_stillOnRoute',
						value: function _stillOnRoute(t) {
							var e = this._currentRoute.url.match(/^\/([^!/]*)/);
							return null !== e && void 0 !== e[1] && e[1] === t;
						}
					},
					{
						key: '_parseQuery',
						value: function _parseQuery(t) {
							return t
								? (t.replace('?', ''),
								  Promise.resolve(
										t.split('&').reduce(function (t, e) {
											var n = e.split('=');
											if (n[0]) {
												var r = n[1].trim();
												switch (r.toLowerCase()) {
													case 'true':
														r = !0;
														break;
													case 'false':
														r = !1;
														break;
													case 'undefined':
													case 'null':
														r = null;
												}
												t[n[0].trim()] = r;
											}
											return t;
										}, {})
								  ))
								: Promise.resolve({});
						}
					},
					{
						key: '_buildQuery',
						value: function _buildQuery(t) {
							for (var e = '', n = 0, r = Object.entries(t); n < r.length; n++) {
								var i = router_slicedToArray(r[n], 2);
								e += '&' + i[0] + '=' + i[1];
							}
							return (e = e.replace('&', '?'));
						}
					},
					{
						key: '_processQuery',
						value: (function () {
							var t = router_asyncToGenerator(
								regeneratorRuntime.mark(function _callee13(t) {
									var e = this;
									return regeneratorRuntime.wrap(
										function _callee13$(n) {
											for (;;)
												switch ((n.prev = n.next)) {
													case 0:
														return n.abrupt(
															'return',
															this._parseQuery(t).then(function (t) {
																if (t.time) {
																	var n = e.parseTime(t.time);
																	yi.get('time').setTime(n);
																}
																return t;
															})
														);
													case 1:
													case 'end':
														return n.stop();
												}
										},
										_callee13,
										this
									);
								})
							);
							return function _processQuery(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'parseTime',
						value: function parseTime(t) {
							var e = t.match(
								/^(?:[1-9]\d{3}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1\d|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[1-9]\d(?:0[48]|[2468][048]|[13579][26])|(?:[2468][048]|[13579][26])00)-02-29)T(?:[01]\d|2[0-3]):[0-5]\d(?:|:[0-5]\d)(?:\.\d{1,6})?(?:|Z|[+-][01]\d:[0-5]\d)$/
							);
							Dr()();
							return null === e || 'now' === t ? yi.get('time').getNowTime() : Dr.a.tz(t, 'Etc/UTC');
						}
					},
					{
						key: 'addQueryToPath',
						value: (function () {
							var t = router_asyncToGenerator(
								regeneratorRuntime.mark(function _callee14(t) {
									var e,
										n = this;
									return regeneratorRuntime.wrap(
										function _callee14$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														return (
															(e = this._router.lastRouteResolved()),
															r.abrupt(
																'return',
																this._parseQuery(e.query).then(function (r) {
																	var i = n._buildQuery(Object.assign({}, r, t));
																	return e.url.replace(/(\/)(?=\/*\1)/, '') + i;
																})
															)
														);
													case 2:
													case 'end':
														return r.stop();
												}
										},
										_callee14,
										this
									);
								})
							);
							return function addQueryToPath(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'hasSameQuery',
						value: (function () {
							var t = router_asyncToGenerator(
								regeneratorRuntime.mark(function _callee15(t) {
									var e, n, r, i;
									return regeneratorRuntime.wrap(
										function _callee15$(o) {
											for (;;)
												switch ((o.prev = o.next)) {
													case 0:
														return (o.next = 2), this._parseQuery(this._router.lastRouteResolved().query);
													case 2:
														(e = o.sent), (n = Object.keys(t)), (r = !0), (i = n.length - 1);
													case 6:
														if (!(i >= 0)) {
															o.next = 13;
															break;
														}
														if (e[n[i]] === t[n[i]]) {
															o.next = 10;
															break;
														}
														return (r = !1), o.abrupt('break', 13);
													case 10:
														i--, (o.next = 6);
														break;
													case 13:
														return o.abrupt('return', r);
													case 14:
													case 'end':
														return o.stop();
												}
										},
										_callee15,
										this
									);
								})
							);
							return function hasSameQuery(e) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'pause',
						value: function pause() {
							this._router.pause();
						}
					},
					{
						key: 'resume',
						value: function resume() {
							this._router.resume();
						}
					},
					{
						key: 'navigate',
						value: (function () {
							var t = router_asyncToGenerator(
								regeneratorRuntime.mark(function _callee16(t, e) {
									var n;
									return regeneratorRuntime.wrap(
										function _callee16$(r) {
											for (;;)
												switch ((r.prev = r.next)) {
													case 0:
														if (!e) {
															r.next = 6;
															break;
														}
														return (r.next = 3), this._parseQuery(this.lastRouteResolved().query);
													case 3:
														(n = r.sent).close && (e.close = n.close), (t += this._buildQuery(e));
													case 6:
														this._router.navigate(t);
													case 7:
													case 'end':
														return r.stop();
												}
										},
										_callee16,
										this
									);
								})
							);
							return function navigate(e, n) {
								return t.apply(this, arguments);
							};
						})()
					},
					{
						key: 'navigateBack',
						value: function navigateBack() {
							if (null === yi.router.getLastRoute()) this._router.navigate('/home');
							else {
								var t = yi.router.getLastRoute().url;
								yi.router.getLastRoute().query && (t += '?' + yi.router.getLastRoute().query), this._router.navigate(t);
							}
						}
					},
					{
						key: 'getLastRoute',
						value: function getLastRoute() {
							return Object.keys(this._lastRoute).length > 0 ? this._lastRoute : null;
						}
					},
					{
						key: 'getCurrentRoute',
						value: function getCurrentRoute() {
							return this._currentRoute;
						}
					},
					{
						key: 'lastRouteResolved',
						value: function lastRouteResolved() {
							return this._router.lastRouteResolved();
						}
					},
					{
						key: 'lastPathResolved',
						value: function lastPathResolved() {
							var t = this._router.lastRouteResolved();
							return t.query ? t.url + '?' + t.query : t.url;
						}
					}
				]),
				Router
			);
		})();
		function _construct(t, e, n) {
			return (_construct = (function isNativeReflectConstruct() {
				if ('undefined' == typeof Reflect || !Reflect.construct) return !1;
				if (Reflect.construct.sham) return !1;
				if ('function' == typeof Proxy) return !0;
				try {
					return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;
				} catch (t) {
					return !1;
				}
			})()
				? Reflect.construct
				: function _construct(t, e, n) {
						var r = [null];
						r.push.apply(r, e);
						var i = new (Function.bind.apply(t, r))();
						return n && app_setPrototypeOf(i, n.prototype), i;
				  }).apply(null, arguments);
		}
		function app_setPrototypeOf(t, e) {
			return (app_setPrototypeOf =
				Object.setPrototypeOf ||
				function _setPrototypeOf(t, e) {
					return (t.__proto__ = e), t;
				})(t, e);
		}
		function app_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function app_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						app_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						app_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		function app_defineProperties(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				(r.enumerable = r.enumerable || !1),
					(r.configurable = !0),
					'value' in r && (r.writable = !0),
					Object.defineProperty(t, r.key, r);
			}
		}
		var gi = new ((function () {
				function App() {
					var t = this;
					!(function app_classCallCheck(t, e) {
						if (!(t instanceof e)) throw new TypeError('Cannot call a class as a function');
					})(this, App),
						(this._router = null),
						(this._selector = null),
						(this._selectedEntity = ''),
						(this._labelClicked = !1),
						(this._hasMouse = !1);
					var e = function onMouseMove() {
						(this._hasMouse = !0),
							document.body.classList.remove('touch'),
							window.removeEventListener('mousemove', onMouseMove);
					};
					window.addEventListener('mousemove', function () {
						(t._hasMouse = !0), window.removeEventListener('mousemove', e);
					}),
						(this._touchStartPos = { x: 0, y: 0 }),
						(this._dragging = !1),
						(this._camera = null),
						(this._managerTypes = { label: ii, compareManager: si, search: $r, content: ni, scene: ci, time: Ur }),
						(this._managers = {}),
						(this._componentTypes = {
							clock: Qr,
							controls: Wr,
							searchBar: Br,
							messageBar: oi,
							detailsPanel: Zr,
							navigationBar: Yr,
							compareMenu: ui,
							options: ai
						}),
						(this._components = {}),
						(this._isMetric = !0),
						(this._conversionTable = { kmToMi: 0.621371, kmToFt: 3280.84, miToFt: 5280 }),
						(this._customLabels = {
							'486958_2014_mu69': 'Arrokoth',
							'67p_churyumov_gerasimenko': '67P/C-G',
							'1p_halley': "Halley's comet",
							'9p_tempel': 'Tempel 1',
							'81p_wild': 'Wild 2',
							c_1995_o1: 'Hale-Bopp'
						}),
						(this._customTrails = {
							'67p_churyumov_gerasimenko': 50807736,
							'1p_halley': 594229608,
							'9p_tempel': 44020800,
							'81p_wild': 50555275.25,
							c_1995_o1: 398651382
						}),
						(this._isNASAEmbed = !1);
				}
				return (
					(function app_createClass(t, e, n) {
						return e && app_defineProperties(t.prototype, e), n && app_defineProperties(t, n), t;
					})(App, [
						{
							key: 'init',
							value: (function () {
								var t = app_asyncToGenerator(
									regeneratorRuntime.mark(function _callee() {
										var t,
											e = this;
										return regeneratorRuntime.wrap(
											function _callee$(n) {
												for (;;)
													switch ((n.prev = n.next)) {
														case 0:
															((t = document.getElementById('pioneer')).style.position = 'absolute'),
																(this._pioneer = new Kt(t)),
																this._pioneer
																	.getDownloader()
																	.setReplacement('STATIC_ASSETS_URL', window.config.staticAssetsUrl),
																this._pioneer
																	.getDownloader()
																	.setReplacement('DYNAMIC_ASSETS_URL', window.config.dynamicAssetsUrl),
																this._pioneer.getDownloader().setReplacement('ANIMDATA_URL', window.config.animdataUrl),
																this._pioneer.getConfig().setValue('fontFamily', 'Raleway'),
																this._pioneer.getConfig().setValue('fontSize', 16),
																this._pioneer.getConfig().setValue('pbr', !0),
																this._pioneer.getConfig().setValue('gammaCorrection', 1);
															try {
																window.self !== window.top &&
																	gi.isNASADomain(document.referrer) &&
																	((this._isNASAEmbed = !0), gi.hideNASALogo());
															} catch (t) {}
															this._pioneer.registerComponentType('wmts', jr),
																this._pioneer.setTime(A.now()),
																this._pioneer.setTimeRate(1),
																this.isTouch() && document.body.classList.add('touch'),
																(this._touchCount = 0),
																(this._scrollable = !1),
																(this._touchMax = !1),
																window.addEventListener(
																	'touchstart',
																	function (t) {
																		e._touchCount++, (e._touchMax = e._touchCount > 1), (e._labelClicked = !1);
																		var n = t.changedTouches[0];
																		(e._touchStartPos.x = n.pageX),
																			(e._touchStartPos.y = n.pageY),
																			(e._dragging = !1),
																			(e._scrollable = !1);
																		for (var r = t.target; null !== r.parentElement; ) {
																			if (r.classList.contains('scrollable')) {
																				e._scrollable = !0;
																				break;
																			}
																			r = r.parentElement;
																		}
																	},
																	!1
																),
																window.addEventListener(
																	'touchmove',
																	function (t) {
																		var n = t.changedTouches[0];
																		Math.max(
																			Math.abs(n.pageX - e._touchStartPos.x),
																			Math.abs(n.pageY - e._touchStartPos.y)
																		) > 5 && (e._dragging = !0),
																			e._scrollable || t.preventDefault();
																	},
																	{ passive: !1 }
																),
																window.addEventListener('touchend', function (t) {
																	e._touchCount--,
																		0 === t.touches.length && (e._touchMax = !1),
																		(e._dragging = !1),
																		(e._scrollable = !1);
																});
														case 21:
														case 'end':
															return n.stop();
													}
											},
											_callee,
											this
										);
									})
								);
								return function init() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'createManagers',
							value: (function () {
								var t = app_asyncToGenerator(
									regeneratorRuntime.mark(function _callee2() {
										var t;
										return regeneratorRuntime.wrap(
											function _callee2$(e) {
												for (;;)
													switch ((e.prev = e.next)) {
														case 0:
															return (
																this._addManager('time', 'time', this._pioneer),
																(t = this._addManager('content', 'content', this._pioneer)),
																(e.next = 4),
																t.init()
															);
														case 4:
															this._addManager('search', 'search', t.getEntityList());
														case 5:
														case 'end':
															return e.stop();
													}
											},
											_callee2,
											this
										);
									})
								);
								return function createManagers() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'createComponents',
							value: (function () {
								var t = app_asyncToGenerator(
									regeneratorRuntime.mark(function _callee3() {
										var t, e;
										return regeneratorRuntime.wrap(
											function _callee3$(n) {
												for (;;)
													switch ((n.prev = n.next)) {
														case 0:
															return (
																this._addComponent('clock', 'clock', document.getElementById('clock'), this._pioneer),
																(t = this._addComponent(
																	'compareMenu',
																	'compareMenu',
																	document.getElementById('compare-bar'),
																	this.get('compareManager').getScene()
																)),
																(n.next = 4),
																t.init()
															);
														case 4:
															this._addComponent(
																'controls',
																'controls',
																document.getElementById('controls-bar'),
																this._pioneer
															),
																this._addComponent('messageBar', 'messageBar', document.getElementById('message-bar')),
																this._addComponent(
																	'searchBar',
																	'searchBar',
																	document.getElementById('search-bar'),
																	this._pioneer
																),
																this._addComponent(
																	'detailsPanel',
																	'detailsPanel',
																	document.getElementById('details-panel'),
																	this._pioneer,
																	this._scene
																),
																this._addComponent(
																	'navigationBar',
																	'navigationBar',
																	document.getElementById('navigation-bar'),
																	this._pioneer
																),
																this._addComponent('options', 'options', document.getElementById('options')),
																(this._timeRateSlider = new hi(document.getElementById('time-slider'), this._pioneer)),
																this._timeRateSlider.setEnabled(!1),
																(e = this.get('time')).setManagedComponents({
																	update: ['clock'],
																	setDisplayUTC: ['clock'],
																	setTime: []
																}),
																e.setDisplayUTC(!1);
														case 15:
														case 'end':
															return n.stop();
													}
											},
											_callee3,
											this
										);
									})
								);
								return function createComponents() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'createSceneManagers',
							value: (function () {
								var t = app_asyncToGenerator(
									regeneratorRuntime.mark(function _callee4() {
										return regeneratorRuntime.wrap(
											function _callee4$(t) {
												for (;;)
													switch ((t.prev = t.next)) {
														case 0:
															this._addManager('scene', 'scene', this._pioneer, this._scene),
																this._addManager('label', 'label', this._scene._entities, this._pioneer),
																this._managers.label.setWeights(this.get('content').getEntityList()),
																this._managers.label.setAlgorithm(ii.Quadtree),
																this._pioneer.addCallback(this._managers.label.update, !0),
																this._pioneer.addCallback(this._camera.update, !0),
																this._addManager('compareManager', 'compareManager', this._scene, this._pioneer),
																this._managers.compareManager._init();
														case 8:
														case 'end':
															return t.stop();
													}
											},
											_callee4,
											this
										);
									})
								);
								return function createSceneManagers() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '_addManager',
							value: function _addManager(t, e) {
								var n = this._managerTypes[e];
								if (void 0 === this._managers[t]) {
									for (var r = arguments.length, i = new Array(r > 2 ? r - 2 : 0), o = 2; o < r; o++)
										i[o - 2] = arguments[o];
									this._managers[t] = _construct(n, i);
								}
								return this._managers[t];
							}
						},
						{
							key: '_addComponent',
							value: function _addComponent(t, e) {
								var n = this._componentTypes[e];
								if (void 0 === this._components[t]) {
									for (var r = arguments.length, i = new Array(r > 2 ? r - 2 : 0), o = 2; o < r; o++)
										i[o - 2] = arguments[o];
									this._components[t] = _construct(n, i);
								}
								return this._components[t];
							}
						},
						{
							key: 'getComponents',
							value: function getComponents() {
								return this._components;
							}
						},
						{
							key: 'sendNotification',
							value: function sendNotification(t) {
								var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
								this.get('messageBar').showNotification(t, e);
							}
						},
						{
							key: 'search',
							value: function search(t) {
								return null === gi.get('search') ? [] : gi.get('search').search(t);
							}
						},
						{
							key: 'createScene',
							value: (function () {
								var t = app_asyncToGenerator(
									regeneratorRuntime.mark(function _callee5() {
										var t,
											e,
											n,
											r,
											i,
											o,
											a,
											s,
											l,
											c,
											u,
											_,
											p,
											h = this;
										return regeneratorRuntime.wrap(
											function _callee5$(d) {
												for (;;)
													switch ((d.prev = d.next)) {
														case 0:
															for (n in ((this._scene = this._pioneer.addScene('main')),
															this._scene.setAmbientLightColor(new z(0.005, 0.005, 0.005)),
															(this._selector = new ti(this._scene)),
															this.createViewportAndCamera(),
															this._selector.selectEntity('outer_solar_system'),
															(t = this._scene.get('camera').addComponent('dynEnvMap')),
															Er.createGroup('stars', this._scene),
															Er.createGroup('planets', this._scene),
															(e = Er.create('sc_mars_science_laboratory_landing_site', this._scene)),
															Er.create('sc_perseverance_landing_site', this._scene),
															this.get('content').getEntityList()))
																(r = Er.create(n, this._scene)),
																	'sc_perseverance' === n &&
																		(function () {
																			var t = 666952142,
																				e = r.addController('coverage');
																			e instanceof Tn &&
																				e.addCoverage(
																					new J(t + 949.453, Number.POSITIVE_INFINITY),
																					function (t) {
																						var e = t.get('model');
																						e instanceof De && e.setEnabled(!1);
																					},
																					function (t) {
																						var e = t.get('model');
																						e instanceof De && e.setEnabled(!0);
																					}
																				);
																			var n = h._scene.getEntity('sc_perseverance_landing_site');
																			n.setCanOcclude(!1),
																				(e = n.addController('coverage')) instanceof Tn &&
																					e.addCoverage(
																						new J(t + 949.453, Number.POSITIVE_INFINITY),
																						function (t) {
																							var e = n.get('div');
																							e instanceof Ae && e.setEnabled(!1);
																						},
																						function (t) {
																							var e = n.get('div');
																							e instanceof Ae && e.setEnabled(!0);
																						}
																					);
																		})(),
																	null !== (i = r.get('trail')) &&
																		void 0 !== this._customTrails[r.getName()] &&
																		(i.setStartTime(this._customTrails[r.getName()]),
																		null !== (o = r.get('coverage')) && r.removeController(o)),
																	null !== (a = r.get('model')) && a.setDynamicEnvironmentMapComponent(t);
															(s = e.getControllerByType('rotateByParentOrientation')),
																e.removeController(s),
																Er.create('134340_pluto_barycenter', this._scene),
																(l = this._scene.get('sc_lucy')),
																(c = 0);
														case 16:
															if (null !== (u = l.getControllerByType('dynamo', c))) {
																d.next = 20;
																break;
															}
															return d.abrupt('break', 25);
														case 20:
															(_ = u.getBaseUrl()).includes('/earth') ||
																_.includes('/sun/') ||
																_.includes('/quat') ||
																(l.removeController(u), c--);
														case 22:
															c++, (d.next = 16);
															break;
														case 25:
															return (
																(p = this._scene.get('milky_way').addComponent('sprite')).setTextureUrl(
																	'$STATIC_ASSETS_URL/textures/milky_way_1024.png'
																),
																p.setSize(new st(12e17, 12e17)),
																p.setTransparent(!0),
																p.setBlending('additive'),
																(d.next = 32),
																this._scene.getLoadedPromise()
															);
														case 32:
															return this._createLabels(), d.abrupt('return', this._pioneer.waitUntilNextFrame());
														case 34:
														case 'end':
															return d.stop();
													}
											},
											_callee5,
											this
										);
									})
								);
								return function createScene() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: '_createLabels',
							value: function _createLabels() {
								for (
									var t = this,
										e = this._scene.get('camera').getComponentByType('camera'),
										n = function _loop(n, r) {
											var i = t._scene.getEntity(n),
												o = i.get('div');
											if (null !== o) {
												o.setActiveCamera(e);
												var a = o.getDiv(),
													s = t.get('content').getClassName(i.getName());
												a.className += ' no-select ' + s;
												var l = document.createElement('span');
												l.className = 'icon';
												var c = document.createElement('span');
												(c.className = 'text'),
													void 0 !== t._customLabels[i.getName()]
														? (c.innerHTML = t._customLabels[i.getName()])
														: (c.innerHTML = a.innerHTML),
													(a.innerHTML = ''),
													a.appendChild(l),
													a.appendChild(c),
													window.addEventListener(
														'mousedown',
														function (e) {
															t._labelClicked = !1;
														},
														!1
													),
													a.addEventListener(
														'click',
														(function () {
															var e = app_asyncToGenerator(
																regeneratorRuntime.mark(function _callee6(e) {
																	var n, r;
																	return regeneratorRuntime.wrap(function _callee6$(o) {
																		for (;;)
																			switch ((o.prev = o.next)) {
																				case 0:
																					if (t._selector.getCurrentId() !== i.getName()) {
																						o.next = 7;
																						break;
																					}
																					return (
																						(n = '/' + i.getName()),
																						(r = { time: gi.get('time').getTimeUrl() }),
																						(o.next = 5),
																						t._router.navigate(n, r)
																					);
																				case 5:
																					o.next = 8;
																					break;
																				case 7:
																					t._selector.selectEntity(i.getName());
																				case 8:
																					(t._labelClicked = !0), e.preventDefault();
																				case 10:
																				case 'end':
																					return o.stop();
																			}
																	}, _callee6);
																})
															);
															return function (t) {
																return e.apply(this, arguments);
															};
														})(),
														!1
													),
													a.addEventListener(
														'touchend',
														(function () {
															var e = app_asyncToGenerator(
																regeneratorRuntime.mark(function _callee7(e) {
																	var n, r;
																	return regeneratorRuntime.wrap(function _callee7$(o) {
																		for (;;)
																			switch ((o.prev = o.next)) {
																				case 0:
																					if (t._dragging || 0 !== e.touches.length || t._touchMax) {
																						o.next = 11;
																						break;
																					}
																					if (t._selector.getCurrentId() !== i.getName()) {
																						o.next = 8;
																						break;
																					}
																					return (
																						(n = '/' + i.getName()),
																						(r = { time: gi.get('time').getTimeUrl() }),
																						(o.next = 6),
																						t._router.navigate(n, r)
																					);
																				case 6:
																					o.next = 9;
																					break;
																				case 8:
																					t._selector.selectEntity(i.getName());
																				case 9:
																					(t._labelClicked = !0), e.preventDefault();
																				case 11:
																				case 'end':
																					return o.stop();
																			}
																	}, _callee7);
																})
															);
															return function (t) {
																return e.apply(this, arguments);
															};
														})(),
														!1
													),
													a.addEventListener(
														'mousemove',
														function (t) {
															t.preventDefault();
														},
														!0
													),
													(a.style.cursor = 'pointer');
											}
										},
										r = 0,
										i = this._scene.getNumEntities();
									r < i;
									r++
								)
									n(r);
							}
						},
						{
							key: 'createViewportAndCamera',
							value: (function () {
								var t = app_asyncToGenerator(
									regeneratorRuntime.mark(function _callee8() {
										var t, e;
										return regeneratorRuntime.wrap(
											function _callee8$(n) {
												for (;;)
													switch ((n.prev = n.next)) {
														case 0:
															(this._viewport = this._pioneer.addViewport('main-viewport')),
																(this._viewport.getDiv().style.width = '100%'),
																(this._viewport.getDiv().style.height = '100%'),
																(this._viewport.getDiv().style.left = '0'),
																(this._viewport.getDiv().style.top = '0'),
																(t = this._scene.addEntity('camera')).setOrientation(tt.Identity),
																(e = t.addComponent('camera')),
																this._viewport.setCamera(e),
																(this._camera = new ei(this._scene, this._selector));
														case 10:
														case 'end':
															return n.stop();
													}
											},
											_callee8,
											this
										);
									})
								);
								return function createViewportAndCamera() {
									return t.apply(this, arguments);
								};
							})()
						},
						{
							key: 'createRouter',
							value: function createRouter() {
								this._router = new mi();
							}
						},
						{
							key: 'get',
							value: function get(t) {
								return void 0 !== this._components[t]
									? this._components[t]
									: void 0 !== this._managers[t]
									? this._managers[t]
									: null;
							}
						},
						{
							key: 'isMobile',
							value: function isMobile() {
								return !!window.matchMedia('(max-width: 64em)').matches;
							}
						},
						{
							key: 'isLandscape',
							value: function isLandscape() {
								return !(
									!window.matchMedia('(orientation: landscape)').matches ||
									!window.matchMedia('(max-height: 32em)').matches
								);
							}
						},
						{
							key: 'is2K',
							value: function is2K() {
								return !!window.matchMedia('(min-width: 180em) and (min-height: 64em)').matches;
							}
						},
						{
							key: 'is4K',
							value: function is4K() {
								return !!window.matchMedia('(min-width: 200em) and (min-height: 90em)').matches;
							}
						},
						{
							key: 'isTouch',
							value: function isTouch() {
								var isTouch = 'ontouchstart' in window || window.navigator.msMaxTouchPoints > 0;
								return !(!isTouch || this._hasMouse);
							}
						},
						{
							key: 'isFullscreen',
							value: function isFullscreen() {
								return this.get('controls').isFullscreen();
							}
						},
						{
							key: 'toggleFullscreen',
							value: function toggleFullscreen() {
								this.get('controls').toggleFullscreen();
							}
						},
						{
							key: 'isComparing',
							value: function isComparing() {
								return null !== this.get('compareManager') && this.get('compareManager').isComparing();
							}
						},
						{
							key: 'isMetric',
							value: function isMetric() {
								return this._isMetric;
							}
						},
						{
							key: 'toggleUnitSystem',
							value: function toggleUnitSystem() {
								this._isMetric = !this._isMetric;
								var t = new CustomEvent('unitSystemToggle', { detail: { metric: this._isMetric } });
								return window.dispatchEvent(t), this._isMetric;
							}
						},
						{
							key: 'isNASADomain',
							value: function isNASADomain(t) {
								return /^https?:\/\/([a-zA-Z\d-]+\.){0,}nasa\.gov.*$/.test(t);
							}
						},
						{
							key: 'hideNASALogo',
							value: function hideNASALogo() {
								this._isNASAEmbed && (document.getElementById('nasa-logo').style.display = 'none');
							}
						},
						{
							key: 'showNASALogo',
							value: function showNASALogo() {
								document.getElementById('nasa-logo').style.display = 'block';
							}
						},
						{
							key: 'pioneer',
							get: function get() {
								return this._pioneer;
							}
						},
						{
							key: 'scene',
							get: function get() {
								return this._scene;
							}
						},
						{
							key: 'labelClicked',
							get: function get() {
								return this._labelClicked;
							}
						},
						{
							key: 'camera',
							get: function get() {
								return this._camera;
							}
						},
						{
							key: 'router',
							get: function get() {
								return this._router;
							}
						},
						{
							key: 'managers',
							get: function get() {
								return this._managers;
							}
						},
						{
							key: 'selector',
							get: function get() {
								return this._selector;
							}
						},
						{
							key: 'conversionTable',
							get: function get() {
								return this._conversionTable;
							}
						}
					]),
					App
				);
			})())(),
			yi = gi;
		function src_asyncGeneratorStep(t, e, n, r, i, o, a) {
			try {
				var s = t[o](a),
					l = s.value;
			} catch (t) {
				return void n(t);
			}
			s.done ? e(l) : Promise.resolve(l).then(r, i);
		}
		function src_asyncToGenerator(t) {
			return function () {
				var e = this,
					n = arguments;
				return new Promise(function (r, i) {
					var o = t.apply(e, n);
					function _next(t) {
						src_asyncGeneratorStep(o, r, i, _next, _throw, 'next', t);
					}
					function _throw(t) {
						src_asyncGeneratorStep(o, r, i, _next, _throw, 'throw', t);
					}
					_next(void 0);
				});
			};
		}
		document.addEventListener(
			'DOMContentLoaded',
			src_asyncToGenerator(
				regeneratorRuntime.mark(function _callee() {
					return regeneratorRuntime.wrap(
						function _callee$(t) {
							for (;;)
								switch ((t.prev = t.next)) {
									case 0:
										return (t.next = 2), yi.init();
									case 2:
										return (window.app = yi), (window.Pioneer = r), (t.prev = 4), (t.next = 7), yi.createManagers();
									case 7:
										return (t.next = 9), yi.createScene();
									case 9:
										return (t.next = 11), yi.createSceneManagers();
									case 11:
										return (t.next = 13), yi.createComponents();
									case 13:
										yi.createRouter(), (t.next = 19);
										break;
									case 16:
										(t.prev = 16), (t.t0 = t.catch(4)), console.log(t.t0);
									case 19:
									case 'end':
										return t.stop();
								}
						},
						_callee,
						null,
						[[4, 16]]
					);
				})
			)
		);
	}
});
